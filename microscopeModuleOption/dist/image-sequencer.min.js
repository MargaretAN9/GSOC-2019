!function(){return function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){return i(t[s][1][e]||e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}}()({1:[function(e,t,r){var n,i;n=this,i=function(e){"use strict";var t={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},r="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",n={5:r,6:r+" const class extends export import super"},i=/^in(stanceof)?$/,o="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",s="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",a=new RegExp("["+o+"]"),u=new RegExp("["+o+s+"]");o=s=null;var l=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],c=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function h(e,t){for(var r=65536,n=0;n<t.length;n+=2){if((r+=t[n])>e)return!1;if((r+=t[n+1])>=e)return!0}}function p(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&a.test(String.fromCharCode(e)):!1!==t&&h(e,l)))}function f(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):!1!==t&&(h(e,l)||h(e,c)))))}var d=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function m(e,t){return new d(e,{beforeExpr:!0,binop:t})}var g={beforeExpr:!0},v={startsExpr:!0},y={};function b(e,t){return void 0===t&&(t={}),t.keyword=e,y[e]=new d(e,t)}var x={num:new d("num",v),regexp:new d("regexp",v),string:new d("string",v),name:new d("name",v),eof:new d("eof"),bracketL:new d("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new d("]"),braceL:new d("{",{beforeExpr:!0,startsExpr:!0}),braceR:new d("}"),parenL:new d("(",{beforeExpr:!0,startsExpr:!0}),parenR:new d(")"),comma:new d(",",g),semi:new d(";",g),colon:new d(":",g),dot:new d("."),question:new d("?",g),arrow:new d("=>",g),template:new d("template"),invalidTemplate:new d("invalidTemplate"),ellipsis:new d("...",g),backQuote:new d("`",v),dollarBraceL:new d("${",{beforeExpr:!0,startsExpr:!0}),eq:new d("=",{beforeExpr:!0,isAssign:!0}),assign:new d("_=",{beforeExpr:!0,isAssign:!0}),incDec:new d("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new d("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:m("||",1),logicalAND:m("&&",2),bitwiseOR:m("|",3),bitwiseXOR:m("^",4),bitwiseAND:m("&",5),equality:m("==/!=/===/!==",6),relational:m("</>/<=/>=",7),bitShift:m("<</>>/>>>",8),plusMin:new d("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:m("%",10),star:m("*",10),slash:m("/",10),starstar:new d("**",{beforeExpr:!0}),_break:b("break"),_case:b("case",g),_catch:b("catch"),_continue:b("continue"),_debugger:b("debugger"),_default:b("default",g),_do:b("do",{isLoop:!0,beforeExpr:!0}),_else:b("else",g),_finally:b("finally"),_for:b("for",{isLoop:!0}),_function:b("function",v),_if:b("if"),_return:b("return",g),_switch:b("switch"),_throw:b("throw",g),_try:b("try"),_var:b("var"),_const:b("const"),_while:b("while",{isLoop:!0}),_with:b("with"),_new:b("new",{beforeExpr:!0,startsExpr:!0}),_this:b("this",v),_super:b("super",v),_class:b("class",v),_extends:b("extends",g),_export:b("export"),_import:b("import"),_null:b("null",v),_true:b("true",v),_false:b("false",v),_in:b("in",{beforeExpr:!0,binop:7}),_instanceof:b("instanceof",{beforeExpr:!0,binop:7}),_typeof:b("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:b("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:b("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},_=/\r\n?|\n|\u2028|\u2029/,w=new RegExp(_.source,"g");function k(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var T=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,E=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,S=Object.prototype,C=S.hasOwnProperty,A=S.toString;function B(e,t){return C.call(e,t)}var I=Array.isArray||function(e){return"[object Array]"===A.call(e)},P=function(e,t){this.line=e,this.column=t};P.prototype.offset=function(e){return new P(this.line,this.column+e)};var R=function(e,t,r){this.start=t,this.end=r,null!==e.sourceFile&&(this.source=e.sourceFile)};function M(e,t){for(var r=1,n=0;;){w.lastIndex=n;var i=w.exec(e);if(!(i&&i.index<t))return new P(r,t-n);++r,n=i.index+i[0].length}}var F={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};function D(e){var t={};for(var r in F)t[r]=e&&B(e,r)?e[r]:F[r];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),I(t.onToken)){var n=t.onToken;t.onToken=function(e){return n.push(e)}}return I(t.onComment)&&(t.onComment=function(e,t){return function(r,n,i,o,s,a){var u={type:r?"Block":"Line",value:n,start:i,end:o};e.locations&&(u.loc=new R(this,s,a)),e.ranges&&(u.range=[i,o]),t.push(u)}}(t,t.onComment)),t}var L={};function O(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var j=function(e,r,i){this.options=e=D(e),this.sourceFile=e.sourceFile,this.keywords=O(n[e.ecmaVersion>=6?6:5]);var o="";if(!e.allowReserved){for(var s=e.ecmaVersion;!(o=t[s]);s--);"module"===e.sourceType&&(o+=" await")}this.reservedWords=O(o);var a=(o?o+" ":"")+t.strict;this.reservedWordsStrict=O(a),this.reservedWordsStrictBind=O(a+" "+t.strictBind),this.input=String(r),this.containsEsc=!1,this.loadPlugins(e.plugins),i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(_).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=x.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope(),this.regexpState=null};j.prototype.isKeyword=function(e){return this.keywords.test(e)},j.prototype.isReservedWord=function(e){return this.reservedWords.test(e)},j.prototype.extend=function(e,t){this[e]=t(this[e])},j.prototype.loadPlugins=function(e){for(var t in e){var r=L[t];if(!r)throw new Error("Plugin '"+t+"' not found");r(this,e[t])}},j.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};var N=j.prototype,U=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;function z(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}N.strictDirective=function(e){for(;;){E.lastIndex=e,e+=E.exec(this.input)[0].length;var t=U.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length}},N.eat=function(e){return this.type===e&&(this.next(),!0)},N.isContextual=function(e){return this.type===x.name&&this.value===e&&!this.containsEsc},N.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},N.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},N.canInsertSemicolon=function(){return this.type===x.eof||this.type===x.braceR||_.test(this.input.slice(this.lastTokEnd,this.start))},N.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},N.semicolon=function(){this.eat(x.semi)||this.insertSemicolon()||this.unexpected()},N.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},N.expect=function(e){this.eat(e)||this.unexpected()},N.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},N.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var r=t?e.parenthesizedAssign:e.parenthesizedBind;r>-1&&this.raiseRecoverable(r,"Parenthesized pattern")}},N.checkExpressionErrors=function(e,t){if(!e)return!1;var r=e.shorthandAssign,n=e.doubleProto;if(!t)return r>=0||n>=0;r>=0&&this.raise(r,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")},N.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},N.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var $=j.prototype;$.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==x.eof;){var r=this.parseStatement(!0,!0,t);e.body.push(r)}return this.adaptDirectivePrologue(e.body),this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var V={kind:"loop"},G={kind:"switch"};$.isLet=function(){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;E.lastIndex=this.pos;var e=E.exec(this.input),t=this.pos+e[0].length,r=this.input.charCodeAt(t);if(91===r||123===r)return!0;if(p(r,!0)){for(var n=t+1;f(this.input.charCodeAt(n),!0);)++n;var o=this.input.slice(t,n);if(!i.test(o))return!0}return!1},$.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;E.lastIndex=this.pos;var e=E.exec(this.input),t=this.pos+e[0].length;return!(_.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&f(this.input.charAt(t+8)))},$.parseStatement=function(e,t,r){var n,i=this.type,o=this.startNode();switch(this.isLet()&&(i=x._var,n="let"),i){case x._break:case x._continue:return this.parseBreakContinueStatement(o,i.keyword);case x._debugger:return this.parseDebuggerStatement(o);case x._do:return this.parseDoStatement(o);case x._for:return this.parseForStatement(o);case x._function:return!e&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1);case x._class:return e||this.unexpected(),this.parseClass(o,!0);case x._if:return this.parseIfStatement(o);case x._return:return this.parseReturnStatement(o);case x._switch:return this.parseSwitchStatement(o);case x._throw:return this.parseThrowStatement(o);case x._try:return this.parseTryStatement(o);case x._const:case x._var:return n=n||this.value,e||"var"===n||this.unexpected(),this.parseVarStatement(o,n);case x._while:return this.parseWhileStatement(o);case x._with:return this.parseWithStatement(o);case x.braceL:return this.parseBlock();case x.semi:return this.parseEmptyStatement(o);case x._export:case x._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===x._import?this.parseImport(o):this.parseExport(o,r);default:if(this.isAsyncFunction())return e||this.unexpected(),this.next(),this.parseFunctionStatement(o,!0);var s=this.value,a=this.parseExpression();return i===x.name&&"Identifier"===a.type&&this.eat(x.colon)?this.parseLabeledStatement(o,s,a):this.parseExpressionStatement(o,a)}},$.parseBreakContinueStatement=function(e,t){var r="break"===t;this.next(),this.eat(x.semi)||this.insertSemicolon()?e.label=null:this.type!==x.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var i=this.labels[n];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(r||"loop"===i.kind))break;if(e.label&&r)break}}return n===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,r?"BreakStatement":"ContinueStatement")},$.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},$.parseDoStatement=function(e){return this.next(),this.labels.push(V),e.body=this.parseStatement(!1),this.labels.pop(),this.expect(x._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(x.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},$.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(V),this.enterLexicalScope(),this.expect(x.parenL),this.type===x.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var r=this.isLet();if(this.type===x._var||this.type===x._const||r){var n=this.startNode(),i=r?"let":this.value;return this.next(),this.parseVar(n,!0,i),this.finishNode(n,"VariableDeclaration"),!(this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==n.declarations.length||"var"!==i&&n.declarations[0].init?(t>-1&&this.unexpected(t),this.parseFor(e,n)):(this.options.ecmaVersion>=9&&(this.type===x._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,n))}var o=new z,s=this.parseExpression(!0,o);return this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===x._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(s,!1,o),this.checkLVal(s),this.parseForIn(e,s)):(this.checkExpressionErrors(o,!0),t>-1&&this.unexpected(t),this.parseFor(e,s))},$.parseFunctionStatement=function(e,t){return this.next(),this.parseFunction(e,!0,!1,t)},$.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(!this.strict&&this.type===x._function),e.alternate=this.eat(x._else)?this.parseStatement(!this.strict&&this.type===x._function):null,this.finishNode(e,"IfStatement")},$.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(x.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},$.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(x.braceL),this.labels.push(G),this.enterLexicalScope();for(var r=!1;this.type!==x.braceR;)if(this.type===x._case||this.type===x._default){var n=this.type===x._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),n?t.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),r=!0,t.test=null),this.expect(x.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(!0));return this.exitLexicalScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},$.parseThrowStatement=function(e){return this.next(),_.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var K=[];$.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===x._catch){var t=this.startNode();this.next(),this.eat(x.parenL)?(t.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(t.param,"let"),this.expect(x.parenR)):(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterLexicalScope()),t.body=this.parseBlock(!1),this.exitLexicalScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(x._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},$.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},$.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(V),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"WhileStatement")},$.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(!1),this.finishNode(e,"WithStatement")},$.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},$.parseLabeledStatement=function(e,t,r){for(var n=0,i=this.labels;n<i.length;n+=1){i[n].name===t&&this.raise(r.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===x._switch?"switch":null,s=this.labels.length-1;s>=0;s--){var a=this.labels[s];if(a.statementStart!==e.start)break;a.statementStart=this.start,a.kind=o}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(!0),("ClassDeclaration"===e.body.type||"VariableDeclaration"===e.body.type&&"var"!==e.body.kind||"FunctionDeclaration"===e.body.type&&(this.strict||e.body.generator||e.body.async))&&this.raiseRecoverable(e.body.start,"Invalid labeled declaration"),this.labels.pop(),e.label=r,this.finishNode(e,"LabeledStatement")},$.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},$.parseBlock=function(e){void 0===e&&(e=!0);var t=this.startNode();for(t.body=[],this.expect(x.braceL),e&&this.enterLexicalScope();!this.eat(x.braceR);){var r=this.parseStatement(!0);t.body.push(r)}return e&&this.exitLexicalScope(),this.finishNode(t,"BlockStatement")},$.parseFor=function(e,t){return e.init=t,this.expect(x.semi),e.test=this.type===x.semi?null:this.parseExpression(),this.expect(x.semi),e.update=this.type===x.parenR?null:this.parseExpression(),this.expect(x.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"ForStatement")},$.parseForIn=function(e,t){var r=this.type===x._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===r&&("AssignmentPattern"===t.type||"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(this.strict||"Identifier"!==t.declarations[0].id.type))&&this.raise(t.start,"Invalid assignment in for-in loop head"),e.left=t,e.right="ForInStatement"===r?this.parseExpression():this.parseMaybeAssign(),this.expect(x.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,r)},$.parseVar=function(e,t,r){for(e.declarations=[],e.kind=r;;){var n=this.startNode();if(this.parseVarId(n,r),this.eat(x.eq)?n.init=this.parseMaybeAssign(t):"const"!==r||this.type===x._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===n.id.type||t&&(this.type===x._in||this.isContextual("of"))?n.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(n,"VariableDeclarator")),!this.eat(x.comma))break}return e},$.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,t,!1)},$.parseFunction=function(e,t,r,n){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(e.generator=this.eat(x.star)),this.options.ecmaVersion>=8&&(e.async=!!n),t&&(e.id="nullableID"===t&&this.type!==x.name?null:this.parseIdent(),e.id&&this.checkLVal(e.id,this.inModule&&!this.inFunction?"let":"var"));var i=this.inGenerator,o=this.inAsync,s=this.yieldPos,a=this.awaitPos,u=this.inFunction;return this.inGenerator=e.generator,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),t||(e.id=this.type===x.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,r),this.inGenerator=i,this.inAsync=o,this.yieldPos=s,this.awaitPos=a,this.inFunction=u,this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},$.parseFunctionParams=function(e){this.expect(x.parenL),e.params=this.parseBindingList(x.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},$.parseClass=function(e,t){this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),n=!1;for(r.body=[],this.expect(x.braceL);!this.eat(x.braceR);){var i=this.parseClassMember(r);i&&"MethodDefinition"===i.type&&"constructor"===i.kind&&(n&&this.raise(i.start,"Duplicate constructor in the same class"),n=!0)}return e.body=this.finishNode(r,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},$.parseClassMember=function(e){var t=this;if(this.eat(x.semi))return null;var r=this.startNode(),n=function(e,n){void 0===n&&(n=!1);var i=t.start,o=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===x.parenL||n&&t.canInsertSemicolon())||(r.key&&t.unexpected(),r.computed=!1,r.key=t.startNodeAt(i,o),r.key.name=e,t.finishNode(r.key,"Identifier"),!1))};r.kind="method",r.static=n("static");var i=this.eat(x.star),o=!1;i||(this.options.ecmaVersion>=8&&n("async",!0)?(o=!0,i=this.options.ecmaVersion>=9&&this.eat(x.star)):n("get")?r.kind="get":n("set")&&(r.kind="set")),r.key||this.parsePropertyName(r);var s=r.key;return r.computed||r.static||!("Identifier"===s.type&&"constructor"===s.name||"Literal"===s.type&&"constructor"===s.value)?r.static&&"Identifier"===s.type&&"prototype"===s.name&&this.raise(s.start,"Classes may not have a static property named prototype"):("method"!==r.kind&&this.raise(s.start,"Constructor can't have get/set modifier"),i&&this.raise(s.start,"Constructor can't be a generator"),o&&this.raise(s.start,"Constructor can't be an async method"),r.kind="constructor"),this.parseClassMethod(e,r,i,o),"get"===r.kind&&0!==r.value.params.length&&this.raiseRecoverable(r.value.start,"getter should have no params"),"set"===r.kind&&1!==r.value.params.length&&this.raiseRecoverable(r.value.start,"setter should have exactly one param"),"set"===r.kind&&"RestElement"===r.value.params[0].type&&this.raiseRecoverable(r.value.params[0].start,"Setter cannot use rest params"),r},$.parseClassMethod=function(e,t,r,n){t.value=this.parseMethod(r,n),e.body.push(this.finishNode(t,"MethodDefinition"))},$.parseClassId=function(e,t){e.id=this.type===x.name?this.parseIdent():!0===t?this.unexpected():null},$.parseClassSuper=function(e){e.superClass=this.eat(x._extends)?this.parseExprSubscripts():null},$.parseExport=function(e,t){if(this.next(),this.eat(x.star))return this.expectContextual("from"),this.type!==x.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(x._default)){var r;if(this.checkExport(t,"default",this.lastTokStart),this.type===x._function||(r=this.isAsyncFunction())){var n=this.startNode();this.next(),r&&this.next(),e.declaration=this.parseFunction(n,"nullableID",!1,r)}else if(this.type===x._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(!0),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==x.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var o=0,s=e.specifiers;o<s.length;o+=1){var a=s[o];this.checkUnreserved(a.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},$.checkExport=function(e,t,r){e&&(B(e,t)&&this.raiseRecoverable(r,"Duplicate export '"+t+"'"),e[t]=!0)},$.checkPatternExport=function(e,t){var r=t.type;if("Identifier"===r)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===r)for(var n=0,i=t.properties;n<i.length;n+=1){var o=i[n];this.checkPatternExport(e,o)}else if("ArrayPattern"===r)for(var s=0,a=t.elements;s<a.length;s+=1){var u=a[s];u&&this.checkPatternExport(e,u)}else"Property"===r?this.checkPatternExport(e,t.value):"AssignmentPattern"===r?this.checkPatternExport(e,t.left):"RestElement"===r?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===r&&this.checkPatternExport(e,t.expression)},$.checkVariableExport=function(e,t){if(e)for(var r=0,n=t;r<n.length;r+=1){var i=n[r];this.checkPatternExport(e,i.id)}},$.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},$.parseExportSpecifiers=function(e){var t=[],r=!0;for(this.expect(x.braceL);!this.eat(x.braceR);){if(r)r=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;var n=this.startNode();n.local=this.parseIdent(!0),n.exported=this.eatContextual("as")?this.parseIdent(!0):n.local,this.checkExport(e,n.exported.name,n.exported.start),t.push(this.finishNode(n,"ExportSpecifier"))}return t},$.parseImport=function(e){return this.next(),this.type===x.string?(e.specifiers=K,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===x.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},$.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===x.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,"let"),e.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(x.comma))return e}if(this.type===x.star){var n=this.startNode();return this.next(),this.expectContextual("as"),n.local=this.parseIdent(),this.checkLVal(n.local,"let"),e.push(this.finishNode(n,"ImportNamespaceSpecifier")),e}for(this.expect(x.braceL);!this.eat(x.braceR);){if(t)t=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,"let"),e.push(this.finishNode(i,"ImportSpecifier"))}return e},$.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},$.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var q=j.prototype;q.toAssignable=function(e,t,r){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",r&&this.checkPatternErrors(r,!0);for(var n=0,i=e.properties;n<i.length;n+=1){var o=i[n];this.toAssignable(o,t),"RestElement"!==o.type||"ArrayPattern"!==o.argument.type&&"ObjectPattern"!==o.argument.type||this.raise(o.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",r&&this.checkPatternErrors(r,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else r&&this.checkPatternErrors(r,!0);return e},q.toAssignableList=function(e,t){for(var r=e.length,n=0;n<r;n++){var i=e[n];i&&this.toAssignable(i,t)}if(r){var o=e[r-1];6===this.options.ecmaVersion&&t&&o&&"RestElement"===o.type&&"Identifier"!==o.argument.type&&this.unexpected(o.argument.start)}return e},q.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},q.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==x.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},q.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case x.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(x.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case x.braceL:return this.parseObj(!0)}return this.parseIdent()},q.parseBindingList=function(e,t,r){for(var n=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(x.comma),t&&this.type===x.comma)n.push(null);else{if(r&&this.afterTrailingComma(e))break;if(this.type===x.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),n.push(o),this.type===x.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var s=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(s),n.push(s)}return n},q.parseBindingListItem=function(e){return e},q.parseMaybeDefault=function(e,t,r){if(r=r||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(x.eq))return r;var n=this.startNodeAt(e,t);return n.left=r,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")},q.checkLVal=function(e,t,r){switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(B(r,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),r[e.name]=!0),t&&"none"!==t&&(("var"===t&&!this.canDeclareVarName(e.name)||"var"!==t&&!this.canDeclareLexicalName(e.name))&&this.raiseRecoverable(e.start,"Identifier '"+e.name+"' has already been declared"),"var"===t?this.declareVarName(e.name):this.declareLexicalName(e.name));break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var n=0,i=e.properties;n<i.length;n+=1){var o=i[n];this.checkLVal(o,t,r)}break;case"Property":this.checkLVal(e.value,t,r);break;case"ArrayPattern":for(var s=0,a=e.elements;s<a.length;s+=1){var u=a[s];u&&this.checkLVal(u,t,r)}break;case"AssignmentPattern":this.checkLVal(e.left,t,r);break;case"RestElement":this.checkLVal(e.argument,t,r);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,r);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var W=j.prototype;W.checkPropClash=function(e,t,r){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var n,i=e.key;switch(i.type){case"Identifier":n=i.name;break;case"Literal":n=String(i.value);break;default:return}var o=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===n&&"init"===o&&(t.proto&&(r&&r.doubleProto<0?r.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var s=t[n="$"+n];if(s)("init"===o?this.strict&&s.init||s.get||s.set:s.init||s[o])&&this.raiseRecoverable(i.start,"Redefinition of property");else s=t[n]={init:!1,get:!1,set:!1};s[o]=!0}}},W.parseExpression=function(e,t){var r=this.start,n=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===x.comma){var o=this.startNodeAt(r,n);for(o.expressions=[i];this.eat(x.comma);)o.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(o,"SequenceExpression")}return i},W.parseMaybeAssign=function(e,t,r){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var n=!1,i=-1,o=-1;t?(i=t.parenthesizedAssign,o=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new z,n=!0);var s=this.start,a=this.startLoc;this.type!==x.parenL&&this.type!==x.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(e,t);if(r&&(u=r.call(this,u,s,a)),this.type.isAssign){var l=this.startNodeAt(s,a);return l.operator=this.value,l.left=this.type===x.eq?this.toAssignable(u,!1,t):u,n||z.call(t),t.shorthandAssign=-1,this.checkLVal(u),this.next(),l.right=this.parseMaybeAssign(e),this.finishNode(l,"AssignmentExpression")}return n&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),o>-1&&(t.trailingComma=o),u},W.parseMaybeConditional=function(e,t){var r=this.start,n=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(x.question)){var o=this.startNodeAt(r,n);return o.test=i,o.consequent=this.parseMaybeAssign(),this.expect(x.colon),o.alternate=this.parseMaybeAssign(e),this.finishNode(o,"ConditionalExpression")}return i},W.parseExprOps=function(e,t){var r=this.start,n=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?i:i.start===r&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,r,n,-1,e)},W.parseExprOp=function(e,t,r,n,i){var o=this.type.binop;if(null!=o&&(!i||this.type!==x._in)&&o>n){var s=this.type===x.logicalOR||this.type===x.logicalAND,a=this.value;this.next();var u=this.start,l=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),u,l,o,i),h=this.buildBinary(t,r,e,c,a,s);return this.parseExprOp(h,t,r,n,i)}return e},W.buildBinary=function(e,t,r,n,i,o){var s=this.startNodeAt(e,t);return s.left=r,s.operator=i,s.right=n,this.finishNode(s,o?"LogicalExpression":"BinaryExpression")},W.parseMaybeUnary=function(e,t){var r,n=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))r=this.parseAwait(),t=!0;else if(this.type.prefix){var o=this.startNode(),s=this.type===x.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),s?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):t=!0,r=this.finishNode(o,s?"UpdateExpression":"UnaryExpression")}else{if(r=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var a=this.startNodeAt(n,i);a.operator=this.value,a.prefix=!1,a.argument=r,this.checkLVal(r),this.next(),r=this.finishNode(a,"UpdateExpression")}}return!t&&this.eat(x.starstar)?this.buildBinary(n,i,r,this.parseMaybeUnary(null,!1),"**",!1):r},W.parseExprSubscripts=function(e){var t=this.start,r=this.startLoc,n=this.parseExprAtom(e),i="ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return n;var o=this.parseSubscripts(n,t,r);return e&&"MemberExpression"===o.type&&(e.parenthesizedAssign>=o.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=o.start&&(e.parenthesizedBind=-1)),o},W.parseSubscripts=function(e,t,r,n){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end),o=void 0;;)if((o=this.eat(x.bracketL))||this.eat(x.dot)){var s=this.startNodeAt(t,r);s.object=e,s.property=o?this.parseExpression():this.parseIdent(!0),s.computed=!!o,o&&this.expect(x.bracketR),e=this.finishNode(s,"MemberExpression")}else if(!n&&this.eat(x.parenL)){var a=new z,u=this.yieldPos,l=this.awaitPos;this.yieldPos=0,this.awaitPos=0;var c=this.parseExprList(x.parenR,this.options.ecmaVersion>=8,!1,a);if(i&&!this.canInsertSemicolon()&&this.eat(x.arrow))return this.checkPatternErrors(a,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=u,this.awaitPos=l,this.parseArrowExpression(this.startNodeAt(t,r),c,!0);this.checkExpressionErrors(a,!0),this.yieldPos=u||this.yieldPos,this.awaitPos=l||this.awaitPos;var h=this.startNodeAt(t,r);h.callee=e,h.arguments=c,e=this.finishNode(h,"CallExpression")}else{if(this.type!==x.backQuote)return e;var p=this.startNodeAt(t,r);p.tag=e,p.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(p,"TaggedTemplateExpression")}},W.parseExprAtom=function(e){var t,r=this.potentialArrowAt===this.start;switch(this.type){case x._super:return this.inFunction||this.raise(this.start,"'super' outside of function or class"),t=this.startNode(),this.next(),this.type!==x.dot&&this.type!==x.bracketL&&this.type!==x.parenL&&this.unexpected(),this.finishNode(t,"Super");case x._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case x.name:var n=this.start,i=this.startLoc,o=this.containsEsc,s=this.parseIdent(this.type!==x.name);if(this.options.ecmaVersion>=8&&!o&&"async"===s.name&&!this.canInsertSemicolon()&&this.eat(x._function))return this.parseFunction(this.startNodeAt(n,i),!1,!1,!0);if(r&&!this.canInsertSemicolon()){if(this.eat(x.arrow))return this.parseArrowExpression(this.startNodeAt(n,i),[s],!1);if(this.options.ecmaVersion>=8&&"async"===s.name&&this.type===x.name&&!o)return s=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(x.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(n,i),[s],!0)}return s;case x.regexp:var a=this.value;return(t=this.parseLiteral(a.value)).regex={pattern:a.pattern,flags:a.flags},t;case x.num:case x.string:return this.parseLiteral(this.value);case x._null:case x._true:case x._false:return(t=this.startNode()).value=this.type===x._null?null:this.type===x._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case x.parenL:var u=this.start,l=this.parseParenAndDistinguishExpression(r);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),l;case x.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(x.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case x.braceL:return this.parseObj(!1,e);case x._function:return t=this.startNode(),this.next(),this.parseFunction(t,!1);case x._class:return this.parseClass(this.startNode(),!1);case x._new:return this.parseNew();case x.backQuote:return this.parseTemplate();default:this.unexpected()}},W.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},W.parseParenExpression=function(){this.expect(x.parenL);var e=this.parseExpression();return this.expect(x.parenR),e},W.parseParenAndDistinguishExpression=function(e){var t,r=this.start,n=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,s=this.start,a=this.startLoc,u=[],l=!0,c=!1,h=new z,p=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==x.parenR;){if(l?l=!1:this.expect(x.comma),i&&this.afterTrailingComma(x.parenR,!0)){c=!0;break}if(this.type===x.ellipsis){o=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===x.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var d=this.start,m=this.startLoc;if(this.expect(x.parenR),e&&!this.canInsertSemicolon()&&this.eat(x.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=f,this.parseParenArrowList(r,n,u);u.length&&!c||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=f||this.awaitPos,u.length>1?((t=this.startNodeAt(s,a)).expressions=u,this.finishNodeAt(t,"SequenceExpression",d,m)):t=u[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(r,n);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},W.parseParenItem=function(e){return e},W.parseParenArrowList=function(e,t,r){return this.parseArrowExpression(this.startNodeAt(e,t),r)};var X=[];W.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(x.dot)){e.meta=t;var r=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||r)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var n=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),n,i,!0),this.eat(x.parenL)?e.arguments=this.parseExprList(x.parenR,this.options.ecmaVersion>=8,!1):e.arguments=X,this.finishNode(e,"NewExpression")},W.parseTemplateElement=function(e){var t=e.isTagged,r=this.startNode();return this.type===x.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),r.value={raw:this.value,cooked:null}):r.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),r.tail=this.type===x.backQuote,this.finishNode(r,"TemplateElement")},W.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var r=this.startNode();this.next(),r.expressions=[];var n=this.parseTemplateElement({isTagged:t});for(r.quasis=[n];!n.tail;)this.type===x.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(x.dollarBraceL),r.expressions.push(this.parseExpression()),this.expect(x.braceR),r.quasis.push(n=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(r,"TemplateLiteral")},W.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===x.name||this.type===x.num||this.type===x.string||this.type===x.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===x.star)&&!_.test(this.input.slice(this.lastTokEnd,this.start))},W.parseObj=function(e,t){var r=this.startNode(),n=!0,i={};for(r.properties=[],this.next();!this.eat(x.braceR);){if(n)n=!1;else if(this.expect(x.comma),this.afterTrailingComma(x.braceR))break;var o=this.parseProperty(e,t);e||this.checkPropClash(o,i,t),r.properties.push(o)}return this.finishNode(r,e?"ObjectPattern":"ObjectExpression")},W.parseProperty=function(e,t){var r,n,i,o,s=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(x.ellipsis))return e?(s.argument=this.parseIdent(!1),this.type===x.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(s,"RestElement")):(this.type===x.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),s.argument=this.parseMaybeAssign(!1,t),this.type===x.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(s,"SpreadElement"));this.options.ecmaVersion>=6&&(s.method=!1,s.shorthand=!1,(e||t)&&(i=this.start,o=this.startLoc),e||(r=this.eat(x.star)));var a=this.containsEsc;return this.parsePropertyName(s),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(s)?(n=!0,r=this.options.ecmaVersion>=9&&this.eat(x.star),this.parsePropertyName(s,t)):n=!1,this.parsePropertyValue(s,e,r,n,i,o,t,a),this.finishNode(s,"Property")},W.parsePropertyValue=function(e,t,r,n,i,o,s,a){if((r||n)&&this.type===x.colon&&this.unexpected(),this.eat(x.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,s),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===x.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(r,n);else if(t||a||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===x.comma||this.type===x.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?(this.checkUnreserved(e.key),e.kind="init",t?e.value=this.parseMaybeDefault(i,o,e.key):this.type===x.eq&&s?(s.shorthandAssign<0&&(s.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,o,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(r||n)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var u="get"===e.kind?0:1;if(e.value.params.length!==u){var l=e.value.start;"get"===e.kind?this.raiseRecoverable(l,"getter should have no params"):this.raiseRecoverable(l,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},W.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(x.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(x.bracketR),e.key;e.computed=!1}return e.key=this.type===x.num||this.type===x.string?this.parseExprAtom():this.parseIdent(!0)},W.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=!1,e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},W.parseMethod=function(e,t){var r=this.startNode(),n=this.inGenerator,i=this.inAsync,o=this.yieldPos,s=this.awaitPos,a=this.inFunction;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.inGenerator=r.generator,this.inAsync=r.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(x.parenL),r.params=this.parseBindingList(x.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1),this.inGenerator=n,this.inAsync=i,this.yieldPos=o,this.awaitPos=s,this.inFunction=a,this.finishNode(r,"FunctionExpression")},W.parseArrowExpression=function(e,t,r){var n=this.inGenerator,i=this.inAsync,o=this.yieldPos,s=this.awaitPos,a=this.inFunction;return this.enterFunctionScope(),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!r),this.inGenerator=!1,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.inGenerator=n,this.inAsync=i,this.yieldPos=o,this.awaitPos=s,this.inFunction=a,this.finishNode(e,"ArrowFunctionExpression")},W.parseFunctionBody=function(e,t){var r=t&&this.type!==x.braceL,n=this.strict,i=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);n&&!o||(i=this.strictDirective(this.end))&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var s=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!n&&!i&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=s}this.exitFunctionScope(),this.strict&&e.id&&this.checkLVal(e.id,"none"),this.strict=n},W.isSimpleParamList=function(e){for(var t=0,r=e;t<r.length;t+=1){if("Identifier"!==r[t].type)return!1}return!0},W.checkParams=function(e,t){for(var r={},n=0,i=e.params;n<i.length;n+=1){var o=i[n];this.checkLVal(o,"var",t?null:r)}},W.parseExprList=function(e,t,r,n){for(var i=[],o=!0;!this.eat(e);){if(o)o=!1;else if(this.expect(x.comma),t&&this.afterTrailingComma(e))break;var s=void 0;r&&this.type===x.comma?s=null:this.type===x.ellipsis?(s=this.parseSpread(n),n&&this.type===x.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):s=this.parseMaybeAssign(!1,n),i.push(s)}return i},W.checkUnreserved=function(e){var t=e.start,r=e.end,n=e.name;(this.inGenerator&&"yield"===n&&this.raiseRecoverable(t,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(t,"Can not use 'await' as identifier inside an async function"),this.isKeyword(n)&&this.raise(t,"Unexpected keyword '"+n+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,r).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(t,"Can not use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+n+"' is reserved"))},W.parseIdent=function(e,t){var r=this.startNode();return e&&"never"===this.options.allowReserved&&(e=!1),this.type===x.name?r.name=this.value:this.type.keyword?(r.name=this.type.keyword,"class"!==r.name&&"function"!==r.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(r,"Identifier"),e||this.checkUnreserved(r),r},W.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===x.semi||this.canInsertSemicolon()||this.type!==x.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(x.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")},W.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var H=j.prototype;H.raise=function(e,t){var r=M(this.input,e);t+=" ("+r.line+":"+r.column+")";var n=new SyntaxError(t);throw n.pos=e,n.loc=r,n.raisedAt=this.pos,n},H.raiseRecoverable=H.raise,H.curPosition=function(){if(this.options.locations)return new P(this.curLine,this.pos-this.lineStart)};var Y=j.prototype,Z=Object.assign||function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];for(var n=0,i=t;n<i.length;n+=1){var o=i[n];for(var s in o)B(o,s)&&(e[s]=o[s])}return e};Y.enterFunctionScope=function(){this.scopeStack.push({var:{},lexical:{},childVar:{},parentLexical:{}})},Y.exitFunctionScope=function(){this.scopeStack.pop()},Y.enterLexicalScope=function(){var e=this.scopeStack[this.scopeStack.length-1],t={var:{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(t),Z(t.parentLexical,e.lexical,e.parentLexical)},Y.exitLexicalScope=function(){var e=this.scopeStack.pop(),t=this.scopeStack[this.scopeStack.length-1];Z(t.childVar,e.var,e.childVar)},Y.canDeclareVarName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!B(t.lexical,e)&&!B(t.parentLexical,e)},Y.canDeclareLexicalName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!B(t.lexical,e)&&!B(t.var,e)&&!B(t.childVar,e)},Y.declareVarName=function(e){this.scopeStack[this.scopeStack.length-1].var[e]=!0},Y.declareLexicalName=function(e){this.scopeStack[this.scopeStack.length-1].lexical[e]=!0};var J=function(e,t,r){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new R(e,r)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},Q=j.prototype;function ee(e,t,r,n){return e.type=t,e.end=r,this.options.locations&&(e.loc.end=n),this.options.ranges&&(e.range[1]=r),e}Q.startNode=function(){return new J(this,this.start,this.startLoc)},Q.startNodeAt=function(e,t){return new J(this,e,t)},Q.finishNode=function(e,t){return ee.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},Q.finishNodeAt=function(e,t,r,n){return ee.call(this,e,t,r,n)};var te=function(e,t,r,n,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!r,this.override=n,this.generator=!!i},re={b_stat:new te("{",!1),b_expr:new te("{",!0),b_tmpl:new te("${",!1),p_stat:new te("(",!1),p_expr:new te("(",!0),q_tmpl:new te("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new te("function",!1),f_expr:new te("function",!0),f_expr_gen:new te("function",!0,!1,null,!0),f_gen:new te("function",!1,!1,null,!0)},ne=j.prototype;ne.initialContext=function(){return[re.b_stat]},ne.braceIsBlock=function(e){var t=this.curContext();return t===re.f_expr||t===re.f_stat||(e!==x.colon||t!==re.b_stat&&t!==re.b_expr?e===x._return||e===x.name&&this.exprAllowed?_.test(this.input.slice(this.lastTokEnd,this.start)):e===x._else||e===x.semi||e===x.eof||e===x.parenR||e===x.arrow||(e===x.braceL?t===re.b_stat:e!==x._var&&e!==x.name&&!this.exprAllowed):!t.isExpr)},ne.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},ne.updateContext=function(e){var t,r=this.type;r.keyword&&e===x.dot?this.exprAllowed=!1:(t=r.updateContext)?t.call(this,e):this.exprAllowed=r.beforeExpr},x.parenR.updateContext=x.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===re.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},x.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?re.b_stat:re.b_expr),this.exprAllowed=!0},x.dollarBraceL.updateContext=function(){this.context.push(re.b_tmpl),this.exprAllowed=!0},x.parenL.updateContext=function(e){var t=e===x._if||e===x._for||e===x._with||e===x._while;this.context.push(t?re.p_stat:re.p_expr),this.exprAllowed=!0},x.incDec.updateContext=function(){},x._function.updateContext=x._class.updateContext=function(e){e.beforeExpr&&e!==x.semi&&e!==x._else&&(e!==x.colon&&e!==x.braceL||this.curContext()!==re.b_stat)?this.context.push(re.f_expr):this.context.push(re.f_stat),this.exprAllowed=!1},x.backQuote.updateContext=function(){this.curContext()===re.q_tmpl?this.context.pop():this.context.push(re.q_tmpl),this.exprAllowed=!1},x.star.updateContext=function(e){if(e===x._function){var t=this.context.length-1;this.context[t]===re.f_expr?this.context[t]=re.f_expr_gen:this.context[t]=re.f_gen}this.exprAllowed=!0},x.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==x.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var ie={$LONE:["ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"],General_Category:["Cased_Letter","LC","Close_Punctuation","Pe","Connector_Punctuation","Pc","Control","Cc","cntrl","Currency_Symbol","Sc","Dash_Punctuation","Pd","Decimal_Number","Nd","digit","Enclosing_Mark","Me","Final_Punctuation","Pf","Format","Cf","Initial_Punctuation","Pi","Letter","L","Letter_Number","Nl","Line_Separator","Zl","Lowercase_Letter","Ll","Mark","M","Combining_Mark","Math_Symbol","Sm","Modifier_Letter","Lm","Modifier_Symbol","Sk","Nonspacing_Mark","Mn","Number","N","Open_Punctuation","Ps","Other","C","Other_Letter","Lo","Other_Number","No","Other_Punctuation","Po","Other_Symbol","So","Paragraph_Separator","Zp","Private_Use","Co","Punctuation","P","punct","Separator","Z","Space_Separator","Zs","Spacing_Mark","Mc","Surrogate","Cs","Symbol","S","Titlecase_Letter","Lt","Unassigned","Cn","Uppercase_Letter","Lu"],Script:["Adlam","Adlm","Ahom","Anatolian_Hieroglyphs","Hluw","Arabic","Arab","Armenian","Armn","Avestan","Avst","Balinese","Bali","Bamum","Bamu","Bassa_Vah","Bass","Batak","Batk","Bengali","Beng","Bhaiksuki","Bhks","Bopomofo","Bopo","Brahmi","Brah","Braille","Brai","Buginese","Bugi","Buhid","Buhd","Canadian_Aboriginal","Cans","Carian","Cari","Caucasian_Albanian","Aghb","Chakma","Cakm","Cham","Cherokee","Cher","Common","Zyyy","Coptic","Copt","Qaac","Cuneiform","Xsux","Cypriot","Cprt","Cyrillic","Cyrl","Deseret","Dsrt","Devanagari","Deva","Duployan","Dupl","Egyptian_Hieroglyphs","Egyp","Elbasan","Elba","Ethiopic","Ethi","Georgian","Geor","Glagolitic","Glag","Gothic","Goth","Grantha","Gran","Greek","Grek","Gujarati","Gujr","Gurmukhi","Guru","Han","Hani","Hangul","Hang","Hanunoo","Hano","Hatran","Hatr","Hebrew","Hebr","Hiragana","Hira","Imperial_Aramaic","Armi","Inherited","Zinh","Qaai","Inscriptional_Pahlavi","Phli","Inscriptional_Parthian","Prti","Javanese","Java","Kaithi","Kthi","Kannada","Knda","Katakana","Kana","Kayah_Li","Kali","Kharoshthi","Khar","Khmer","Khmr","Khojki","Khoj","Khudawadi","Sind","Lao","Laoo","Latin","Latn","Lepcha","Lepc","Limbu","Limb","Linear_A","Lina","Linear_B","Linb","Lisu","Lycian","Lyci","Lydian","Lydi","Mahajani","Mahj","Malayalam","Mlym","Mandaic","Mand","Manichaean","Mani","Marchen","Marc","Masaram_Gondi","Gonm","Meetei_Mayek","Mtei","Mende_Kikakui","Mend","Meroitic_Cursive","Merc","Meroitic_Hieroglyphs","Mero","Miao","Plrd","Modi","Mongolian","Mong","Mro","Mroo","Multani","Mult","Myanmar","Mymr","Nabataean","Nbat","New_Tai_Lue","Talu","Newa","Nko","Nkoo","Nushu","Nshu","Ogham","Ogam","Ol_Chiki","Olck","Old_Hungarian","Hung","Old_Italic","Ital","Old_North_Arabian","Narb","Old_Permic","Perm","Old_Persian","Xpeo","Old_South_Arabian","Sarb","Old_Turkic","Orkh","Oriya","Orya","Osage","Osge","Osmanya","Osma","Pahawh_Hmong","Hmng","Palmyrene","Palm","Pau_Cin_Hau","Pauc","Phags_Pa","Phag","Phoenician","Phnx","Psalter_Pahlavi","Phlp","Rejang","Rjng","Runic","Runr","Samaritan","Samr","Saurashtra","Saur","Sharada","Shrd","Shavian","Shaw","Siddham","Sidd","SignWriting","Sgnw","Sinhala","Sinh","Sora_Sompeng","Sora","Soyombo","Soyo","Sundanese","Sund","Syloti_Nagri","Sylo","Syriac","Syrc","Tagalog","Tglg","Tagbanwa","Tagb","Tai_Le","Tale","Tai_Tham","Lana","Tai_Viet","Tavt","Takri","Takr","Tamil","Taml","Tangut","Tang","Telugu","Telu","Thaana","Thaa","Thai","Tibetan","Tibt","Tifinagh","Tfng","Tirhuta","Tirh","Ugaritic","Ugar","Vai","Vaii","Warang_Citi","Wara","Yi","Yiii","Zanabazar_Square","Zanb"]};Array.prototype.push.apply(ie.$LONE,ie.General_Category),ie.gc=ie.General_Category,ie.sc=ie.Script_Extensions=ie.scx=ie.Script;var oe=j.prototype,se=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function ae(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function ue(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function le(e){return e>=65&&e<=90||e>=97&&e<=122}function ce(e){return le(e)||95===e}function he(e){return ce(e)||pe(e)}function pe(e){return e>=48&&e<=57}function fe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function de(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function me(e){return e>=48&&e<=55}se.prototype.reset=function(e,t,r){var n=-1!==r.indexOf("u");this.start=0|e,this.source=t+"",this.flags=r,this.switchU=n&&this.parser.options.ecmaVersion>=6,this.switchN=n&&this.parser.options.ecmaVersion>=9},se.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},se.prototype.at=function(e){var t=this.source,r=t.length;if(e>=r)return-1;var n=t.charCodeAt(e);return!this.switchU||n<=55295||n>=57344||e+1>=r?n:(n<<10)+t.charCodeAt(e+1)-56613888},se.prototype.nextIndex=function(e){var t=this.source,r=t.length;if(e>=r)return r;var n=t.charCodeAt(e);return!this.switchU||n<=55295||n>=57344||e+1>=r?e+1:e+2},se.prototype.current=function(){return this.at(this.pos)},se.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},se.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},se.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},oe.validateRegExpFlags=function(e){for(var t=e.validFlags,r=e.flags,n=0;n<r.length;n++){var i=r.charAt(n);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),r.indexOf(i,n+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},oe.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},oe.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,r=e.backReferenceNames;t<r.length;t+=1){var n=r[t];-1===e.groupNames.indexOf(n)&&e.raise("Invalid named capture referenced")}},oe.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},oe.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},oe.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!(e.switchU?!this.regexp_eatAtom(e):!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},oe.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var r=!1;if(this.options.ecmaVersion>=9&&(r=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!r,!0}return e.pos=t,!1},oe.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},oe.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},oe.regexp_eatBracedQuantifier=function(e,t){var r=e.pos;if(e.eat(123)){var n=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(n=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<n&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=r}return!1},oe.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},oe.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},oe.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},oe.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},oe.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},oe.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},oe.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!ue(t)&&(e.lastIntValue=t,e.advance(),!0)},oe.regexp_eatPatternCharacters=function(e){for(var t=e.pos,r=0;-1!==(r=e.current())&&!ue(r);)e.advance();return e.pos!==t},oe.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},oe.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},oe.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},oe.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ae(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ae(e.lastIntValue);return!0}return!1},oe.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,r=e.current();return e.advance(),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(r=e.lastIntValue),function(e){return p(e,!0)||36===e||95===e}(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},oe.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,r=e.current();return e.advance(),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(r=e.lastIntValue),function(e){return f(e,!0)||36===e||95===e||8204===e||8205===e}(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},oe.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},oe.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var r=e.lastIntValue;if(e.switchU)return r>e.maxBackReference&&(e.maxBackReference=r),!0;if(r<=e.numCapturingParens)return!0;e.pos=t}return!1},oe.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},oe.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},oe.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},oe.regexp_eatZero=function(e){return 48===e.current()&&!pe(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},oe.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},oe.regexp_eatControlLetter=function(e){var t=e.current();return!!le(t)&&(e.lastIntValue=t%32,e.advance(),!0)},oe.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,r=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var n=e.lastIntValue;if(e.switchU&&n>=55296&&n<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=1024*(n-55296)+(o-56320)+65536,!0}e.pos=i,e.lastIntValue=n}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&((t=e.lastIntValue)>=0&&t<=1114111))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=r}return!1},oe.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},oe.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},oe.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},oe.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var r=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var n=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,r,n),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},oe.regexp_validateUnicodePropertyNameAndValue=function(e,t,r){ie.hasOwnProperty(t)&&-1!==ie[t].indexOf(r)||e.raise("Invalid property name")},oe.regexp_validateUnicodePropertyNameOrValue=function(e,t){-1===ie.$LONE.indexOf(t)&&e.raise("Invalid property name")},oe.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";ce(t=e.current());)e.lastStringValue+=ae(t),e.advance();return""!==e.lastStringValue},oe.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";he(t=e.current());)e.lastStringValue+=ae(t),e.advance();return""!==e.lastStringValue},oe.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},oe.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},oe.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var r=e.lastIntValue;!e.switchU||-1!==t&&-1!==r||e.raise("Invalid character class"),-1!==t&&-1!==r&&t>r&&e.raise("Range out of order in character class")}}},oe.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var r=e.current();(99===r||me(r))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var n=e.current();return 93!==n&&(e.lastIntValue=n,e.advance(),!0)},oe.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},oe.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!pe(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},oe.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},oe.regexp_eatDecimalDigits=function(e){var t=e.pos,r=0;for(e.lastIntValue=0;pe(r=e.current());)e.lastIntValue=10*e.lastIntValue+(r-48),e.advance();return e.pos!==t},oe.regexp_eatHexDigits=function(e){var t=e.pos,r=0;for(e.lastIntValue=0;fe(r=e.current());)e.lastIntValue=16*e.lastIntValue+de(r),e.advance();return e.pos!==t},oe.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var r=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*r+e.lastIntValue:e.lastIntValue=8*t+r}else e.lastIntValue=t;return!0}return!1},oe.regexp_eatOctalDigit=function(e){var t=e.current();return me(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},oe.regexp_eatFixedHexDigits=function(e,t){var r=e.pos;e.lastIntValue=0;for(var n=0;n<t;++n){var i=e.current();if(!fe(i))return e.pos=r,!1;e.lastIntValue=16*e.lastIntValue+de(i),e.advance()}return!0};var ge=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new R(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},ve=j.prototype;function ye(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}ve.next=function(){this.options.onToken&&this.options.onToken(new ge(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},ve.getToken=function(){return this.next(),new ge(this)},"undefined"!=typeof Symbol&&(ve[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===x.eof,value:t}}}}),ve.curContext=function(){return this.context[this.context.length-1]},ve.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(x.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},ve.readToken=function(e){return p(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},ve.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},ve.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),r=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(w.lastIndex=r;(e=w.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(r+2,n),r,this.pos,t,this.curPosition())},ve.skipLineComment=function(e){for(var t=this.pos,r=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!k(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,r,this.curPosition())},ve.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&T.test(String.fromCharCode(e))))break e;++this.pos}}},ve.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=e,this.value=t,this.updateContext(r)},ve.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(x.ellipsis)):(++this.pos,this.finishToken(x.dot))},ve.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(x.assign,2):this.finishOp(x.slash,1)},ve.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),r=1,n=42===e?x.star:x.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++r,n=x.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(x.assign,r+1):this.finishOp(n,r)},ve.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?x.logicalOR:x.logicalAND,2):61===t?this.finishOp(x.assign,2):this.finishOp(124===e?x.bitwiseOR:x.bitwiseAND,1)},ve.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(x.assign,2):this.finishOp(x.bitwiseXOR,1)},ve.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!_.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(x.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(x.assign,2):this.finishOp(x.plusMin,1)},ve.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),r=1;return t===e?(r=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(x.assign,r+1):this.finishOp(x.bitShift,r)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(r=2),this.finishOp(x.relational,r)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},ve.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(x.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(x.arrow)):this.finishOp(61===e?x.eq:x.prefix,1)},ve.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(x.parenL);case 41:return++this.pos,this.finishToken(x.parenR);case 59:return++this.pos,this.finishToken(x.semi);case 44:return++this.pos,this.finishToken(x.comma);case 91:return++this.pos,this.finishToken(x.bracketL);case 93:return++this.pos,this.finishToken(x.bracketR);case 123:return++this.pos,this.finishToken(x.braceL);case 125:return++this.pos,this.finishToken(x.braceR);case 58:return++this.pos,this.finishToken(x.colon);case 63:return++this.pos,this.finishToken(x.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(x.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(x.prefix,1)}this.raise(this.pos,"Unexpected character '"+ye(e)+"'")},ve.finishOp=function(e,t){var r=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,r)},ve.readRegexp=function(){for(var e,t,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(_.test(n)&&this.raise(r,"Unterminated regular expression"),e)e=!1;else{if("["===n)t=!0;else if("]"===n&&t)t=!1;else if("/"===n&&!t)break;e="\\"===n}++this.pos}var i=this.input.slice(r,this.pos);++this.pos;var o=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(o);var a=this.regexpState||(this.regexpState=new se(this));a.reset(r,i,s),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,s)}catch(e){}return this.finishToken(x.regexp,{pattern:i,flags:s,value:u})},ve.readInt=function(e,t){for(var r=this.pos,n=0,i=0,o=null==t?1/0:t;i<o;++i){var s=this.input.charCodeAt(this.pos),a=void 0;if((a=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0)>=e)break;++this.pos,n=n*e+a}return this.pos===r||null!=t&&this.pos-r!==t?null:n},ve.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(x.num,t)},ve.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var r=this.pos-t>=2&&48===this.input.charCodeAt(t);r&&this.strict&&this.raise(t,"Invalid number"),r&&/[89]/.test(this.input.slice(t,this.pos))&&(r=!1);var n=this.input.charCodeAt(this.pos);46!==n||r||(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),69!==n&&101!==n||r||(43!==(n=this.input.charCodeAt(++this.pos))&&45!==n||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=this.input.slice(t,this.pos),o=r?parseInt(i,8):parseFloat(i);return this.finishToken(x.num,o)},ve.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},ve.readString=function(e){for(var t="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===e)break;92===n?(t+=this.input.slice(r,this.pos),t+=this.readEscapedChar(!1),r=this.pos):(k(n,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(r,this.pos++),this.finishToken(x.string,t)};var be={};ve.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==be)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},ve.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw be;this.raise(e,t)},ve.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==x.template&&this.type!==x.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(x.template,e)):36===r?(this.pos+=2,this.finishToken(x.dollarBraceL)):(++this.pos,this.finishToken(x.backQuote));if(92===r)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(k(r)){switch(e+=this.input.slice(t,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(r)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},ve.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(x.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},ve.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ye(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(r,8);return n>255&&(r=r.slice(0,-1),n=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(n)}return String.fromCharCode(t)}},ve.readHexChar=function(e){var t=this.pos,r=this.readInt(16,e);return null===r&&this.invalidStringToken(t,"Bad character escape sequence"),r},ve.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,r=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(f(i,n))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(r,this.pos);var o=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var s=this.readCodePoint();(t?p:f)(s,n)||this.invalidStringToken(o,"Invalid Unicode escape"),e+=ye(s),r=this.pos}t=!1}return e+this.input.slice(r,this.pos)},ve.readWord=function(){var e=this.readWord1(),t=x.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=y[e]),this.finishToken(t,e)};e.version="5.7.3",e.parse=function(e,t){return new j(t,e).parse()},e.parseExpressionAt=function(e,t,r){var n=new j(r,e,t);return n.nextToken(),n.parseExpression()},e.tokenizer=function(e,t){return new j(t,e)},e.addLooseExports=function(t,r,n){e.parse_dammit=t,e.LooseParser=r,e.pluginsLoose=n},e.Parser=j,e.plugins=L,e.defaultOptions=F,e.Position=P,e.SourceLocation=R,e.getLineInfo=M,e.Node=J,e.TokenType=d,e.tokTypes=x,e.keywordTypes=y,e.TokContext=te,e.tokContexts=re,e.isIdentifierChar=f,e.isIdentifierStart=p,e.Token=ge,e.isNewLine=k,e.lineBreak=_,e.lineBreakG=w,e.nonASCIIwhitespace=T,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof r&&void 0!==t?i(r):"function"==typeof define&&define.amd?define(["exports"],i):i(n.acorn={})},{}],2:[function(e,t,r){"use strict";r.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},r.toByteArray=function(e){for(var t,r=l(e),n=r[0],s=r[1],a=new o(function(e,t,r){return 3*(t+r)/4-r}(0,n,s)),u=0,c=s>0?n-4:n,h=0;h<c;h+=4)t=i[e.charCodeAt(h)]<<18|i[e.charCodeAt(h+1)]<<12|i[e.charCodeAt(h+2)]<<6|i[e.charCodeAt(h+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=255&t;2===s&&(t=i[e.charCodeAt(h)]<<2|i[e.charCodeAt(h+1)]>>4,a[u++]=255&t);1===s&&(t=i[e.charCodeAt(h)]<<10|i[e.charCodeAt(h+1)]<<4|i[e.charCodeAt(h+2)]>>2,a[u++]=t>>8&255,a[u++]=255&t);return a},r.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(c(e,s,s+16383>a?a:s+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],3:[function(e,t,r){(function(e,n,i){!function(e){if("object"==typeof r&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;"undefined"!=typeof window?i=window:void 0!==n?i=n:"undefined"!=typeof self&&(i=self),i.Promise=e()}}(function(){var t,r,o;return function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return i(r||e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function r(e){var r=new t(e),n=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),n}e.any=function(e){return r(e)},e.prototype.any=function(){return r(this)}}},{}],2:[function(t,r,n){"use strict";var i;try{throw new Error}catch(e){i=e}var o=t("./schedule"),s=t("./queue"),a=t("./util");function u(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=o}function l(e,t,r){this._lateQueue.push(e,t,r),this._queueTick()}function c(e,t,r){this._normalQueue.push(e,t,r),this._queueTick()}function h(e){this._normalQueue._pushOne(e),this._queueTick()}function p(e){for(;e.length()>0;)f(e)}function f(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var r=e.shift(),n=e.shift();t.call(r,n)}}u.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},u.prototype.hasCustomScheduler=function(){return this._customScheduler},u.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},u.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},u.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},u.prototype.fatalError=function(t,r){r?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},u.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(u.prototype.invokeLater=function(e,t,r){this._trampolineEnabled?l.call(this,e,t,r):this._schedule(function(){setTimeout(function(){e.call(t,r)},100)})},u.prototype.invoke=function(e,t,r){this._trampolineEnabled?c.call(this,e,t,r):this._schedule(function(){e.call(t,r)})},u.prototype.settlePromises=function(e){this._trampolineEnabled?h.call(this,e):this._schedule(function(){e._settlePromises()})}):(u.prototype.invokeLater=l,u.prototype.invoke=c,u.prototype.settlePromises=h),u.prototype._drainQueues=function(){p(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,p(this._lateQueue)},u.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},u.prototype._reset=function(){this._isTickUsed=!1},r.exports=u,r.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){var i=!1,o=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},a=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var l=r(o),c=new e(t);c._propagateFrom(this,1);var h=this._target();if(c._setBoundTo(l),l instanceof e){var p={promiseRejectionQueued:!1,promise:c,target:h,bindingPromise:l};h._then(t,s,void 0,c,p),l._then(a,u,void 0,c,p),c._setOnCancel(l)}else c._resolveCallback(h);return c},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,r){return e.resolve(r).bind(t)}}},{}],4:[function(e,t,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=n)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,r){"use strict";var n=Object.create;if(n){var i=n(null),o=n(null);i[" size"]=o[" size"]=0}t.exports=function(t){var r,n=e("./util"),i=n.canEvaluate;n.isIdentifier;function o(e,r){var i;if(null!=e&&(i=e[r]),"function"!=typeof i){var o="Object "+n.classString(e)+" has no method '"+n.toString(r)+"'";throw new t.TypeError(o)}return i}function s(e){return o(e,this.pop()).apply(e,this)}function a(e){return e[this]}function u(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(s,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=u;else if(i){var n=r(e);t=null!==n?n:a}else t=a;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){var o=e("./util"),s=o.tryCatch,a=o.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var r=e._cancellationParent;if(null==r||!r._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=r}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else if(void 0!==e)if("function"==typeof e){if(!t){var n=s(e).call(this._boundValue());n===a&&(this._attachExtraTrace(n.e),u.throwLater(n.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=e("./es5").keys,i=r.tryCatch,o=r.errorObj;return function(e,s,a){return function(u){var l=a._boundValue();e:for(var c=0;c<e.length;++c){var h=e[c];if(h===Error||null!=h&&h.prototype instanceof Error){if(u instanceof h)return i(s).call(l,u)}else if("function"==typeof h){var p=i(h).call(l,u);if(p===o)return p;if(p)return i(s).call(l,u)}else if(r.isObject(u)){for(var f=n(h),d=0;d<f.length;++d){var m=f[d];if(h[m]!=u[m])continue e}return i(s).call(l,u)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,r){"use strict";t.exports=function(e){var t=!1,r=[];function n(){this._trace=new n.CapturedTrace(i())}function i(){var e=r.length-1;if(e>=0)return r[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},n.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},n.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},n.CapturedTrace=null,n.create=function(){if(t)return new n},n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var r=e.prototype._pushContext,o=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,u=e.prototype._promiseCreated;n.deactivateLongStackTraces=function(){e.prototype._pushContext=r,e.prototype._popContext=o,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=u,t=!1},t=!0,e.prototype._pushContext=n.prototype._pushContext,e.prototype._popContext=n.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},n}},{}],9:[function(t,r,n){"use strict";r.exports=function(r,n){var i,o,s,a=r._getDomain,u=r._async,l=t("./errors").Warning,c=t("./util"),h=t("./es5"),p=c.canAttachTrace,f=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,m=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,g=null,v=null,y=!1,b=!(0==c.env("BLUEBIRD_DEBUG")),x=!(0==c.env("BLUEBIRD_WARNINGS")||!b&&!c.env("BLUEBIRD_WARNINGS")),_=!(0==c.env("BLUEBIRD_LONG_STACK_TRACES")||!b&&!c.env("BLUEBIRD_LONG_STACK_TRACES")),w=0!=c.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(x||!!c.env("BLUEBIRD_W_FORGOTTEN_RETURN"));r.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},r.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},r.prototype._notifyUnhandledRejectionIsHandled=function(){K("rejectionHandled",i,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},r.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),K("unhandledRejection",o,e,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},r.prototype._warn=function(e,t,r){return z(e,t,r||this)},r.onPossiblyUnhandledRejection=function(e){var t=a();o="function"==typeof e?null===t?e:c.domainBind(t,e):void 0},r.onUnhandledRejectionHandled=function(e){var t=a();i="function"==typeof e?null===t?e:c.domainBind(t,e):void 0};var k=function(){};r.longStackTraces=function(){if(u.haveItemsQueued()&&!Q.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Q.longStackTraces&&W()){var e=r.prototype._captureStackTrace,t=r.prototype._attachExtraTrace,i=r.prototype._dereferenceTrace;Q.longStackTraces=!0,k=function(){if(u.haveItemsQueued()&&!Q.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");r.prototype._captureStackTrace=e,r.prototype._attachExtraTrace=t,r.prototype._dereferenceTrace=i,n.deactivateLongStackTraces(),u.enableTrampoline(),Q.longStackTraces=!1},r.prototype._captureStackTrace=j,r.prototype._attachExtraTrace=N,r.prototype._dereferenceTrace=U,n.activateLongStackTraces(),u.disableTrampolineIfNecessary()}},r.hasLongStackTraces=function(){return Q.longStackTraces&&W()};var T=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return c.global.dispatchEvent(e),function(e,t){var r={detail:t,cancelable:!0};h.defineProperty(r,"promise",{value:t.promise}),h.defineProperty(r,"reason",{value:t.reason});var n=new CustomEvent(e.toLowerCase(),r);return!c.global.dispatchEvent(n)}}if("function"==typeof Event){e=new Event("CustomEvent");return c.global.dispatchEvent(e),function(e,t){var r=new Event(e.toLowerCase(),{cancelable:!0});return r.detail=t,h.defineProperty(r,"promise",{value:t.promise}),h.defineProperty(r,"reason",{value:t.reason}),!c.global.dispatchEvent(r)}}return(e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),c.global.dispatchEvent(e),function(e,t){var r=document.createEvent("CustomEvent");return r.initCustomEvent(e.toLowerCase(),!1,!0,t),!c.global.dispatchEvent(r)}}catch(e){}return function(){return!1}}(),E=c.isNode?function(){return e.emit.apply(e,arguments)}:c.global?function(e){var t="on"+e.toLowerCase(),r=c.global[t];return!!r&&(r.apply(c.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function S(e,t){return{promise:t}}var C={promiseCreated:S,promiseFulfilled:S,promiseRejected:S,promiseResolved:S,promiseCancelled:S,promiseChained:function(e,t,r){return{promise:t,child:r}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,r){return{reason:t,promise:r}},rejectionHandled:S},A=function(e){var t=!1;try{t=E.apply(null,arguments)}catch(e){u.throwLater(e),t=!0}var r=!1;try{r=T(e,C[e].apply(null,arguments))}catch(e){u.throwLater(e),r=!0}return r||t};function B(){return!1}function I(e,t,r){var n=this;try{e(t,r,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+c.toString(e));n._attachCancellationCallback(e)})}catch(e){return e}}function P(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?c.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function R(){return this._onCancelField}function M(e){this._onCancelField=e}function F(){this._cancellationParent=void 0,this._onCancelField=void 0}function D(e,t){if(0!=(1&t)){this._cancellationParent=e;var r=e._branchesRemainingToCancel;void 0===r&&(r=0),e._branchesRemainingToCancel=r+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}r.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?r.longStackTraces():!e.longStackTraces&&r.hasLongStackTraces()&&k()),"warnings"in e){var t=e.warnings;Q.warnings=!!t,w=Q.warnings,c.isObject(t)&&"wForgottenReturn"in t&&(w=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!Q.cancellation){if(u.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=F,r.prototype._propagateFrom=D,r.prototype._onCancel=R,r.prototype._setOnCancel=M,r.prototype._attachCancellationCallback=P,r.prototype._execute=I,L=D,Q.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!Q.monitoring?(Q.monitoring=!0,r.prototype._fireEvent=A):!e.monitoring&&Q.monitoring&&(Q.monitoring=!1,r.prototype._fireEvent=B)),r},r.prototype._fireEvent=B,r.prototype._execute=function(e,t,r){try{e(t,r)}catch(e){return e}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(e){},r.prototype._attachCancellationCallback=function(e){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._dereferenceTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(e,t){};var L=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function O(){var e=this._boundTo;return void 0!==e&&e instanceof r?e.isFulfilled()?e.value():void 0:e}function j(){this._trace=new Z(this._peekContext())}function N(e,t){if(p(e)){var r=this._trace;if(void 0!==r&&t&&(r=r._parent),void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=V(e);c.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n")),c.notEnumerableProp(e,"__stackCleaned__",!0)}}}function U(){this._trace=void 0}function z(e,t,n){if(Q.warnings){var i,o=new l(e);if(t)n._attachExtraTrace(o);else if(Q.longStackTraces&&(i=r._peekContext()))i.attachExtraTrace(o);else{var s=V(o);o.stack=s.message+"\n"+s.stack.join("\n")}A("warning",o)||G(o,"",!0)}}function $(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],i="    (No stack trace)"===n||g.test(n),o=i&&X(n);i&&!o&&(y&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function V(e){var t=e.stack,r=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||g.test(n))break}return r>0&&"SyntaxError"!=e.name&&(t=t.slice(r)),t}(e):["    (No stack trace)"],{message:r,stack:"SyntaxError"==e.name?t:$(t)}}function G(e,t,r){if("undefined"!=typeof console){var n;if(c.isObject(e)){var i=e.stack;n=t+v(i,e)}else n=t+String(e);"function"==typeof s?s(n,r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}}function K(e,t,r,n){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(n):t(r,n))}catch(e){u.throwLater(e)}"unhandledRejection"===e?A(e,r,n)||i||G(r,"Unhandled rejection "):A(e,n)}function q(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():c.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){if(e.length<41)return e;return e.substr(0,38)+"..."}(t)+">, no stack trace)"}function W(){return"function"==typeof J}var X=function(){return!1},H=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Y(e){var t=e.match(H);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function Z(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);J(this,Z),t>32&&this.uncycle()}c.inherits(Z,Error),n.CapturedTrace=Z,Z.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],r={},n=0,i=this;void 0!==i;++n)t.push(i),i=i._parent;for(n=(e=this._length=n)-1;n>=0;--n){var o=t[n].stack;void 0===r[o]&&(r[o]=n)}for(n=0;n<e;++n){var s=r[t[n].stack];if(void 0!==s&&s!==n){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var a=n>0?t[n-1]:this;s<e-1?(a._parent=t[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var u=a._length+1,l=n-2;l>=0;--l)t[l]._length=u,u++;return}}}},Z.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=V(e),r=t.message,n=[t.stack],i=this;void 0!==i;)n.push($(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],r=1;r<e.length;++r){for(var n=e[r],i=t.length-1,o=t[i],s=-1,a=n.length-1;a>=0;--a)if(n[a]===o){s=a;break}for(a=s;a>=0;--a){var u=n[a];if(t[i]!==u)break;t.pop(),i--}t=n}}(n),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(n),c.notEnumerableProp(e,"stack",function(e,t){for(var r=0;r<t.length-1;++r)t[r].push("From previous event:"),t[r]=t[r].join("\n");return r<t.length&&(t[r]=t[r].join("\n")),e+"\n"+t.join("\n")}(r,n)),c.notEnumerableProp(e,"__stackCleaned__",!0)}};var J=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():q(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,g=e,v=t;var r=Error.captureStackTrace;return X=function(e){return f.test(e)},function(e,t){Error.stackTraceLimit+=6,r(e,t),Error.stackTraceLimit-=6}}var n,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return g=/@/,v=t,y=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){n="stack"in e}return"stack"in i||!n||"number"!=typeof Error.stackTraceLimit?(v=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?q(t):t.toString()},null):(g=e,v=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(s=function(e){console.warn(e)},c.isNode&&e.stderr.isTTY?s=function(e,t){var r=t?"[33m":"[31m";console.warn(r+e+"[0m\n")}:c.isNode||"string"!=typeof(new Error).stack||(s=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var Q={warnings:x,longStackTraces:!1,cancellation:!1,monitoring:!1};return _&&r.longStackTraces(),{longStackTraces:function(){return Q.longStackTraces},warnings:function(){return Q.warnings},cancellation:function(){return Q.cancellation},monitoring:function(){return Q.monitoring},propagateFromFunction:function(){return L},boundValueFunction:function(){return O},checkForgottenReturns:function(e,t,r,n,i){if(void 0===e&&null!==t&&w){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&n._bitField))return;r&&(r+=" ");var o="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),u=$(a),l=u.length-1;l>=0;--l){var c=u[l];if(!d.test(c)){var h=c.match(m);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(u.length>0){var p=u[0];for(l=0;l<a.length;++l)if(a[l]===p){l>0&&(s="\n"+a[l-1]);break}}}var f="a promise was created in a "+r+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;n._warn(f,!0,t)}},setBounds:function(e,t){if(W()){for(var r,n,i=e.stack.split("\n"),o=t.stack.split("\n"),s=-1,a=-1,u=0;u<i.length;++u)if(l=Y(i[u])){r=l.fileName,s=l.line;break}for(u=0;u<o.length;++u){var l;if(l=Y(o[u])){n=l.fileName,a=l.line;break}}s<0||a<0||!r||!n||r!==n||s>=a||(X=function(e){if(f.test(e))return!0;var t=Y(e);return!!(t&&t.fileName===r&&s<=t.line&&t.line<=a)})}},warn:z,deprecated:function(e,t){var r=e+" is deprecated and will be removed in a future version.";return t&&(r+=" Use "+t+" instead."),z(r)},CapturedTrace:Z,fireDomEvent:T,fireGlobalEvent:E}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t,r){"use strict";t.exports=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(r){return r instanceof e&&r.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:r},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},e.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof e&&r.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:r},void 0);var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();return this.caught(r,function(){return n})}}},{}],11:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.reduce,n=e.all;function i(){return n(this)}e.prototype.each=function(e){return r(this,e,t,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,t,t)},e.each=function(e,n){return r(e,n,t,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=function(e,n){return r(e,n,t,t)}}},{}],12:[function(e,t,r){"use strict";var n,i,o=e("./es5"),s=o.freeze,a=e("./util"),u=a.inherits,l=a.notEnumerableProp;function c(e,t){function r(n){if(!(this instanceof r))return new r(n);l(this,"message","string"==typeof n?n:t),l(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(r,Error),r}var h=c("Warning","warning"),p=c("CancellationError","cancellation error"),f=c("TimeoutError","timeout error"),d=c("AggregateError","aggregate error");try{n=TypeError,i=RangeError}catch(e){n=c("TypeError","type error"),i=c("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(d.prototype[m[g]]=Array.prototype[m[g]]);o.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var v=0;function y(e){if(!(this instanceof y))return new y(e);l(this,"name","OperationalError"),l(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(l(this,"message",e.message),l(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}d.prototype.toString=function(){var e=Array(4*v+1).join(" "),t="\n"+e+"AggregateError of:\n";v++,e=Array(4*v+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(n=i.join("\n"))+"\n"}return v--,t},u(y,Error);var b=Error.__BluebirdErrorTypes__;b||(b=s({CancellationError:p,TimeoutError:f,OperationalError:y,RejectionError:y,AggregateError:d}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:n,RangeError:i,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(e,t,r){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);return t};t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}},keys:a,names:a,defineProperty:function(e,t,r){return e[t]=r.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return s}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)},e.filter=function(e,n,i){return r(e,n,i,t)}}},{}],15:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i=e("./util"),o=t.CancellationError,s=i.errorObj,a=e("./catch_filter")(n);function u(e,t,r){this.promise=e,this.type=t,this.handler=r,this.called=!1,this.cancelPromise=null}function l(e){this.finallyHandler=e}function c(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function h(){return f.call(this,this.promise._target()._settledValue())}function p(e){if(!c(this,e))return s.e=e,s}function f(e){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),e);if(u===n)return u;if(void 0!==u){i._setReturnedNonUndefined();var f=r(u,i);if(f instanceof t){if(null!=this.cancelPromise){if(f._isCancelled()){var d=new o("late cancellation observer");return i._attachExtraTrace(d),s.e=d,s}f.isPending()&&f._attachCancellationCallback(new l(this))}return f._then(h,p,void 0,this,void 0)}}}return i.isRejected()?(c(this),s.e=e,s):(c(this),e)}return u.prototype.isFinallyHandler=function(){return 0===this.type},l.prototype._resultCancelled=function(){c(this.finallyHandler)},t.prototype._passThrough=function(e,t,r,n){return"function"!=typeof e?this.then():this._then(r,n,void 0,new u(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,f,f)},t.prototype.tap=function(e){return this._passThrough(e,1,f)},t.prototype.tapCatch=function(e){var r=arguments.length;if(1===r)return this._passThrough(e,1,void 0,f);var n,o=new Array(r-1),s=0;for(n=0;n<r-1;++n){var u=arguments[n];if(!i.isObject(u))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(u)));o[s++]=u}o.length=s;var l=arguments[n];return this._passThrough(a(o,l,this),1,void 0,f)},u}},{"./catch_filter":7,"./util":36}],16:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o,s){var a=e("./errors").TypeError,u=e("./util"),l=u.errorObj,c=u.tryCatch,h=[];function p(e,r,i,o){if(s.cancellation()){var a=new t(n),u=this._finallyPromise=new t(n);this._promise=a.lastly(function(){return u}),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new t(n))._captureStackTrace()}this._stack=o,this._generatorFunction=e,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(p,o),p.prototype._isResolved=function(){return null===this._promise},p.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},p.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=c(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=c(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},p.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=c(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},p.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=c(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},p.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},p.prototype.promise=function(){return this._promise},p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},p.prototype._continue=function(e){var r=this._promise;if(e===l)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(e.e,!1);var n=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var o=i(n,this._promise);if(o instanceof t||null!==(o=function(e,r,n){for(var o=0;o<r.length;++o){n._pushContext();var s=c(r[o])(e);if(n._popContext(),s===l){n._pushContext();var a=t.reject(l.e);return n._popContext(),a}var u=i(s,n);if(u instanceof t)return u}return null}(o,this._yieldHandlers,this._promise))){var s=(o=o._target())._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&s)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler,n=p,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new n(void 0,void 0,r,i),s=o.promise();return o._generator=t,o._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new a("expecting a function but got "+u.classString(e));h.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new p(e,this),i=n.promise();return n._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o,s){var a=e("./util");a.canEvaluate,a.tryCatch,a.errorObj;t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var i=new r(n).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o,s){var a=t._getDomain,u=e("./util"),l=u.tryCatch,c=u.errorObj,h=t._async;function p(e,t,r,n){this.constructor$(e),this._promise._captureStackTrace();var i=a();this._callback=null===i?t:u.domainBind(i,t),this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}function f(e,r,i,o){if("function"!=typeof r)return n("expecting a function but got "+u.classString(r));var s=0;if(void 0!==i){if("object"!=typeof i||null===i)return t.reject(new TypeError("options argument must be an object but it is "+u.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(i.concurrency)));s=i.concurrency}return new p(e,r,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,o).promise()}u.inherits(p,r),p.prototype._asyncInit=function(){this._init$(void 0,-2)},p.prototype._init=function(){},p.prototype._promiseFulfilled=function(e,r){var n=this._values,o=this.length(),a=this._preservedValues,u=this._limit;if(r<0){if(n[r=-1*r-1]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return n[r]=e,this._queue.push(r),!1;null!==a&&(a[r]=e);var h=this._promise,p=this._callback,f=h._boundValue();h._pushContext();var d=l(p).call(f,e,r,o),m=h._popContext();if(s.checkForgottenReturns(d,m,null!==a?"Promise.filter":"Promise.map",h),d===c)return this._reject(d.e),!0;var g=i(d,this._promise);if(g instanceof t){var v=(g=g._target())._bitField;if(0==(50397184&v))return u>=1&&this._inFlight++,n[r]=g,g._proxy(this,-1*(r+1)),!1;if(0==(33554432&v))return 0!=(16777216&v)?(this._reject(g._reason()),!0):(this._cancel(),!0);d=g._value()}n[r]=d}return++this._totalResolved>=o&&(null!==a?this._filter(n,a):this._resolve(n),!0)},p.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,r=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}},p.prototype._filter=function(e,t){for(var r=t.length,n=new Array(r),i=0,o=0;o<r;++o)e[o]&&(n[i++]=t[o]);n.length=i,this._resolve(n)},p.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return f(this,e,t,null)},t.map=function(e,t,r,n){return f(e,t,r,n)}}},{"./util":36}],19:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var n=new t(r);n._captureStackTrace(),n._pushContext();var i=a(e).apply(this,arguments),s=n._popContext();return o.checkForgottenReturns(i,s,"Promise.method",n),n._resolveFromSyncValue(i),n}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+s.classString(e));var n,u=new t(r);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],c=arguments[2];n=s.isArray(l)?a(e).apply(c,l):a(e).call(c,l)}else n=a(e)();var h=u._popContext();return o.checkForgottenReturns(n,h,"Promise.try",u),u._resolveFromSyncValue(n),u},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,r){"use strict";var n=e("./util"),i=n.maybeWrapAsError,o=e("./errors").OperationalError,s=e("./es5");var a=/^(?:name|message|stack|cause)$/;function u(e){var t;if(function(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}(e)){(t=new o(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=s.keys(e),i=0;i<r.length;++i){var u=r[i];a.test(u)||(t[u]=e[u])}return t}return n.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(r,n){if(null!==e){if(r){var o=u(i(r));e._attachExtraTrace(o),e._reject(o)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(n);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=t._async,i=r.tryCatch,o=r.errorObj;function s(e,t){if(!r.isArray(e))return a.call(this,e,t);var s=i(t).apply(this._boundValue(),[null].concat(e));s===o&&n.throwLater(s.e)}function a(e,t){var r=this._boundValue(),s=void 0===e?i(t).call(r,null):i(t).call(r,null,e);s===o&&n.throwLater(s.e)}function u(e,t){if(!e){var r=new Error(e+"");r.cause=e,e=r}var s=i(t).call(this._boundValue(),e);s===o&&n.throwLater(s.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var r=a;void 0!==t&&Object(t).spread&&(r=s),this._then(r,u,void 0,this,e)}return this}}},{"./util":36}],22:[function(t,r,n){"use strict";r.exports=function(){var n=function(){return new d("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new B.PromiseInspection(this._target())},o=function(e){return B.reject(new d(e))};function s(){}var a,u={},l=t("./util");a=l.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},l.notEnumerableProp(B,"_getDomain",a);var c=t("./es5"),h=t("./async"),p=new h;c.defineProperty(B,"_async",{value:p});var f=t("./errors"),d=B.TypeError=f.TypeError;B.RangeError=f.RangeError;var m=B.CancellationError=f.CancellationError;B.TimeoutError=f.TimeoutError,B.OperationalError=f.OperationalError,B.RejectionError=f.OperationalError,B.AggregateError=f.AggregateError;var g=function(){},v={},y={},b=t("./thenables")(B,g),x=t("./promise_array")(B,g,b,o,s),_=t("./context")(B),w=_.create,k=t("./debuggability")(B,_),T=(k.CapturedTrace,t("./finally")(B,b,y)),E=t("./catch_filter")(y),S=t("./nodeback"),C=l.errorObj,A=l.tryCatch;function B(e){e!==g&&function(e,t){if(null==e||e.constructor!==B)throw new d("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new d("expecting a function but got "+l.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function I(e){this.promise._resolveCallback(e)}function P(e){this.promise._rejectCallback(e,!1)}function R(e){var t=new B(g);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return B.prototype.toString=function(){return"[object Promise]"},B.prototype.caught=B.prototype.catch=function(e){var t=arguments.length;if(t>1){var r,n=new Array(t-1),i=0;for(r=0;r<t-1;++r){var s=arguments[r];if(!l.isObject(s))return o("Catch statement predicate: expecting an object but got "+l.classString(s));n[i++]=s}return n.length=i,e=arguments[r],this.then(void 0,E(n,e,this))}return this.then(void 0,e)},B.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},B.prototype.then=function(e,t){if(k.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var r=".then() only accepts functions but was passed: "+l.classString(e);arguments.length>1&&(r+=", "+l.classString(t)),this._warn(r)}return this._then(e,t,void 0,void 0,void 0)},B.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},B.prototype.spread=function(e){return"function"!=typeof e?o("expecting a function but got "+l.classString(e)):this.all()._then(e,void 0,void 0,v,void 0)},B.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},B.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new x(this).promise()},B.prototype.error=function(e){return this.caught(l.originatesFromRejection,e)},B.getNewLibraryCopy=r.exports,B.is=function(e){return e instanceof B},B.fromNode=B.fromCallback=function(e){var t=new B(g);t._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=A(e)(S(t,r));return n===C&&t._rejectCallback(n.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},B.all=function(e){return new x(e).promise()},B.cast=function(e){var t=b(e);return t instanceof B||((t=new B(g))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},B.resolve=B.fulfilled=B.cast,B.reject=B.rejected=function(e){var t=new B(g);return t._captureStackTrace(),t._rejectCallback(e,!0),t},B.setScheduler=function(e){if("function"!=typeof e)throw new d("expecting a function but got "+l.classString(e));return p.setScheduler(e)},B.prototype._then=function(e,t,r,n,i){var o=void 0!==i,s=o?i:new B(g),u=this._target(),c=u._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&c)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var h=a();if(0!=(50397184&c)){var f,d,v=u._settlePromiseCtx;0!=(33554432&c)?(d=u._rejectionHandler0,f=e):0!=(16777216&c)?(d=u._fulfillmentHandler0,f=t,u._unsetRejectionIsUnhandled()):(v=u._settlePromiseLateCancellationObserver,d=new m("late cancellation observer"),u._attachExtraTrace(d),f=t),p.invoke(v,u,{handler:null===h?f:"function"==typeof f&&l.domainBind(h,f),promise:s,receiver:n,value:d})}else u._addCallbacks(e,t,s,n,h);return s},B.prototype._length=function(){return 65535&this._bitField},B.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},B.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},B.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},B.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},B.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},B.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},B.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},B.prototype._isFinal=function(){return(4194304&this._bitField)>0},B.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},B.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},B.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},B.prototype._setAsyncGuaranteed=function(){p.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},B.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==u)return void 0===t&&this._isBound()?this._boundValue():t},B.prototype._promiseAt=function(e){return this[4*e-4+2]},B.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},B.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},B.prototype._boundValue=function(){},B.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,r=e._rejectionHandler0,n=e._promise0,i=e._receiverAt(0);void 0===i&&(i=u),this._addCallbacks(t,r,n,i,null)},B.prototype._migrateCallbackAt=function(e,t){var r=e._fulfillmentHandlerAt(t),n=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=u),this._addCallbacks(r,n,i,o,null)},B.prototype._addCallbacks=function(e,t,r,n,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=r,this._receiver0=n,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:l.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:l.domainBind(i,t));else{var s=4*o-4;this[s+2]=r,this[s+3]=n,"function"==typeof e&&(this[s+0]=null===i?e:l.domainBind(i,e)),"function"==typeof t&&(this[s+1]=null===i?t:l.domainBind(i,t))}return this._setLength(o+1),o},B.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},B.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(n(),!1);var r=b(e,this);if(!(r instanceof B))return this._fulfill(e);t&&this._propagateFrom(r,2);var i=r._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var s=this._length();s>0&&i._migrateCallback0(this);for(var a=1;a<s;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var u=new m("late cancellation observer");i._attachExtraTrace(u),this._reject(u)}}else this._reject(n())}},B.prototype._rejectCallback=function(e,t,r){var n=l.ensureErrorObject(e),i=n===e;if(!i&&!r&&k.warnings()){var o="a promise was rejected with a non-error: "+l.classString(e);this._warn(o,!0)}this._attachExtraTrace(n,!!t&&i),this._reject(e)},B.prototype._resolveFromExecutor=function(e){if(e!==g){var t=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,r)});r=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0)}},B.prototype._settlePromiseFromHandler=function(e,t,r,n){var i=n._bitField;if(0==(65536&i)){var o;n._pushContext(),t===v?r&&"number"==typeof r.length?o=A(e).apply(this._boundValue(),r):(o=C).e=new d("cannot .spread() a non-array: "+l.classString(r)):o=A(e).call(t,r);var s=n._popContext();0==(65536&(i=n._bitField))&&(o===y?n._reject(r):o===C?n._rejectCallback(o.e,!1):(k.checkForgottenReturns(o,s,"",n,this),n._resolveCallback(o)))}},B.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},B.prototype._followee=function(){return this._rejectionHandler0},B.prototype._setFollowee=function(e){this._rejectionHandler0=e},B.prototype._settlePromise=function(e,t,r,n){var o=e instanceof B,a=this._bitField,u=0!=(134217728&a);0!=(65536&a)?(o&&e._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=e,A(t).call(r,n)===C&&e._reject(C.e)):t===i?e._fulfill(i.call(r)):r instanceof s?r._promiseCancelled(e):o||e instanceof x?e._cancel():r.cancel()):"function"==typeof t?o?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,n,e)):t.call(r,n,e):r instanceof s?r._isResolved()||(0!=(33554432&a)?r._promiseFulfilled(n,e):r._promiseRejected(n,e)):o&&(u&&e._setAsyncGuaranteed(),0!=(33554432&a)?e._fulfill(n):e._reject(n))},B.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,r=e.promise,n=e.receiver,i=e.value;"function"==typeof t?r instanceof B?this._settlePromiseFromHandler(t,n,i,r):t.call(n,i,r):r instanceof B&&r._reject(i)},B.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},B.prototype._settlePromise0=function(e,t,r){var n=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,i,t)},B.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},B.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var r=n();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():p.settlePromises(this),this._dereferenceTrace())}},B.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return p.fatalError(e,l.isNode);(65535&t)>0?p.settlePromises(this):this._ensurePossibleRejectionHandled()}},B.prototype._fulfillPromises=function(e,t){for(var r=1;r<e;r++){var n=this._fulfillmentHandlerAt(r),i=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,o,t)}},B.prototype._rejectPromises=function(e,t){for(var r=1;r<e;r++){var n=this._rejectionHandlerAt(r),i=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,o,t)}},B.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,e),this._rejectPromises(t,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},B.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},B.defer=B.pending=function(){return k.deprecated("Promise.defer","new Promise"),{promise:new B(g),resolve:I,reject:P}},l.notEnumerableProp(B,"_makeSelfResolutionError",n),t("./method")(B,g,b,o,k),t("./bind")(B,g,b,k),t("./cancel")(B,x,o,k),t("./direct_resolve")(B),t("./synchronous_inspection")(B),t("./join")(B,x,b,g,p,a),B.Promise=B,B.version="3.5.3",t("./map.js")(B,x,o,b,g,k),t("./call_get.js")(B),t("./using.js")(B,o,b,w,g,k),t("./timers.js")(B,g,k),t("./generators.js")(B,o,g,b,s,k),t("./nodeify.js")(B),t("./promisify.js")(B,g),t("./props.js")(B,x,b,o),t("./race.js")(B,g,b,o),t("./reduce.js")(B,x,o,b,g,k),t("./settle.js")(B,x,k),t("./some.js")(B,x,o),t("./filter.js")(B,g),t("./each.js")(B,g),t("./any.js")(B),l.toFastProperties(B),l.toFastProperties(B.prototype),R({a:1}),R({b:2}),R({c:3}),R(1),R(function(){}),R(void 0),R(!1),R(new B(g)),k.setBounds(h.firstLineError,l.lastLineError),B}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o){var s=e("./util");s.isArray;function a(e){var n=this._promise=new t(r);e instanceof t&&n._propagateFrom(e,3),n._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(r,o){var a=n(this._values,this._promise);if(a instanceof t){var u=(a=a._target())._bitField;if(this._values=a,0==(50397184&u))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,o);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var l=i("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(l,!1)}},a.prototype._iterate=function(e){var r=this.getActualLength(e.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var i=this._promise,o=!1,s=null,a=0;a<r;++a){var u=n(e[a],i);s=u instanceof t?(u=u._target())._bitField:null,o?null!==s&&u.suppressUnhandledRejections():null!==s?0==(50397184&s)?(u._proxy(this,a),this._values[a]=u):o=0!=(33554432&s)?this._promiseFulfilled(u._value(),a):0!=(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(u,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var r=0;r<e.length;++r)e[r]instanceof t&&e[r].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,r){"use strict";t.exports=function(t,r){var n={},i=e("./util"),o=e("./nodeback"),s=i.withAppended,a=i.maybeWrapAsError,u=i.canEvaluate,l=e("./errors").TypeError,c={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),p=function(e){return i.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function f(e){return!h.test(e)}function d(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function m(e,t,r){var n=i.getDataPropertyOrDefault(e,t+r,c);return!!n&&d(n)}function g(e,t,r,n){for(var o=i.inheritedDataKeys(e),s=[],a=0;a<o.length;++a){var u=o[a],c=e[u],h=n===p||p(u,c,e);"function"!=typeof c||d(c)||m(e,u,t)||!n(u,c,e,h)||s.push(u,c)}return function(e,t,r){for(var n=0;n<e.length;n+=2){var i=e[n];if(r.test(i))for(var o=i.replace(r,""),s=0;s<e.length;s+=2)if(e[s]===o)throw new l("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(s,t,r),s}var v,y=function(e){return e.replace(/([$])/,"\\$")};var b=u?v:function(e,u,l,c,h,p){var f=function(){return this}(),d=e;function m(){var i=u;u===n&&(i=this);var l=new t(r);l._captureStackTrace();var c="string"==typeof d&&this!==f?this[d]:e,h=o(l,p);try{c.apply(i,s(arguments,h))}catch(e){l._rejectCallback(a(e),!0,!0)}return l._isFateSealed()||l._setAsyncGuaranteed(),l}return"string"==typeof d&&(e=c),i.notEnumerableProp(m,"__isPromisified__",!0),m};function x(e,t,r,o,s){for(var a=new RegExp(y(t)+"$"),u=g(e,t,a,r),l=0,c=u.length;l<c;l+=2){var h=u[l],p=u[l+1],f=h+t;if(o===b)e[f]=b(h,n,h,p,t,s);else{var d=o(p,function(){return b(h,n,h,p,t,s)});i.notEnumerableProp(d,"__isPromisified__",!0),e[f]=d}}return i.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new l("expecting a function but got "+i.classString(e));if(d(e))return e;var r=function(e,t,r){return b(e,t,void 0,e,null,r)}(e,void 0===(t=Object(t)).context?n:t.context,!!t.multiArgs);return i.copyDescriptors(e,r,f),r},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new l("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var r=!!(t=Object(t)).multiArgs,n=t.suffix;"string"!=typeof n&&(n="Async");var o=t.filter;"function"!=typeof o&&(o=p);var s=t.promisifier;if("function"!=typeof s&&(s=b),!i.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=i.inheritedDataKeys(e),u=0;u<a.length;++u){var c=e[a[u]];"constructor"!==a[u]&&i.isClass(c)&&(x(c.prototype,n,o,s,r),x(c,n,o,s,r))}return x(e,n,o,s,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){var o,s=e("./util"),a=s.isObject,u=e("./es5");"function"==typeof Map&&(o=Map);var l=function(){var e=0,t=0;function r(r,n){this[e]=r,this[e+t]=n,e++}return function(n){t=n.size,e=0;var i=new Array(2*n.size);return n.forEach(r,i),i}}();function c(e){var t,r=!1;if(void 0!==o&&e instanceof o)t=l(e),r=!0;else{var n=u.keys(e),i=n.length;t=new Array(2*i);for(var s=0;s<i;++s){var a=n[s];t[s]=e[a],t[s+i]=a}}this.constructor$(t),this._isMap=r,this._init$(void 0,r?-6:-3)}function h(e){var r,o=n(e);return a(o)?(r=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new c(o).promise(),o instanceof t&&r._propagateFrom(o,2),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(c,r),c.prototype._init=function(){},c.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var r;if(this._isMap)r=function(e){for(var t=new o,r=e.length/2|0,n=0;n<r;++n){var i=e[r+n],s=e[n];t.set(i,s)}return t}(this._values);else{r={};for(var n=this.length(),i=0,s=this.length();i<s;++i)r[this._values[i+n]]=this._values[i]}return this._resolve(r),!0}return!1},c.prototype.shouldCopyValues=function(){return!1},c.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return h(this)},t.props=function(e){return h(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,r){"use strict";function n(e){this._capacity=e,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(e){return this._capacity<e},n.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},n.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=r,this._length=n},n.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,r,n,i){for(var o=0;o<i;++o)r[o+n]=e[o+t],e[o+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=n},{}],27:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){var o=e("./util"),s=function(e){return e.then(function(t){return a(t,e)})};function a(e,a){var u=n(e);if(u instanceof t)return s(u);if(null===(e=o.asArray(e)))return i("expecting an array or an iterable object but got "+o.classString(e));var l=new t(r);void 0!==a&&l._propagateFrom(a,3);for(var c=l._fulfill,h=l._reject,p=0,f=e.length;p<f;++p){var d=e[p];(void 0!==d||p in e)&&t.cast(d)._then(c,h,void 0,l,null)}return l}t.race=function(e){return a(e,void 0)},t.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o,s){var a=t._getDomain,u=e("./util"),l=u.tryCatch;function c(e,r,n,i){this.constructor$(e);var s=a();this._fn=null===s?r:u.domainBind(s,r),void 0!==n&&(n=t.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function h(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function p(e,t,r,i){return"function"!=typeof t?n("expecting a function but got "+u.classString(t)):new c(e,t,r,i).promise()}function f(e){this.accum=e,this.array._gotAccum(e);var r=i(this.value,this.array._promise);return r instanceof t?(this.array._currentCancellable=r,r._then(d,void 0,void 0,this,void 0)):d.call(this,r)}function d(e){var r,n=this.array,i=n._promise,o=l(n._fn);i._pushContext(),(r=void 0!==n._eachValues?o.call(i._boundValue(),e,this.index,this.length):o.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=r);var a=i._popContext();return s.checkForgottenReturns(r,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",i),r}u.inherits(c,r),c.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},c.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},c.prototype._init=function(){},c.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},c.prototype.shouldCopyValues=function(){return!1},c.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},c.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},c.prototype._iterate=function(e){var r,n;this._values=e;var i=e.length;if(void 0!==this._initialValue?(r=this._initialValue,n=0):(r=t.resolve(e[0]),n=1),this._currentCancellable=r,!r.isRejected())for(;n<i;++n){var o={accum:null,value:e[n],index:n,length:i,array:this};r=r._then(f,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(h,h,void 0,r,this)},t.prototype.reduce=function(e,t){return p(this,e,t,null)},t.reduce=function(e,t,r,n){return p(e,t,r,n)}}},{"./util":36}],29:[function(t,r,o){"use strict";var s,a=t("./util"),u=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var l=n.setImmediate,c=e.nextTick;s=a.isRecentNode?function(e){l.call(n,e)}:function(t){c.call(e,t)}}else if("function"==typeof u&&"function"==typeof u.resolve){var h=u.resolve();s=function(e){h.then(e)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==i?function(e){i(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var e=document.createElement("div"),t={attributes:!0},r=!1,n=document.createElement("div");new MutationObserver(function(){e.classList.toggle("foo"),r=!1}).observe(n,t);return function(i){var o=new MutationObserver(function(){o.disconnect(),i()});o.observe(e,t),r||(r=!0,n.classList.toggle("foo"))}}();r.exports=s},{"./util":36}],30:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i=t.PromiseInspection;function o(e){this.constructor$(e)}e("./util").inherits(o,r),o.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var r=new i;return r._bitField=33554432,r._settledValueField=e,this._promiseResolved(t,r)},o.prototype._promiseRejected=function(e,t){var r=new i;return r._bitField=16777216,r._settledValueField=e,this._promiseResolved(t,r)},t.settle=function(e){return n.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i=e("./util"),o=e("./errors").RangeError,s=e("./errors").AggregateError,a=i.isArray,u={};function l(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function c(e,t){if((0|t)!==t||t<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new l(e),i=r.promise();return r.setHowMany(t),r.init(),i}i.inherits(l,r),l.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},l.prototype.init=function(){this._initialized=!0,this._init()},l.prototype.setUnwrap=function(){this._unwrap=!0},l.prototype.howMany=function(){return this._howMany},l.prototype.setHowMany=function(e){this._howMany=e},l.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},l.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},l.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},l.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==u&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},l.prototype._fulfilled=function(){return this._totalResolved},l.prototype._rejected=function(){return this._values.length-this.length()},l.prototype._addRejected=function(e){this._values.push(e)},l.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},l.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new o(t)},l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return c(e,t)},t.prototype.some=function(e){return c(this,e)},t._SomePromiseArray=l}},{"./errors":12,"./util":36}],32:[function(e,t,r){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return r.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,r){"use strict";t.exports=function(t,r){var n=e("./util"),i=n.errorObj,o=n.isObject;var s={}.hasOwnProperty;return function(e,a){if(o(e)){if(e instanceof t)return e;var u=function(e){try{return function(e){return e.then}(e)}catch(e){return i.e=e,i}}(e);if(u===i){a&&a._pushContext();var l=t.reject(u.e);return a&&a._popContext(),l}if("function"==typeof u)return function(e){try{return s.call(e,"_promise0")}catch(e){return!1}}(e)?(l=new t(r),e._then(l._fulfill,l._reject,void 0,l,null),l):function(e,o,s){var a=new t(r),u=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var l=!0,c=n.tryCatch(o).call(e,function(e){a&&(a._resolveCallback(e),a=null)},function(e){a&&(a._rejectCallback(e,l,!0),a=null)});return l=!1,a&&c===i&&(a._rejectCallback(c.e,!0,!0),a=null),u}(e,u,a)}return e}}},{"./util":36}],34:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i=e("./util"),o=t.TimeoutError;function s(e){this.handle=e}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return u(+this).thenReturn(e)},u=t.delay=function(e,i){var o,u;return void 0!==i?(o=t.resolve(i)._then(a,null,null,e,void 0),n.cancellation()&&i instanceof t&&o._setOnCancel(i)):(o=new t(r),u=setTimeout(function(){o._fulfill()},+e),n.cancellation()&&o._setOnCancel(new s(u)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};t.prototype.delay=function(e){return u(e,this)};function l(e){return clearTimeout(this.handle),e}function c(e){throw clearTimeout(this.handle),e}t.prototype.timeout=function(e,t){var r,a;e=+e;var u=new s(setTimeout(function(){r.isPending()&&function(e,t,r){var n;n="string"!=typeof t?t instanceof Error?t:new o("operation timed out"):new o(t),i.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._reject(n),null!=r&&r.cancel()}(r,t,a)},e));return n.cancellation()?(a=this.then(),(r=a._then(l,c,void 0,u,void 0))._setOnCancel(u)):r=this._then(l,c,void 0,u,void 0),r}}},{"./util":36}],35:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,o,s){var a=e("./util"),u=e("./errors").TypeError,l=e("./util").inherits,c=a.errorObj,h=a.tryCatch,p={};function f(e){setTimeout(function(){throw e},0)}function d(e,r){var i=0,s=e.length,a=new t(o);return function o(){if(i>=s)return a._fulfill();var u=function(e){var t=n(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[i++]);if(u instanceof t&&u._isDisposable()){try{u=n(u._getDisposer().tryDispose(r),e.promise)}catch(e){return f(e)}if(u instanceof t)return u._then(o,f,null,null,null)}o()}(),a}function m(e,t,r){this._data=e,this._promise=t,this._context=r}function g(e,t,r){this.constructor$(e,t,r)}function v(e){return m.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function y(e){this.length=e,this.promise=null,this[e-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():p},m.prototype.tryDispose=function(e){var t=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=t!==p?this.doDispose(t,e):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},m.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},l(g,m),g.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},y.prototype._resultCancelled=function(){for(var e=this.length,r=0;r<e;++r){var n=this[r];n instanceof t&&n.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return r("you must pass at least 2 arguments to Promise.using");var i,o=arguments[e-1];if("function"!=typeof o)return r("expecting a function but got "+a.classString(o));var u=!0;2===e&&Array.isArray(arguments[0])?(e=(i=arguments[0]).length,u=!1):(i=arguments,e--);for(var l=new y(e),p=0;p<e;++p){var f=i[p];if(m.isDisposer(f)){var g=f;(f=f.promise())._setDisposable(g)}else{var b=n(f);b instanceof t&&(f=b._then(v,null,null,{resources:l,index:p},void 0))}l[p]=f}var x=new Array(l.length);for(p=0;p<x.length;++p)x[p]=t.resolve(l[p]).reflect();var _=t.all(x).then(function(e){for(var t=0;t<e.length;++t){var r=e[t];if(r.isRejected())return c.e=r.error(),c;if(!r.isFulfilled())return void _.cancel();e[t]=r.value()}w._pushContext(),o=h(o);var n=u?o.apply(void 0,e):o(e),i=w._popContext();return s.checkForgottenReturns(n,i,"Promise.using",w),n}),w=_.lastly(function(){var e=new t.PromiseInspection(_);return d(l,e)});return l.promise=w,w._setOnCancel(l),w},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new g(e,this,i());throw new u}}},{"./errors":12,"./util":36}],36:[function(t,r,i){"use strict";var o=t("./es5"),s="undefined"==typeof navigator,a={e:{}},u,l="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null;function c(){try{var e=u;return u=null,e.apply(this,arguments)}catch(e){return a.e=e,a}}function h(e){return u=e,c}var p=function(e,t){var r={}.hasOwnProperty;function n(){for(var n in this.constructor=e,this.constructor$=t,t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}return n.prototype=t.prototype,e.prototype=new n,e.prototype};function f(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function d(e){return"function"==typeof e||"object"==typeof e&&null!==e}function m(e){return f(e)?new Error(C(e)):e}function g(e,t){var r,n=e.length,i=new Array(n+1);for(r=0;r<n;++r)i[r]=e[r];return i[r]=t,i}function v(e,t,r){if(!o.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function y(e,t,r){if(f(e))return e;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(e,t,n),e}function b(e){throw e}var x=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1};if(o.isES5){var r=Object.getOwnPropertyNames;return function(e){for(var n=[],i=Object.create(null);null!=e&&!t(e);){var s;try{s=r(e)}catch(e){return n}for(var a=0;a<s.length;++a){var u=s[a];if(!i[u]){i[u]=!0;var l=Object.getOwnPropertyDescriptor(e,u);null!=l&&null==l.get&&null==l.set&&n.push(u)}}e=o.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var i=[];e:for(var o in r)if(n.call(r,o))i.push(o);else{for(var s=0;s<e.length;++s)if(n.call(e[s],o))continue e;i.push(o)}return i}}(),_=/this\s*\.\s*\S+\s*=/;function w(e){try{if("function"==typeof e){var t=o.names(e.prototype),r=o.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=_.test(e+"")&&o.names(e).length>0;if(r||n||i)return!0}return!1}catch(e){return!1}}function k(e){function t(){}t.prototype=e;var r=new t;function n(){return typeof r.foo}return n(),n(),e}var T=/^[a-z$_][a-z$_0-9]*$/i;function E(e){return T.test(e)}function S(e,t,r){for(var n=new Array(e),i=0;i<e;++i)n[i]=t+i+r;return n}function C(e){try{return e+""}catch(e){return"[no string representation]"}}function A(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function B(e){try{y(e,"isOperational",!0)}catch(e){}}function I(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function P(e){return A(e)&&o.propertyIsWritable(e,"stack")}var R="stack"in new Error?function(e){return P(e)?e:new Error(C(e))}:function(e){if(P(e))return e;try{throw new Error(C(e))}catch(e){return e}};function M(e){return{}.toString.call(e)}function F(e,t,r){for(var n=o.names(e),i=0;i<n.length;++i){var s=n[i];if(r(s))try{o.defineProperty(t,s,o.getDescriptor(e,s))}catch(e){}}}var D=function(e){return o.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var L="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,r=[],n=e[Symbol.iterator]();!(t=n.next()).done;)r.push(t.value);return r};D=function(e){return o.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?L(e):null}}var O=void 0!==e&&"[object process]"===M(e).toLowerCase(),j=void 0!==e&&void 0!==e.env;function N(t){return j?e.env[t]:void 0}function U(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function z(e,t){return e.bind(t)}var $={isClass:w,isIdentifier:E,inheritedDataKeys:x,getDataPropertyOrDefault:v,thrower:b,isArray:o.isArray,asArray:D,notEnumerableProp:y,isPrimitive:f,isObject:d,isError:A,canEvaluate:s,errorObj:a,tryCatch:h,inherits:p,withAppended:g,maybeWrapAsError:m,toFastProperties:k,filledRange:S,toString:C,canAttachTrace:P,ensureErrorObject:R,originatesFromRejection:I,markAsOriginatingFromRejection:B,classString:M,copyDescriptors:F,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:O,hasEnvVariables:j,env:N,global:l,getNativePromise:U,domainBind:z},V;$.isRecentNode=$.isNode&&(V=e.versions.node.split(".").map(Number),0===V[0]&&V[1]>10||V[0]>0),$.isNode&&$.toFastProperties(e);try{throw new Error}catch(e){$.lastLineError=e}r.exports=$},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{_process:200,timers:254}],4:[function(e,t,r){},{}],5:[function(e,t,r){(function(r){var n=e("tty"),i=e("./lib/encode"),o=e("stream").Stream,s=t.exports=function(){var e=null;function t(t){if(e)throw new Error("multiple inputs specified");e=t}var i=null;function o(e){if(i)throw new Error("multiple outputs specified");i=e}for(var s=0;s<arguments.length;s++){var u=arguments[s];u&&(u.readable?t(u):(u.stdin||u.input)&&t(u.stdin||u.input),u.writable?o(u):(u.stdout||u.output)&&o(u.stdout||u.output))}e&&"number"==typeof e.fd&&n.isatty(e.fd)&&(r.stdin.setRawMode?r.stdin.setRawMode(!0):n.setRawMode(!0));var l=new a;return e&&e.pipe(l),i&&l.pipe(i),l.once("^C",r.exit),l.once("end",function(){e&&("number"==typeof e.fd&&n.isatty(e.fd)&&(r.stdin.setRawMode?r.stdin.setRawMode(!1):n.setRawMode(!1)),e.destroy())}),l},a=s.Charm=function(){this.writable=!0,this.readable=!0,this.pending=[]};a.prototype=new o,a.prototype.write=function(e){if(this.pending.length){for(var t=u(e),r=!1,n=0;n<t.length;n++)for(var i=0;i<this.pending.length;i++){if((0,this.pending[i])(t[n])){r=!0,this.pending.splice(i,1);break}}if(r)return}return 1===e.length&&(3===e[0]&&this.emit("^C"),4===e[0]&&this.emit("^D")),this.emit("data",e),this},a.prototype.destroy=function(){this.end()},a.prototype.end=function(e){e&&this.write(e),this.emit("end")},a.prototype.reset=function(e){return this.write(i("c")),this},a.prototype.position=function(e,t){if("function"==typeof e){var r=e;this.pending.push(function(e){if(27===e[0]&&e[1]===i.ord("[")&&e[e.length-1]===i.ord("R")){var t=e.toString().slice(2,-1).split(";").map(Number);return r(t[1],t[0]),!0}}),this.write(i("[6n"))}else this.write(i("["+Math.floor(t)+";"+Math.floor(e)+"f"));return this},a.prototype.move=function(e,t){return t<0?this.up(-t):t>0&&this.down(t),e>0?this.right(e):e<0&&this.left(-e),this},a.prototype.up=function(e){return void 0===e&&(e=1),this.write(i("["+Math.floor(e)+"A")),this},a.prototype.down=function(e){return void 0===e&&(e=1),this.write(i("["+Math.floor(e)+"B")),this},a.prototype.right=function(e){return void 0===e&&(e=1),this.write(i("["+Math.floor(e)+"C")),this},a.prototype.left=function(e){return void 0===e&&(e=1),this.write(i("["+Math.floor(e)+"D")),this},a.prototype.column=function(e){return this.write(i("["+Math.floor(e)+"G")),this},a.prototype.push=function(e){return this.write(i(e?"7":"[s")),this},a.prototype.pop=function(e){return this.write(i(e?"8":"[u")),this},a.prototype.erase=function(e){return"end"===e||"$"===e?this.write(i("[K")):"start"===e||"^"===e?this.write(i("[1K")):"line"===e?this.write(i("[2K")):"down"===e?this.write(i("[J")):"up"===e?this.write(i("[1J")):"screen"===e?this.write(i("[1J")):this.emit("error",new Error("Unknown erase type: "+e)),this},a.prototype.display=function(e){var t={reset:0,bright:1,dim:2,underscore:4,blink:5,reverse:7,hidden:8}[e];return void 0===t&&this.emit("error",new Error("Unknown attribute: "+e)),this.write(i("["+t+"m")),this},a.prototype.foreground=function(e){if("number"==typeof e)(e<0||e>=256)&&this.emit("error",new Error("Color out of range: "+e)),this.write(i("[38;5;"+e+"m"));else{var t={black:30,red:31,green:32,yellow:33,blue:34,magenta:35,cyan:36,white:37}[e.toLowerCase()];t||this.emit("error",new Error("Unknown color: "+e)),this.write(i("["+t+"m"))}return this},a.prototype.background=function(e){if("number"==typeof e)(e<0||e>=256)&&this.emit("error",new Error("Color out of range: "+e)),this.write(i("[48;5;"+e+"m"));else{var t={black:40,red:41,green:42,yellow:43,blue:44,magenta:45,cyan:46,white:47}[e.toLowerCase()];t||this.emit("error",new Error("Unknown color: "+e)),this.write(i("["+t+"m"))}return this},a.prototype.cursor=function(e){return this.write(i(e?"[?25h":"[?25l")),this};var u=s.extractCodes=function(e){for(var t=[],r=-1,n=0;n<e.length;n++)27===e[n]?(r>=0&&t.push(e.slice(r,n)),r=n):r>=0&&n===e.length-1&&t.push(e.slice(r));return t}}).call(this,e("_process"))},{"./lib/encode":6,_process:200,stream:251,tty:255}],6:[function(e,t,r){(function(e){var r=(t.exports=function(t){return new e([27].concat(function e(t){return"string"==typeof t?t.split("").map(r):Array.isArray(t)?t.reduce(function(t,r){return t.concat(e(r))},[]):void 0}(t)))}).ord=function(e){return e.charCodeAt(0)}}).call(this,e("buffer").Buffer)},{buffer:134}],7:[function(e,t,r){(function(r){"use strict";var n=e("readable-stream").Readable,i=e("util");function o(e,t){if(!(this instanceof o))return new o(e,t);n.call(this,t),null!==e&&void 0!==e||(e=String(e)),this._obj=e}t.exports=o,i.inherits(o,n),o.prototype._read=function(e){var t=this._obj;"string"==typeof t?this.push(new r(t)):r.isBuffer(t)?this.push(t):this.push(new r(JSON.stringify(t))),this.push(null)}}).call(this,e("buffer").Buffer)},{buffer:134,"readable-stream":13,util:261}],8:[function(e,t,r){(function(r){t.exports=a;var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},i=e("core-util-is");i.inherits=e("inherits");var o=e("./_stream_readable"),s=e("./_stream_writable");function a(e){if(!(this instanceof a))return new a(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",u)}function u(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}i.inherits(a,o),function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(n(s.prototype),function(e){a.prototype[e]||(a.prototype[e]=s.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":10,"./_stream_writable":12,_process:200,"core-util-is":14,inherits:157}],9:[function(e,t,r){t.exports=o;var n=e("./_stream_transform"),i=e("core-util-is");function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=e("inherits"),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":11,"core-util-is":14,inherits:157}],10:[function(e,t,r){(function(r){t.exports=c;var n=e("isarray"),i=e("buffer").Buffer;c.ReadableState=l;var o=e("events").EventEmitter;o.listenerCount||(o.listenerCount=function(e,t){return e.listeners(t).length});var s,a=e("stream"),u=e("core-util-is");function l(t,r){var n=(t=t||{}).highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=e("string_decoder/").StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function c(e){if(!(this instanceof c))return new c(e);this._readableState=new l(e,this),this.readable=!0,a.call(this)}function h(e,t,n,o,s){var a=function(e,t){var r=null;i.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(t,n);if(a)e.emit("error",a);else if(null===n||void 0===n)t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.length>0?d(e):x(e)}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!s){var u=new Error("stream.push() after EOF");e.emit("error",u)}else if(t.endEmitted&&s){u=new Error("stream.unshift() after end event");e.emit("error",u)}else!t.decoder||s||o||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,s?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&d(e),function(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){!function(e,t){var r=t.length;for(;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}(e,t)}))}(e,t);else s||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}u.inherits=e("inherits"),u.inherits(c,a),c.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding)!==r.encoding&&(e=new i(e,t),t=""),h(this,r,e,t,!1)},c.prototype.unshift=function(e){return h(this,this._readableState,e,"",!0)},c.prototype.setEncoding=function(t){s||(s=e("string_decoder/").StringDecoder),this._readableState.decoder=new s(t),this._readableState.encoding=t};var p=8388608;function f(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>=p)e=p;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function d(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?r.nextTick(function(){m(e)}):m(e))}function m(e){e.emit("readable")}function g(e){var t,r=e._readableState;function n(e,n,i){!1===e.write(t)&&r.awaitDrain++}for(r.awaitDrain=0;r.pipesCount&&null!==(t=e.read());)if(1===r.pipesCount?n(r.pipes):_(r.pipes,n),e.emit("data",t),r.awaitDrain>0)return;if(0===r.pipesCount)return r.flowing=!1,void(o.listenerCount(e,"data")>0&&y(e));r.ranOut=!0}function v(){this._readableState.ranOut&&(this._readableState.ranOut=!1,g(this))}function y(e,t){if(e._readableState.flowing)throw new Error("Cannot switch to old mode now.");var n=t||!1,i=!1;e.readable=!0,e.pipe=a.prototype.pipe,e.on=e.addListener=a.prototype.on,e.on("readable",function(){var t;for(i=!0;!n&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){n=!0,this.emit("pause")},e.resume=function(){n=!1,i?r.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function b(e,t){var r,n=t.buffer,o=t.length,s=!!t.decoder,a=!!t.objectMode;if(0===n.length)return null;if(0===o)r=null;else if(a)r=n.shift();else if(!e||e>=o)r=s?n.join(""):i.concat(n,o),n.length=0;else{if(e<n[0].length)r=(h=n[0]).slice(0,e),n[0]=h.slice(e);else if(e===n[0].length)r=n.shift();else{r=s?"":new i(e);for(var u=0,l=0,c=n.length;l<c&&u<e;l++){var h=n[0],p=Math.min(e-u,h.length);s?r+=h.slice(0,p):h.copy(r,u,0,p),p<h.length?n[0]=h.slice(p):n.shift(),u+=p}}}return r}function x(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function _(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}c.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d(this),null;if(0===(e=f(e,t))&&t.ended)return r=null,t.length>0&&t.decoder&&(r=b(e,t),t.length-=r.length),0===t.length&&x(this),r;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=f(n,t)),null===(r=e>0?b(e,t):null)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&x(this),r},c.prototype._read=function(e){this.emit("error",new Error("not implemented"))},c.prototype.pipe=function(e,t){var i=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1;var a=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?l:h;function u(e){e===i&&h()}function l(){e.end()}s.endEmitted?r.nextTick(a):i.once("end",a),e.on("unpipe",u);var c=function(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&g(e)}}(i);function h(){e.removeListener("close",f),e.removeListener("finish",d),e.removeListener("drain",c),e.removeListener("error",p),e.removeListener("unpipe",u),i.removeListener("end",l),i.removeListener("end",h),e._writableState&&!e._writableState.needDrain||c()}function p(t){m(),e.removeListener("error",p),0===o.listenerCount(e,"error")&&e.emit("error",t)}function f(){e.removeListener("finish",d),m()}function d(){e.removeListener("close",f),m()}function m(){i.unpipe(e)}return e.on("drain",c),e._events&&e._events.error?n(e._events.error)?e._events.error.unshift(p):e._events.error=[p,e._events.error]:e.on("error",p),e.once("close",f),e.once("finish",d),e.emit("pipe",i),s.flowing||(this.on("readable",v),s.flowing=!0,r.nextTick(function(){g(i)})),e},c.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",v),t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}return-1===(i=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}(t.pipes,e))?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},c.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||y(this),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&d(this):this.read(0))}return r},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){y(this),this.read(0),this.emit("resume")},c.prototype.pause=function(){y(this,!0),this.emit("pause")},c.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){(t.decoder&&(i=t.decoder.write(i)),!t.objectMode||null!==i&&void 0!==i)&&((t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause())))}),e)"function"==typeof e[i]&&void 0===this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return _(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){r&&(r=!1,e.resume())},n},c._fromList=b}).call(this,e("_process"))},{_process:200,buffer:134,"core-util-is":14,events:135,inherits:157,isarray:160,stream:251,"string_decoder/":252}],11:[function(e,t,r){t.exports=s;var n=e("./_stream_duplex"),i=e("core-util-is");function o(e,t){this.afterTransform=function(e,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r);i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function s(e){if(!(this instanceof s))return new s(e);n.call(this,e);this._transformState=new o(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){a(t,e)}):a(t)})}function a(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=(e._readableState,e._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}i.inherits=e("inherits"),i.inherits(s,n),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,r){throw new Error("not implemented")},s.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":8,"core-util-is":14,inherits:157}],12:[function(e,t,r){(function(r){t.exports=a;var n=e("buffer").Buffer;a.WritableState=s;var i=e("core-util-is");i.inherits=e("inherits");var o=e("stream");function s(e,t){var n=(e=e||{}).highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){n?r.nextTick(function(){o(i)}):o(i);e._writableState.errorEmitted=!0,e.emit("error",i)}(e,0,i,t,o);else{var s=c(e,n);s||n.bufferProcessing||!n.buffer.length||function(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var n=t.buffer[r],i=n.chunk,o=n.encoding,s=n.callback,a=t.objectMode?1:i.length;if(u(e,t,a,i,o,s),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}(e,n),i?r.nextTick(function(){l(e,n,s,o)}):l(e,n,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function a(t){var r=e("./_stream_duplex");if(!(this instanceof a||this instanceof r))return new a(t);this._writableState=new s(t,this),this.writable=!0,o.call(this)}function u(e,t,r,n,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,i,t.onwrite),t.sync=!1}function l(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),n(),r&&h(e,t)}function c(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function h(e,t){var r=c(0,t);return r&&(t.finished=!0,e.emit("finish")),r}i.inherits(a,o),a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},a.prototype.write=function(e,t,i){var o=this._writableState,s=!1;return"function"==typeof t&&(i=t,t=null),n.isBuffer(e)?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof i&&(i=function(){}),o.ended?function(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i)})}(this,0,i):function(e,t,i,o){var s=!0;if(!n.isBuffer(i)&&"string"!=typeof i&&null!==i&&void 0!==i&&!t.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");e.emit("error",a),r.nextTick(function(){o(a)}),s=!1}return s}(this,o,e,i)&&(s=function(e,t,r,i,o){r=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=new n(t,r)),t}(t,r,i),n.isBuffer(r)&&(i="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;a||(t.needDrain=!0);t.writing?t.buffer.push(new function(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}(r,i,o)):u(e,t,s,r,i,o);return a}(this,o,e,t,i)),s},a.prototype._write=function(e,t,r){r(new Error("not implemented"))},a.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),void 0!==e&&null!==e&&this.write(e,t),i.ending||i.finished||function(e,t,n){t.ending=!0,h(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0}(this,i,n)}}).call(this,e("_process"))},{"./_stream_duplex":8,_process:200,buffer:134,"core-util-is":14,inherits:157,stream:251}],13:[function(e,t,r){(function(n){var i=e("stream");(r=t.exports=e("./lib/_stream_readable.js")).Stream=i,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),n.browser||"disable"!==n.env.READABLE_STREAM||(t.exports=e("stream"))}).call(this,e("_process"))},{"./lib/_stream_duplex.js":8,"./lib/_stream_passthrough.js":9,"./lib/_stream_readable.js":10,"./lib/_stream_transform.js":11,"./lib/_stream_writable.js":12,_process:200,stream:251}],14:[function(e,t,r){(function(e){function t(e){return Object.prototype.toString.call(e)}r.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},r.isBoolean=function(e){return"boolean"==typeof e},r.isNull=function(e){return null===e},r.isNullOrUndefined=function(e){return null==e},r.isNumber=function(e){return"number"==typeof e},r.isString=function(e){return"string"==typeof e},r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=function(e){return void 0===e},r.isRegExp=function(e){return"[object RegExp]"===t(e)},r.isObject=function(e){return"object"==typeof e&&null!==e},r.isDate=function(e){return"[object Date]"===t(e)},r.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},r.isFunction=function(e){return"function"==typeof e},r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":159}],15:[function(e,t,r){"use strict";var n=e("./lib/thunk.js");t.exports=function(e){var t=new function(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1};t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var i=0;i<r.length;++i){var o=r[i];if("array"===o||"object"==typeof o&&o.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===o){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+r[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,n(t)}},{"./lib/thunk.js":17}],16:[function(e,t,r){"use strict";var n=e("uniq");function i(e,t,r){var n,i,o=e.length,s=t.arrayArgs.length,a=t.indexArgs.length>0,u=[],l=[],c=0,h=0;for(n=0;n<o;++n)l.push(["i",n,"=0"].join(""));for(i=0;i<s;++i)for(n=0;n<o;++n)h=c,c=e[n],0===n?l.push(["d",i,"s",n,"=t",i,"p",c].join("")):l.push(["d",i,"s",n,"=(t",i,"p",c,"-s",h,"*t",i,"p",h,")"].join(""));for(l.length>0&&u.push("var "+l.join(",")),n=o-1;n>=0;--n)c=e[n],u.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(u.push(r),n=0;n<o;++n){for(h=c,c=e[n],i=0;i<s;++i)u.push(["p",i,"+=d",i,"s",n].join(""));a&&(n>0&&u.push(["index[",h,"]-=s",h].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function o(e,t,r){for(var n=e.body,i=[],o=[],s=0;s<e.args.length;++s){var a=e.args[s];if(!(a.count<=0)){var u=new RegExp(a.name,"g"),l="",c=t.arrayArgs.indexOf(s);switch(t.argTypes[s]){case"offset":var h=t.offsetArgIndex.indexOf(s);c=t.offsetArgs[h].array,l="+q"+h;case"array":l="p"+c+l;var p="l"+s,f="a"+c;if(0===t.arrayBlockIndices[c])1===a.count?"generic"===r[c]?a.lvalue?(i.push(["var ",p,"=",f,".get(",l,")"].join("")),n=n.replace(u,p),o.push([f,".set(",l,",",p,")"].join(""))):n=n.replace(u,[f,".get(",l,")"].join("")):n=n.replace(u,[f,"[",l,"]"].join("")):"generic"===r[c]?(i.push(["var ",p,"=",f,".get(",l,")"].join("")),n=n.replace(u,p),a.lvalue&&o.push([f,".set(",l,",",p,")"].join(""))):(i.push(["var ",p,"=",f,"[",l,"]"].join("")),n=n.replace(u,p),a.lvalue&&o.push([f,"[",l,"]=",p].join("")));else{for(var d=[a.name],m=[l],g=0;g<Math.abs(t.arrayBlockIndices[c]);g++)d.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(g+1)+"*t"+c+"b"+g);if(u=new RegExp(d.join(""),"g"),l=m.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[f,"[",l,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(s));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim()}t.exports=function(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,s=new Array(e.arrayArgs.length),a=new Array(e.arrayArgs.length),u=0;u<e.arrayArgs.length;++u)a[u]=t[2*u],s[u]=t[2*u+1];var l=[],c=[],h=[],p=[],f=[];for(u=0;u<e.arrayArgs.length;++u){e.arrayBlockIndices[u]<0?(h.push(0),p.push(r),l.push(r),c.push(r+e.arrayBlockIndices[u])):(h.push(e.arrayBlockIndices[u]),p.push(e.arrayBlockIndices[u]+r),l.push(0),c.push(e.arrayBlockIndices[u]));for(var d=[],m=0;m<s[u].length;m++)h[u]<=s[u][m]&&s[u][m]<p[u]&&d.push(s[u][m]-h[u]);f.push(d)}var g=["SS"],v=["'use strict'"],y=[];for(m=0;m<r;++m)y.push(["s",m,"=SS[",m,"]"].join(""));for(u=0;u<e.arrayArgs.length;++u){for(g.push("a"+u),g.push("t"+u),g.push("p"+u),m=0;m<r;++m)y.push(["t",u,"p",m,"=t",u,"[",h[u]+m,"]"].join(""));for(m=0;m<Math.abs(e.arrayBlockIndices[u]);++m)y.push(["t",u,"b",m,"=t",u,"[",l[u]+m,"]"].join(""))}for(u=0;u<e.scalarArgs.length;++u)g.push("Y"+u);if(e.shapeArgs.length>0&&y.push("shape=SS.slice(0)"),e.indexArgs.length>0){var b=new Array(r);for(u=0;u<r;++u)b[u]="0";y.push(["index=[",b.join(","),"]"].join(""))}for(u=0;u<e.offsetArgs.length;++u){var x=e.offsetArgs[u],_=[];for(m=0;m<x.offset.length;++m)0!==x.offset[m]&&(1===x.offset[m]?_.push(["t",x.array,"p",m].join("")):_.push([x.offset[m],"*t",x.array,"p",m].join("")));0===_.length?y.push("q"+u+"=0"):y.push(["q",u,"=",_.join("+")].join(""))}var w=n([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for((y=y.concat(w)).length>0&&v.push("var "+y.join(",")),u=0;u<e.arrayArgs.length;++u)v.push("p"+u+"|=0");e.pre.body.length>3&&v.push(o(e.pre,e,a));var k=o(e.body,e,a),T=function(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}(f);T<r?v.push(function(e,t,r,n){for(var o=t.length,s=r.arrayArgs.length,a=r.blockSize,u=r.indexArgs.length>0,l=[],c=0;c<s;++c)l.push(["var offset",c,"=p",c].join(""));for(c=e;c<o;++c)l.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",a,"){"].join("")),l.push(["s",t[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",t[c],"=",a].join("")),l.push(["j",c,"-=",a,"}"].join("")),u&&l.push(["index[",t[c],"]=j",c].join(""));for(c=0;c<s;++c){for(var h=["offset"+c],p=e;p<o;++p)h.push(["j",p,"*t",c,"p",t[p]].join(""));l.push(["p",c,"=(",h.join("+"),")"].join(""))}for(l.push(i(t,r,n)),c=e;c<o;++c)l.push("}");return l.join("\n")}(T,f[0],e,k)):v.push(i(f[0],e,k)),e.post.body.length>3&&v.push(o(e.post,e,a)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+v.join("\n")+"\n----------");var E=[e.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",T,function(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var i=e[n],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?t[n]="u"+i.charAt(1)+o:t[n]=i.charAt(0)+o,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}(a)].join("");return new Function(["function ",E,"(",g.join(","),"){",v.join("\n"),"} return ",E].join(""))()}},{uniq:257}],17:[function(e,t,r){"use strict";var n=e("./compile.js");t.exports=function(e){var t=["'use strict'","var CACHED={}"],r=[],i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));for(var o=[],s=[],a=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],c=0;c<e.arrayArgs.length;++c){var h=e.arrayArgs[c];r.push(["t",h,"=array",h,".dtype,","r",h,"=array",h,".order"].join("")),o.push("t"+h),o.push("r"+h),s.push("t"+h),s.push("r"+h+".join()"),a.push("array"+h+".data"),a.push("array"+h+".stride"),a.push("array"+h+".offset|0"),c>0&&(u.push("array"+e.arrayArgs[0]+".shape.length===array"+h+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+h+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}for(e.arrayArgs.length>1&&(t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),c=0;c<e.scalarArgs.length;++c)a.push("scalar"+e.scalarArgs[c]);return r.push(["type=[",s.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",a.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(n.bind(void 0,e))}},{"./compile.js":16}],18:[function(e,t,r){(function(e){"use strict";t.exports=function(t){if(!/^data\:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');var r=(t=t.replace(/\r?\n/g,"")).indexOf(",");if(-1===r||r<=4)throw new TypeError("malformed data: URI");for(var n=t.substring(5,r).split(";"),i=n[0]||"text/plain",o=i,s=!1,a="",u=1;u<n.length;u++)"base64"==n[u]?s=!0:(o+=";"+n[u],0==n[u].indexOf("charset=")&&(a=n[u].substring(8)));n[0]||a.length||(o+=";charset=US-ASCII",a="US-ASCII");var l=unescape(t.substring(r+1)),c=new e(l,s?"base64":"ascii");return c.type=i,c.typeFull=o,c.charset=a,c}}).call(this,e("buffer").Buffer)},{buffer:134}],19:[function(e,t,r){"use strict";var n={single_source_shortest_paths:function(e,t,r){var i={},o={};o[t]=0;var s,a,u,l,c,h,p,f=n.PriorityQueue.make();for(f.push(t,0);!f.empty();)for(u in a=(s=f.pop()).value,l=s.cost,c=e[a]||{})c.hasOwnProperty(u)&&(h=l+c[u],p=o[u],(void 0===o[u]||p>h)&&(o[u]=h,f.push(u,h),i[u]=a));if(void 0!==r&&void 0===o[r]){var d=["Could not find a path from ",t," to ",r,"."].join("");throw new Error(d)}return i},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],n=t;n;)r.push(n),e[n],n=e[n];return r.reverse(),r},find_path:function(e,t,r){var i=n.single_source_shortest_paths(e,t,r);return n.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(e){var t,r=n.PriorityQueue,i={};for(t in e=e||{},r)r.hasOwnProperty(t)&&(i[t]=r[t]);return i.queue=[],i.sorter=e.sorter||r.default_sorter,i},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var r={value:e,cost:t};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};void 0!==t&&(t.exports=n)},{}],20:[function(e,t,r){var n=function(t){(t=t||{}).width=t.width||800,t.height=t.height||600;var r=t.model||{vertex:[-1,-1,0,1,-1,0,1,1,0,-1,1,0],indices:[0,1,2,0,2,3,2,1,0,3,2,0],textureCoords:[0,0,1,0,1,1,0,1]},n=t.lens||{a:1,b:1,Fx:0,Fy:0,scale:1.5},i=t.fov||{x:1,y:1},o=t.image||"images/barrel-distortion.png",s=function(e){var t=document.querySelector(e);if(null==t)throw new Error("there is no canvas on this page");for(var r=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=0;n<r.length;++n){var i;try{i=t.getContext(r[n],{preserveDrawingBuffer:!0})}catch(e){continue}if(i)return i}throw new Error("WebGL is not supported!")}(t.selector||"#canvas"),a=e("./shaders"),u=_(t.vertexSrc||"vertex"),l=_(t.fragmentSrc||"fragment3"),c=function(e,t,r){var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t),e.compileShader(n),s(n);var i=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,r),e.compileShader(i),s(i);var o=e.createProgram();return e.attachShader(o,n),e.attachShader(o,i),e.linkProgram(o),o;function s(t){if(!e.getShaderParameter(t,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(t))}}(s,u,l);s.useProgram(c);var h,p,f,d,m=s.getAttribLocation(c,"aVertexPosition"),g=s.getAttribLocation(c,"aTextureCoord"),v=s.getUniformLocation(c,"uSampler"),y=s.getUniformLocation(c,"uLensS"),b=s.getUniformLocation(c,"uLensF"),x=s.getUniformLocation(c,"uFov");function _(e,t){if(a.hasOwnProperty(e))return a[e];var r=new XMLHttpRequest;if(t)r.addEventListener("readystatechange",function(){4===r.readyState&&(200===r.status?t(null,r.responseText):t(new Error("fail to load!")))}),r.open("GET",e,!0),r.send(null);else if(r.open("GET",e,!1),r.send(null),200==r.status)return r.responseText}function w(e,r){var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(!0===e){if(!n)throw new Error("do not support 'requestAnimationFram'");n(o)}else n(o);var i=null;function o(s){i||(i=s);var a=s-i;i=s,t.runner(a),r&&r(),!0===e&&n(o)}}function k(e,t){s.viewport(0,0,e,t),s.canvas.width=e,s.canvas.height=t}function T(e,r){d=function(e,r,n){var i=e.createTexture(),o=new Image;return o.addEventListener("load",function(){!function(e,t,r,n){n=n||e.createTexture(),e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),r&&r(null,n)}(e,o,n,i),t.width=o.width,t.height=o.height,k(t.width,t.height)}),o.src=r,i}(s,e,function(){w(t.animate,r)})}return h=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,h),s.bufferData(s.ARRAY_BUFFER,new Float32Array(r.vertex),s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,null),p=s.createBuffer(),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,p),s.bufferData(s.ELEMENT_ARRAY_BUFFER,new Uint16Array(r.indices),s.STATIC_DRAW),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null),f=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,f),s.bufferData(s.ARRAY_BUFFER,new Float32Array(r.textureCoords),s.STATIC_DRAW),s.bindBuffer(s.ARRAY_BUFFER,null),t.runner=t.runner||function(e){s.clearColor(0,0,0,1),s.enable(s.DEPTH_TEST),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enableVertexAttribArray(m),s.bindBuffer(s.ARRAY_BUFFER,h),s.vertexAttribPointer(m,3,s.FLOAT,!1,0,0),s.enableVertexAttribArray(g),s.bindBuffer(s.ARRAY_BUFFER,f),s.vertexAttribPointer(g,2,s.FLOAT,!1,0,0),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,d),s.uniform1i(v,0),s.uniform3fv(y,[n.a,n.b,n.scale]),s.uniform2fv(b,[n.Fx,n.Fy]),s.uniform2fv(x,[i.x,i.y]),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,p),s.drawElements(s.TRIANGLES,r.indices.length,s.UNSIGNED_SHORT,0)},T(o),{options:t,gl:s,lens:n,fov:i,run:w,getImage:function(e){var t=new Image;return t.src=s.canvas.toDataURL(e||"image/jpeg"),t},setImage:T}};"undefined"!=typeof document?window.FisheyeGl=n:t.exports=n},{"./shaders":21}],21:[function(e,t,r){t.exports={fragment:e("./shaders/fragment.glfs"),fragment2:e("./shaders/fragment2.glfs"),fragment3:e("./shaders/fragment3.glfs"),method1:e("./shaders/method1.glfs"),method2:e("./shaders/method2.glfs"),vertex:e("./shaders/vertex.glvs")}},{"./shaders/fragment.glfs":22,"./shaders/fragment2.glfs":23,"./shaders/fragment3.glfs":24,"./shaders/method1.glfs":25,"./shaders/method2.glfs":26,"./shaders/vertex.glvs":27}],22:[function(e,t,r){t.exports="#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uLens;\nuniform vec2 uFov;\nuniform sampler2D uSampler;\nvarying vec3 vPosition;\nvarying vec2 vTextureCoord;\nvec2 GLCoord2TextureCoord(vec2 glCoord) {\n\treturn glCoord  * vec2(1.0, -1.0)/ 2.0 + vec2(0.5, 0.5);\n}\nvoid main(void){\n\tfloat scale = uLens.w;\n\tfloat F = uLens.z;\n\t\n\tfloat L = length(vec3(vPosition.xy/scale, F));\n\tvec2 vMapping = vPosition.xy * F / L;\n\tvMapping = vMapping * uLens.xy;\n\tvMapping = GLCoord2TextureCoord(vMapping/scale);\n\tvec4 texture = texture2D(uSampler, vMapping);\n\tif(vMapping.x > 0.99 || vMapping.x < 0.01 || vMapping.y > 0.99 || vMapping.y < 0.01){\n\t\ttexture = vec4(0.0, 0.0, 0.0, 1.0);\n\t} \n\tgl_FragColor = texture;\n}\n"},{}],23:[function(e,t,r){t.exports="#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uLens;\nuniform vec2 uFov;\nuniform sampler2D uSampler;\nvarying vec3 vPosition;\nvarying vec2 vTextureCoord;\nvec2 TextureCoord2GLCoord(vec2 textureCoord) {\n\treturn (textureCoord - vec2(0.5, 0.5)) * 2.0;\n}\nvec2 GLCoord2TextureCoord(vec2 glCoord) {\n\treturn glCoord / 2.0 + vec2(0.5, 0.5);\n}\nvoid main(void){\n\tfloat correctionRadius = 0.5;\n\tfloat distance = sqrt(vPosition.x * vPosition.x + vPosition.y * vPosition.y) / correctionRadius;\n\tfloat theta = 1.0;\n\tif(distance != 0.0){\n\t\ttheta = atan(distance);\n\t}\n\tvec2 vMapping = theta * vPosition.xy;\n\tvMapping = GLCoord2TextureCoord(vMapping);\n\t\t\n\tvec4 texture = texture2D(uSampler, vMapping);\n\tif(vMapping.x > 0.99 || vMapping.x < 0.01 || vMapping.y > 0.99 || vMapping.y < 0.01){\n\t\ttexture = vec4(0.0, 0.0, 0.0, 1.0);\n\t} \n\tgl_FragColor = texture;\n}\n"},{}],24:[function(e,t,r){t.exports="#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec3 uLensS;\nuniform vec2 uLensF;\nuniform vec2 uFov;\nuniform sampler2D uSampler;\nvarying vec3 vPosition;\nvarying vec2 vTextureCoord;\nvec2 GLCoord2TextureCoord(vec2 glCoord) {\n\treturn glCoord  * vec2(1.0, -1.0)/ 2.0 + vec2(0.5, 0.5);\n}\nvoid main(void){\n\tfloat scale = uLensS.z;\n\tvec3 vPos = vPosition;\n\tfloat Fx = uLensF.x;\n\tfloat Fy = uLensF.y;\n\tvec2 vMapping = vPos.xy;\n\tvMapping.x = vMapping.x + ((pow(vPos.y, 2.0)/scale)*vPos.x/scale)*-Fx;\n\tvMapping.y = vMapping.y + ((pow(vPos.x, 2.0)/scale)*vPos.y/scale)*-Fy;\n\tvMapping = vMapping * uLensS.xy;\n\tvMapping = GLCoord2TextureCoord(vMapping/scale);\n\tvec4 texture = texture2D(uSampler, vMapping);\n\tif(vMapping.x > 0.99 || vMapping.x < 0.01 || vMapping.y > 0.99 || vMapping.y < 0.01){\n\t\ttexture = vec4(0.0, 0.0, 0.0, 1.0);\n\t}\n\tgl_FragColor = texture;\n}\n"},{}],25:[function(e,t,r){t.exports="#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uLens;\nuniform vec2 uFov;\nuniform sampler2D uSampler;\nvarying vec3 vPosition;\nvarying vec2 vTextureCoord;\nvec2 TextureCoord2GLCoord(vec2 textureCoord) {\n\treturn (textureCoord - vec2(0.5, 0.5)) * 2.0;\n}\nvec2 GLCoord2TextureCoord(vec2 glCoord) {\n\treturn glCoord / 2.0 + vec2(0.5, 0.5);\n}\nvoid main(void){\n\tvec2 vMapping = vec2(vTextureCoord.x, 1.0 - vTextureCoord.y);\n\tvMapping = TextureCoord2GLCoord(vMapping);\n\t//TODO insert Code\n\tfloat F = uLens.x/ uLens.w;\n\tfloat seta = length(vMapping) / F;\n\tvMapping = sin(seta) * F / length(vMapping) * vMapping;\n\tvMapping *= uLens.w * 1.414;\n\tvMapping = GLCoord2TextureCoord(vMapping);\n\tvec4 texture = texture2D(uSampler, vMapping);\n\tif(vMapping.x > 0.99 || vMapping.x < 0.01 || vMapping.y > 0.99 || vMapping.y < 0.01){\n\t\ttexture = vec4(0.0, 0.0, 0.0, 1.0);\n\t} \n\tgl_FragColor = texture;\n}\n"},{}],26:[function(e,t,r){t.exports="#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uLens;\nuniform vec2 uFov;\nuniform sampler2D uSampler;\nvarying vec3 vPosition;\nvarying vec2 vTextureCoord;\nvec2 TextureCoord2GLCoord(vec2 textureCoord) {\n\treturn (textureCoord - vec2(0.5, 0.5)) * 2.0;\n}\nvec2 GLCoord2TextureCoord(vec2 glCoord) {\n\treturn glCoord / 2.0 + vec2(0.5, 0.5);\n}\nvoid main(void){\n\tvec2 vMapping = vec2(vTextureCoord.x, 1.0 - vTextureCoord.y);\n\tvMapping = TextureCoord2GLCoord(vMapping);\n\t//TOD insert Code\n\tfloat F = uLens.x/ uLens.w;\n\tfloat seta = length(vMapping) / F;\n\tvMapping = sin(seta) * F / length(vMapping) * vMapping;\n\tvMapping *= uLens.w * 1.414;\n\tvMapping = GLCoord2TextureCoord(vMapping);\n\tvec4 texture = texture2D(uSampler, vMapping);\n\tif(vMapping.x > 0.99 || vMapping.x < 0.01 || vMapping.y > 0.99 || vMapping.y < 0.01){\n\t\ttexture = vec4(0.0, 0.0, 0.0, 1.0);\n\t} \n\tgl_FragColor = texture;\n}\n"},{}],27:[function(e,t,r){t.exports="#ifdef GL_ES\nprecision highp float;\n#endif\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying vec3 vPosition;\nvarying vec2 vTextureCoord;\nvoid main(void){\n\tvPosition = aVertexPosition;\n\tvTextureCoord = aTextureCoord;\n\tgl_Position = vec4(vPosition,1.0);\n}\n"},{}],28:[function(e,t,r){(function(r,n){"use strict";var i=e("path"),o=e("ndarray"),s=e("omggif").GifReader,a=(e("ndarray-pack"),e("through"),e("data-uri-to-buffer"));function u(e,t){var r;try{r=new s(e)}catch(e){return void t(e)}if(r.numFrames()>0){var n=[r.numFrames(),r.height,r.width,4],i=new Uint8Array(n[0]*n[1]*n[2]*n[3]),a=o(i,n);try{for(var u=0;u<r.numFrames();++u)r.decodeAndBlitFrameRGBA(u,i.subarray(a.index(u,0,0,0),a.index(u+1,0,0,0)))}catch(e){return void t(e)}t(null,a.transpose(0,2,1))}else{n=[r.height,r.width,4],i=new Uint8Array(n[0]*n[1]*n[2]),a=o(i,n);try{r.decodeAndBlitFrameRGBA(0,i)}catch(e){return void t(e)}t(null,a.transpose(1,0))}}function l(e,t){n.nextTick(function(){try{var r=a(e);r?u(function(e){if(void 0===e[0]){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;++n)r[n]=e.get(n);return r}return new Uint8Array(e)}(r),t):t(new Error("Error parsing data URI"))}catch(e){t(e)}})}t.exports=function(e,t,n){n||(n=t,t="");var s=i.extname(e);switch(t||s.toUpperCase()){case".GIF":!function(e,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.overrideMimeType&&r.overrideMimeType("application/binary"),r.onerror=function(e){t(e)},r.onload=function(){4===r.readyState&&u(new Uint8Array(r.response),t)},r.send()}(e,n);break;default:r.isBuffer(e)&&(e="data:"+t+";base64,"+e.toString("base64")),0===e.indexOf("data:image/gif;")?l(e,n):function(e,t){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){var e=document.createElement("canvas");e.width=r.width,e.height=r.height;var n=e.getContext("2d");n.drawImage(r,0,0);var i=n.getImageData(0,0,r.width,r.height);t(null,o(new Uint8Array(i.data),[r.width,r.height,4],[4,4*r.width,1],0))},r.onerror=function(e){t(e)},r.src=e}(e,n)}}}).call(this,{isBuffer:e("../is-buffer/index.js")},e("_process"))},{"../is-buffer/index.js":159,_process:200,"data-uri-to-buffer":29,ndarray:168,"ndarray-pack":166,omggif:176,path:178,through:253}],29:[function(e,t,r){(function(e){t.exports=function(t){if(!/^data\:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');var r=(t=t.replace(/\r?\n/g,"")).indexOf(",");if(-1===r||r<=4)throw new TypeError("malformed data: URI");for(var n=t.substring(5,r).split(";"),i=!1,o="US-ASCII",s=0;s<n.length;s++)"base64"==n[s]?i=!0:0==n[s].indexOf("charset=")&&(o=n[s].substring(8));var a=unescape(t.substring(r+1)),u=new e(a,i?"base64":"ascii");return u.type=n[0]||"text/plain",u.charset=o,u}}).call(this,e("buffer").Buffer)},{buffer:134}],30:[function(e,t,r){(function(r){e("assert"),e("events").EventEmitter;var n=e("readable-stream"),i=e("util"),o=e("./TypedNeuQuant.js"),s=e("./LZWEncoder.js");function a(e){n.call(this,e),this.okayToPush=!0,this.resetData()}function u(e,t,r){var n=(r=r||{}).highWaterMark;a.call(this,{highWaterMark:n||0===n?n:65536}),this.width=~~e,this.height=~~t,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.usedEntry=[],this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10;var i=this;function o(){i.flushData()}this.on("writeHeader#stop",o),this.on("frame#stop",o),this.on("finish#stop",function(){o(),i.push(null)})}i.inherits(a,n),a.prototype._read=function(){this.okayToPush=!0},a.prototype.resetData=function(){this.data=[]},a.prototype.flushData=function(){if(!this.okayToPush){var e=new Error("GIF memory limit exceeded. Please `read` from GIF before writing additional frames/information.");return this.emit("error",e)}var t=new r(this.data);this.resetData(),this.okayToPush=this.push(t)},a.prototype.writeByte=function(e){this.data.push(e)},a.prototype.writeUTFBytes=function(e){for(var t=e.length,r=0;r<t;r++)this.writeByte(e.charCodeAt(r))},a.prototype.writeBytes=function(e,t,r){for(var n=r||e.length,i=t||0;i<n;i++)this.writeByte(e[i])},i.inherits(u,a),u.prototype.setDelay=function(e){this.delay=Math.round(e/10)},u.prototype.setFrameRate=function(e){this.delay=Math.round(100/e)},u.prototype.setDispose=function(e){e>=0&&(this.dispose=e)},u.prototype.setRepeat=function(e){this.repeat=e},u.prototype.setTransparent=function(e){this.transparent=e},u.prototype.analyzeImage=function(e){this.setImagePixels(this.removeAlphaChannel(e)),this.analyzePixels()},u.prototype.writeImageInfo=function(){this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.writePalette(),this.firstFrame=!1},u.prototype.outputImage=function(){this.writePixels()},u.prototype.addFrame=function(e){this.emit("frame#start"),this.analyzeImage(e),this.writeImageInfo(),this.outputImage(),this.emit("frame#stop")},u.prototype.finish=function(){this.emit("finish#start"),this.writeByte(59),this.emit("finish#stop")},u.prototype.setQuality=function(e){e<1&&(e=1),this.sample=e},u.prototype.writeHeader=function(){this.emit("writeHeader#start"),this.writeUTFBytes("GIF89a"),this.emit("writeHeader#stop")},u.prototype.analyzePixels=function(){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);var t=new o(this.pixels,this.sample);t.buildColormap(),this.colorTab=t.getColormap();for(var r=0,n=0;n<e;n++){var i=t.lookupRGB(255&this.pixels[r++],255&this.pixels[r++],255&this.pixels[r++]);this.usedEntry[i]=!0,this.indexedPixels[n]=i}this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent))},u.prototype.findClosest=function(e){if(null===this.colorTab)return-1;for(var t=(16711680&e)>>16,r=(65280&e)>>8,n=255&e,i=0,o=16777216,s=this.colorTab.length,a=0;a<s;){var u=t-(255&this.colorTab[a++]),l=r-(255&this.colorTab[a++]),c=n-(255&this.colorTab[a]),h=u*u+l*l+c*c,p=a/3;this.usedEntry[p]&&h<o&&(o=h,i=p),a++}return i},u.prototype.removeAlphaChannel=function(e){for(var t=this.width,r=this.height,n=new Uint8Array(t*r*3),i=0,o=0;o<r;o++)for(var s=0;s<t;s++){var a=o*t*4+4*s;n[i++]=e[a],n[i++]=e[a+1],n[i++]=e[a+2]}return n},u.prototype.setImagePixels=function(e){this.pixels=e},u.prototype.writeGraphicCtrlExt=function(){var e,t;this.writeByte(33),this.writeByte(249),this.writeByte(4),null===this.transparent?(e=0,t=0):(e=1,t=2),this.dispose>=0&&(t=7&dispose),t<<=2,this.writeByte(0|t|e),this.writeShort(this.delay),this.writeByte(this.transIndex),this.writeByte(0)},u.prototype.writeImageDesc=function(){this.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame?this.writeByte(0):this.writeByte(128|this.palSize)},u.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.writeByte(240|this.palSize),this.writeByte(0),this.writeByte(0)},u.prototype.writeNetscapeExt=function(){this.writeByte(33),this.writeByte(255),this.writeByte(11),this.writeUTFBytes("NETSCAPE2.0"),this.writeByte(3),this.writeByte(1),this.writeShort(this.repeat),this.writeByte(0)},u.prototype.writePalette=function(){this.writeBytes(this.colorTab);for(var e=768-this.colorTab.length,t=0;t<e;t++)this.writeByte(0)},u.prototype.writeShort=function(e){this.writeByte(255&e),this.writeByte(e>>8&255)},u.prototype.writePixels=function(){new s(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this)},u.prototype.stream=function(){return this},u.ByteCapacitor=a,t.exports=u}).call(this,e("buffer").Buffer)},{"./LZWEncoder.js":31,"./TypedNeuQuant.js":32,assert:127,buffer:134,events:135,"readable-stream":38,util:261}],31:[function(e,t,r){var n=-1,i=12,o=5003,s=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];t.exports=function(e,t,r,a){var u,l,c,h,p,f,d,m,g,v=Math.max(2,a),y=new Uint8Array(256),b=new Int32Array(o),x=new Int32Array(o),_=0,w=0,k=!1;function T(e,t){y[l++]=e,l>=254&&C(t)}function E(e){S(o),w=m+2,k=!0,I(m,e)}function S(e){for(var t=0;t<e;++t)b[t]=-1}function C(e){l>0&&(e.writeByte(l),e.writeBytes(y,0,l),l=0)}function A(e){return(1<<e)-1}function B(){return 0===h?n:(--h,255&r[p++])}function I(e,t){for(u&=s[_],_>0?u|=e<<_:u=e,_+=f;_>=8;)T(255&u,t),u>>=8,_-=8;if((w>c||k)&&(k?(c=A(f=d),k=!1):c=++f==i?1<<i:A(f)),e==g){for(;_>0;)T(255&u,t),u>>=8,_-=8;C(t)}}this.encode=function(r){r.writeByte(v),h=e*t,p=0,function(e,t){var r,s,a,u,h,p,v;for(k=!1,c=A(f=d=e),g=1+(m=1<<e-1),w=m+2,l=0,u=B(),v=0,r=o;r<65536;r*=2)++v;v=8-v,S(p=o),I(m,t);e:for(;(s=B())!=n;)if(r=(s<<i)+u,b[a=s<<v^u]!==r){if(b[a]>=0){h=p-a,0===a&&(h=1);do{if((a-=h)<0&&(a+=p),b[a]===r){u=x[a];continue e}}while(b[a]>=0)}I(u,t),u=s,w<1<<i?(x[a]=w++,b[a]=r):E(t)}else u=x[a];I(u,t),I(g,t)}(v+1,r),r.writeByte(0)}}},{}],32:[function(e,t,r){var n=100,i=256,o=i-1,s=4,a=16,u=1<<a,l=10,c=10,h=u>>c,p=u<<l-c,f=6,d=(i>>3)*(1<<f),m=30,g=1024,v=256,y=1<<18,b=499,x=491,_=487,w=503,k=3*w;t.exports=function(e,t){var r,T,E,S,C;function A(e,t,n,i,o){r[t][0]-=e*(r[t][0]-n)/g,r[t][1]-=e*(r[t][1]-i)/g,r[t][2]-=e*(r[t][2]-o)/g}function B(e,t,n,o,s){for(var a,u,l=Math.abs(t-e),c=Math.min(t+e,i),h=t+1,p=t-1,f=1;h<c||p>l;)u=C[f++],h<c&&((a=r[h++])[0]-=u*(a[0]-n)/y,a[1]-=u*(a[1]-o)/y,a[2]-=u*(a[2]-s)/y),p>l&&((a=r[p--])[0]-=u*(a[0]-n)/y,a[1]-=u*(a[1]-o)/y,a[2]-=u*(a[2]-s)/y)}function I(e,t,n){var o,u,f,d,m,g=~(1<<31),v=g,y=-1,b=y;for(o=0;o<i;o++)u=r[o],(f=Math.abs(u[0]-e)+Math.abs(u[1]-t)+Math.abs(u[2]-n))<g&&(g=f,y=o),(d=f-(E[o]>>a-s))<v&&(v=d,b=o),m=S[o]>>c,S[o]-=m,E[o]+=m<<l;return S[y]+=h,E[y]-=p,b}this.buildColormap=function(){!function(){var e,t;for(r=[],T=new Int32Array(256),E=new Int32Array(i),S=new Int32Array(i),C=new Int32Array(i>>3),e=0;e<i;e++)t=(e<<s+8)/i,r[e]=new Float64Array([t,t,t,0]),S[e]=u/i,E[e]=0}(),function(){var r,i,o,a,u,l,c=e.length,h=30+(t-1)/3,p=c/(3*t),y=~~(p/n),T=g,E=d,S=E>>f;for(S<=1&&(S=0),r=0;r<S;r++)C[r]=T*((S*S-r*r)*v/(S*S));c<k?(t=1,i=3):i=c%b!=0?3*b:c%x!=0?3*x:c%_!=0?3*_:3*w;var P=0;for(r=0;r<p;)if(A(T,l=I(o=(255&e[P])<<s,a=(255&e[P+1])<<s,u=(255&e[P+2])<<s),o,a,u),0!==S&&B(S,l,o,a,u),(P+=i)>=c&&(P-=c),r++,0===y&&(y=1),r%y==0)for(T-=T/h,(S=(E-=E/m)>>f)<=1&&(S=0),l=0;l<S;l++)C[l]=T*((S*S-l*l)*v/(S*S))}(),function(){for(var e=0;e<i;e++)r[e][0]>>=s,r[e][1]>>=s,r[e][2]>>=s,r[e][3]=e}(),function(){var e,t,n,s,a,u,l=0,c=0;for(e=0;e<i;e++){for(a=e,u=(n=r[e])[1],t=e+1;t<i;t++)(s=r[t])[1]<u&&(a=t,u=s[1]);if(s=r[a],e!=a&&(t=s[0],s[0]=n[0],n[0]=t,t=s[1],s[1]=n[1],n[1]=t,t=s[2],s[2]=n[2],n[2]=t,t=s[3],s[3]=n[3],n[3]=t),u!=l){for(T[l]=c+e>>1,t=l+1;t<u;t++)T[t]=e;l=u,c=e}}for(T[l]=c+o>>1,t=l+1;t<256;t++)T[t]=o}()},this.getColormap=function(){for(var e=[],t=[],n=0;n<i;n++)t[r[n][3]]=n;for(var o=0,s=0;s<i;s++){var a=t[s];e[o++]=r[a][0],e[o++]=r[a][1],e[o++]=r[a][2]}return e},this.lookupRGB=function(e,t,n){for(var o,s,a,u=1e3,l=-1,c=T[t],h=c-1;c<i||h>=0;)c<i&&((a=(s=r[c])[1]-t)>=u?c=i:(c++,a<0&&(a=-a),(o=s[0]-e)<0&&(o=-o),(a+=o)<u&&((o=s[2]-n)<0&&(o=-o),(a+=o)<u&&(u=a,l=s[3])))),h>=0&&((a=t-(s=r[h])[1])>=u?h=-1:(h--,a<0&&(a=-a),(o=s[0]-e)<0&&(o=-o),(a+=o)<u&&((o=s[2]-n)<0&&(o=-o),(a+=o)<u&&(u=a,l=s[3]))));return l}}},{}],33:[function(e,t,r){arguments[4][8][0].apply(r,arguments)},{"./_stream_readable":35,"./_stream_writable":37,_process:200,"core-util-is":14,dup:8,inherits:157}],34:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{"./_stream_transform":36,"core-util-is":14,dup:9,inherits:157}],35:[function(e,t,r){(function(r){t.exports=h;var n=e("isarray"),i=e("buffer").Buffer;h.ReadableState=c;var o=e("events").EventEmitter;o.listenerCount||(o.listenerCount=function(e,t){return e.listeners(t).length});var s,a=e("stream"),u=e("core-util-is");u.inherits=e("inherits");var l=e("util");function c(t,r){var n=e("./_stream_duplex"),i=(t=t||{}).highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,r instanceof n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=e("string_decoder/").StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function h(t){e("./_stream_duplex");if(!(this instanceof h))return new h(t);this._readableState=new c(t,this),this.readable=!0,a.call(this)}function p(e,t,n,i,o){var s=function(e,t){var r=null;u.isBuffer(t)||u.isString(t)||u.isNullOrUndefined(t)||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(t,n);if(s)e.emit("error",s);else if(u.isNullOrUndefined(n))t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,m(e)}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!o){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&o){a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||o||i||(n=t.decoder.write(n)),o||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&m(e)),function(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){!function(e,t){var r=t.length;for(;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(l("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}(e,t)}))}(e,t);else o||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}l=l&&l.debuglog?l.debuglog("stream"):function(){},u.inherits(h,a),h.prototype.push=function(e,t){var r=this._readableState;return u.isString(e)&&!r.objectMode&&(t=t||r.defaultEncoding)!==r.encoding&&(e=new i(e,t),t=""),p(this,r,e,t,!1)},h.prototype.unshift=function(e){return p(this,this._readableState,e,"",!0)},h.prototype.setEncoding=function(t){return s||(s=e("string_decoder/").StringDecoder),this._readableState.decoder=new s(t),this._readableState.encoding=t,this};var f=8388608;function d(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||u.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>=f)e=f;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(function(){g(e)}):g(e))}function g(e){l("emit readable"),e.emit("readable"),v(e)}function v(e){var t=e._readableState;if(l("flow",t.flowing),t.flowing)do{var r=e.read()}while(null!==r&&t.flowing)}function y(e,t){var r,n=t.buffer,o=t.length,s=!!t.decoder,a=!!t.objectMode;if(0===n.length)return null;if(0===o)r=null;else if(a)r=n.shift();else if(!e||e>=o)r=s?n.join(""):i.concat(n,o),n.length=0;else{if(e<n[0].length)r=(h=n[0]).slice(0,e),n[0]=h.slice(e);else if(e===n[0].length)r=n.shift();else{r=s?"":new i(e);for(var u=0,l=0,c=n.length;l<c&&u<e;l++){var h=n[0],p=Math.min(e-u,h.length);s?r+=h.slice(0,p):h.copy(r,u,0,p),p<h.length?n[0]=h.slice(p):n.shift(),u+=p}}}return r}function b(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}h.prototype.read=function(e){l("read",e);var t=this._readableState,r=e;if((!u.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?b(this):m(this),null;if(0===(e=d(e,t))&&t.ended)return 0===t.length&&b(this),null;var n,i=t.needReadable;return l("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",i=!0),(t.ended||t.reading)&&l("reading or ended",i=!1),i&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=d(r,t)),n=e>0?y(e,t):null,u.isNull(n)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),r!==e&&t.ended&&0===t.length&&b(this),u.isNull(n)||this.emit("data",n),n},h.prototype._read=function(e){this.emit("error",new Error("not implemented"))},h.prototype.pipe=function(e,t){var i=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,l("pipe count=%d opts=%j",s.pipesCount,t);var a=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:p;function u(e){l("onunpipe"),e===i&&p()}function c(){l("onend"),e.end()}s.endEmitted?r.nextTick(a):i.once("end",a),e.on("unpipe",u);var h=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o.listenerCount(e,"data")&&(t.flowing=!0,v(e))}}(i);function p(){l("cleanup"),e.removeListener("close",m),e.removeListener("finish",g),e.removeListener("drain",h),e.removeListener("error",d),e.removeListener("unpipe",u),i.removeListener("end",c),i.removeListener("end",p),i.removeListener("data",f),!s.awaitDrain||e._writableState&&!e._writableState.needDrain||h()}function f(t){l("ondata"),!1===e.write(t)&&(l("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,i.pause())}function d(t){l("onerror",t),y(),e.removeListener("error",d),0===o.listenerCount(e,"error")&&e.emit("error",t)}function m(){e.removeListener("finish",g),y()}function g(){l("onfinish"),e.removeListener("close",m),y()}function y(){l("unpipe"),i.unpipe(e)}return e.on("drain",h),i.on("data",f),e._events&&e._events.error?n(e._events.error)?e._events.error.unshift(d):e._events.error=[d,e._events.error]:e.on("error",d),e.once("close",m),e.once("finish",g),e.emit("pipe",i),s.flowing||(l("pipe resume"),i.resume()),e},h.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}return-1===(i=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}(t.pipes,e))?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},h.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&m(this);else{var o=this;r.nextTick(function(){l("readable nexttick read 0"),o.read(0)})}}return n},h.prototype.addListener=h.prototype.on,h.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!0,e.reading||(l("resume read 0"),this.read(0)),function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(function(){!function(e,t){t.resumeScheduled=!1,e.emit("resume"),v(e),t.flowing&&!t.reading&&e.read(0)}(e,t)}))}(this,e)),this},h.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this},h.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",function(){if(l("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){(l("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length))&&(n.push(i)||(r=!0,e.pause()))}),e)u.isFunction(e[i])&&u.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){l("wrapped _read",t),r&&(r=!1,e.resume())},n},h._fromList=y}).call(this,e("_process"))},{"./_stream_duplex":33,_process:200,buffer:134,"core-util-is":14,events:135,inherits:157,isarray:160,stream:251,"string_decoder/":252,util:4}],36:[function(e,t,r){t.exports=s;var n=e("./_stream_duplex"),i=e("core-util-is");function o(e,t){this.afterTransform=function(e,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var o=n.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,i.isNullOrUndefined(r)||e.push(r);o&&o(t);var s=e._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&e._read(s.highWaterMark)}(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function s(e){if(!(this instanceof s))return new s(e);n.call(this,e),this._transformState=new o(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){i.isFunction(this._flush)?this._flush(function(e){a(t,e)}):a(t)})}function a(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}i.inherits=e("inherits"),i.inherits(s,n),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,r){throw new Error("not implemented")},s.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;i.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},{"./_stream_duplex":33,"core-util-is":14,inherits:157}],37:[function(e,t,r){(function(r){t.exports=a;var n=e("buffer").Buffer;a.WritableState=s;var i=e("core-util-is");i.inherits=e("inherits");var o=e("stream");function s(t,n){var i=e("./_stream_duplex"),o=(t=t||{}).highWaterMark,s=t.objectMode?16:16384;this.highWaterMark=o||0===o?o:s,this.objectMode=!!t.objectMode,n instanceof i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){n?r.nextTick(function(){t.pendingcb--,o(i)}):(t.pendingcb--,o(i));e._writableState.errorEmitted=!0,e.emit("error",i)}(e,n,i,t,o);else{var s=h(e,n);s||n.corked||n.bufferProcessing||!n.buffer.length||c(e,n),i?r.nextTick(function(){l(e,n,s,o)}):l(e,n,s,o)}}(n,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function a(t){var r=e("./_stream_duplex");if(!(this instanceof a||this instanceof r))return new a(t);this._writableState=new s(t,this),this.writable=!0,o.call(this)}function u(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function l(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),f(e,t)}function c(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var r=[],n=0;n<t.buffer.length;n++)r.push(t.buffer[n].callback);t.pendingcb++,u(e,t,!0,t.length,t.buffer,"",function(e){for(var n=0;n<r.length;n++)t.pendingcb--,r[n](e)}),t.buffer=[]}else{for(n=0;n<t.buffer.length;n++){var i=t.buffer[n],o=i.chunk,s=i.encoding,a=i.callback,l=t.objectMode?1:o.length;if(u(e,t,!1,l,o,s,a),t.writing){n++;break}}n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}t.bufferProcessing=!1}function h(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function p(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function f(e,t){var r=h(0,t);return r&&(0===t.pendingcb?(p(e,t),t.finished=!0,e.emit("finish")):p(e,t)),r}i.inherits(a,o),a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},a.prototype.write=function(e,t,o){var s=this._writableState,a=!1;return i.isFunction(t)&&(o=t,t=null),i.isBuffer(e)?t="buffer":t||(t=s.defaultEncoding),i.isFunction(o)||(o=function(){}),s.ended?function(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i)})}(this,0,o):function(e,t,n,o){var s=!0;if(!(i.isBuffer(n)||i.isString(n)||i.isNullOrUndefined(n)||t.objectMode)){var a=new TypeError("Invalid non-string/buffer chunk");e.emit("error",a),r.nextTick(function(){o(a)}),s=!1}return s}(this,s,e,o)&&(s.pendingcb++,a=function(e,t,r,o,s){r=function(e,t,r){return!e.objectMode&&!1!==e.decodeStrings&&i.isString(t)&&(t=new n(t,r)),t}(t,r,o),i.isBuffer(r)&&(o="buffer");var a=t.objectMode?1:r.length;t.length+=a;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);t.writing||t.corked?t.buffer.push(new function(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}(r,o,s)):u(e,t,!1,a,r,o,s);return l}(this,s,e,t,o)),a},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||c(this,e))},a.prototype._write=function(e,t,r){r(new Error("not implemented"))},a.prototype._writev=null,a.prototype.end=function(e,t,n){var o=this._writableState;i.isFunction(e)?(n=e,e=null,t=null):i.isFunction(t)&&(n=t,t=null),i.isNullOrUndefined(e)||this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||o.finished||function(e,t,n){t.ending=!0,f(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0}(this,o,n)}}).call(this,e("_process"))},{"./_stream_duplex":33,_process:200,buffer:134,"core-util-is":14,inherits:157,stream:251}],38:[function(e,t,r){(function(n){(r=t.exports=e("./lib/_stream_readable.js")).Stream=e("stream"),r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),n.browser||"disable"!==n.env.READABLE_STREAM||(t.exports=e("stream"))}).call(this,e("_process"))},{"./lib/_stream_duplex.js":33,"./lib/_stream_passthrough.js":34,"./lib/_stream_readable.js":35,"./lib/_stream_transform.js":36,"./lib/_stream_writable.js":37,_process:200,stream:251}],39:[function(e,t,r){function n(e,t={}){const{contextName:r="gl",throwGetError:n,useTrackablePrimitives:a,readPixelsFile:u,recording:l=[],variables:c={},onReadPixels:h,onUnrecognizedArgumentLookup:p}=t,f=new Proxy(e,{get:function(t,f){switch(f){case"addComment":return E;case"checkThrowError":return S;case"getReadPixelsVariableName":return g;case"insertVariable":return _;case"reset":return x;case"setIndent":return k;case"toString":return b;case"getContextVariableName":return A}if("function"==typeof e[f])return function(){switch(f){case"getError":return n?l.push(`${y}if (${r}.getError() !== ${r}.NONE) throw new Error('error');`):l.push(`${y}${r}.getError();`),e.getError();case"getExtension":{const t=`${r}Variables${d.length}`;l.push(`${y}const ${t} = ${r}.getExtension('${arguments[0]}');`);const n=e.getExtension(arguments[0]);if(n&&"object"==typeof n){const e=i(n,{getEntity:w,useTrackablePrimitives:a,recording:l,contextName:t,contextVariables:d,variables:c,indent:y,onUnrecognizedArgumentLookup:p});return d.push(e),e}return d.push(null),n}case"readPixels":const t=d.indexOf(arguments[6]);let s;if(-1===t){const e=function(e){if(c)for(const t in c)if(c[t]===e)return t;return null}(arguments[6]);e?(s=e,l.push(`${y}${e}`)):(s=`${r}Variable${d.length}`,d.push(arguments[6]),l.push(`${y}const ${s} = new ${arguments[6].constructor.name}(${arguments[6].length});`))}else s=`${r}Variable${t}`;g=s;const m=[arguments[0],arguments[1],arguments[2],arguments[3],w(arguments[4]),w(arguments[5]),s];return l.push(`${y}${r}.readPixels(${m.join(", ")});`),u&&function(e,t){const n=`${r}Variable${d.length}`,i=`imageDatum${v}`;l.push(`${y}let ${i} = ["P3\\n# ${u}.ppm\\n", ${e}, ' ', ${t}, "\\n255\\n"].join("");`),l.push(`${y}for (let i = 0; i < ${i}.length; i += 4) {`),l.push(`${y}  ${i} += ${n}[i] + ' ' + ${n}[i + 1] + ' ' + ${n}[i + 2] + ' ';`),l.push(`${y}}`),l.push(`${y}if (typeof require !== "undefined") {`),l.push(`${y}  require('fs').writeFileSync('./${u}.ppm', ${i});`),l.push(`${y}}`),v++}(arguments[2],arguments[3]),h&&h(s,m),e.readPixels.apply(e,arguments);case"drawBuffers":return l.push(`${y}${r}.drawBuffers([${o(arguments[0],{contextName:r,contextVariables:d,getEntity:w,addVariable:T,variables:c,onUnrecognizedArgumentLookup:p})}]);`),e.drawBuffers(arguments[0])}let t=e[f].apply(e,arguments);switch(typeof t){case"undefined":return void l.push(`${y}${C(f,arguments)};`);case"number":case"boolean":if(a&&-1===d.indexOf(s(t))){l.push(`${y}const ${r}Variable${d.length} = ${C(f,arguments)};`),d.push(t=s(t));break}default:null===t?l.push(`${C(f,arguments)};`):l.push(`${y}const ${r}Variable${d.length} = ${C(f,arguments)};`),d.push(t)}return t};return m[e[f]]=f,e[f]}}),d=[],m={};let g,v=0,y="";return f;function b(){return l.join("\n")}function x(){for(;l.length>0;)l.pop()}function _(e,t){c[e]=t}function w(e){const t=m[e];return t?r+"."+t:e}function k(e){y=" ".repeat(e)}function T(e,t){const n=`${r}Variable${d.length}`;return l.push(`${y}const ${n} = ${t};`),d.push(e),n}function E(e){l.push(`${y}// ${e}`)}function S(){l.push(`${y}(() => {\n${y}const error = ${r}.getError();\n${y}if (error !== ${r}.NONE) {\n${y}  const names = Object.getOwnPropertyNames(gl);\n${y}  for (let i = 0; i < names.length; i++) {\n${y}    const name = names[i];\n${y}    if (${r}[name] === error) {\n${y}      throw new Error('${r} threw ' + name);\n${y}    }\n${y}  }\n${y}}\n${y}})();`)}function C(e,t){return`${r}.${e}(${o(t,{contextName:r,contextVariables:d,getEntity:w,addVariable:T,variables:c,onUnrecognizedArgumentLookup:p})})`}function A(e){const t=d.indexOf(e);return-1!==t?`${r}Variable${t}`:null}}function i(e,t){const r=new Proxy(e,{get:function(t,r){if("function"==typeof t[r])return function(){switch(r){case"drawBuffersWEBGL":return c.push(`${p}${i}.drawBuffersWEBGL([${o(arguments[0],{contextName:i,contextVariables:a,getEntity:d,addVariable:g,variables:h,onUnrecognizedArgumentLookup:f})}]);`),e.drawBuffersWEBGL(arguments[0])}let t=e[r].apply(e,arguments);switch(typeof t){case"undefined":return void c.push(`${p}${m(r,arguments)};`);case"number":case"boolean":l&&-1===a.indexOf(s(t))?(c.push(`${p}const ${i}Variable${a.length} = ${m(r,arguments)};`),a.push(t=s(t))):(c.push(`${p}const ${i}Variable${a.length} = ${m(r,arguments)};`),a.push(t));break;default:null===t?c.push(`${m(r,arguments)};`):c.push(`${p}const ${i}Variable${a.length} = ${m(r,arguments)};`),a.push(t)}return t};return n[e[r]]=r,e[r]}}),n={},{contextName:i,contextVariables:a,getEntity:u,useTrackablePrimitives:l,recording:c,variables:h,indent:p,onUnrecognizedArgumentLookup:f}=t;return r;function d(e){return n.hasOwnProperty(e)?`${i}.${n[e]}`:u(e)}function m(e,t){return`${i}.${e}(${o(t,{contextName:i,contextVariables:a,getEntity:d,addVariable:g,variables:h,onUnrecognizedArgumentLookup:f})})`}function g(e,t){const r=`${i}Variable${a.length}`;return a.push(e),c.push(`${p}const ${r} = ${t};`),r}}function o(e,t){const{variables:r}=t;return Array.from(e).map(e=>{const n=function(e){if(r)for(const t in r)if(r[t]===e)return t;return null}(e);return n||function(e,t){const{contextName:r,contextVariables:n,getEntity:i,addVariable:o,onUnrecognizedArgumentLookup:s}=t;if(void 0===e)return"undefined";if(null===e)return"null";const a=n.indexOf(e);if(a>-1)return`${r}Variable${a}`;switch(e.constructor.name){case"String":const t=/\n/.test(e),r=/'/.test(e),n=/"/.test(e);return t?"`"+e+"`":r&&!n?'"'+e+'"':"'"+e+"'";case"Number":case"Boolean":return i(e);case"Array":return o(e,`new ${e.constructor.name}(${Array.from(e).join(",")})`);case"Float32Array":case"Uint8Array":case"Uint16Array":case"Int32Array":return o(e,`new ${e.constructor.name}(${JSON.stringify(Array.from(e))})`);default:if(s){const t=s(e);if(t)return t}throw new Error(`unrecognized argument type ${e.constructor.name}`)}}(e,t)}).join(", ")}function s(e){return new e.constructor(e)}void 0!==t&&(t.exports={glWiretap:n,glExtensionWiretap:i}),"undefined"!=typeof window&&(n.glExtensionWiretap=i,window.glWiretap=n)},{}],40:[function(e,t,r){"use strict";t.exports=function(e,t,r){if(t|=0,!((e|=0)>0&&t>0))return null;var n,i=document.createElement("canvas");if(!i)return null;i.width=e,i.height=t;try{n=i.getContext("webgl",r)}catch(e){try{n=i.getContext("experimental-webgl",r)}catch(e){return null}}var o=n.getExtension,s={destroy:function(){var e=o.call(n,"WEBGL_lose_context");e&&e.loseContext()}},a={resize:function(e,t){i.width=e,i.height=t}},u=n.getSupportedExtensions().slice();return u.push("STACKGL_destroy_context","STACKGL_resize_drawingbuffer"),n.getSupportedExtensions=function(){return u.slice()},n.getExtension=function(e){var t=e.toLowerCase();return"stackgl_resize_drawingbuffer"===t?a:"stackgl_destroy_context"===t?s:o.call(n,e)},n||null}},{}],41:[function(e,t,r){"use strict";t.exports=function(e,t){let r=null;r=t.output.length?3===t.output.length?{x:t.output[0],y:t.output[1],z:t.output[2]}:2===t.output.length?{x:t.output[0],y:t.output[1]}:{x:t.output[0]}:t.output;const n={_fn:e,constants:t.constants,output:r,thread:{x:0,y:0,z:0}};return r.z?function(){const e=[];for(let t=0;t<this.output.z;t++){const r=[];for(let e=0;e<this.output.y;e++){const n=[];for(let r=0;r<this.output.x;r++)this.thread.x=r,this.thread.y=e,this.thread.z=t,n.push(this._fn.apply(this,arguments));r.push(n)}e.push(r)}return e}.bind(n):r.y?function(){const e=[];for(let t=0;t<this.output.y;t++){const r=[];for(let e=0;e<this.output.x;e++)this.thread.x=e,this.thread.y=t,this.thread.z=0,r.push(this._fn.apply(this,arguments));e.push(r)}return e}.bind(n):function(){const e=[];for(let t=0;t<this.output.x;t++)this.thread.x=t,this.thread.y=0,this.thread.z=0,e.push(this._fn.apply(this,arguments));return e}.bind(n)}},{}],42:[function(e,t,r){const{utils:n}=e("./utils");t.exports={alias:function(e,t){const r=t.toString();return new Function(`return function ${e} (${n.getArgumentNamesFromString(r).join(", ")}) {\n  ${n.getFunctionBodyFromString(r)}\n}`)()}}},{"./utils":126}],43:[function(e,t,r){const{FunctionNode:n}=e("../function-node");t.exports={CPUFunctionNode:class extends n{astFunction(e,t){if(!this.isRootKernel){t.push("function"),t.push(" "),t.push(this.name),t.push("(");for(let e=0;e<this.argumentNames.length;++e){const r=this.argumentNames[e];e>0&&t.push(", "),t.push("user_"),t.push(r)}t.push(") {\n")}for(let r=0;r<e.body.body.length;++r)this.astGeneric(e.body.body[r],t),t.push("\n");return this.isRootKernel||t.push("}\n"),t}astReturnStatement(e,t){const r=this.returnType||this.getType(e.argument);return this.returnType||(this.returnType=r),this.isRootKernel?(t.push(this.leadingReturnStatement),this.astGeneric(e.argument,t),t.push(";\n"),t.push(this.followingReturnStatement),t.push("continue;\n")):this.isSubKernel?(t.push(`subKernelResult_${this.name} = `),this.astGeneric(e.argument,t),t.push(";"),t.push(`return subKernelResult_${this.name};`)):(t.push("return "),this.astGeneric(e.argument,t),t.push(";")),t}astLiteral(e,t){if(isNaN(e.value))throw this.astErrorOutput("Non-numeric literal not supported : "+e.value,e);return t.push(e.value),t}astBinaryExpression(e,t){return t.push("("),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(")"),t}astIdentifierExpression(e,t){if("Identifier"!==e.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",e);switch(e.name){case"Infinity":t.push("Infinity");break;default:if(this.constants&&this.constants.hasOwnProperty(e.name))t.push("constants_"+e.name);else{const r=this.getKernelArgumentName(e.name);r?t.push("user_"+r):t.push("user_"+e.name)}}return t}astForStatement(e,t){if("ForStatement"!==e.type)throw this.astErrorOutput("Invalid for statement",e);const r=[],n=[],i=[],o=[];let s=null;if(e.init){this.pushState("in-for-loop-init"),this.astGeneric(e.init,r);for(let e=0;e<r.length;e++)r[e].includes&&r[e].includes(",")&&(s=!1);this.popState("in-for-loop-init")}else s=!1;if(e.test?this.astGeneric(e.test,n):s=!1,e.update?this.astGeneric(e.update,i):s=!1,e.body&&(this.pushState("loop-body"),this.astGeneric(e.body,o),this.popState("loop-body")),null===s&&(s=this.isSafe(e.init)&&this.isSafe(e.test)),s)t.push(`for (${r.join("")};${n.join("")};${i.join("")}){\n`),t.push(o.join("")),t.push("}\n");else{const e=this.getInternalVariableName("safeI");r.length>0&&t.push(r.join(""),";\n"),t.push(`for (let ${e}=0;${e}<LOOP_MAX;${e}++){\n`),n.length>0&&t.push(`if (!${n.join("")}) break;\n`),t.push(o.join("")),t.push(`\n${i.join("")};`),t.push("}\n")}return t}astWhileStatement(e,t){if("WhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);return t.push("for (let i = 0; i < LOOP_MAX; i++) {"),t.push("if ("),this.astGeneric(e.test,t),t.push(") {\n"),this.astGeneric(e.body,t),t.push("} else {\n"),t.push("break;\n"),t.push("}\n"),t.push("}\n"),t}astDoWhileStatement(e,t){if("DoWhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);return t.push("for (let i = 0; i < LOOP_MAX; i++) {"),this.astGeneric(e.body,t),t.push("if (!"),this.astGeneric(e.test,t),t.push(") {\n"),t.push("break;\n"),t.push("}\n"),t.push("}\n"),t}astAssignmentExpression(e,t){const r=this.getDeclaration(e.left);if(r&&!r.assignable)throw new this.astErrorOutput(`Variable ${e.left.name} is not assignable here`,e);return this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t}astBlockStatement(e,t){if(this.isState("loop-body")){this.pushState("block-body");for(let r=0;r<e.body.length;r++)this.astGeneric(e.body[r],t);this.popState("block-body")}else{t.push("{\n");for(let r=0;r<e.body.length;r++)this.astGeneric(e.body[r],t);t.push("}\n")}return t}astVariableDeclaration(e,t){"var"===e.kind&&this.varWarn(),t.push(`${e.kind} `);const{declarations:r}=e;for(let e=0;e<r.length;e++)e>0&&t.push(","),this.astGeneric(r[e],t);return this.isState("in-for-loop-init")||t.push(";"),t}astIfStatement(e,t){return t.push("if ("),this.astGeneric(e.test,t),t.push(")"),"BlockStatement"===e.consequent.type?this.astGeneric(e.consequent,t):(t.push(" {\n"),this.astGeneric(e.consequent,t),t.push("\n}\n")),e.alternate&&(t.push("else "),"BlockStatement"===e.alternate.type?this.astGeneric(e.alternate,t):(t.push(" {\n"),this.astGeneric(e.alternate,t),t.push("\n}\n"))),t}astSwitchStatement(e,t){const{discriminant:r,cases:n}=e;t.push("switch ("),this.astGeneric(r,t),t.push(") {\n");for(let e=0;e<n.length;e++)null!==n[e].test?(t.push("case "),this.astGeneric(n[e].test,t),t.push(":\n"),n[e].consequent&&n[e].consequent.length>0&&(this.astGeneric(n[e].consequent,t),t.push("break;\n"))):(t.push("default:\n"),this.astGeneric(n[e].consequent,t),n[e].consequent&&n[e].consequent.length>0&&t.push("break;\n"));t.push("\n}")}astThisExpression(e,t){return t.push("_this"),t}astMemberExpression(e,t){const{signature:r,type:n,property:i,xProperty:o,yProperty:s,zProperty:a,name:u,origin:l}=this.getMemberExpressionDetails(e);switch(r){case"this.thread.value":return t.push(`_this.thread.${u}`),t;case"this.output.value":switch(u){case"x":t.push("outputX");break;case"y":t.push("outputY");break;case"z":t.push("outputZ");break;default:throw this.astErrorOutput("Unexpected expression",e)}return t;case"value":throw this.astErrorOutput("Unexpected expression",e);case"value[]":case"value[][]":case"value[][][]":case"value.value":if("Math"===l)return t.push(Math[u]),t;switch(i){case"r":return t.push(`user_${u}[0]`),t;case"g":return t.push(`user_${u}[1]`),t;case"b":return t.push(`user_${u}[2]`),t;case"a":return t.push(`user_${u}[3]`),t}break;case"this.constants.value":case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":break;case"fn()[]":return this.astGeneric(e.object,t),t.push("["),this.astGeneric(e.property,t),t.push("]"),t;default:throw this.astErrorOutput("Unexpected expression",e)}if(!e.computed)switch(n){case"Number":case"Integer":case"Float":case"Boolean":return t.push(`${l}_${u}`),t}const c=this.getKernelArgumentName(u),h=`${l}_${c||u}`;switch(n){case"Array(2)":case"Array(3)":case"Array(4)":case"HTMLImageArray":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"HTMLImage":default:let e,r;if("constants"===l){const t=this.constants[u];e=(r="Input"===this.constantTypes[u])?t.size:null}else e=(r=this.isInput(c||u))?this.argumentSizes[this.argumentNames.indexOf(u)]:null;t.push(`${h}`),a&&s?r?(t.push("[("),this.astGeneric(a,t),t.push(`*${e[1]*e[0]})+(`),this.astGeneric(s,t),t.push(`*${e[0]})+`),this.astGeneric(o,t),t.push("]")):(t.push("["),this.astGeneric(a,t),t.push("]"),t.push("["),this.astGeneric(s,t),t.push("]"),t.push("["),this.astGeneric(o,t),t.push("]")):s?r?(t.push("[("),this.astGeneric(s,t),t.push(`*${e[0]})+`),this.astGeneric(o,t),t.push("]")):(t.push("["),this.astGeneric(s,t),t.push("]"),t.push("["),this.astGeneric(o,t),t.push("]")):(t.push("["),this.astGeneric(o,t),t.push("]"))}return t}astCallExpression(e,t){if("CallExpression"!==e.type)throw this.astErrorOutput("Unknown CallExpression",e);let r=this.astMemberExpressionUnroll(e.callee);this.calledFunctions.indexOf(r)<0&&this.calledFunctions.push(r),this.isAstMathFunction(e),this.onFunctionCall&&this.onFunctionCall(this.name,r,e.arguments),t.push(r),t.push("(");const n=this.lookupFunctionArgumentTypes(r)||[];for(let i=0;i<e.arguments.length;++i){const o=e.arguments[i];let s=this.getType(o);n[i]||this.triggerImplyArgumentType(r,i,s,this),i>0&&t.push(", "),this.astGeneric(o,t)}return t.push(")"),t}astArrayExpression(e,t){const r=e.elements.length;t.push("new Float32Array([");for(let n=0;n<r;++n){n>0&&t.push(", ");const r=e.elements[n];this.astGeneric(r,t)}return t.push("])"),t}astDebuggerStatement(e,t){return t.push("debugger;"),t}}}},{"../function-node":47}],44:[function(e,t,r){const{utils:n}=e("../../utils"),{Input:i}=e("../../input");t.exports={cpuKernelString:function(e,t){const r=[],i=[],o=[],s=!/^function/.test(e.color.toString());if(r.push("  const { context, canvas, constants } = settings;",`  const output = new Int32Array(${JSON.stringify(Array.from(e.output))});`,`  const _constants = ${function(e){const t=[];for(const r in e){const n=e[r];switch(typeof n){case"number":case"boolean":t.push(`${r}:${n}`)}}return`{ ${t.join()} }`}(e.constants)};`),i.push("    constants: _constants,","    context,","    output,","    thread: {x: 0, y: 0, z: 0},"),e.graphical){r.push(`  const _imageData = context.createImageData(${e.output[0]}, ${e.output[1]});`),r.push(`  const _colorData = new Uint8ClampedArray(${e.output[0]} * ${e.output[1]} * 4);`);const t=n.flattenFunctionToString((s?"function ":"")+e.color.toString(),{thisLookup:t=>{switch(t){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(e[t])},findDependency:(e,t)=>null}),a=n.flattenFunctionToString((s?"function ":"")+e.getPixels.toString(),{thisLookup:t=>{switch(t){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(e[t])},findDependency:()=>null});i.push("    _imageData,","    _colorData,",`    color: ${t},`),o.push(`  kernel.getPixels = ${a};`)}const a=[],u=Object.keys(e.constantTypes);for(let t=0;t<u.length;t++)a.push(e.constantTypes[u]);if(-1!==e.argumentTypes.indexOf("HTMLImageArray")||-1!==a.indexOf("HTMLImageArray")){const t=n.flattenFunctionToString((s?"function ":"")+e._imageTo3DArray.toString(),{doNotDefine:["canvas"],findDependency:(t,r)=>"this"===t?(s?"function ":"")+e[r].toString():null,thisLookup:e=>{switch(e){case"canvas":return;case"context":return"context"}}});o.push(t),i.push("    _imageTo2DArray,"),i.push("    _imageTo3DArray,")}else if(-1!==e.argumentTypes.indexOf("HTMLImage")||-1!==a.indexOf("HTMLImage")){const t=n.flattenFunctionToString((s?"function ":"")+e._imageTo2DArray.toString(),{findDependency:()=>{}});o.push(t),i.push("    _imageTo2DArray,")}return`function(settings) {\n${r.join("\n")}\n  for (const p in constants) {\n    const constant = constants[p];\n    switch (typeof constant) {\n      case 'number':\n      case 'boolean':\n        continue;\n    }\n    _constants[p] = constant;\n  }\n  const kernel = (function() {\n${e._kernelString}\n  })\n    .apply({ ${i.join("\n")} });\n  ${o.join("\n")}\n  return kernel;\n}`}}},{"../../input":122,"../../utils":126}],45:[function(e,t,r){const{Kernel:n}=e("../kernel"),{FunctionBuilder:i}=e("../function-builder"),{CPUFunctionNode:o}=e("./function-node"),{utils:s}=e("../../utils"),{cpuKernelString:a}=e("./kernel-string");t.exports={CPUKernel:class extends n{static getFeatures(){return this.features}static get features(){return Object.freeze({kernelMap:!0,isIntegerDivisionAccurate:!0})}static get isSupported(){return!0}static isContextMatch(e){return!1}static get mode(){return"cpu"}static nativeFunctionArguments(){return null}static nativeFunctionReturnType(){return null}static combineKernels(e){return e}constructor(e,t){super(e,t),this.mergeSettings(e.settings||t),this._imageData=null,this._colorData=null,this._kernelString=null,this.thread={x:0,y:0,z:0},this.translatedSources=null}initCanvas(){return"undefined"!=typeof document?document.createElement("canvas"):"undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(0,0):void 0}initContext(){return this.canvas?this.canvas.getContext("2d"):null}initPlugins(e){return[]}validateSettings(){if(!this.output||0===this.output.length){if(1!==arguments.length)throw"Auto dimensions only supported for kernels with only one input";const e=s.getVariableType(arguments[0],this.strictIntegers);if("Array"===e)this.output=s.getDimensions(e);else{if("NumberTexture"!==e&&"ArrayTexture(4)"!==e)throw"Auto dimensions not supported for input type: "+e;this.output=arguments[0].output}}if(this.graphical&&2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");this.checkOutput()}translateSource(){if(this.leadingReturnStatement=this.output.length>1?"resultX[x] = ":"result[x] = ",this.subKernels){const e=[];for(let t=0;t<this.subKernels.length;t++){const{name:r}=this.subKernels[t];e.push(this.output.length>1?`resultX_${r}[x] = subKernelResult_${r};\n`:`result_${r}[x] = subKernelResult_${r};\n`)}this.followingReturnStatement=e.join("")}const e=i.fromKernel(this,o);this.translatedSources=e.getPrototypes("kernel"),this.graphical||this.returnType||(this.returnType=e.getKernelResultType())}build(){if(this.setupConstants(),this.setupArguments(arguments),this.validateSettings(),this.translateSource(),this.graphical){const{canvas:e,output:t}=this;if(!e)throw new Error("no canvas available for using graphical output");const r=t[0],n=t[1]||1;e.width=r,e.height=n,this._imageData=this.context.createImageData(r,n),this._colorData=new Uint8ClampedArray(r*n*4)}const e=this.getKernelString();this.kernelString=e,this.debug&&(console.log("Function output:"),console.log(e));try{this.run=new Function([],e).bind(this)()}catch(e){console.error("An error occurred compiling the javascript: ",e)}}color(e,t,r,n){void 0===n&&(n=1),e=Math.floor(255*e),t=Math.floor(255*t),r=Math.floor(255*r),n=Math.floor(255*n);const i=this.output[0],o=this.output[1],s=this.thread.x+(o-this.thread.y-1)*i;this._colorData[4*s+0]=e,this._colorData[4*s+1]=t,this._colorData[4*s+2]=r,this._colorData[4*s+3]=n}getKernelString(){if(null!==this._kernelString)return this._kernelString;let e=null,{translatedSources:t}=this;return t.length>1?t=t.filter(t=>/^function/.test(t)?t:(e=t,!1)):e=t.shift(),this._kernelString=`  const LOOP_MAX = ${this._getLoopMaxString()}\n  const constants = this.constants;\n  const _this = this;\n  return (${this.argumentNames.map(e=>"user_"+e).join(", ")}) => {\n    ${this._processConstants()}\n    ${this._processArguments()}\n    ${this.graphical?this._graphicalKernelBody(e):this._resultKernelBody(e)}\n    ${t.length>0?t.join("\n"):""}\n  };`}toString(){return a(this)}_getLoopMaxString(){return this.loopMaxIterations?` ${parseInt(this.loopMaxIterations)};`:" 1000;"}_processConstants(){if(!this.constants)return"";const e=[];for(let t in this.constants)switch(this.constantTypes[t]){case"HTMLImage":e.push(`    const constants_${t} = this._imageTo2DArray(this.constants.${t});\n`);break;case"HTMLImageArray":e.push(`    const constants_${t} = this._imageTo3DArray(this.constants.${t});\n`);break;case"Input":e.push(`    const constants_${t} = this.constants.${t}.value;\n`);break;default:e.push(`    const constants_${t} = this.constants.${t};\n`)}return e.join("")}_processArguments(){const e=[];for(let t=0;t<this.argumentTypes.length;t++){const r=`user_${this.argumentNames[t]}`;switch(this.argumentTypes[t]){case"HTMLImage":e.push(`    ${r} = this._imageTo2DArray(${r});\n`);break;case"HTMLImageArray":e.push(`    ${r} = this._imageTo3DArray(${r});\n`);break;case"Input":e.push(`    ${r} = ${r}.value;\n`);break;case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"NumberTexture":case"MemoryOptimizedNumberTexture":e.push(`\n    if (${r}.toArray) {\n      if (!_this.textureCache) {\n        _this.textureCache = [];\n        _this.arrayCache = [];\n      }\n      const textureIndex = _this.textureCache.indexOf(${r});\n      if (textureIndex !== -1) {\n        ${r} = _this.arrayCache[textureIndex];\n      } else {\n        _this.textureCache.push(${r});\n        ${r} = ${r}.toArray();\n        _this.arrayCache.push(${r});\n      }\n    }`)}}return e.join("")}_imageTo2DArray(e){const t=this.canvas;t.width<e.width&&(t.width=e.width),t.height<e.height&&(t.height=e.height);const r=this.context;r.drawImage(e,0,0,e.width,e.height);const n=r.getImageData(0,0,e.width,e.height).data,i=new Array(e.height);let o=0;for(let t=e.height-1;t>=0;t--){const r=i[t]=new Array(e.width);for(let t=0;t<e.width;t++){const e=new Float32Array(4);e[0]=n[o++]/255,e[1]=n[o++]/255,e[2]=n[o++]/255,e[3]=n[o++]/255,r[t]=e}}return i}getPixels(e){const[t,r]=this.output;return e?s.flipPixels(this._imageData.data,t,r):this._imageData.data.slice(0)}_imageTo3DArray(e){const t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=this._imageTo2DArray(e[r]);return t}_resultKernelBody(e){switch(this.output.length){case 1:return this._resultKernel1DLoop(e)+this._kernelOutput();case 2:return this._resultKernel2DLoop(e)+this._kernelOutput();case 3:return this._resultKernel3DLoop(e)+this._kernelOutput();default:throw new Error("unsupported size kernel")}}_graphicalKernelBody(e){switch(this.output.length){case 2:return this._graphicalKernel2DLoop(e)+this._graphicalOutput();default:throw new Error("unsupported size kernel")}}_graphicalOutput(){return"\n    this._imageData.data.set(this._colorData);\n    this.context.putImageData(this._imageData, 0, 0);\n    return;"}_getKernelResultTypeConstructorString(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return"Float32Array";case"Array(2)":case"Array(3)":case"Array(4)":return"Array";default:if(this.graphical)return"Float32Array";throw new Error(`unhandled returnType ${this.returnType}`)}}_resultKernel1DLoop(e){const{output:t}=this,r=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const result = new ${r}(outputX);\n    ${this._mapSubKernels(e=>`const result_${e.name} = new ${r}(outputX);\n`).join("    ")}\n    ${this._mapSubKernels(e=>`let subKernelResult_${e.name};\n`).join("    ")}\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ${e}\n    }`}_resultKernel2DLoop(e){const{output:t}=this,r=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ${this._mapSubKernels(e=>`const result_${e.name} = new Array(outputY);\n`).join("    ")}\n    ${this._mapSubKernels(e=>`let subKernelResult_${e.name};\n`).join("    ")}\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y] = new ${r}(outputX);\n      ${this._mapSubKernels(e=>`const resultX_${e.name} = result_${e.name}[y] = new ${r}(outputX);\n`).join("")}\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ${e}\n      }\n    }`}_graphicalKernel2DLoop(e){const{output:t}=this,r=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    ${this._mapSubKernels(e=>`const result_${e.name} = new Array(outputY);\n`).join("    ")}\n    ${this._mapSubKernels(e=>`let subKernelResult_${e.name};\n`).join("    ")}\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      ${this._mapSubKernels(e=>`const resultX_${e.name} = result_${e.name}[y] = new ${r}(outputX);\n`).join("")}\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ${e}\n      }\n    }`}_resultKernel3DLoop(e){const{output:t}=this,r=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ${this._mapSubKernels(e=>`const result_${e.name} = new Array(outputZ);\n`).join("    ")}\n    ${this._mapSubKernels(e=>`let subKernelResult_${e.name};\n`).join("    ")}\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z] = new Array(outputY);\n      ${this._mapSubKernels(e=>`const resultY_${e.name} = result_${e.name}[z] = new Array(outputY);\n`).join("      ")}\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y] = new ${r}(outputX);\n        ${this._mapSubKernels(e=>`const resultX_${e.name} = resultY_${e.name}[y] = new ${r}(outputX);\n`).join("        ")}\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ${e}\n        }\n      }\n    }`}_kernelOutput(){return this.subKernels?`\n    return {\n      result: result,\n      ${this.subKernels.map(e=>`${e.property}: result_${e.name}`).join(",\n      ")}\n    };`:"\n    return result;"}_mapSubKernels(e){return null===this.subKernels?[""]:this.subKernels.map(e)}destroy(e){e&&delete this.canvas}static destroyContext(e){}toJSON(){const e=super.toJSON();return e.functionNodes=i.fromKernel(this,o).toJSON(),e}setOutput(e){super.setOutput(e);const[t,r]=this.output;this.graphical&&(this._imageData=this.context.createImageData(t,r),this._colorData=new Uint8ClampedArray(t*r*4))}}}},{"../../utils":126,"../function-builder":46,"../kernel":72,"./function-node":43,"./kernel-string":44}],46:[function(e,t,r){class n{static fromKernel(e,t,r){const{kernelArguments:i,argumentNames:o,argumentTypes:s,argumentSizes:a,argumentBitRatios:u,constants:l,constantTypes:c,constantBitRatios:h,debug:p,loopMaxIterations:f,nativeFunctions:d,output:m,optimizeFloatMemory:g,precision:v,plugins:y,source:b,subKernels:x,functions:_,leadingReturnStatement:w,followingReturnStatement:k,dynamicOutput:T}=e,E=(e,t,r)=>N.lookupReturnType(e,t,r),S=(e,t)=>N.lookupArgumentType(e,t),C=e=>N.lookupFunctionArgumentTypes(e),A=(e,t)=>N.lookupFunctionArgumentName(e,t),B=(e,t)=>N.lookupFunctionArgumentBitRatio(e,t),I=(e,t,r,n)=>{N.assignArgumentType(e,t,r,n)},P=(e,t,r,n)=>{N.trackArgumentSynonym(e,t,r,n)},R=(e,t,r)=>N.lookupArgumentSynonym(e,t,r),M=(e,t,r)=>{N.trackFunctionCall(e,t,r)},F=Object.assign({isRootKernel:!1,onNestedFunction:(e,r)=>{const n=[];for(let t=0;t<e.params.length;t++)n.push(e.params[t].name);const i=new t(null,Object.assign({},F,{returnType:null,ast:e,name:e.id.name,argumentNames:n,lookupReturnType:E,lookupArgumentType:S,lookupFunctionArgumentTypes:C,lookupFunctionArgumentName:A,lookupFunctionArgumentBitRatio:B,triggerImplyArgumentType:I,triggerTrackArgumentSynonym:P,lookupArgumentSynonym:R,onFunctionCall:M}));i.traceFunctionAST(e),N.addFunctionNode(i)},lookupReturnType:E,lookupArgumentType:S,lookupFunctionArgumentTypes:C,lookupFunctionArgumentName:A,lookupFunctionArgumentBitRatio:B,triggerImplyArgumentType:I,triggerTrackArgumentSynonym:P,lookupArgumentSynonym:R,onFunctionCall:M,optimizeFloatMemory:g,precision:v,constants:l,constantTypes:c,constantBitRatios:h,debug:p,loopMaxIterations:f,output:m,plugins:y,dynamicOutput:T},r||{}),D=Object.assign({},F,{isRootKernel:!0,name:"kernel",argumentNames:o,argumentTypes:s,argumentSizes:a,argumentBitRatios:u,leadingReturnStatement:w,followingReturnStatement:k});if("object"==typeof b&&b.functionNodes)return(new n).fromJSON(b.functionNodes,t);const L=new t(b,D);let O=null;_&&(O=_.map(e=>new t(e.source,{returnType:e.returnType,argumentTypes:e.argumentTypes,output:m,plugins:y,constants:l,constantTypes:c,constantBitRatios:h,optimizeFloatMemory:g,precision:v,lookupReturnType:E,lookupArgumentType:S,lookupFunctionArgumentTypes:C,lookupFunctionArgumentName:A,lookupFunctionArgumentBitRatio:B,triggerImplyArgumentType:I,triggerTrackArgumentSynonym:P,lookupArgumentSynonym:R,onFunctionCall:M})));let j=null;x&&(j=x.map(e=>{const{name:r,source:n}=e;return new t(n,Object.assign({},F,{name:r,isSubKernel:!0,isRootKernel:!1}))}));const N=new n({kernel:e,rootNode:L,functionNodes:O,nativeFunctions:d,subKernelNodes:j});return N}constructor(e){if(e=e||{},this.kernel=e.kernel,this.rootNode=e.rootNode,this.functionNodes=e.functionNodes||[],this.subKernelNodes=e.subKernelNodes||[],this.nativeFunctions=e.nativeFunctions||[],this.functionMap={},this.nativeFunctionNames=[],this.lookupChain=[],this.argumentChain=[],this.functionNodeDependencies={},this.functionCalls={},this.rootNode&&(this.functionMap.kernel=this.rootNode),this.functionNodes)for(let e=0;e<this.functionNodes.length;e++)this.functionMap[this.functionNodes[e].name]=this.functionNodes[e];if(this.subKernelNodes)for(let e=0;e<this.subKernelNodes.length;e++)this.functionMap[this.subKernelNodes[e].name]=this.subKernelNodes[e];if(this.nativeFunctions)for(let e=0;e<this.nativeFunctions.length;e++){const t=this.nativeFunctions[e];this.nativeFunctionNames.push(t.name)}}addFunctionNode(e){if(!e.name)throw new Error("functionNode.name needs set");this.functionMap[e.name]=e,e.isRootKernel&&(this.rootNode=e)}traceFunctionCalls(e,t){if(e=e||"kernel",t=t||[],this.nativeFunctionNames.indexOf(e)>-1)return-1===t.indexOf(e)&&t.push(e),t;const r=this.functionMap[e];if(r){const n=t.indexOf(e);if(-1===n){t.push(e),r.toString();for(let e=0;e<r.calledFunctions.length;++e)this.traceFunctionCalls(r.calledFunctions[e],t)}else{const e=t.splice(n,1)[0];t.push(e)}}return t}getPrototypeString(e){return this.getPrototypes(e).join("\n")}getPrototypes(e){return this.rootNode&&this.rootNode.toString(),e?this.getPrototypesFromFunctionNames(this.traceFunctionCalls(e,[]).reverse()):this.getPrototypesFromFunctionNames(Object.keys(this.functionMap))}getStringFromFunctionNames(e){const t=[];for(let r=0;r<e.length;++r){this.functionMap[e[r]]&&t.push(this.functionMap[e[r]].toString())}return t.join("\n")}getPrototypesFromFunctionNames(e){const t=[];for(let r=0;r<e.length;++r){const n=e[r],i=this.nativeFunctionNames.indexOf(n);if(i>-1){t.push(this.nativeFunctions[i].source);continue}const o=this.functionMap[n];o&&t.push(o.toString())}return t}toJSON(){return this.traceFunctionCalls(this.rootNode.name).reverse().map(e=>{const t=this.nativeFunctions.indexOf(e);if(t>-1)return{name:e,source:this.nativeFunctions[t].source};if(this.functionMap[e])return this.functionMap[e].toJSON();throw new Error(`function ${e} not found`)})}fromJSON(e,t){this.functionMap={};for(let r=0;r<e.length;r++){const n=e[r];this.functionMap[n.settings.name]=new t(n.ast,n.settings)}return this}getString(e){return e?this.getStringFromFunctionNames(this.traceFunctionCalls(e).reverse()):this.getStringFromFunctionNames(Object.keys(this.functionMap))}lookupArgumentType(e,t){const r=t.argumentNames.indexOf(e);if(-1===r)return null;if(0===this.lookupChain.length)return null;let n=this.lookupChain[this.lookupChain.length-1-this.argumentChain.length];if(!n)return null;const{ast:i,requestingNode:o}=n;if(0===i.arguments.length)return null;const s=i.arguments[r];if(!s)return null;this.argumentChain.push(e);const a=o.getType(s);return this.argumentChain.pop(),a}lookupReturnType(e,t,r){if("CallExpression"!==t.type)throw new Error(`expected ast type of "CallExpression", but is ${t.type}`);if(this._isNativeFunction(e))return this._lookupNativeFunctionReturnType(e);if(this._isFunction(e)){const n=this._getFunction(e);if(n.returnType)return n.returnType;{for(let e=0;e<this.lookupChain.length;e++)if(this.lookupChain[e].ast===t){if(0===n.argumentTypes.length&&t.arguments.length>0){const e=t.arguments;for(let t=0;t<e.length;t++)n.argumentTypes[t]=r.getType(e[t]);return n.returnType=n.getType(n.getJsAST())}throw new Error("circlical logic detected!")}this.lookupChain.push({name:r.name,ast:t,requestingNode:r});const e=n.getType(n.getJsAST());return this.lookupChain.pop(),n.returnType=e}}return null}_getFunction(e){return this._isFunction(e)||new Error(`Function ${e} not found`),this.functionMap[e]}_isFunction(e){return Boolean(this.functionMap[e])}_getNativeFunction(e){for(let t=0;t<this.nativeFunctions.length;t++)if(this.nativeFunctions[t].name===e)return this.nativeFunctions[t];return null}_isNativeFunction(e){return Boolean(this._getNativeFunction(e))}_lookupNativeFunctionReturnType(e){let t=this._getNativeFunction(e);if(t)return t.returnType;throw new Error(`Native function ${e} not found`)}lookupFunctionArgumentTypes(e){return this._isNativeFunction(e)?this._getNativeFunction(e).argumentTypes:this._isFunction(e)?this._getFunction(e).argumentTypes:null}lookupFunctionArgumentName(e,t){return this._getFunction(e).argumentNames[t]}lookupFunctionArgumentBitRatio(e,t){if(!this._isFunction(e))throw new Error("function not found");if(this.rootNode.name===e){const e=this.rootNode.argumentNames.indexOf(t);if(-1!==e)return this.rootNode.argumentBitRatios[e];throw new Error("argument bit ratio not found")}{const t=this._getFunction(e),r=t.argumentSynonym[t.synonymIndex];if(!r)throw new Error("argument synonym not found");return this.lookupFunctionArgumentBitRatio(r.functionName,r.argumentName)}}assignArgumentType(e,t,r,n){this._isFunction(e)&&(this._getFunction(e).argumentTypes[t]=r)}trackArgumentSynonym(e,t,r,n){if(!this._isFunction(r))return;const i=this._getFunction(r);i.argumentSynonym||(i.argumentSynonym={});const o=i.argumentNames[n];i.argumentSynonym[o]||(i.argumentSynonym[o]={}),i.synonymIndex++,i.argumentSynonym[i.synonymIndex]={functionName:e,argumentName:t,calleeArgumentName:o,calleeFunctionName:r}}lookupArgumentSynonym(e,t,r){if(e===t)return r;if(!this._isFunction(t))return null;const n=this._getFunction(t),i=n.argumentSynonym[n.synonymUseIndex];return i?i.calleeArgumentName!==r?null:(n.synonymUseIndex++,e!==t?this.lookupArgumentSynonym(e,i.functionName,i.argumentName):i.argumentName):null}trackFunctionCall(e,t,r){this.functionNodeDependencies[e]||(this.functionNodeDependencies[e]=new Set,this.functionCalls[e]=[]),this.functionNodeDependencies[e].add(t),this.functionCalls[e].push(r)}getKernelResultType(){return this.rootNode.returnType||this.rootNode.getType(this.rootNode.ast)}getSubKernelResultType(e){const t=this.subKernelNodes[e];let r=!1;for(let e=0;e<this.rootNode.functionCalls.length;e++){this.rootNode.functionCalls[e].ast.callee.name===t.name&&(r=!0)}if(!r)throw new Error(`SubKernel ${t.name} never called by kernel`);return t.returnType||t.getType(t.getJsAST())}getReturnTypes(){const e={[this.rootNode.name]:this.rootNode.getType(this.rootNode.ast)},t=this.traceFunctionCalls(this.rootNode.name);for(let r=0;r<t.length;r++){const n=t[r],i=this.functionMap[n];e[n]=i.getType(i.ast)}return e}}t.exports={FunctionBuilder:n}},{}],47:[function(e,t,r){const n=e("acorn"),{utils:i}=e("../utils"),{FunctionTracer:o}=e("./function-tracer");const s={Number:"Number",Float:"Float",Integer:"Integer",Array:"Number","Array(2)":"Number","Array(3)":"Number","Array(4)":"Number",Array2D:"Number",Array3D:"Number",Input:"Number",HTMLImage:"Array(4)",HTMLImageArray:"Array(4)",NumberTexture:"Number",MemoryOptimizedNumberTexture:"Number","ArrayTexture(1)":"Number","ArrayTexture(2)":"Array(2)","ArrayTexture(3)":"Array(3)","ArrayTexture(4)":"Array(4)"};t.exports={FunctionNode:class{constructor(e,t){if(!e&&!t.ast)throw new Error("source parameter is missing");if(t=t||{},this.source=e,this.ast=null,this.name="string"==typeof e?t.isRootKernel?"kernel":t.name||i.getFunctionNameFromString(e):null,this.calledFunctions=[],this.constants={},this.constantTypes={},this.constantBitRatios={},this.isRootKernel=!1,this.isSubKernel=!1,this.debug=null,this.declarations=null,this.functions=null,this.identifiers=null,this.contexts=null,this.functionCalls=null,this.states=[],this.lookupReturnType=null,this.lookupArgumentType=null,this.lookupFunctionArgumentTypes=null,this.lookupFunctionArgumentBitRatio=null,this.triggerImplyArgumentType=null,this.triggerTrackArgumentSynonym=null,this.lookupArgumentSynonym=null,this.onNestedFunction=null,this.onFunctionCall=null,this.optimizeFloatMemory=null,this.precision=null,this.loopMaxIterations=null,this.argumentNames="string"==typeof this.source?i.getArgumentNamesFromString(this.source):null,this.argumentTypes=[],this.argumentSizes=[],this.argumentBitRatios=null,this.returnType=null,this.output=[],this.plugins=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.dynamicOutput=null,this.strictTypingChecking=!1,t)for(const e in t)t.hasOwnProperty(e)&&this.hasOwnProperty(e)&&(this[e]=t[e]);this.synonymIndex=-1,this.synonymUseIndex=0,this.argumentSynonym={},this.literalTypes={},this.validate(),this._string=null,this._internalVariableNames={}}validate(){if("string"!=typeof this.source&&!this.ast)throw new Error("this.source not a string");if(!this.ast&&!i.isFunctionString(this.source))throw new Error("this.source not a function string");if(!this.name)throw new Error("this.name could not be set");if(this.argumentTypes.length>0&&this.argumentTypes.length!==this.argumentNames.length)throw new Error(`argumentTypes count of ${this.argumentTypes.length} exceeds ${this.argumentNames.length}`);if(this.output.length<1)throw new Error("this.output is not big enough")}isIdentifierConstant(e){return!!this.constants&&this.constants.hasOwnProperty(e)}isInput(e){return"Input"===this.argumentTypes[this.argumentNames.indexOf(e)]}pushState(e){this.states.push(e)}popState(e){if(this.state!==e)throw new Error(`Cannot popState ${e} when in ${this.state}`);this.states.pop()}isState(e){return this.state===e}get state(){return this.states[this.states.length-1]}astMemberExpressionUnroll(e){if("Identifier"===e.type)return e.name;if("ThisExpression"===e.type)return"this";if("MemberExpression"===e.type&&e.object&&e.property)return e.object.hasOwnProperty("name")&&"_"===e.object.name[0]?this.astMemberExpressionUnroll(e.property):this.astMemberExpressionUnroll(e.object)+"."+this.astMemberExpressionUnroll(e.property);if(e.hasOwnProperty("expressions")){const t=e.expressions[0];if("Literal"===t.type&&0===t.value&&2===e.expressions.length)return this.astMemberExpressionUnroll(e.expressions[1])}throw this.astErrorOutput("Unknown astMemberExpressionUnroll",e)}getJsAST(e){if(this.ast)return this.ast;if("object"==typeof this.source)return this.traceFunctionAST(this.source),this.ast=this.source;if(null===(e=e||n))throw new Error("Missing JS to AST parser");const t=Object.freeze(e.parse(`const parser_${this.name} = ${this.source};`,{locations:!0})),r=t.body[0].declarations[0].init;if(this.traceFunctionAST(r),!t)throw new Error("Failed to parse JS code");return this.ast=r}traceFunctionAST(e){const{contexts:t,declarations:r,functions:n,identifiers:i,functionCalls:s}=new o(e);this.contexts=t,this.identifiers=i,this.functionCalls=s,this.declarations=[],this.functions=n;for(let e=0;e<r.length;e++){const t=r[e],{ast:n,context:i,name:o,origin:s,forceInteger:a,assignable:u}=t,{init:l}=n,c=this.getDependencies(l);let h=null;if(a)h="Integer";else if(l){const e=this.getType(l);switch(e){case"Integer":case"Float":case"Number":h="MemberExpression"===l.type?e:"Number";break;case"LiteralInteger":h="Number";break;default:h=e}}this.declarations.push({valueType:h,dependencies:c,isSafe:this.isSafeDependencies(c),ast:n,name:o,context:i,origin:s,assignable:u})}for(let e=0;e<n.length;e++)this.onNestedFunction(n[e])}getDeclaration(e){for(let t=0;t<this.identifiers.length;t++){const r=this.identifiers[t];if(e===r.ast&&r.context.hasOwnProperty(e.name))for(let t=0;t<this.declarations.length;t++){const n=this.declarations[t];if(n.name===e.name&&n.context[e.name]===r.context[e.name])return n}}return null}getVariableType(e){if("Identifier"!==e.type)throw new Error(`ast of ${e.type} not "Identifier"`);let t=null;const r=this.argumentNames.indexOf(e.name);if(-1===r){const t=this.getDeclaration(e);if(t)return t.valueType}else{const n=this.argumentTypes[r];n?t=n:this.lookupArgumentType&&(t=this.argumentTypes[r]=this.lookupArgumentType(e.name,this))}if(!t&&this.strictTypingChecking)throw new Error(`Declaration of ${name} not found`);return t}getLookupType(e){if(!s.hasOwnProperty(e))throw new Error(`unknown typeLookupMap ${e}`);return s[e]}getConstantType(e){if(this.constantTypes[e]){const t=this.constantTypes[e];return"Float"===t?"Number":t}throw new Error(`Type for constant "${e}" not declared`)}getKernelArgumentName(e){return this.lookupArgumentSynonym?-1===this.argumentNames.indexOf(e)?null:this.lookupArgumentSynonym("kernel",this.name,e):null}toString(){return this._string?this._string:this._string=this.astGeneric(this.getJsAST(),[]).join("").trim()}toJSON(){const e={source:this.source,name:this.name,constants:this.constants,constantTypes:this.constantTypes,isRootKernel:this.isRootKernel,isSubKernel:this.isSubKernel,debug:this.debug,output:this.output,loopMaxIterations:this.loopMaxIterations,argumentNames:this.argumentNames,argumentTypes:this.argumentTypes,argumentSizes:this.argumentSizes,returnType:this.returnType,leadingReturnStatement:this.leadingReturnStatement,followingReturnStatement:this.followingReturnStatement};return{ast:this.ast,settings:e}}getType(e){if(Array.isArray(e))return this.getType(e[e.length-1]);switch(e.type){case"BlockStatement":return this.getType(e.body);case"ArrayExpression":return`Array(${e.elements.length})`;case"Literal":const t=`${e.start},${e.end}`;return this.literalTypes[t]?this.literalTypes[t]:Number.isInteger(e.value)?"LiteralInteger":!0===e.value||!1===e.value?"Boolean":"Number";case"AssignmentExpression":return this.getType(e.left);case"CallExpression":if(this.isAstMathFunction(e))return"Number";if(!e.callee||!e.callee.name){if("SequenceExpression"===e.callee.type&&e.callee.expressions[e.callee.expressions.length-1].property.name)return this.lookupReturnType(e.callee.expressions[e.callee.expressions.length-1].property.name,e,this);throw this.astErrorOutput("Unknown call expression",e)}if(e.callee&&e.callee.name)return this.lookupReturnType(e.callee.name,e,this);throw this.astErrorOutput(`Unhandled getType Type "${e.type}"`,e);case"BinaryExpression":switch(e.operator){case"%":return"Number";case">":case"<":return"Boolean";case"&":case"|":case"^":case"<<":case">>":case">>>":return"Integer"}const r=this.getType(e.left);return s[r]||r;case"UpdateExpression":return this.getType(e.argument);case"UnaryExpression":return"~"===e.operator?"Integer":this.getType(e.argument);case"VariableDeclaration":{const t=e.declarations;let r;for(let e=0;e<t.length;e++){const n=t[e];r=this.getType(n)}if(!r)throw this.astErrorOutput("Unable to find type for declaration",e);return r}case"VariableDeclarator":const n=this.getDeclaration(e.id);if(!n)throw this.astErrorOutput("Unable to find declarator",e);if(!n.valueType)throw this.astErrorOutput("Unable to find declarator valueType",e);return n.valueType;case"Identifier":if("Infinity"===e.name)return"Number";if(this.isAstVariable(e)&&"value"===this.getVariableSignature(e)){const t=this.getVariableType(e);if(!t)throw this.astErrorOutput("Unable to find identifier valueType",e);return t}const i=this.findIdentifierOrigin(e);return i&&i.init?this.getType(i.init):null;case"ReturnStatement":return this.getType(e.argument);case"MemberExpression":if(this.isAstMathFunction(e)){switch(e.property.name){case"ceil":case"floor":case"round":return"Integer"}return"Number"}if(this.isAstVariable(e)){switch(this.getVariableSignature(e)){case"value[]":return this.getLookupType(this.getVariableType(e.object));case"value[][]":return this.getLookupType(this.getVariableType(e.object.object));case"value[][][]":return this.getLookupType(this.getVariableType(e.object.object.object));case"value[][][][]":return this.getLookupType(this.getVariableType(e.object.object.object.object));case"this.thread.value":return"Integer";case"this.output.value":return this.dynamicOutput?"Integer":"LiteralInteger";case"this.constants.value":return this.getConstantType(e.property.name);case"this.constants.value[]":return this.getLookupType(this.getConstantType(e.object.property.name));case"this.constants.value[][]":return this.getLookupType(this.getConstantType(e.object.object.property.name));case"this.constants.value[][][]":return this.getLookupType(this.getConstantType(e.object.object.object.property.name));case"this.constants.value[][][][]":return this.getLookupType(this.getConstantType(e.object.object.object.object.property.name));case"fn()[]":case"fn()[][]":case"fn()[][][]":return this.getLookupType(this.getType(e.object));case"value.value":if(this.isAstMathVariable(e))return"Number";switch(e.property.name){case"r":case"g":case"b":case"a":return this.getLookupType(this.getVariableType(e.object))}case"[][]":return"Number"}throw this.astErrorOutput("Unhandled getType MemberExpression",e)}throw this.astErrorOutput("Unhandled getType MemberExpression",e);case"ConditionalExpression":return this.getType(e.consequent);case"FunctionDeclaration":case"FunctionExpression":const o=this.findLastReturn(e.body);return o?this.getType(o):null;case"IfStatement":return this.getType(e.consequent);default:throw this.astErrorOutput(`Unhandled getType Type "${e.type}"`,e)}}isAstMathVariable(e){return"MemberExpression"===e.type&&e.object&&"Identifier"===e.object.type&&"Math"===e.object.name&&e.property&&"Identifier"===e.property.type&&["E","PI","SQRT2","SQRT1_2","LN2","LN10","LOG2E","LOG10E"].indexOf(e.property.name)>-1}isAstMathFunction(e){return"CallExpression"===e.type&&e.callee&&"MemberExpression"===e.callee.type&&e.callee.object&&"Identifier"===e.callee.object.type&&"Math"===e.callee.object.name&&e.callee.property&&"Identifier"===e.callee.property.type&&["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","log2","max","min","pow","random","round","sign","sin","sqrt","tan"].indexOf(e.callee.property.name)>-1}isAstVariable(e){return"Identifier"===e.type||"MemberExpression"===e.type}isSafe(e){return this.isSafeDependencies(this.getDependencies(e))}isSafeDependencies(e){return!e||!e.every||e.every(e=>e.isSafe)}getDependencies(e,t,r){if(t||(t=[]),!e)return null;if(Array.isArray(e)){for(let n=0;n<e.length;n++)this.getDependencies(e[n],t,r);return t}switch(e.type){case"AssignmentExpression":return this.getDependencies(e.left,t,r),this.getDependencies(e.right,t,r),t;case"Literal":t.push({origin:"literal",value:e.value,isSafe:!0!==r&&e.value>-1/0&&e.value<1/0&&!isNaN(e.value)});break;case"VariableDeclarator":return this.getDependencies(e.init,t,r);case"Identifier":const n=this.getDeclaration(e);if(n)t.push({name:e.name,origin:"declaration",isSafe:!r&&this.isSafeDependencies(n.dependencies)});else if(this.argumentNames.indexOf(e.name)>-1)t.push({name:e.name,origin:"argument",isSafe:!1});else if(this.strictTypingChecking)throw new Error(`Cannot find identifier origin "${e.name}"`);break;case"FunctionDeclaration":return this.getDependencies(e.body.body[e.body.body.length-1],t,r);case"ReturnStatement":return this.getDependencies(e.argument,t);case"BinaryExpression":return r="/"===e.operator||"*"===e.operator,this.getDependencies(e.left,t,r),this.getDependencies(e.right,t,r),t;case"UnaryExpression":case"UpdateExpression":return this.getDependencies(e.argument,t,r);case"VariableDeclaration":return this.getDependencies(e.declarations,t,r);case"ArrayExpression":return t.push({origin:"declaration",isSafe:!0}),t;case"CallExpression":return t.push({origin:"function",isSafe:!0}),t;case"MemberExpression":const i=this.getMemberExpressionDetails(e);switch(i.signature){case"value[]":this.getDependencies(e.object,t,r);break;case"value[][]":this.getDependencies(e.object.object,t,r);break;case"value[][][]":this.getDependencies(e.object.object.object,t,r);break;case"this.output.value":this.dynamicOutput&&t.push({name:i.name,origin:"output",isSafe:!1})}if(i)return i.property&&this.getDependencies(i.property,t,r),i.xProperty&&this.getDependencies(i.xProperty,t,r),i.yProperty&&this.getDependencies(i.yProperty,t,r),i.zProperty&&this.getDependencies(i.zProperty,t,r),t;default:throw this.astErrorOutput(`Unhandled type ${e.type} in getDependencies`,e)}return t}getVariableSignature(e){if(!this.isAstVariable(e))throw new Error(`ast of type "${e.type}" is not a variable signature`);if("Identifier"===e.type)return"value";const t=[];for(;e;)e.computed?t.push("[]"):"ThisExpression"===e.type?t.unshift("this"):e.property&&e.property.name?"x"===e.property.name||"y"===e.property.name||"z"===e.property.name?t.unshift(".value"):"constants"===e.property.name||"thread"===e.property.name||"output"===e.property.name?t.unshift("."+e.property.name):t.unshift(".value"):e.name?t.unshift("value"):e.callee&&e.callee.name?t.unshift("fn()"):e.elements?t.unshift("[]"):t.unshift("unknown"),e=e.object;const r=t.join("");return["value","value[]","value[][]","value[][][]","value[][][][]","value.value","this.thread.value","this.output.value","this.constants.value","this.constants.value[]","this.constants.value[][]","this.constants.value[][][]","this.constants.value[][][][]","fn()[]","fn()[][]","fn()[][][]","[][]"].indexOf(r)>-1?r:null}build(){return this.toString().length>0}astGeneric(e,t){if(null===e)throw this.astErrorOutput("NULL ast",e);if(Array.isArray(e)){for(let r=0;r<e.length;r++)this.astGeneric(e[r],t);return t}switch(e.type){case"FunctionDeclaration":return this.astFunctionDeclaration(e,t);case"FunctionExpression":return this.astFunctionExpression(e,t);case"ReturnStatement":return this.astReturnStatement(e,t);case"Literal":return this.astLiteral(e,t);case"BinaryExpression":return this.astBinaryExpression(e,t);case"Identifier":return this.astIdentifierExpression(e,t);case"AssignmentExpression":return this.astAssignmentExpression(e,t);case"ExpressionStatement":return this.astExpressionStatement(e,t);case"EmptyStatement":return this.astEmptyStatement(e,t);case"BlockStatement":return this.astBlockStatement(e,t);case"IfStatement":return this.astIfStatement(e,t);case"SwitchStatement":return this.astSwitchStatement(e,t);case"BreakStatement":return this.astBreakStatement(e,t);case"ContinueStatement":return this.astContinueStatement(e,t);case"ForStatement":return this.astForStatement(e,t);case"WhileStatement":return this.astWhileStatement(e,t);case"DoWhileStatement":return this.astDoWhileStatement(e,t);case"VariableDeclaration":return this.astVariableDeclaration(e,t);case"VariableDeclarator":return this.astVariableDeclarator(e,t);case"ThisExpression":return this.astThisExpression(e,t);case"SequenceExpression":return this.astSequenceExpression(e,t);case"UnaryExpression":return this.astUnaryExpression(e,t);case"UpdateExpression":return this.astUpdateExpression(e,t);case"LogicalExpression":return this.astLogicalExpression(e,t);case"MemberExpression":return this.astMemberExpression(e,t);case"CallExpression":return this.astCallExpression(e,t);case"ArrayExpression":return this.astArrayExpression(e,t);case"DebuggerStatement":return this.astDebuggerStatement(e,t);case"ConditionalExpression":return this.astConditionalExpression(e,t)}throw this.astErrorOutput("Unknown ast type : "+e.type,e)}astErrorOutput(e,t){if("string"!=typeof this.source)return new Error(e);const r=i.getAstString(this.source,t),n=this.source.substr(t.start).split(/\n/),o=n.length>0?n[n.length-1]:0;return new Error(`${e} on line ${n.length}, position ${o.length}:\n ${r}`)}astDebuggerStatement(e,t){return t}astConditionalExpression(e,t){if("ConditionalExpression"!==e.type)throw this.astErrorOutput("Not a conditional expression",e);return t.push("("),this.astGeneric(e.test,t),t.push("?"),this.astGeneric(e.consequent,t),t.push(":"),this.astGeneric(e.alternate,t),t.push(")"),t}astFunction(e,t){throw new Error(`"astFunction" not defined on ${this.constructor.name}`)}astFunctionDeclaration(e,t){return this.isChildFunction(e)?t:this.astFunction(e,t)}astFunctionExpression(e,t){return this.isChildFunction(e)?t:this.astFunction(e,t)}isChildFunction(e){for(let t=0;t<this.functions.length;t++)if(this.functions[t]===e)return!0;return!1}astReturnStatement(e,t){return t}astLiteral(e,t){return this.literalTypes[`${e.start},${e.end}`]="Number",t}astBinaryExpression(e,t){return t}astIdentifierExpression(e,t){return t}astAssignmentExpression(e,t){return t}astExpressionStatement(e,t){return this.astGeneric(e.expression,t),t.push(";"),t}astEmptyStatement(e,t){return t}astBlockStatement(e,t){return t}astIfStatement(e,t){return t}astSwitchStatement(e,t){return t}astBreakStatement(e,t){return t.push("break;"),t}astContinueStatement(e,t){return t.push("continue;\n"),t}astForStatement(e,t){return t}astWhileStatement(e,t){return t}astDoWhileStatement(e,t){return t}astVariableDeclaration(e,t){const r=e.declarations;if(!r||!r[0]||!r[0].init)throw this.astErrorOutput("Unexpected expression",e);const n=r[0],i=n.init;let o=this.isState("in-for-loop-init")?"Integer":this.getType(i);"LiteralInteger"===o&&(o="Number");const s=typeMap[o];if(!s)throw this.astErrorOutput(`Markup type ${s} not handled`,e);throw this.getDependencies(n.init),new Error("remove me")}astVariableDeclarator(e,t){return this.astGeneric(e.id,t),null!==e.init&&(t.push("="),this.astGeneric(e.init,t)),t}astThisExpression(e,t){return t}astSequenceExpression(e,t){for(let r=0;r<e.expressions.length;r++)r>0&&t.push(","),this.astGeneric(e.expressions,t);return t}astUnaryExpression(e,t){return this.checkAndUpconvertBitwiseUnary(e,t)?t:(e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator)),t)}checkAndUpconvertBitwiseUnary(e,t){}astUpdateExpression(e,t){return e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator)),t}astLogicalExpression(e,t){return t.push("("),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(")"),t}astMemberExpression(e,t){return t}astCallExpression(e,t){return t}astArrayExpression(e,t){return t}getMemberExpressionDetails(e){if("MemberExpression"!==e.type)throw this.astErrorOutput(`Expression ${e.type} not a MemberExpression`,e);let t=null,r=null;const n=this.getVariableSignature(e);switch(n){case"value":return null;case"this.thread.value":case"this.output.value":return{signature:n,type:"Integer",name:e.property.name};case"value[]":if("string"!=typeof e.object.name)throw this.astErrorOutput("Unexpected expression",e);return{name:t=e.object.name,origin:"user",signature:n,type:this.getVariableType(e.object),xProperty:e.property};case"value[][]":if("string"!=typeof e.object.object.name)throw this.astErrorOutput("Unexpected expression",e);return{name:t=e.object.object.name,origin:"user",signature:n,type:this.getVariableType(e.object.object),yProperty:e.object.property,xProperty:e.property};case"value[][][]":if("string"!=typeof e.object.object.object.name)throw this.astErrorOutput("Unexpected expression",e);return{name:t=e.object.object.object.name,origin:"user",signature:n,type:this.getVariableType(e.object.object.object),zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case"value[][][][]":if("string"!=typeof e.object.object.object.object.name)throw this.astErrorOutput("Unexpected expression",e);return{name:t=e.object.object.object.object.name,origin:"user",signature:n,type:this.getVariableType(e.object.object.object.object),zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case"value.value":if("string"!=typeof e.property.name)throw this.astErrorOutput("Unexpected expression",e);if(this.isAstMathVariable(e))return{name:t=e.property.name,origin:"Math",type:"Number",signature:n};switch(e.property.name){case"r":case"g":case"b":case"a":return{name:t=e.object.name,property:e.property.name,origin:"user",signature:n,type:"Number"};default:throw this.astErrorOutput("Unexpected expression",e)}case"this.constants.value":if("string"!=typeof e.property.name)throw this.astErrorOutput("Unexpected expression",e);if(t=e.property.name,!(r=this.getConstantType(t)))throw this.astErrorOutput("Constant has no type",e);return{name:t,type:r,origin:"constants",signature:n};case"this.constants.value[]":if("string"!=typeof e.object.property.name)throw this.astErrorOutput("Unexpected expression",e);if(t=e.object.property.name,!(r=this.getConstantType(t)))throw this.astErrorOutput("Constant has no type",e);return{name:t,type:r,origin:"constants",signature:n,xProperty:e.property};case"this.constants.value[][]":if("string"!=typeof e.object.object.property.name)throw this.astErrorOutput("Unexpected expression",e);if(t=e.object.object.property.name,!(r=this.getConstantType(t)))throw this.astErrorOutput("Constant has no type",e);return{name:t,type:r,origin:"constants",signature:n,yProperty:e.object.property,xProperty:e.property};case"this.constants.value[][][]":if("string"!=typeof e.object.object.object.property.name)throw this.astErrorOutput("Unexpected expression",e);if(t=e.object.object.object.property.name,!(r=this.getConstantType(t)))throw this.astErrorOutput("Constant has no type",e);return{name:t,type:r,origin:"constants",signature:n,zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case"fn()[]":case"[][]":return{signature:n,property:e.property};default:throw this.astErrorOutput("Unexpected expression",e)}}findIdentifierOrigin(e){const t=[this.ast];for(;t.length>0;){const r=t[0];if("VariableDeclarator"===r.type&&r.id&&r.id.name&&r.id.name===e.name)return r;if(t.shift(),r.argument)t.push(r.argument);else if(r.body)t.push(r.body);else if(r.declarations)t.push(r.declarations);else if(Array.isArray(r))for(let e=0;e<r.length;e++)t.push(r[e])}return null}findLastReturn(e){const t=[e||this.ast];for(;t.length>0;){const e=t.pop();if("ReturnStatement"===e.type)return e;if("FunctionDeclaration"!==e.type)if(e.argument)t.push(e.argument);else if(e.body)t.push(e.body);else if(e.declarations)t.push(e.declarations);else if(Array.isArray(e))for(let r=0;r<e.length;r++)t.push(e[r]);else e.consequent?t.push(e.consequent):e.cases&&t.push(e.cases)}return null}getInternalVariableName(e){return this._internalVariableNames.hasOwnProperty(e)||(this._internalVariableNames[e]=0),this._internalVariableNames[e]++,1===this._internalVariableNames[e]?e:e+this._internalVariableNames[e]}varWarn(){console.warn("var declarations are deprecated, weird things happen when falling back to CPU because var scope differs in javascript than in most languages.  Use const or let")}}}},{"../utils":126,"./function-tracer":48,acorn:1}],48:[function(e,t,r){t.exports={FunctionTracer:class{constructor(e){this.runningContexts=[],this.contexts=[],this.functionCalls=[],this.declarations=[],this.identifiers=[],this.functions=[],this.returnStatements=[],this.inLoopInit=!1,this.scan(e)}get currentContext(){return this.runningContexts.length>0?this.runningContexts[this.runningContexts.length-1]:null}newContext(e){const t=Object.assign({},this.currentContext);this.contexts.push(t),this.runningContexts.push(t),e(),this.runningContexts.pop()}scan(e){if(Array.isArray(e))for(let t=0;t<e.length;t++)this.scan(e[t]);else switch(e.type){case"Program":this.scan(e.body);break;case"BlockStatement":this.newContext(()=>{this.scan(e.body)});break;case"AssignmentExpression":this.scan(e.left),this.scan(e.right);break;case"BinaryExpression":this.scan(e.left),e.right&&this.scan(e.right);break;case"UpdateExpression":case"UnaryExpression":this.scan(e.argument);break;case"VariableDeclaration":this.scan(e.declarations);break;case"VariableDeclarator":const{currentContext:t}=this,r={ast:e,context:t,name:e.id.name,origin:"declaration",forceInteger:this.inLoopInit,assignable:!this.inLoopInit&&!t.hasOwnProperty(e.id.name)};t[e.id.name]=r,this.declarations.push(r),this.scan(e.id),this.scan(e.init);break;case"FunctionExpression":case"FunctionDeclaration":0===this.runningContexts.length?this.scan(e.body):this.functions.push(e);break;case"IfStatement":this.scan(e.test),this.scan(e.consequent),e.alternate&&this.scan(e.alternate);break;case"ForStatement":this.newContext(()=>{e.init&&(this.inLoopInit=!0,this.scan(e.init),this.inLoopInit=!1),e.test&&this.scan(e.test),this.scan(e.update),this.newContext(()=>{this.scan(e.body)})});break;case"DoWhileStatement":case"WhileStatement":this.newContext(()=>{this.scan(e.body),this.scan(e.test)});break;case"Identifier":this.identifiers.push({context:this.currentContext,ast:e});break;case"ReturnStatement":this.returnStatements.push(e),this.scan(e.argument);break;case"MemberExpression":this.scan(e.object),this.scan(e.property);break;case"ExpressionStatement":this.scan(e.expression);break;case"ThisExpression":break;case"CallExpression":this.functionCalls.push({context:this.currentContext,ast:e}),this.scan(e.arguments);break;case"ArrayExpression":this.scan(e.elements);break;case"ConditionalExpression":this.scan(e.consequent),this.scan(e.alternate),this.scan(e.consequent);break;case"SwitchStatement":this.scan(e.discriminant),this.scan(e.cases);break;case"SwitchCase":e.test&&this.scan(e.test),this.scan(e.consequent);break;case"LogicalExpression":this.scan(e.left),this.scan(e.right);break;case"Literal":case"DebuggerStatement":case"EmptyStatement":case"BreakStatement":break;default:throw new Error(`unhandled type "${e.type}"`)}}}}},{}],49:[function(e,t,r){const{glWiretap:n}=e("gl-wiretap"),{utils:i}=e("../../utils");function o(e){return e.toString().replace("=>","").replace(/^function /,"").replace(/utils[.]/g,"/*utils.*/")}function s(e,t){const r="single"===t.precision?e:`new Float32Array(${e}.buffer)`;return t.output[2]?`renderOutput(${r}, ${t.output[0]}, ${t.output[1]}, ${t.output[2]})`:t.output[1]?`renderOutput(${r}, ${t.output[0]}, ${t.output[1]})`:`renderOutput(${r}, ${t.output[0]})`}function a(e,t){const r=e.toArray.toString(),n=!/^function/.test(r);return`() => {\n  ${i.flattenFunctionToString(`${n?"function ":""}${r}`,{findDependency:(t,r)=>{if("utils"===t)return`const ${r} = ${i[r].toString()};`;if("this"===t)return`${n?"function ":""}${e[r].toString()}`;throw new Error("unhandled fromObject")},thisLookup:r=>{if("texture"===r)return t;if(e.hasOwnProperty(r))return JSON.stringify(e[r]);throw new Error(`unhandled thisLookup ${r}`)}})}\n  return toArray();\n  }`}t.exports={glKernelString:function(e,t,r,u,l){const c=[],h=n(r.context,{useTrackablePrimitives:!0,onReadPixels:e=>{if(I.subKernels){if(p){const t=I.subKernels[f++].property;c.push(`    result${isNaN(t)?"."+t:`[${t}]`} = ${s(e,I)};`)}else c.push(`    const result = { result: ${s(e,I)} };`),p=!0;f===I.subKernels.length&&c.push("    return result;")}else e?c.push(`    return ${s(e,I)};`):c.push("    return null;")},onUnrecognizedArgumentLookup:e=>{for(let t=0;t<I.kernelConstants.length;t++){const r=I.kernelConstants[t];if("HTMLImageArray"===r.type){const e=I.constants[r.name],t=`uploadValue_${r.name}[${e.indexOf(r.uploadValue)}]`;return h.insertVariable(t,I.constants),t}if(r.uploadValue===e){const e=`uploadValue_${r.name}`;return h.insertVariable(e,r),e}}}});let p=!1,f=0;const{source:d,canvas:m,output:g,pipeline:v,graphical:y,loopMaxIterations:b,constants:x,optimizeFloatMemory:_,precision:w,fixIntegerDivisionAccuracy:k,functions:T,nativeFunctions:E,subKernels:S,immutable:C,kernelArguments:A,kernelConstants:B}=r,I=new e(d,{canvas:m,context:h,checkContext:!1,output:g,pipeline:v,graphical:y,loopMaxIterations:b,constants:x,optimizeFloatMemory:_,precision:w,fixIntegerDivisionAccuracy:k,functions:T,nativeFunctions:E,subKernels:S,immutable:C});let P=[];h.setIndent(2),I.build.apply(I,t),P.push(h.toString()),h.reset();const R=Array.from(t).map(e=>{switch(typeof e){case"number":case"boolean":return new e.constructor(e)}return e});if(I.kernelArguments.forEach((e,r)=>{switch(e.type){case"Integer":case"Boolean":case"Number":case"Float":case"Array":case"HTMLImage":h.insertVariable(`uploadValue_${e.name}`,R[r]);break;case"HTMLImageArray":for(let n=0;n<t[r].length;n++){const i=t[r];h.insertVariable(`uploadValue_${e.name}[${n}]`,i[n])}break;case"Input":h.insertVariable(`uploadValue_${e.name}`,e.uploadValue);break;case"MemoryOptimizedNumberTexture":case"NumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":h.insertVariable(`uploadValue_${e.name}`,R[r].texture);break;default:throw new Error(`unhandled kernelArgumentType insertion for glWiretap of type ${e.type}`)}}),P.push("/** start of injected functions **/"),P.push(`function ${o(i.flattenTo)}`),P.push(`function ${o(i.flatten2dArrayTo)}`),P.push(`function ${o(i.flatten3dArrayTo)}`),P.push(`function ${o(i.isArray)}`),I.renderOutput!==I.renderTexture&&I.formatValues&&P.push(`  const renderOutput = function ${o(I.formatValues)};`),P.push("/** end of injected functions **/"),P.push(`  const innerKernel = function (${I.kernelArguments.map(e=>e.varName).join(", ")}) {`),h.setIndent(4),I.run.apply(I,R),I.renderKernels?I.renderKernels():I.renderOutput&&I.renderOutput(),P.push("/** start setup uploads for kernel values **/"),I.kernelArguments.forEach(e=>{P.push(e.getStringValueHandler())}),P.push("/** end setup uploads for kernel values **/"),P.push(h.toString()),I.renderOutput===I.renderTexture){h.reset();const e=I.renderKernels(),t=h.getContextVariableName(I.outputTexture);P.push(`    return {\n      result: {\n        texture: ${t},\n        type: '${e.result.type}',\n        toArray: ${a(e.result,t)}\n      },`);const{subKernels:r,subKernelOutputTextures:n}=I;for(let t=0;t<r.length;t++){const i=n[t],o=r[t],s=e[o.property],u=h.getContextVariableName(i);P.push(`\n      ${o.property}: {\n        texture: ${u},\n        type: '${s.type}',\n        toArray: ${a(s,u)}\n      },`)}P.push("    };")}P.push(`    ${l?"\n"+l+"    ":""}`),P.push(c.join("\n")),P.push("  };"),I.graphical&&(P.push(function(e){const t=e.getPixels.toString(),r=!/^function/.test(t);return i.flattenFunctionToString(`${r?"function ":""}${t}`,{findDependency:(e,t)=>"utils"===e?`const ${t} = ${i[t].toString()};`:null,thisLookup:t=>{if("context"===t)return null;if(e.hasOwnProperty(t))return JSON.stringify(e[t]);throw new Error(`unhandled thisLookup ${t}`)}})}(I)),P.push("innerKernel.getPixels = getPixels;")),P.push("  return innerKernel;");let M=[];return B.forEach(e=>{M.push(`${e.getStringValueHandler()}`)}),`function kernel(settings) {\n  const { context, constants } = settings;\n  ${M.join("")}\n  ${u||""}\n${P.join("\n")}\n}`}}},{"../../utils":126,"gl-wiretap":39}],50:[function(e,t,r){const{Kernel:n}=e("../kernel"),{Texture:i}=e("../../texture"),{utils:o}=e("../../utils"),{GLTextureArray2Float:s}=e("./texture/array-2-float"),{GLTextureArray2Float2D:a}=e("./texture/array-2-float-2d"),{GLTextureArray2Float3D:u}=e("./texture/array-2-float-3d"),{GLTextureArray3Float:l}=e("./texture/array-3-float"),{GLTextureArray3Float2D:c}=e("./texture/array-3-float-2d"),{GLTextureArray3Float3D:h}=e("./texture/array-3-float-3d"),{GLTextureArray4Float:p}=e("./texture/array-4-float"),{GLTextureArray4Float2D:f}=e("./texture/array-4-float-2d"),{GLTextureArray4Float3D:d}=e("./texture/array-4-float-3d"),{GLTextureFloat:m}=e("./texture/float"),{GLTextureFloat2D:g}=e("./texture/float-2d"),{GLTextureFloat3D:v}=e("./texture/float-3d"),{GLTextureMemoryOptimized:y}=e("./texture/memory-optimized"),{GLTextureMemoryOptimized2D:b}=e("./texture/memory-optimized-2d"),{GLTextureMemoryOptimized3D:x}=e("./texture/memory-optimized-3d"),{GLTextureUnsigned:_}=e("./texture/unsigned"),{GLTextureUnsigned2D:w}=e("./texture/unsigned-2d"),{GLTextureUnsigned3D:k}=e("./texture/unsigned-3d"),{GLTextureGraphical:T}=e("./texture/graphical");const E=Object.freeze({PackedPixelToUint8Array:Symbol("PackedPixelToUint8Array"),PackedPixelToFloat:Symbol("PackedPixelToFloat"),PackedPixelTo2DFloat:Symbol("PackedPixelTo2DFloat"),PackedPixelTo3DFloat:Symbol("PackedPixelTo3DFloat"),PackedTexture:Symbol("PackedTexture"),FloatPixelToFloat32Array:Symbol("FloatPixelToFloat32Array"),FloatPixelToFloat:Symbol("FloatPixelToFloat"),FloatPixelTo2DFloat:Symbol("FloatPixelTo2DFloat"),FloatPixelTo3DFloat:Symbol("FloatPixelTo3DFloat"),FloatPixelToArray2:Symbol("FloatPixelToArray2"),FloatPixelTo2DArray2:Symbol("FloatPixelTo2DArray2"),FloatPixelTo3DArray2:Symbol("FloatPixelTo3DArray2"),FloatPixelToArray3:Symbol("FloatPixelToArray3"),FloatPixelTo2DArray3:Symbol("FloatPixelTo2DArray3"),FloatPixelTo3DArray3:Symbol("FloatPixelTo3DArray3"),FloatPixelToArray4:Symbol("FloatPixelToArray4"),FloatPixelTo2DArray4:Symbol("FloatPixelTo2DArray4"),FloatPixelTo3DArray4:Symbol("FloatPixelTo3DArray4"),FloatTexture:Symbol("FloatTexture"),MemoryOptimizedFloatPixelToMemoryOptimizedFloat:Symbol("MemoryOptimizedFloatPixelToFloat"),MemoryOptimizedFloatPixelToMemoryOptimized2DFloat:Symbol("MemoryOptimizedFloatPixelTo2DFloat"),MemoryOptimizedFloatPixelToMemoryOptimized3DFloat:Symbol("MemoryOptimizedFloatPixelTo3DFloat")}),S={int:"Integer",float:"Number",vec2:"Array(2)",vec3:"Array(3)",vec4:"Array(4)"};t.exports={GLKernel:class extends n{static get mode(){return"gpu"}static getIsFloatRead(){const e=new this("function kernelFunction() {\n      return 1;\n    }",{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[1],precision:"single",returnType:"Number"});e.build(),e.run();const t=e.renderOutput();return e.destroy(!0),1===t[0]}static getIsIntegerDivisionAccurate(){const e=new this(function(e,t){return e[this.thread.x]/t[this.thread.x]}.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[2],returnType:"Number",precision:"unsigned"}),t=[[6,6030401],[3,3991]];e.build.apply(e,t),e.run.apply(e,t);const r=e.renderOutput();return e.destroy(!0),2===r[0]&&1511===r[1]}static get testCanvas(){throw new Error(`"testCanvas" not defined on ${this.name}`)}static get testContext(){throw new Error(`"testContext" not defined on ${this.name}`)}static get features(){throw new Error(`"features" not defined on ${this.name}`)}static setupFeatureChecks(){throw new Error(`"setupFeatureChecks" not defined on ${this.name}`)}setFixIntegerDivisionAccuracy(e){return this.fixIntegerDivisionAccuracy=e,this}setPrecision(e){return this.precision=e,this}setFloatTextures(e){return o.warnDeprecated("method","setFloatTextures","setOptimizeFloatMemory"),this.floatTextures=e,this}static nativeFunctionArguments(e){const t=[],r=[],n=[],i=/^[a-zA-Z_]/,o=/[a-zA-Z_0-9]/;let s=0,a=null,u=null;for(;s<e.length;){const l=e[s],c=e[s+1],h=n.length>0?n[n.length-1]:null;if("FUNCTION_ARGUMENTS"!==h||"/"!==l||"*"!==c)if("MULTI_LINE_COMMENT"!==h||"*"!==l||"/"!==c)if("FUNCTION_ARGUMENTS"!==h||"/"!==l||"/"!==c)if("COMMENT"!==h||"\n"!==l)if(null!==h||"("!==l){if("FUNCTION_ARGUMENTS"===h){if(")"===l){n.pop();break}if("f"===l&&"l"===c&&"o"===e[s+2]&&"a"===e[s+3]&&"t"===e[s+4]&&" "===e[s+5]){n.push("DECLARE_VARIABLE"),u="float",a="",s+=6;continue}if("i"===l&&"n"===c&&"t"===e[s+2]&&" "===e[s+3]){n.push("DECLARE_VARIABLE"),u="int",a="",s+=4;continue}if("v"===l&&"e"===c&&"c"===e[s+2]&&"2"===e[s+3]&&" "===e[s+4]){n.push("DECLARE_VARIABLE"),u="vec2",a="",s+=5;continue}if("v"===l&&"e"===c&&"c"===e[s+2]&&"3"===e[s+3]&&" "===e[s+4]){n.push("DECLARE_VARIABLE"),u="vec3",a="",s+=5;continue}if("v"===l&&"e"===c&&"c"===e[s+2]&&"4"===e[s+3]&&" "===e[s+4]){n.push("DECLARE_VARIABLE"),u="vec4",a="",s+=5;continue}}else if("DECLARE_VARIABLE"===h){if(""===a){if(" "===l){s++;continue}if(!i.test(l))throw new Error("variable name is not expected string")}a+=l,o.test(c)||(n.pop(),r.push(a),t.push(S[u]))}s++}else n.push("FUNCTION_ARGUMENTS"),s++;else n.pop(),s++;else n.push("COMMENT"),s+=2;else n.pop(),s+=2;else n.push("MULTI_LINE_COMMENT"),s+=2}if(n.length>0)throw new Error("GLSL function was not parsable");return{argumentNames:r,argumentTypes:t}}static nativeFunctionReturnType(e){return S[e.match(/int|float|vec[2-4]/)[0]]}static combineKernels(e,t){e.apply(null,arguments);const{texSize:r,context:n,threadDim:i}=t.texSize;let s;if("single"===t.precision){const e=r[0],t=Math.ceil(r[1]/4);s=new Float32Array(e*t*4*4),n.readPixels(0,0,e,4*t,n.RGBA,n.FLOAT,s)}else{const e=new Uint8Array(r[0]*r[1]*4);n.readPixels(0,0,r[0],r[1],n.RGBA,n.UNSIGNED_BYTE,e),s=new Float32Array(e.buffer)}return s=s.subarray(0,i[0]*i[1]*i[2]),1===t.output.length?s:2===t.output.length?o.splitArray(s,t.output[0]):3===t.output.length?o.splitArray(s,t.output[0]*t.output[1]).map(function(e){return o.splitArray(e,t.output[0])}):void 0}constructor(e,t){super(e,t),this.transferValues=null,this.formatValues=null,this.TextureConstructor=null,this.renderOutput=null,this.renderRawOutput=null,this.texSize=null,this.fixIntegerDivisionAccuracy=null,this.translatedSource=null,this.renderStrategy=null,this.compiledFragmentShader=null,this.compiledVertexShader=null}translateSource(){throw new Error(`"translateSource" not defined on ${this.constructor.name}`)}pickRenderStrategy(e){if(this.graphical)return this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=(e=>e),this.TextureConstructor=T,null;if("unsigned"===this.precision)if(this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=this.readPackedPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=k,this.renderStrategy=E.PackedPixelTo3DFloat,null):this.output[1]>0?(this.TextureConstructor=w,this.renderStrategy=E.PackedPixelTo2DFloat,null):(this.TextureConstructor=_,this.renderStrategy=E.PackedPixelToFloat,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(e)}else switch(null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.renderOutput=this.renderValues,this.output[2]>0?(this.TextureConstructor=k,this.renderStrategy=E.PackedPixelTo3DFloat,this.formatValues=o.erect3DPackedFloat,null):this.output[1]>0?(this.TextureConstructor=w,this.renderStrategy=E.PackedPixelTo2DFloat,this.formatValues=o.erect2DPackedFloat,null):(this.TextureConstructor=_,this.renderStrategy=E.PackedPixelToFloat,this.formatValues=o.erectPackedFloat,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(e)}else{if("single"!==this.precision)throw new Error(`unhandled precision of "${this.precision}"`);if(this.renderRawOutput=this.readFloatPixelsToFloat32Array,this.transferValues=this.readFloatPixelsToFloat32Array,this.pipeline)switch(this.renderStrategy=E.FloatTexture,this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.optimizeFloatMemory?this.output[2]>0?(this.TextureConstructor=x,null):this.output[1]>0?(this.TextureConstructor=b,null):(this.TextureConstructor=y,null):this.output[2]>0?(this.TextureConstructor=v,null):this.output[1]>0?(this.TextureConstructor=g,null):(this.TextureConstructor=m,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=u,null):this.output[1]>0?(this.TextureConstructor=a,null):(this.TextureConstructor=s,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=h,null):this.output[1]>0?(this.TextureConstructor=c,null):(this.TextureConstructor=l,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=d,null):this.output[1]>0?(this.TextureConstructor=f,null):(this.TextureConstructor=p,null)}if(this.renderOutput=this.renderValues,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.optimizeFloatMemory)switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=x,this.renderStrategy=E.MemoryOptimizedFloatPixelToMemoryOptimized3DFloat,this.formatValues=o.erectMemoryOptimized3DFloat,null):this.output[1]>0?(this.TextureConstructor=b,this.renderStrategy=E.MemoryOptimizedFloatPixelToMemoryOptimized2DFloat,this.formatValues=o.erectMemoryOptimized2DFloat,null):(this.TextureConstructor=y,this.renderStrategy=E.MemoryOptimizedFloatPixelToMemoryOptimizedFloat,this.formatValues=o.erectMemoryOptimizedFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=u,this.renderStrategy=E.FloatPixelTo3DArray2,this.formatValues=o.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=a,this.renderStrategy=E.FloatPixelTo2DArray2,this.formatValues=o.erect2DArray2,null):(this.TextureConstructor=s,this.renderStrategy=E.FloatPixelToArray2,this.formatValues=o.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=h,this.renderStrategy=E.FloatPixelTo3DArray3,this.formatValues=o.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=c,this.renderStrategy=E.FloatPixelTo2DArray3,this.formatValues=o.erect2DArray3,null):(this.TextureConstructor=l,this.renderStrategy=E.FloatPixelToArray3,this.formatValues=o.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=d,this.renderStrategy=E.FloatPixelTo3DArray4,this.formatValues=o.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=f,this.renderStrategy=E.FloatPixelTo2DArray4,this.formatValues=o.erect2DArray4,null):(this.TextureConstructor=p,this.renderStrategy=E.FloatPixelToArray4,this.formatValues=o.erectArray4,null)}else switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=v,this.renderStrategy=E.FloatPixelTo3DFloat,this.formatValues=o.erect3DFloat,null):this.output[1]>0?(this.TextureConstructor=g,this.renderStrategy=E.FloatPixelTo2DFloat,this.formatValues=o.erect2DFloat,null):(this.TextureConstructor=m,this.renderStrategy=E.FloatPixelToFloat,this.formatValues=o.erectFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=u,this.renderStrategy=E.FloatPixelTo3DArray2,this.formatValues=o.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=a,this.renderStrategy=E.FloatPixelTo2DArray2,this.formatValues=o.erect2DArray2,null):(this.TextureConstructor=s,this.renderStrategy=E.FloatPixelToArray2,this.formatValues=o.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=h,this.renderStrategy=E.FloatPixelTo3DArray3,this.formatValues=o.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=c,this.renderStrategy=E.FloatPixelTo2DArray3,this.formatValues=o.erect2DArray3,null):(this.TextureConstructor=l,this.renderStrategy=E.FloatPixelToArray3,this.formatValues=o.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=d,this.renderStrategy=E.FloatPixelTo3DArray4,this.formatValues=o.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=f,this.renderStrategy=E.FloatPixelTo2DArray4,this.formatValues=o.erect2DArray4,null):(this.TextureConstructor=p,this.renderStrategy=E.FloatPixelToArray4,this.formatValues=o.erectArray4,null)}}throw new Error(`unhandled return type "${this.returnType}"`)}getKernelString(){throw new Error("abstract method call")}getMainResultTexture(){switch(this.returnType){case"LiteralInteger":case"Float":case"Integer":case"Number":return this.getMainResultNumberTexture();case"Array(2)":return this.getMainResultArray2Texture();case"Array(3)":return this.getMainResultArray3Texture();case"Array(4)":return this.getMainResultArray4Texture();default:throw new Error(`unhandled returnType type ${this.returnType}`)}}getMainResultKernelNumberTexture(){throw new Error("abstract method call")}getMainResultSubKernelNumberTexture(){throw new Error("abstract method call")}getMainResultKernelArray2Texture(){throw new Error("abstract method call")}getMainResultSubKernelArray2Texture(){throw new Error("abstract method call")}getMainResultKernelArray3Texture(){throw new Error("abstract method call")}getMainResultSubKernelArray3Texture(){throw new Error("abstract method call")}getMainResultKernelArray4Texture(){throw new Error("abstract method call")}getMainResultSubKernelArray4Texture(){throw new Error("abstract method call")}getMainResultGraphical(){throw new Error("abstract method call")}getMainResultMemoryOptimizedFloats(){throw new Error("abstract method call")}getMainResultPackedPixels(){throw new Error("abstract method call")}getMainResultString(){return this.graphical?this.getMainResultGraphical():"single"===this.precision?this.optimizeFloatMemory?this.getMainResultMemoryOptimizedFloats():this.getMainResultTexture():this.getMainResultPackedPixels()}getMainResultNumberTexture(){return o.linesToString(this.getMainResultKernelNumberTexture())+o.linesToString(this.getMainResultSubKernelNumberTexture())}getMainResultArray2Texture(){return o.linesToString(this.getMainResultKernelArray2Texture())+o.linesToString(this.getMainResultSubKernelArray2Texture())}getMainResultArray3Texture(){return o.linesToString(this.getMainResultKernelArray3Texture())+o.linesToString(this.getMainResultSubKernelArray3Texture())}getMainResultArray4Texture(){return o.linesToString(this.getMainResultKernelArray4Texture())+o.linesToString(this.getMainResultSubKernelArray4Texture())}renderTexture(){return new this.TextureConstructor({texture:this.outputTexture,size:this.texSize,dimensions:this.threadDim,output:this.output,context:this.context})}readPackedPixelsToUint8Array(){if("unsigned"!==this.precision)throw new Error('Requires this.precision to be "unsigned"');const{texSize:e,context:t}=this,r=new Uint8Array(e[0]*e[1]*4);return t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,r),r}readPackedPixelsToFloat32Array(){return new Float32Array(this.readPackedPixelsToUint8Array().buffer)}readFloatPixelsToFloat32Array(){if("single"!==this.precision)throw new Error('Requires this.precision to be "single"');const{texSize:e,context:t}=this,r=e[0],n=e[1],i=new Float32Array(r*n*4);return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,i),i}readMemoryOptimizedFloatPixelsToFloat32Array(){if("single"!==this.precision)throw new Error('Requires this.precision to be "single"');const{texSize:e,context:t}=this,r=e[0],n=e[1],i=new Float32Array(r*n*4);return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,i),i}getPixels(e){const{context:t,output:r}=this,[n,i]=r,s=new Uint8Array(n*i*4);return t.readPixels(0,0,n,i,t.RGBA,t.UNSIGNED_BYTE,s),new Uint8ClampedArray((e?s:o.flipPixels(s,n,i)).buffer)}renderKernelsToArrays(){const e={result:this.renderOutput()};for(let t=0;t<this.subKernels.length;t++)e[this.subKernels[t].property]=new this.TextureConstructor({texture:this.subKernelOutputTextures[t],size:this.texSize,dimensions:this.threadDim,output:this.output,context:this.context}).toArray();return e}renderKernelsToTextures(){const e={result:this.renderOutput()};for(let t=0;t<this.subKernels.length;t++)e[this.subKernels[t].property]=new this.TextureConstructor({texture:this.subKernelOutputTextures[t],size:this.texSize,dimensions:this.threadDim,output:this.output,context:this.context});return e}setOutput(e){if(super.setOutput(e),this.program){this.threadDim=[this.output[0],this.output[1]||1,this.output[2]||1],this.texSize=o.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output);const{context:e}=this;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this.updateMaxTexSize(),this.framebuffer.width=this.texSize[0],this.framebuffer.height=this.texSize[1],this.context.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),this.canvas.width=this.maxTexSize[0],this.canvas.height=this.maxTexSize[1],this._setupOutputTexture(),this.subKernels&&this.subKernels.length>0&&this._setupSubOutputTextures()}return this}renderValues(){return this.formatValues(this.transferValues(),this.output[0],this.output[1],this.output[2])}},renderStrategy:E}},{"../../texture":125,"../../utils":126,"../kernel":72,"./texture/array-2-float":53,"./texture/array-2-float-2d":51,"./texture/array-2-float-3d":52,"./texture/array-3-float":56,"./texture/array-3-float-2d":54,"./texture/array-3-float-3d":55,"./texture/array-4-float":59,"./texture/array-4-float-2d":57,"./texture/array-4-float-3d":58,"./texture/float":62,"./texture/float-2d":60,"./texture/float-3d":61,"./texture/graphical":63,"./texture/memory-optimized":66,"./texture/memory-optimized-2d":64,"./texture/memory-optimized-3d":65,"./texture/unsigned":69,"./texture/unsigned-2d":67,"./texture/unsigned-3d":68}],51:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureArray2Float2D:class extends i{constructor(e){super(e),this.type="ArrayTexture(2)"}toArray(){return n.erect2DArray2(this.renderValues(),this.output[0],this.output[1])}}}},{"../../../utils":126,"./float":62}],52:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureArray2Float3D:class extends i{constructor(e){super(e),this.type="ArrayTexture(2)"}toArray(){return n.erect3DArray2(this.renderValues(),this.output[0],this.output[1],this.output[2])}}}},{"../../../utils":126,"./float":62}],53:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureArray2Float:class extends i{constructor(e){super(e),this.type="ArrayTexture(2)"}toArray(){return n.erectArray2(this.renderValues(),this.output[0],this.output[1])}}}},{"../../../utils":126,"./float":62}],54:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureArray3Float2D:class extends i{constructor(e){super(e),this.type="ArrayTexture(3)"}toArray(){return n.erect2DArray3(this.renderValues(),this.output[0],this.output[1])}}}},{"../../../utils":126,"./float":62}],55:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureArray3Float3D:class extends i{constructor(e){super(e),this.type="ArrayTexture(3)"}toArray(){return n.erect3DArray3(this.renderValues(),this.output[0],this.output[1],this.output[2])}}}},{"../../../utils":126,"./float":62}],56:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureArray3Float:class extends i{constructor(e){super(e),this.type="ArrayTexture(3)"}toArray(){return n.erectArray3(this.renderValues(),this.output[0])}}}},{"../../../utils":126,"./float":62}],57:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureArray4Float2D:class extends i{constructor(e){super(e),this.type="ArrayTexture(4)"}toArray(){return n.erect2DArray4(this.renderValues(),this.output[0],this.output[1])}}}},{"../../../utils":126,"./float":62}],58:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureArray4Float3D:class extends i{constructor(e){super(e),this.type="ArrayTexture(4)"}toArray(){return n.erect3DArray4(this.renderValues(),this.output[0],this.output[1],this.output[2])}}}},{"../../../utils":126,"./float":62}],59:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureArray4Float:class extends i{constructor(e){super(e),this.type="ArrayTexture(4)"}toArray(){return n.erectArray4(this.renderValues(),this.output[0])}}}},{"../../../utils":126,"./float":62}],60:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureFloat2D:class extends i{constructor(e){super(e),this.type="ArrayTexture(1)"}toArray(){return n.erect2DFloat(this.renderValues(),this.output[0],this.output[1])}}}},{"../../../utils":126,"./float":62}],61:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureFloat3D:class extends i{constructor(e){super(e),this.type="ArrayTexture(1)"}toArray(){return n.erect3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}}},{"../../../utils":126,"./float":62}],62:[function(e,t,r){const{utils:n}=e("../../../utils"),{Texture:i}=e("../../../texture");t.exports={GLTextureFloat:class extends i{constructor(e){super(e),this.type="ArrayTexture(1)"}renderRawOutput(){const{context:e}=this,t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0);const r=new Float32Array(this.size[0]*this.size[1]*4);return e.readPixels(0,0,this.size[0],this.size[1],e.RGBA,e.FLOAT,r),r}renderValues(){return this.renderRawOutput()}toArray(){return n.erectFloat(this.renderValues(),this.output[0])}}}},{"../../../texture":125,"../../../utils":126}],63:[function(e,t,r){const{GLTextureUnsigned:n}=e("./unsigned");t.exports={GLTextureGraphical:class extends n{constructor(e){super(e),this.type="ArrayTexture(4)"}toArray(){return this.renderValues()}}}},{"./unsigned":69}],64:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureMemoryOptimized2D:class extends i{constructor(e){super(e),this.type="MemoryOptimizedNumberTexture"}toArray(){return n.erectMemoryOptimized2DFloat(this.renderValues(),this.output[0],this.output[1])}}}},{"../../../utils":126,"./float":62}],65:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureMemoryOptimized3D:class extends i{constructor(e){super(e),this.type="MemoryOptimizedNumberTexture"}toArray(){return n.erectMemoryOptimized3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}}},{"../../../utils":126,"./float":62}],66:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureFloat:i}=e("./float");t.exports={GLTextureMemoryOptimized:class extends i{constructor(e){super(e),this.type="MemoryOptimizedNumberTexture"}toArray(){return n.erectMemoryOptimizedFloat(this.renderValues(),this.output[0])}}}},{"../../../utils":126,"./float":62}],67:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureUnsigned:i}=e("./unsigned");t.exports={GLTextureUnsigned2D:class extends i{constructor(e){super(e),this.type="NumberTexture"}toArray(){return n.erect2DPackedFloat(this.renderValues(),this.output[0],this.output[1])}}}},{"../../../utils":126,"./unsigned":69}],68:[function(e,t,r){const{utils:n}=e("../../../utils"),{GLTextureUnsigned:i}=e("./unsigned");t.exports={GLTextureUnsigned3D:class extends i{constructor(e){super(e),this.type="NumberTexture"}toArray(){return n.erect3DPackedFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}}},{"../../../utils":126,"./unsigned":69}],69:[function(e,t,r){const{utils:n}=e("../../../utils"),{Texture:i}=e("../../../texture");t.exports={GLTextureUnsigned:class extends i{constructor(e){super(e),this.type="NumberTexture"}renderRawOutput(){const{context:e}=this,t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0);const r=new Uint8Array(this.size[0]*this.size[1]*4);return e.readPixels(0,0,this.size[0],this.size[1],e.RGBA,e.UNSIGNED_BYTE,r),r}renderValues(){return new Float32Array(this.renderRawOutput().buffer)}toArray(){return n.erectPackedFloat(this.renderValues(),this.output[0])}}}},{"../../../texture":125,"../../../utils":126}],70:[function(e,t,r){const n=e("gl"),{WebGLKernel:i}=e("../web-gl/kernel"),{glKernelString:o}=e("../gl/kernel-string");let s=null,a=null,u=null,l=null,c=null;t.exports={HeadlessGLKernel:class extends i{static get isSupported(){return null!==s?s:(this.setupFeatureChecks(),s=null!==u)}static setupFeatureChecks(){if(a=null,l=null,"function"==typeof n)try{if(!(u=n(2,2,{preserveDrawingBuffer:!0}))||!u.getExtension)return;l={STACKGL_resize_drawingbuffer:u.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:u.getExtension("STACKGL_destroy_context"),OES_texture_float:u.getExtension("OES_texture_float"),OES_texture_float_linear:u.getExtension("OES_texture_float_linear"),OES_element_index_uint:u.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:u.getExtension("WEBGL_draw_buffers")},c=this.getFeatures()}catch(e){console.warn(e)}}static isContextMatch(e){try{return"ANGLE"===e.getParameter(e.RENDERER)}catch(e){return!1}}static getFeatures(){const e=this.getIsDrawBuffers();return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isTextureFloat:this.getIsTextureFloat(),isDrawBuffers:e,kernelMap:e,channelCount:this.getChannelCount()})}static getIsTextureFloat(){return Boolean(l.OES_texture_float)}static getIsDrawBuffers(){return Boolean(l.WEBGL_draw_buffers)}static getChannelCount(){return l.WEBGL_draw_buffers?u.getParameter(l.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}static get testCanvas(){return a}static get testContext(){return u}static get features(){return c}initCanvas(){return{}}initContext(){return n(2,2,{preserveDrawingBuffer:!0})}initExtensions(){this.extensions={STACKGL_resize_drawingbuffer:this.context.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:this.context.getExtension("STACKGL_destroy_context"),OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers")}}build(){super.build.apply(this,arguments),this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1])}destroyExtensions(){this.extensions.STACKGL_resize_drawingbuffer=null,this.extensions.STACKGL_destroy_context=null,this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}static destroyContext(e){const t=e.getExtension("STACKGL_destroy_context");t&&t.destroy&&t.destroy()}toString(){return o(this.constructor,arguments,this,"const gl = context || require('gl')(1, 1);\n","if (!context) { gl.getExtension('STACKGL_destroy_context').destroy(); }\n")}setOutput(e){super.setOutput(e),this.graphical&&this.extensions.STACKGL_resize_drawingbuffer&&this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1])}}}},{"../gl/kernel-string":49,"../web-gl/kernel":118,gl:40}],71:[function(e,t,r){const{utils:n}=e("../utils");t.exports={KernelValue:class{constructor(e,t){const{name:r,kernel:i,context:o,checkContext:s,onRequestContextHandle:a,onUpdateValueMismatch:u,origin:l,strictIntegers:c}=t;if(!r)throw new Error("name not set");if(!l)throw new Error("origin not set");if("user"!==l&&"constants"!==l)throw new Error(`origin must be "user" or "constants" value is "${l}"`);if(!a)throw new Error("onRequestContextHandle is not set");this.name=r,this.origin=l,this.id=`${this.origin}_${r}`,this.varName="constants"===l?`constants.${r}`:r,this.kernel=i,this.strictIntegers=c,this.type=n.getVariableType(e,c),this.size=e.size||null,this.index=null,this.context=o,this.checkContext=null===s||void 0===s||s,this.contextHandle=null,this.onRequestContextHandle=a,this.onUpdateValueMismatch=u}getSource(){throw new Error(`"getSource" not defined on ${this.constructor.name}`)}updateValue(e){throw new Error(`"updateValue" not defined on ${this.constructor.name}`)}}}},{"../utils":126}],72:[function(e,t,r){const{utils:n}=e("../utils"),{Input:i}=e("../input");t.exports={Kernel:class{static get isSupported(){throw new Error(`"isSupported" not implemented on ${this.name}`)}static isContextMatch(e){throw new Error(`"isContextMatch" not implemented on ${this.name}`)}static getFeatures(){throw new Error(`"getFeatures" not implemented on ${this.name}`)}static destroyContext(e){throw new Error(`"destroyContext" called on ${this.name}`)}static nativeFunctionArguments(){throw new Error(`"nativeFunctionArguments" called on ${this.name}`)}static nativeFunctionReturnType(){throw new Error(`"nativeFunctionReturnType" called on ${this.name}`)}static combineKernels(){throw new Error(`"combineKernels" called on ${this.name}`)}constructor(e,t){if("object"!=typeof e){if("string"!=typeof e)throw new Error("source not a string");if(!n.isFunctionString(e))throw new Error("source not a function string")}this.useLegacyEncoder=!1,this.fallbackRequested=!1,this.onRequestFallback=null,this.argumentNames="string"==typeof e?n.getArgumentNamesFromString(e):null,this.argumentTypes=null,this.argumentSizes=null,this.argumentBitRatios=null,this.kernelArguments=null,this.kernelConstants=null,this.source=e,this.output=null,this.debug=!1,this.graphical=!1,this.loopMaxIterations=0,this.constants=null,this.constantTypes=null,this.constantBitRatios=null,this.dynamicArguments=!1,this.dynamicOutput=!0,this.canvas=null,this.context=null,this.checkContext=null,this.gpu=null,this.functions=null,this.nativeFunctions=null,this.subKernels=null,this.validate=!0,this.immutable=!1,this.pipeline=!1,this.precision=null,this.plugins=null,this.returnType=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.optimizeFloatMemory=null,this.strictIntegers=!1}mergeSettings(e){for(let t in e)if(e.hasOwnProperty(t)&&this.hasOwnProperty(t)){switch(t){case"output":if(!Array.isArray(e.output)){this.setOutput(e.output);continue}break;case"functions":if("function"==typeof e.functions[0]){this.functions=e.functions.map(e=>n.functionToIFunction(e));continue}break;case"graphical":e[t]&&!e.hasOwnProperty("precision")&&(this.precision="unsigned"),this[t]=e[t];continue}this[t]=e[t]}this.canvas||(this.canvas=this.initCanvas()),this.context||(this.context=this.initContext()),this.plugins||(this.plugins=this.initPlugins(e))}build(){throw new Error(`"build" not defined on ${this.constructor.name}`)}run(){throw new Error(`"run" not defined on ${this.constructor.name}`)}initCanvas(){throw new Error(`"initCanvas" not defined on ${this.constructor.name}`)}initContext(){throw new Error(`"initContext" not defined on ${this.constructor.name}`)}initPlugins(e){throw new Error(`"initPlugins" not defined on ${this.constructor.name}`)}setupArguments(e){if(!this.argumentTypes&&(this.kernelArguments=[],!this.argumentTypes)){this.argumentTypes=[];for(let t=0;t<e.length;t++){const r=n.getVariableType(e[t],this.strictIntegers);this.argumentTypes.push("Integer"===r?"Number":r)}}this.argumentSizes=new Array(e.length),this.argumentBitRatios=new Int32Array(e.length);for(let t=0;t<e.length;t++){const r=e[t];this.argumentSizes[t]=r.constructor===i?r.size:null,this.argumentBitRatios[t]=this.getBitRatio(r)}if(this.argumentNames.length!==e.length)throw new Error("arguments are miss-aligned")}setupConstants(){if(this.kernelConstants=[],this.constantTypes={},this.constantBitRatios={},this.constants)for(let e in this.constants)this.constantTypes[e]=n.getVariableType(this.constants[e],this.strictIntegers),this.constantBitRatios[e]=this.getBitRatio(this.constants[e])}setOptimizeFloatMemory(e){return this.optimizeFloatMemory=e,this}setOutput(e){return e.hasOwnProperty("x")?e.hasOwnProperty("y")?e.hasOwnProperty("z")?this.output=[e.x,e.y,e.z]:this.output=[e.x,e.y]:this.output=[e.x]:this.output=e,this}setDebug(e){return this.debug=e,this}setGraphical(e){return this.graphical=e,this.precision="unsigned",this}setLoopMaxIterations(e){return this.loopMaxIterations=e,this}setConstants(e){return this.constants=e,this}setFunctions(e){return"function"==typeof e[0]?this.functions=e.map(e=>n.functionToIFunction(e)):this.functions=e,this}setPipeline(e){return this.pipeline=e,this}setPrecision(e){return this.precision=e,this}setOutputToTexture(e){return n.warnDeprecated("method","setOutputToTexture","setPipeline"),this.pipeline=e,this}setImmutable(e){return this.immutable=e,this}setCanvas(e){return this.canvas=e,this}setStrictIntegers(e){return this.strictIntegers=e,this}setDynamicOutput(e){return this.dynamicOutput=e,this}setHardcodeConstants(e){return n.warnDeprecated("method","setHardcodeConstants"),this.setDynamicOutput(e),this.setDynamicArguments(e),this}setDynamicArguments(e){return this.dynamicArguments=e,this}setUseLegacyEncoder(e){return this.useLegacyEncoder=e,this}getCanvas(){return n.warnDeprecated("method","getCanvas"),this.canvas}getWebGl(){return n.warnDeprecated("method","getWebGl"),this.context}setContext(e){return this.context=e,this}setArgumentTypes(e){return this.argumentTypes=e,this}requestFallback(e){if(!this.onRequestFallback)throw new Error(`"onRequestFallback" not defined on ${this.constructor.name}`);return this.fallbackRequested=!0,this.onRequestFallback(e)}validateSettings(){throw new Error(`"validateSettings" not defined on ${this.constructor.name}`)}addSubKernel(e){if(null===this.subKernels&&(this.subKernels=[]),!e.source)throw new Error('subKernel missing "source" property');if(!e.property&&isNaN(e.property))throw new Error('subKernel missing "property" property');if(!e.name)throw new Error('subKernel missing "name" property');return this.subKernels.push(e),this}destroy(e){throw new Error(`"destroy" called on ${this.constructor.name}`)}getBitRatio(e){if("single"===this.precision)return 4;if(Array.isArray(e[0]))return this.getBitRatio(e[0]);if(e.constructor===i)return this.getBitRatio(e.value);switch(e.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}getPixels(){throw new Error(`"getPixels" called on ${this.constructor.name}`)}checkOutput(){if(!this.output||!n.isArray(this.output))throw new Error("kernel.output not an array");if(this.output.length<1)throw new Error("kernel.output is empty, needs at least 1 value");for(let e=0;e<this.output.length;e++)if(isNaN(this.output[e])||this.output[e]<1)throw new Error(`${this.constructor.name}.output[${e}] incorrectly defined as \`${this.output[e]}\`, needs to be numeric, and greater than 0`)}toJSON(){return{settings:{output:this.output,threadDim:this.threadDim,pipeline:this.pipeline,argumentNames:this.argumentNames,argumentsTypes:this.argumentTypes,constants:this.constants,pluginNames:this.plugins?this.plugins.map(e=>e.name):null,returnType:this.returnType}}}}}},{"../input":122,"../utils":126}],73:[function(e,t,r){t.exports={fragmentShader:"#version 300 es\n__HEADER__;\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nin vec2 vTexCoord;\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x/y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  return texel[channel*2] * 255.0 + texel[channel*2 + 1] * 65280.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  return texel[channel] * 255.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  int index = xyz.x + (texDim.x * (xyz.y + (texDim.y * xyz.z)));\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  int index = xyz.x + (texDim.x * (xyz.y + (texDim.y * xyz.z)));\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  int index = xyz.x + (texDim.x * (xyz.y + (texDim.y * xyz.z)));\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  index = index / 4;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return texel[channel];\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, st / vec2(texSize));\n}\n\nvec4 getImage3D(sampler2DArray tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, vec3(st / vec2(texSize), z));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}"}},{}],74:[function(e,t,r){const{WebGLFunctionNode:n}=e("../web-gl/function-node");t.exports={WebGL2FunctionNode:class extends n{astIdentifierExpression(e,t){if("Identifier"!==e.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",e);const r=this.getType(e);if("Infinity"===e.name)t.push("intBitsToFloat(2139095039)");else if("Boolean"===r)this.argumentNames.indexOf(e.name)>-1?t.push(`bool(user_${e.name})`):t.push(`user_${e.name}`);else{const r=this.getKernelArgumentName(e.name);r?t.push(`user_${r}`):t.push(`user_${e.name}`)}return t}}}},{"../web-gl/function-node":98}],75:[function(e,t,r){const{WebGL2KernelValueBoolean:n}=e("./kernel-value/boolean"),{WebGL2KernelValueFloat:i}=e("./kernel-value/float"),{WebGL2KernelValueInteger:o}=e("./kernel-value/integer"),{WebGL2KernelValueHTMLImage:s}=e("./kernel-value/html-image"),{WebGL2KernelValueDynamicHTMLImage:a}=e("./kernel-value/dynamic-html-image"),{WebGL2KernelValueHtmlImageArray:u}=e("./kernel-value/html-image-array"),{WebGL2KernelValueDynamicHtmlImageArray:l}=e("./kernel-value/dynamic-html-image-array"),{WebGL2KernelValueSingleInput:c}=e("./kernel-value/single-input"),{WebGL2KernelValueDynamicSingleInput:h}=e("./kernel-value/dynamic-single-input"),{WebGL2KernelValueUnsignedInput:p}=e("./kernel-value/unsigned-input"),{WebGL2KernelValueDynamicUnsignedInput:f}=e("./kernel-value/dynamic-unsigned-input"),{WebGL2KernelValueMemoryOptimizedNumberTexture:d}=e("./kernel-value/memory-optimized-number-texture"),{WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:m}=e("./kernel-value/dynamic-memory-optimized-number-texture"),{WebGL2KernelValueNumberTexture:g}=e("./kernel-value/number-texture"),{WebGL2KernelValueDynamicNumberTexture:v}=e("./kernel-value/dynamic-number-texture"),{WebGL2KernelValueSingleArray:y}=e("./kernel-value/single-array"),{WebGL2KernelValueDynamicSingleArray:b}=e("./kernel-value/dynamic-single-array"),{WebGL2KernelValueUnsignedArray:x}=e("./kernel-value/unsigned-array"),{WebGL2KernelValueDynamicUnsignedArray:_}=e("./kernel-value/dynamic-unsigned-array"),w={unsigned:{dynamic:{Boolean:n,Integer:o,Float:i,Array:_,Input:f,NumberTexture:v,"ArrayTexture(1)":v,"ArrayTexture(2)":v,"ArrayTexture(3)":v,"ArrayTexture(4)":v,MemoryOptimizedNumberTexture:m,HTMLImage:a,HTMLImageArray:l},static:{Boolean:n,Float:i,Integer:o,Array:x,Input:p,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:m,HTMLImage:s,HTMLImageArray:u}},single:{dynamic:{Boolean:n,Integer:o,Float:i,Array:b,Input:h,NumberTexture:v,"ArrayTexture(1)":v,"ArrayTexture(2)":v,"ArrayTexture(3)":v,"ArrayTexture(4)":v,MemoryOptimizedNumberTexture:m,HTMLImage:a,HTMLImageArray:l},static:{Boolean:n,Float:i,Integer:o,Array:y,Input:c,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:d,HTMLImage:s,HTMLImageArray:u}}};t.exports={lookupKernelValueType:function(e,t,r){if(!e)throw new Error("type missing");if(!t)throw new Error("dynamic missing");if(!r)throw new Error("precision missing");const n=w[r][t];if(!1===n[e])return null;if(void 0===n[e])throw new Error(`Could not find a KernelValue for ${e}`);return n[e]}}},{"./kernel-value/boolean":76,"./kernel-value/dynamic-html-image":78,"./kernel-value/dynamic-html-image-array":77,"./kernel-value/dynamic-memory-optimized-number-texture":79,"./kernel-value/dynamic-number-texture":80,"./kernel-value/dynamic-single-array":81,"./kernel-value/dynamic-single-input":82,"./kernel-value/dynamic-unsigned-array":83,"./kernel-value/dynamic-unsigned-input":84,"./kernel-value/float":85,"./kernel-value/html-image":87,"./kernel-value/html-image-array":86,"./kernel-value/integer":88,"./kernel-value/memory-optimized-number-texture":89,"./kernel-value/number-texture":90,"./kernel-value/single-array":91,"./kernel-value/single-input":92,"./kernel-value/unsigned-array":93,"./kernel-value/unsigned-input":94}],76:[function(e,t,r){const{WebGLKernelValueBoolean:n}=e("../../web-gl/kernel-value/boolean");t.exports={WebGL2KernelValueBoolean:class extends n{}}},{"../../web-gl/kernel-value/boolean":100}],77:[function(e,t,r){const{WebGL2KernelValueHtmlImageArray:n}=e("./html-image-array");t.exports={WebGL2KernelValueDynamicHtmlImageArray:class extends n{getSource(){return utils.linesToString([`uniform highp sampler2DArray ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=[e[0].width,e[0].height,e.length],this.textureSize=[e[0].width,e[0].height],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},{"./html-image-array":86}],78:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueDynamicInput:i}=e("../../web-gl/kernel-value/dynamic-html-image");t.exports={WebGL2KernelValueDynamicInput:class extends i{getSource(){return n.linesToString([`uniform highp sampler2D ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}}}},{"../../../utils":126,"../../web-gl/kernel-value/dynamic-html-image":101}],79:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueDynamicMemoryOptimizedNumberTexture:i}=e("../../web-gl/kernel-value/dynamic-memory-optimized-number-texture");t.exports={WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:class extends i{getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}}}},{"../../../utils":126,"../../web-gl/kernel-value/dynamic-memory-optimized-number-texture":102}],80:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueDynamicNumberTexture:i}=e("../../web-gl/kernel-value/dynamic-number-texture");t.exports={WebGL2KernelValueDynamicNumberTexture:class extends i{getSource(){return n.linesToString([`uniform highp sampler2D ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}}}},{"../../../utils":126,"../../web-gl/kernel-value/dynamic-number-texture":103}],81:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueDynamicSingleArray:i}=e("../../web-gl/kernel-value/dynamic-single-array");t.exports={WebGL2KernelValueDynamicSingleArray:class extends i{getSource(){return n.linesToString([`uniform highp sampler2D ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}}}},{"../../../utils":126,"../../web-gl/kernel-value/dynamic-single-array":104}],82:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueDynamicSingleInput:i}=e("../../web-gl/kernel-value/dynamic-single-input");t.exports={WebGL2KernelValueDynamicSingleInput:class extends i{getSource(){return n.linesToString([`uniform highp sampler2D ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}}}},{"../../../utils":126,"../../web-gl/kernel-value/dynamic-single-input":105}],83:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueDynamicUnsignedArray:i}=e("../../web-gl/kernel-value/dynamic-unsigned-array");t.exports={WebGL2KernelValueDynamicUnsignedArray:class extends i{getSource(){return n.linesToString([`uniform highp sampler2D ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}}}},{"../../../utils":126,"../../web-gl/kernel-value/dynamic-unsigned-array":106}],84:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueDynamicUnsignedInput:i}=e("../../web-gl/kernel-value/dynamic-unsigned-input");t.exports={WebGL2KernelValueDynamicUnsignedInput:class extends i{getSource(){return n.linesToString([`uniform highp sampler2D ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}}}},{"../../../utils":126,"../../web-gl/kernel-value/dynamic-unsigned-input":107}],85:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueFloat:i}=e("../../web-gl/kernel-value/float");t.exports={WebGL2KernelValueFloat:class extends i{}}},{"../../../utils":126,"../../web-gl/kernel-value/float":108}],86:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValue:i}=e("../../web-gl/kernel-value/index");t.exports={WebGL2KernelValueHtmlImageArray:class extends i{constructor(e,t){super(e,t),this.requestTexture(),this.dimensions=[e[0].width,e[0].height,e.length],this.textureSize=[e[0].width,e[0].height]}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(){return n.linesToString([`uniform highp sampler2DArray ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){const{context:t}=this;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D_ARRAY,this.texture),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MIN_FILTER,t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage3D(t.TEXTURE_2D_ARRAY,0,t.RGBA,e[0].width,e[0].height,e.length,0,t.RGBA,t.UNSIGNED_BYTE,null);for(let r=0;r<e.length;r++){const n=0,i=0,o=1;t.texSubImage3D(t.TEXTURE_2D_ARRAY,0,n,i,r,e[r].width,e[r].height,o,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue=e[r])}this.kernel.setUniform1i(this.id,this.index)}}}},{"../../../utils":126,"../../web-gl/kernel-value/index":110}],87:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueHTMLImage:i}=e("../../web-gl/kernel-value/html-image");t.exports={WebGL2KernelValueHTMLImage:class extends i{getSource(){return n.linesToString([`uniform highp sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}}},{"../../../utils":126,"../../web-gl/kernel-value/html-image":109}],88:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueInteger:i}=e("../../web-gl/kernel-value/integer");t.exports={WebGL2KernelValueInteger:class extends i{getSource(e){return"constants"===this.origin?`const highp int ${this.id} = ${parseInt(e)};\n`:`uniform highp int ${this.id};\n`}updateValue(e){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=e)}}}},{"../../../utils":126,"../../web-gl/kernel-value/integer":111}],89:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueMemoryOptimizedNumberTexture:i}=e("../../web-gl/kernel-value/memory-optimized-number-texture");t.exports={WebGL2KernelValueMemoryOptimizedNumberTexture:class extends i{getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}}},{"../../../utils":126,"../../web-gl/kernel-value/memory-optimized-number-texture":112}],90:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueNumberTexture:i}=e("../../web-gl/kernel-value/number-texture");t.exports={WebGL2KernelValueNumberTexture:class extends i{getSource(){return n.linesToString([`uniform highp sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}}},{"../../../utils":126,"../../web-gl/kernel-value/number-texture":113}],91:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueSingleArray:i}=e("../../web-gl/kernel-value/single-array");t.exports={WebGL2KernelValueSingleArray:class extends i{getSource(){return n.linesToString([`uniform highp sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();const{context:t}=this;n.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}}},{"../../../utils":126,"../../web-gl/kernel-value/single-array":114}],92:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueSingleInput:i}=e("../../web-gl/kernel-value/single-input");t.exports={WebGL2KernelValueSingleInput:class extends i{getSource(){return n.linesToString([`uniform highp sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){const{context:t}=this;n.flattenTo(e.value,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}}},{"../../../utils":126,"../../web-gl/kernel-value/single-input":115}],93:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueUnsignedArray:i}=e("../../web-gl/kernel-value/unsigned-array");t.exports={WebGL2KernelValueUnsignedArray:class extends i{getSource(){return n.linesToString([`uniform highp sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}}},{"../../../utils":126,"../../web-gl/kernel-value/unsigned-array":116}],94:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueUnsignedInput:i}=e("../../web-gl/kernel-value/unsigned-input");t.exports={WebGL2KernelValueUnsignedInput:class extends i{getSource(){return n.linesToString([`uniform highp sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}}},{"../../../utils":126,"../../web-gl/kernel-value/unsigned-input":117}],95:[function(e,t,r){const{WebGLKernel:n}=e("../web-gl/kernel"),{WebGL2FunctionNode:i}=e("./function-node"),{FunctionBuilder:o}=e("../function-builder"),{utils:s}=e("../../utils"),{fragmentShader:a}=e("./fragment-shader"),{vertexShader:u}=e("./vertex-shader"),{lookupKernelValueType:l}=e("./kernel-value-maps");let c=null,h=null,p=null,f=null,d=null;t.exports={WebGL2Kernel:class extends n{static get isSupported(){return null!==c?c:(this.setupFeatureChecks(),c=this.isContextMatch(p))}static setupFeatureChecks(){"undefined"!=typeof document?h=document.createElement("canvas"):"undefined"!=typeof OffscreenCanvas&&(h=new OffscreenCanvas(0,0)),h&&(p=h.getContext("webgl2"))&&p.getExtension&&(f={EXT_color_buffer_float:p.getExtension("EXT_color_buffer_float"),OES_texture_float_linear:p.getExtension("OES_texture_float_linear")},d=this.getFeatures())}static isContextMatch(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext}static getFeatures(){return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),kernelMap:!0,isTextureFloat:!0,channelCount:this.getChannelCount()})}static getIsTextureFloat(){return!0}static getIsIntegerDivisionAccurate(){return super.getIsIntegerDivisionAccurate()}static getChannelCount(){return p.getParameter(p.MAX_DRAW_BUFFERS)}static lookupKernelValueType(e,t,r){return l(e,t,r)}static get testCanvas(){return h}static get testContext(){return p}static get features(){return d}static get fragmentShader(){return a}static get vertexShader(){return u}initContext(){return this.canvas.getContext("webgl2",{alpha:!1,depth:!1,antialias:!1})}initExtensions(){this.extensions={EXT_color_buffer_float:this.context.getExtension("EXT_color_buffer_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear")}}validateSettings(){if(!this.validate)return void(this.texSize=s.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output));const e=this.constructor.features;if("single"===this.precision&&!e.isFloatRead)throw new Error("Float texture outputs are not supported");if(this.graphical||null!==this.precision||(this.precision=e.isFloatRead?"single":"unsigned"),null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!e.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&e.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==arguments.length)throw new Error("Auto output only supported for kernels with only one input");const e=s.getVariableType(arguments[0],this.strictIntegers);switch(e){case"Array":this.output=s.getDimensions(e);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=arguments[0].output;break;default:throw new Error("Auto output not supported for input type: "+e)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"single"===this.precision&&(console.warn("Cannot use graphical mode and single precision at the same time"),this.precision="unsigned"),void(this.texSize=s.clone(this.output))}!this.graphical&&null===this.precision&&e.isTextureFloat&&(this.precision="single"),this.texSize=s.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output)}translateSource(){const e=o.fromKernel(this,i,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});if(this.translatedSource=e.getPrototypeString("kernel"),this.graphical||this.returnType||(this.returnType=e.getKernelResultType()),this.subKernels&&this.subKernels.length>0)for(let t=0;t<this.subKernels.length;t++){const r=this.subKernels[t];r.returnType||(r.returnType=e.getSubKernelResultType(t))}}run(){const{kernelArguments:e,texSize:t}=this,r=this.context;r.useProgram(this.program),r.scissor(0,0,t[0],t[1]),this.dynamicOutput&&(this.setUniform3iv("uOutputDim",new Int32Array(this.threadDim)),this.setUniform2iv("uTexSize",t)),this.setUniform2f("ratio",t[0]/this.maxTexSize[0],t[1]/this.maxTexSize[1]);for(let t=0;t<e.length;t++){if(this.switchingKernels)return;e[t].updateValue(arguments[t])}if(this.plugins)for(let e=0;e<this.plugins.length;e++){const t=this.plugins[e];t.onBeforeRun&&t.onBeforeRun(this)}if(this.graphical)return this.pipeline?(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.outputTexture&&!this.immutable||this._setupOutputTexture(),r.drawArrays(r.TRIANGLE_STRIP,0,4),new this.TextureConstructor({texture:this.outputTexture,size:t,dimensions:this.threadDim,output:this.output,context:this.context})):(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,null),void r.drawArrays(r.TRIANGLE_STRIP,0,4));r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._setupOutputTexture(),null!==this.subKernels&&(this.immutable&&this._setupSubOutputTextures(),r.drawBuffers(this.drawBuffersMap)),r.drawArrays(r.TRIANGLE_STRIP,0,4)}drawBuffers(){this.context.drawBuffers(this.drawBuffersMap)}getOutputTexture(){return this.outputTexture}_setupOutputTexture(){const{texSize:e}=this,t=this.context,r=this.outputTexture=t.createTexture();if(t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),"single"===this.precision)if(this.pipeline)switch(this.returnType){case"Number":case"Float":case"Integer":this.optimizeFloatMemory?t.texStorage2D(t.TEXTURE_2D,1,t.RGBA32F,e[0],e[1]):t.texStorage2D(t.TEXTURE_2D,1,t.R32F,e[0],e[1]);break;case"Array(2)":t.texStorage2D(t.TEXTURE_2D,1,t.RG32F,e[0],e[1]);break;case"Array(3)":case"Array(4)":t.texStorage2D(t.TEXTURE_2D,1,t.RGBA32F,e[0],e[1]);break;default:throw new Error("Unhandled return type")}else t.texStorage2D(t.TEXTURE_2D,1,t.RGBA32F,e[0],e[1]);else t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e[0],e[1],0,t.RGBA,t.UNSIGNED_BYTE,null);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}_setupSubOutputTextures(){const{texSize:e}=this,t=this.context;this.drawBuffersMap=[t.COLOR_ATTACHMENT0],this.subKernelOutputTextures=[];for(let r=0;r<this.subKernels.length;r++){const n=this.context.createTexture();this.subKernelOutputTextures.push(n),this.drawBuffersMap.push(t.COLOR_ATTACHMENT0+r+1),t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+r),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),"single"===this.precision?t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,e[0],e[1],0,t.RGBA,t.FLOAT,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e[0],e[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+r+1,t.TEXTURE_2D,n,0)}}_getHeaderString(){return""}_getTextureCoordinate(){const e=this.subKernels;return null===e||e.length<1?"in highp vec2 vTexCoord;\n":"out highp vec2 vTexCoord;\n"}_getMainArgumentsString(e){const t=[],r=this.argumentNames;for(let n=0;n<r.length;n++)t.push(this.kernelArguments[n].getSource(e[n]));return t.join("")}getKernelString(){let e;switch(this.returnType){case"Array(2)":e="vec2 kernelResult";break;case"Array(3)":e="vec3 kernelResult";break;case"Array(4)":e="vec4 kernelResult";break;case"LiteralInteger":case"Float":case"Number":case"Integer":e="float kernelResult";break;default:if(!this.graphical)throw new Error(`unrecognized output type "${this.returnType}"`);e="float kernelResult"}const t=[],r=this.subKernels;if(null!==r){t.push(e,"layout(location = 0) out vec4 data0");for(let e=0;e<r.length;e++){const n=r[e];t.push("Integer"===n.returnType?`int subKernelResult_${n.name} = 0`:`float subKernelResult_${n.name} = 0.0`,`layout(location = ${e+1}) out vec4 data${e+1}`)}}else t.push("out vec4 data0",e);return s.linesToString(t)+this.translatedSource}getMainResultGraphical(){return s.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = actualColor"])}getMainResultPackedPixels(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error(`packed output only usable with Numbers, "${this.returnType}" specified`)}}getMainResultKernelPackedPixels(){return s.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()",`  data0 = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(kernelResult)`])}getMainResultSubKernelPackedPixels(){const e=[];if(!this.subKernels)return"";for(let t=0;t<this.subKernels.length;t++)"Integer"===this.subKernels[t].returnType?e.push(`  data${t+1} = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(float(subKernelResult_${this.subKernels[t].name}))`):e.push(`  data${t+1} = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(subKernelResult_${this.subKernels[t].name})`);return s.linesToString(e)}getMainResultMemoryOptimizedFloats(){const e=["  index *= 4"];switch(this.returnType){case"Number":case"Integer":case"Float":const t=["r","g","b","a"];for(let r=0;r<t.length;r++){const n=t[r];this.getMainResultKernelMemoryOptimizedFloats(e,n),this.getMainResultSubKernelMemoryOptimizedFloats(e,n),r+1<t.length&&e.push("  index += 1")}break;default:throw new Error(`optimized output only usable with Numbers, ${this.returnType} specified`)}return s.linesToString(e)}getMainResultKernelMemoryOptimizedFloats(e,t){e.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()",`  data0.${t} = kernelResult`)}getMainResultSubKernelMemoryOptimizedFloats(e,t){if(!this.subKernels)return e;for(let r=0;r<this.subKernels.length;r++){const n=this.subKernels[r];"Integer"===n.returnType?e.push(`  data${r+1}.${t} = float(subKernelResult_${n.name})`):e.push(`  data${r+1}.${t} = subKernelResult_${n.name}`)}}getMainResultKernelNumberTexture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult"]}getMainResultSubKernelNumberTexture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t){const r=this.subKernels[t];"Integer"===r.returnType?e.push(`  data${t+1}[0] = float(subKernelResult_${r.name})`):e.push(`  data${t+1}[0] = subKernelResult_${r.name}`)}return e}getMainResultKernelArray2Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]"]}getMainResultSubKernelArray2Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t){const r=this.subKernels[t];e.push(`  data${t+1}[0] = subKernelResult_${r.name}[0]`,`  data${t+1}[1] = subKernelResult_${r.name}[1]`)}return e}getMainResultKernelArray3Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]","  data0[2] = kernelResult[2]"]}getMainResultSubKernelArray3Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t){const r=this.subKernels[t];e.push(`  data${t+1}[0] = subKernelResult_${r.name}[0]`,`  data${t+1}[1] = subKernelResult_${r.name}[1]`,`  data${t+1}[2] = subKernelResult_${r.name}[2]`)}return e}getMainResultKernelArray4Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = kernelResult"]}getMainResultSubKernelArray4Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t)e.push(`  data${t+1} = subKernelResult_${this.subKernels[t].name}`);return e}getFragmentShader(e){return null!==this.compiledFragmentShader?this.compiledFragmentShader:this.compiledFragmentShader=this.replaceArtifacts(this.constructor.fragmentShader,this._getFragShaderArtifactMap(e))}getVertexShader(e){return null!==this.compiledVertexShader?this.compiledVertexShader:this.compiledVertexShader=this.constructor.vertexShader}destroyExtensions(){this.extensions.EXT_color_buffer_float=null,this.extensions.OES_texture_float_linear=null}toJSON(){const e=super.toJSON();return e.functionNodes=o.fromKernel(this,i).toJSON(),e}}}},{"../../utils":126,"../function-builder":46,"../web-gl/kernel":118,"./fragment-shader":73,"./function-node":74,"./kernel-value-maps":75,"./vertex-shader":96}],96:[function(e,t,r){t.exports={vertexShader:"#version 300 es\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nin vec2 aPos;\nin vec2 aTexCoord;\n\nout vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}"}},{}],97:[function(e,t,r){t.exports={fragmentShader:"__HEADER__;\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nvarying vec2 vTexCoord;\n\nvec4 round(vec4 x) {\n  return floor(x + 0.5);\n}\n\nfloat round(float x) {\n  return floor(x + 0.5);\n}\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x / y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  if (channel == 0) return texel.r * 255.0 + texel.g * 65280.0;\n  if (channel == 1) return texel.b * 255.0 + texel.a * 65280.0;\n  return 0.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  if (channel == 0) return texel.r * 255.0;\n  if (channel == 1) return texel.g * 255.0;\n  if (channel == 2) return texel.b * 255.0;\n  if (channel == 3) return texel.a * 255.0;\n  return 0.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return texel.r;\n  if (channel == 1) return texel.g;\n  if (channel == 2) return texel.b;\n  if (channel == 3) return texel.a;\n  return 0.0;\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  ivec3 xyz = ivec3(x, y, z);\n  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture2D(tex, st / vec2(texSize));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nvoid color(sampler2D image) {\n  actualColor = texture2D(image, vTexCoord);\n}\n\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}"}},{}],98:[function(e,t,r){const{utils:n}=e("../../utils"),{FunctionNode:i}=e("../function-node");const o={Array:"sampler2D","Array(2)":"vec2","Array(3)":"vec3","Array(4)":"vec4",Array2D:"sampler2D",Array3D:"sampler2D",Boolean:"bool",Float:"float",Input:"sampler2D",Integer:"int",Number:"float",LiteralInteger:"float",NumberTexture:"sampler2D",MemoryOptimizedNumberTexture:"sampler2D","ArrayTexture(1)":"sampler2D","ArrayTexture(2)":"sampler2D","ArrayTexture(3)":"sampler2D","ArrayTexture(4)":"sampler2D"},s={"===":"==","!==":"!="};t.exports={WebGLFunctionNode:class extends i{constructor(e,t){super(e,t),this.fixIntegerDivisionAccuracy=null,t&&t.hasOwnProperty("fixIntegerDivisionAccuracy")&&(this.fixIntegerDivisionAccuracy=t.fixIntegerDivisionAccuracy)}astFunction(e,t){if(this.isRootKernel)t.push("void");else{this.returnType||this.findLastReturn()&&(this.returnType=this.getType(e.body),"LiteralInteger"===this.returnType&&(this.returnType="Number"));const{returnType:r}=this;if(r){const e=o[r];if(!e)throw new Error(`unknown type ${r}`);t.push(e)}else t.push("void")}if(t.push(" "),t.push(this.name),t.push("("),!this.isRootKernel)for(let r=0;r<this.argumentNames.length;++r){const n=this.argumentNames[r];r>0&&t.push(", ");let i=this.argumentTypes[this.argumentNames.indexOf(n)];if(!i)throw this.astErrorOutput(`Unknown argument ${n} type`,e);"LiteralInteger"===i&&(this.argumentTypes[r]=i="Number");const s=o[i];if(!s)throw this.astErrorOutput("Unexpected expression",e);t.push(s),t.push(" "),t.push("user_"),t.push(n)}t.push(") {\n");for(let r=0;r<e.body.body.length;++r)this.astGeneric(e.body.body[r],t),t.push("\n");return t.push("}\n"),t}astReturnStatement(e,t){if(!e.argument)throw this.astErrorOutput("Unexpected return statement",e);const r=this.getType(e.argument),n=[];switch(this.returnType||(this.returnType="LiteralInteger"===r||"Integer"===r?"Number":r),this.returnType){case"LiteralInteger":case"Number":case"Float":switch(r){case"Integer":n.push("float("),this.astGeneric(e.argument,n),n.push(")");break;case"LiteralInteger":this.castLiteralToFloat(e.argument,n),"Integer"===this.getType(e)&&(n.unshift("float("),n.push(")"));break;default:this.astGeneric(e.argument,n)}break;case"Integer":switch(r){case"Float":case"Number":this.castValueToInteger(e.argument,n);break;case"LiteralInteger":this.castLiteralToInteger(e.argument,n);break;default:this.astGeneric(e.argument,n)}break;case"Array(4)":case"Array(3)":case"Array(2)":case"Input":this.astGeneric(e.argument,n);break;default:throw this.astErrorOutput(`unhandled return type ${this.returnType}`,e)}return this.isRootKernel?(t.push(`kernelResult = ${n.join("")};`),t.push("return;")):this.isSubKernel?(t.push(`subKernelResult_${this.name} = ${n.join("")};`),t.push(`return subKernelResult_${this.name};`)):t.push(`return ${n.join("")};`),t}astLiteral(e,t){if(isNaN(e.value))throw this.astErrorOutput("Non-numeric literal not supported : "+e.value,e);return Number.isInteger(e.value)?this.isState("in-for-loop-init")||this.isState("casting-to-integer")?(this.literalTypes[`${e.start},${e.end}`]="Integer",t.push(`${e.value}`)):(this.isState("casting-to-float"),this.literalTypes[`${e.start},${e.end}`]="Number",t.push(`${e.value}.0`)):this.isState("casting-to-integer")?(this.literalTypes[`${e.start},${e.end}`]="Integer",t.push(parseInt(e.raw))):(this.literalTypes[`${e.start},${e.end}`]="Number",t.push(`${e.value}`)),t}astBinaryExpression(e,t){if(this.checkAndUpconvertOperator(e,t))return t;if(this.fixIntegerDivisionAccuracy&&"/"===e.operator){switch(t.push("div_with_int_check("),this.getType(e.left)){case"Integer":this.castValueToFloat(e.left,t);break;case"LiteralInteger":this.castLiteralToFloat(e.left,t);break;default:this.astGeneric(e.left,t)}switch(t.push(", "),this.getType(e.right)){case"Integer":this.castValueToFloat(e.right,t);break;case"LiteralInteger":this.castLiteralToFloat(e.right,t);break;default:this.astGeneric(e.right,t)}return t.push(")"),t}t.push("(");const r=this.getType(e.left)||"Number",n=this.getType(e.right)||"Number";if(!r||!n)throw this.astErrorOutput("Unhandled binary expression",e);const i=r+" & "+n;switch(i){case"Integer & Integer":this.astGeneric(e.left,t),t.push(s[e.operator]||e.operator),this.astGeneric(e.right,t);break;case"Number & Float":case"Float & Number":case"Float & Float":case"Number & Number":this.astGeneric(e.left,t),t.push(s[e.operator]||e.operator),this.astGeneric(e.right,t);break;case"LiteralInteger & LiteralInteger":this.isState("casting-to-integer")?(this.astGeneric(e.left,t),t.push(s[e.operator]||e.operator),this.astGeneric(e.right,t)):(this.castLiteralToFloat(e.left,t),t.push(s[e.operator]||e.operator),this.castLiteralToFloat(e.right,t));break;case"Integer & Float":case"Integer & Number":if((">"===e.operator||"<"===e.operator&&"Literal"===e.right.type)&&!Number.isInteger(e.right.value)){this.castValueToFloat(e.left,t),t.push(s[e.operator]||e.operator),this.astGeneric(e.right,t);break}if(this.astGeneric(e.left,t),t.push(s[e.operator]||e.operator),this.pushState("casting-to-integer"),"Literal"===e.right.type){const r=[];if(this.astGeneric(e.right,r),"Integer"!==this.getType(e.right))throw this.astErrorOutput("Unhandled binary expression with literal",e);t.push(r.join(""))}else t.push("int("),this.astGeneric(e.right,t),t.push(")");this.popState("casting-to-integer");break;case"Integer & LiteralInteger":this.astGeneric(e.left,t),t.push(s[e.operator]||e.operator),this.castLiteralToInteger(e.right,t);break;case"Number & Integer":this.astGeneric(e.left,t),t.push(s[e.operator]||e.operator),this.castValueToFloat(e.right,t);break;case"Float & LiteralInteger":case"Number & LiteralInteger":this.isState("in-for-loop-test")?(t.push("int("),this.astGeneric(e.left,t),t.push(")"),t.push(s[e.operator]||e.operator),this.castLiteralToInteger(e.right,t)):(this.astGeneric(e.left,t),t.push(s[e.operator]||e.operator),this.castLiteralToFloat(e.right,t));break;case"LiteralInteger & Float":case"LiteralInteger & Number":this.isState("in-for-loop-test")||this.isState("in-for-loop-init")||this.isState("casting-to-integer")?(this.castLiteralToInteger(e.left,t),t.push(s[e.operator]||e.operator),this.castValueToInteger(e.right,t)):(this.astGeneric(e.left,t),t.push(s[e.operator]||e.operator),this.pushState("casting-to-float"),this.astGeneric(e.right,t),this.popState("casting-to-float"));break;case"LiteralInteger & Integer":this.castLiteralToInteger(e.left,t),t.push(s[e.operator]||e.operator),this.astGeneric(e.right,t);break;case"Boolean & Boolean":this.astGeneric(e.left,t),t.push(s[e.operator]||e.operator),this.astGeneric(e.right,t);break;case"Float & Integer":this.astGeneric(e.left,t),t.push(s[e.operator]||e.operator),this.castValueToFloat(e.right,t);break;default:throw this.astErrorOutput(`Unhandled binary expression between ${i}`,e)}return t.push(")"),t}checkAndUpconvertOperator(e,t){const r=this.checkAndUpconvertBitwiseOperators(e,t);if(r)return r;const n={"%":"mod","**":"pow"}[e.operator];if(!n)return null;switch(t.push(n),t.push("("),this.getType(e.left)){case"Integer":this.castValueToFloat(e.left,t);break;case"LiteralInteger":this.castLiteralToFloat(e.left,t);break;default:this.astGeneric(e.left,t)}switch(t.push(","),this.getType(e.right)){case"Integer":this.castValueToFloat(e.right,t);break;case"LiteralInteger":this.castLiteralToFloat(e.right,t);break;default:this.astGeneric(e.right,t)}return t.push(")"),t}checkAndUpconvertBitwiseOperators(e,t){const r={"&":"bitwiseAnd","|":"bitwiseOr","^":"bitwiseXOR","<<":"bitwiseZeroFillLeftShift",">>":"bitwiseSignedRightShift",">>>":"bitwiseZeroFillRightShift"}[e.operator];if(!r)return null;switch(t.push(r),t.push("("),this.getType(e.left)){case"Number":case"Float":this.castValueToInteger(e.left,t);break;case"LiteralInteger":this.castLiteralToInteger(e.left,t);break;default:this.astGeneric(e.left,t)}switch(t.push(","),this.getType(e.right)){case"Number":case"Float":this.castValueToInteger(e.right,t);break;case"LiteralInteger":this.castLiteralToInteger(e.right,t);break;default:this.astGeneric(e.right,t)}return t.push(")"),t}checkAndUpconvertBitwiseUnary(e,t){const r={"~":"bitwiseNot"}[e.operator];if(!r)return null;switch(t.push(r),t.push("("),this.getType(e.argument)){case"Number":case"Float":this.castValueToInteger(e.argument,t);break;case"LiteralInteger":this.castLiteralToInteger(e.argument,t);break;default:this.astGeneric(e.argument,t)}return t.push(")"),t}castLiteralToInteger(e,t){return this.pushState("casting-to-integer"),this.astGeneric(e,t),this.popState("casting-to-integer"),t}castLiteralToFloat(e,t){return this.pushState("casting-to-float"),this.astGeneric(e,t),this.popState("casting-to-float"),t}castValueToInteger(e,t){return this.pushState("casting-to-integer"),t.push("int("),this.astGeneric(e,t),t.push(")"),this.popState("casting-to-integer"),t}castValueToFloat(e,t){return this.pushState("casting-to-float"),t.push("float("),this.astGeneric(e,t),t.push(")"),this.popState("casting-to-float"),t}astIdentifierExpression(e,t){if("Identifier"!==e.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",e);const r=this.getType(e);if("Infinity"===e.name)t.push("3.402823466e+38");else if("Boolean"===r)this.argumentNames.indexOf(e.name)>-1?t.push(`bool(user_${e.name})`):t.push(`user_${e.name}`);else{const r=this.getKernelArgumentName(e.name);r?t.push(`user_${r}`):t.push(`user_${e.name}`)}return t}astForStatement(e,t){if("ForStatement"!==e.type)throw this.astErrorOutput("Invalid for statement",e);const r=[],n=[],i=[],o=[];let s=null;if(e.init){this.pushState("in-for-loop-init"),this.astGeneric(e.init,r);for(let e=0;e<r.length;e++)r[e].includes&&r[e].includes(",")&&(s=!1);this.popState("in-for-loop-init")}else s=!1;if(e.test?(this.pushState("in-for-loop-test"),this.astGeneric(e.test,n),this.popState("in-for-loop-test")):s=!1,e.update?this.astGeneric(e.update,i):s=!1,e.body&&(this.pushState("loop-body"),this.astGeneric(e.body,o),this.popState("loop-body")),null===s&&(s=this.isSafe(e.init)&&this.isSafe(e.test)),s)t.push(`for (${r.join("")};${n.join("")};${i.join("")}){\n`),t.push(o.join("")),t.push("}\n");else{const e=this.getInternalVariableName("safeI");r.length>0&&t.push(r.join(""),";\n"),t.push(`for (int ${e}=0;${e}<LOOP_MAX;${e}++){\n`),n.length>0&&t.push(`if (!${n.join("")}) break;\n`),t.push(o.join("")),t.push(`\n${i.join("")};`),t.push("}\n")}return t}astWhileStatement(e,t){if("WhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);const r=this.getInternalVariableName("safeI");return t.push(`for (int ${r}=0;${r}<LOOP_MAX;${r}++){\n`),t.push("if (!"),this.astGeneric(e.test,t),t.push(") break;\n"),this.astGeneric(e.body,t),t.push("}\n"),t}astDoWhileStatement(e,t){if("DoWhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);const r=this.getInternalVariableName("safeI");return t.push(`for (int ${r}=0;${r}<LOOP_MAX;${r}++){\n`),this.astGeneric(e.body,t),t.push("if (!"),this.astGeneric(e.test,t),t.push(") break;\n"),t.push("}\n"),t}astAssignmentExpression(e,t){const r=this.getDeclaration(e.left);if(r&&!r.assignable)throw new this.astErrorOutput(`Variable ${e.left.name} is not assignable here`,e);if("%="===e.operator)this.astGeneric(e.left,t),t.push("="),t.push("mod("),this.astGeneric(e.left,t),t.push(","),this.astGeneric(e.right,t),t.push(")");else{if("**="!==e.operator){const r=this.getType(e.left),n=this.getType(e.right);return this.astGeneric(e.left,t),t.push(e.operator),"Integer"!==r&&"Integer"===n?(t.push("float("),this.astGeneric(e.right,t),t.push(")")):this.astGeneric(e.right,t),t}this.astGeneric(e.left,t),t.push("="),t.push("pow("),this.astGeneric(e.left,t),t.push(","),this.astGeneric(e.right,t),t.push(")")}}astBlockStatement(e,t){if(this.isState("loop-body")){this.pushState("block-body");for(let r=0;r<e.body.length;r++)this.astGeneric(e.body[r],t);this.popState("block-body")}else{t.push("{\n");for(let r=0;r<e.body.length;r++)this.astGeneric(e.body[r],t);t.push("}\n")}return t}astVariableDeclaration(e,t){"var"===e.kind&&this.varWarn();const r=e.declarations;if(!r||!r[0]||!r[0].init)throw this.astErrorOutput("Unexpected expression",e);const n=[];let i=null;const s=this.isState("in-for-loop-init");for(let t=0;t<r.length;t++){const a=r[t],u=a.init,l=this.getDeclaration(a.id),c=(l.valueType,this.getType(a.init));l.dependencies;let h=s?"Integer":c;"LiteralInteger"===h&&(h="Number");const p=o[h];if(!p)throw this.astErrorOutput(`Markup type ${p} not handled`,e);const f=[];if("Integer"!==c||"Integer"!==h||s)l.valueType=h,0===t||null===i?f.push(`${p} `):h!==i?(n.push(";"),f.push(`${p} `)):f.push(","),i=h,f.push(`user_${a.id.name}=`),"Number"===c&&"Integer"===h?(f.push("int("),this.astGeneric(u,f),f.push(")")):this.astGeneric(u,f);else{if(l.valueType="Number",0===t||null===i)f.push("float ");else{if(h!==i)throw new Error("Unhandled declaration");f.push(",")}i=h,f.push(`user_${a.id.name}=`),f.push("float("),this.astGeneric(u,f),f.push(")")}n.push(f.join(""))}return t.push(n.join("")),s||t.push(";"),t}astIfStatement(e,t){return t.push("if ("),this.astGeneric(e.test,t),t.push(")"),"BlockStatement"===e.consequent.type?this.astGeneric(e.consequent,t):(t.push(" {\n"),this.astGeneric(e.consequent,t),t.push("\n}\n")),e.alternate&&(t.push("else "),"BlockStatement"===e.alternate.type?this.astGeneric(e.alternate,t):(t.push(" {\n"),this.astGeneric(e.alternate,t),t.push("\n}\n"))),t}astSwitchStatement(e,t){if("SwitchStatement"!==e.type)throw this.astErrorOutput("Invalid switch statement",e);const{discriminant:r,cases:n}=e,i=this.getType(r),o=`switchDiscriminant${e.start}_${e.end}`;switch(i){case"Float":case"Number":t.push(`float ${o} = `),this.astGeneric(r,t),t.push(";\n");break;case"Integer":t.push(`int ${o} = `),this.astGeneric(r,t),t.push(";\n")}if(1===n.length&&!n[0].test)return this.astGeneric(n[0].consequent,t),t;let s=!1,a=[],u=!1,l=!1;for(let e=0;e<n.length;e++){if(n[e].test){if(0!==e&&l?s?(t.push(`${o} == `),s=!1):t.push(` else if (${o} == `):(l=!0,t.push(`if (${o} == `)),"Integer"===i)switch(this.getType(n[e].test)){case"Number":case"Float":this.castValueToInteger(n[e].test,t);break;case"LiteralInteger":this.castLiteralToInteger(n[e].test,t)}else{if("Float"!==i)throw new Error("unhanlded");switch(this.getType(n[e].test)){case"LiteralInteger":this.castLiteralToFloat(n[e].test,t);break;case"Integer":this.castValueToFloat(n[e].test,t)}}if(!n[e].consequent||0===n[e].consequent.length){s=!0,t.push(" || ");continue}t.push(") {\n")}else{if(n.length>e+1){u=!0,this.astGeneric(n[e].consequent,a);continue}t.push(" else {\n")}this.astGeneric(n[e].consequent,t),t.push("\n}")}return u&&(t.push(" else {"),t.push(a.join("")),t.push("}")),t}astThisExpression(e,t){return t.push("this"),t}astMemberExpression(e,t){const{property:r,name:n,signature:i,origin:o,type:s,xProperty:a,yProperty:u,zProperty:l}=this.getMemberExpressionDetails(e);switch(i){case"this.thread.value":if("x"!==n&&"y"!==n&&"z"!==n)throw this.astErrorOutput("Unexpected expression, expected `this.thread.x`, `this.thread.y`, or `this.thread.z`",e);return t.push(`threadId.${n}`),t;case"this.output.value":if(this.dynamicOutput)switch(n){case"x":this.isState("casting-to-float")?t.push("float(uOutputDim.x)"):t.push("uOutputDim.x");break;case"y":this.isState("casting-to-float")?t.push("float(uOutputDim.y)"):t.push("uOutputDim.y");break;case"z":this.isState("casting-to-float")?t.push("float(uOutputDim.z)"):t.push("uOutputDim.z");break;default:throw this.astErrorOutput("Unexpected expression",e)}else switch(n){case"x":this.isState("casting-to-integer")?t.push(this.output[0]):t.push(this.output[0],".0");break;case"y":this.isState("casting-to-integer")?t.push(this.output[1]):t.push(this.output[1],".0");break;case"z":this.isState("casting-to-integer")?t.push(this.output[2]):t.push(this.output[2],".0");break;default:throw this.astErrorOutput("Unexpected expression",e)}return t;case"value":throw this.astErrorOutput("Unexpected expression",e);case"value[]":case"value[][]":case"value[][][]":case"value[][][][]":case"value.value":if("Math"===o)return t.push(Math[n]),t;switch(r){case"r":return t.push(`user_${n}.r`),t;case"g":return t.push(`user_${n}.g`),t;case"b":return t.push(`user_${n}.b`),t;case"a":return t.push(`user_${n}.a`),t}break;case"this.constants.value":case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":case"this.constants.value[][][][]":break;case"fn()[]":return this.astCallExpression(e.object,t),t.push("["),t.push(this.memberExpressionPropertyMarkup(r)),t.push("]"),t;case"[][]":return this.astArrayExpression(e.object,t),t.push("["),t.push(this.memberExpressionPropertyMarkup(r)),t.push("]"),t;default:throw this.astErrorOutput("Unexpected expression",e)}if(!1===e.computed)switch(s){case"Number":case"Integer":case"Float":case"Boolean":return t.push(`${o}_${n}`),t}const c=`${o}_${this.getKernelArgumentName(n)||n}`;switch(s){case"Array(2)":case"Array(3)":case"Array(4)":this.astGeneric(e.object,t),t.push("["),t.push(this.memberExpressionPropertyMarkup(a)),t.push("]");break;case"HTMLImageArray":t.push(`getImage3D(${c}, ${c}Size, ${c}Dim, `),this.memberExpressionXYZ(a,u,l,t),t.push(")");break;case"ArrayTexture(1)":t.push(`getFloatFromSampler2D(${c}, ${c}Size, ${c}Dim, `),this.memberExpressionXYZ(a,u,l,t),t.push(")");break;case"ArrayTexture(2)":t.push(`getVec2FromSampler2D(${c}, ${c}Size, ${c}Dim, `),this.memberExpressionXYZ(a,u,l,t),t.push(")");break;case"ArrayTexture(3)":t.push(`getVec3FromSampler2D(${c}, ${c}Size, ${c}Dim, `),this.memberExpressionXYZ(a,u,l,t),t.push(")");break;case"ArrayTexture(4)":case"HTMLImage":t.push(`getVec4FromSampler2D(${c}, ${c}Size, ${c}Dim, `),this.memberExpressionXYZ(a,u,l,t),t.push(")");break;case"NumberTexture":case"Array":case"Array2D":case"Array3D":case"Array4D":case"Input":if("single"===this.precision)t.push(`getMemoryOptimized32(${c}, ${c}Size, ${c}Dim, `),this.memberExpressionXYZ(a,u,l,t),t.push(")");else{const e="user"===o?this.lookupFunctionArgumentBitRatio(this.name,n):this.constantBitRatios[n];switch(e){case 1:t.push(`get8(${c}, ${c}Size, ${c}Dim, `);break;case 2:t.push(`get16(${c}, ${c}Size, ${c}Dim, `);break;case 4:case 0:t.push(`get32(${c}, ${c}Size, ${c}Dim, `);break;default:throw new Error(`unhandled bit ratio of ${e}`)}this.memberExpressionXYZ(a,u,l,t),t.push(")")}break;case"MemoryOptimizedNumberTexture":t.push(`getMemoryOptimized32(${c}, ${c}Size, ${c}Dim, `),this.memberExpressionXYZ(a,u,l,t),t.push(")");break;default:throw new Error(`unhandled member expression "${s}"`)}return t}astCallExpression(e,t){if(!e.callee)throw this.astErrorOutput("Unknown CallExpression",e);let r=null;const n=this.isAstMathFunction(e);if(!(r=n||e.callee.object&&"ThisExpression"===e.callee.object.type?e.callee.property.name:"SequenceExpression"!==e.callee.type||"Literal"!==e.callee.expressions[0].type||isNaN(e.callee.expressions[0].raw)?e.callee.name:e.callee.expressions[1].property.name))throw this.astErrorOutput("Unhandled function, couldn't find name",e);if("atan2"===r&&(r="atan"),this.calledFunctions.indexOf(r)<0&&this.calledFunctions.push(r),"random"===r&&this.plugins&&this.plugins.length>0)for(let e=0;e<this.plugins.length;e++){const r=this.plugins[e];if("Math.random()"===r.functionMatch&&r.functionReplace)return t.push(r.functionReplace),t}if(this.onFunctionCall&&this.onFunctionCall(this.name,r,e.arguments),t.push(r),t.push("("),n)for(let r=0;r<e.arguments.length;++r){const n=e.arguments[r],i=this.getType(n);switch(r>0&&t.push(", "),i){case"Integer":this.castValueToFloat(n,t);break;default:this.astGeneric(n,t)}}else{const n=this.lookupFunctionArgumentTypes(r)||[];for(let i=0;i<e.arguments.length;++i){const o=e.arguments[i];let s=n[i];i>0&&t.push(", ");const a=this.getType(o);switch(s||(this.triggerImplyArgumentType(r,i,a,this),s=a),a){case"Number":case"Float":if("Integer"===s){t.push("int("),this.astGeneric(o,t),t.push(")");continue}if("Number"===s||"Float"===s){this.astGeneric(o,t);continue}if("LiteralInteger"===s){this.castLiteralToFloat(o,t);continue}break;case"Integer":if("Number"===s||"Float"===s){t.push("float("),this.astGeneric(o,t),t.push(")");continue}if("Integer"===s){this.astGeneric(o,t);continue}break;case"LiteralInteger":if("Integer"===s){this.castLiteralToInteger(o,t);continue}if("Number"===s||"Float"===s){this.castLiteralToFloat(o,t);continue}if("LiteralInteger"===s){this.astGeneric(o,t);continue}break;case"Array(2)":case"Array(3)":case"Array(4)":if(s===a){this.astGeneric(o,t);continue}break;case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"Array":case"Input":if(s===a){this.triggerTrackArgumentSynonym(this.name,o.name,r,i),this.astGeneric(o,t);continue}}throw this.astErrorOutput(`Unhandled argument combination of ${a} and ${s}`,e)}}return t.push(")"),t}astArrayExpression(e,t){const r=e.elements.length;t.push("vec"+r+"(");for(let n=0;n<r;++n){n>0&&t.push(", ");const r=e.elements[n];this.astGeneric(r,t)}return t.push(")"),t}memberExpressionXYZ(e,t,r,n){return r?n.push(this.memberExpressionPropertyMarkup(r),", "):n.push("0, "),t?n.push(this.memberExpressionPropertyMarkup(t),", "):n.push("0, "),n.push(this.memberExpressionPropertyMarkup(e)),n}memberExpressionPropertyMarkup(e){if(!e)throw new Error("Property not set");const t=[];switch(this.getType(e)){case"Number":case"Float":this.castValueToInteger(e,t);break;case"LiteralInteger":this.castLiteralToInteger(e,t);break;default:this.astGeneric(e,t)}return t.join("")}}}},{"../../utils":126,"../function-node":47}],99:[function(e,t,r){const{WebGLKernelValueBoolean:n}=e("./kernel-value/boolean"),{WebGLKernelValueFloat:i}=e("./kernel-value/float"),{WebGLKernelValueInteger:o}=e("./kernel-value/integer"),{WebGLKernelValueHTMLImage:s}=e("./kernel-value/html-image"),{WebGLKernelValueDynamicHTMLImage:a}=e("./kernel-value/dynamic-html-image"),{WebGLKernelValueSingleInput:u}=e("./kernel-value/single-input"),{WebGLKernelValueDynamicSingleInput:l}=e("./kernel-value/dynamic-single-input"),{WebGLKernelValueUnsignedInput:c}=e("./kernel-value/unsigned-input"),{WebGLKernelValueDynamicUnsignedInput:h}=e("./kernel-value/dynamic-unsigned-input"),{WebGLKernelValueMemoryOptimizedNumberTexture:p}=e("./kernel-value/memory-optimized-number-texture"),{WebGLKernelValueDynamicMemoryOptimizedNumberTexture:f}=e("./kernel-value/dynamic-memory-optimized-number-texture"),{WebGLKernelValueNumberTexture:d}=e("./kernel-value/number-texture"),{WebGLKernelValueDynamicNumberTexture:m}=e("./kernel-value/dynamic-number-texture"),{WebGLKernelValueSingleArray:g}=e("./kernel-value/single-array"),{WebGLKernelValueDynamicSingleArray:v}=e("./kernel-value/dynamic-single-array"),{WebGLKernelValueUnsignedArray:y}=e("./kernel-value/unsigned-array"),{WebGLKernelValueDynamicUnsignedArray:b}=e("./kernel-value/dynamic-unsigned-array"),x={unsigned:{dynamic:{Boolean:n,Integer:o,Float:i,Array:b,Input:h,NumberTexture:m,"ArrayTexture(1)":m,"ArrayTexture(2)":m,"ArrayTexture(3)":m,"ArrayTexture(4)":m,MemoryOptimizedNumberTexture:f,HTMLImage:a,HTMLImageArray:!1},static:{Boolean:n,Float:i,Integer:o,Array:y,Input:c,NumberTexture:d,"ArrayTexture(1)":d,"ArrayTexture(2)":d,"ArrayTexture(3)":d,"ArrayTexture(4)":d,MemoryOptimizedNumberTexture:f,HTMLImage:s,HTMLImageArray:!1}},single:{dynamic:{Boolean:n,Integer:o,Float:i,Array:v,Input:l,NumberTexture:m,"ArrayTexture(1)":m,"ArrayTexture(2)":m,"ArrayTexture(3)":m,"ArrayTexture(4)":m,MemoryOptimizedNumberTexture:f,HTMLImage:a,HTMLImageArray:!1},static:{Boolean:n,Float:i,Integer:o,Array:g,Input:u,NumberTexture:d,"ArrayTexture(1)":d,"ArrayTexture(2)":d,"ArrayTexture(3)":d,"ArrayTexture(4)":d,MemoryOptimizedNumberTexture:p,HTMLImage:s,HTMLImageArray:!1}}};t.exports={lookupKernelValueType:function(e,t,r){if(!e)throw new Error("type missing");if(!t)throw new Error("dynamic missing");if(!r)throw new Error("precision missing");const n=x[r][t];if(!1===n[e])return null;if(void 0===n[e])throw new Error(`Could not find a KernelValue for ${e}`);return n[e]}}},{"./kernel-value/boolean":100,"./kernel-value/dynamic-html-image":101,"./kernel-value/dynamic-memory-optimized-number-texture":102,"./kernel-value/dynamic-number-texture":103,"./kernel-value/dynamic-single-array":104,"./kernel-value/dynamic-single-input":105,"./kernel-value/dynamic-unsigned-array":106,"./kernel-value/dynamic-unsigned-input":107,"./kernel-value/float":108,"./kernel-value/html-image":109,"./kernel-value/integer":111,"./kernel-value/memory-optimized-number-texture":112,"./kernel-value/number-texture":113,"./kernel-value/single-array":114,"./kernel-value/single-input":115,"./kernel-value/unsigned-array":116,"./kernel-value/unsigned-input":117}],100:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValue:i}=e("./index");t.exports={WebGLKernelValueBoolean:class extends i{constructor(e,t){super(e,t),this.uploadValue=e}getSource(e){return"constants"===this.origin?`const bool ${this.id} = ${e};\n`:`uniform bool ${this.id};\n`}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}updateValue(e){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=e)}}}},{"../../../utils":126,"./index":110}],101:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueHTMLImage:i}=e("./html-image");t.exports={WebGLKernelValueDynamicInput:class extends i{getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){const{width:t,height:r}=e;this.dimensions=[t,r,1],this.textureSize=[t,r],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},{"../../../utils":126,"./html-image":109}],102:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueMemoryOptimizedNumberTexture:i}=e("./memory-optimized-number-texture");t.exports={WebGLKernelValueDynamicMemoryOptimizedNumberTexture:class extends i{getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=e.dimensions,this.textureSize=e.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},{"../../../utils":126,"./memory-optimized-number-texture":112}],103:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueNumberTexture:i}=e("./number-texture");t.exports={WebGLKernelValueDynamicNumberTexture:class extends i{getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=inputTexture.dimensions,this.textureSize=inputTexture.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},{"../../../utils":126,"./number-texture":113}],104:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueSingleArray:i}=e("./single-array");t.exports={WebGLKernelValueDynamicSingleArray:class extends i{getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=n.getDimensions(e,!0),this.textureSize=n.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},{"../../../utils":126,"./single-array":114}],105:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueSingleInput:i}=e("./single-input");t.exports={WebGLKernelValueDynamicSingleInput:class extends i{getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=e.size,this.textureSize=n.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},{"../../../utils":126,"./single-input":115}],106:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueUnsignedArray:i}=e("./unsigned-array");t.exports={WebGLKernelValueDynamicUnsignedArray:class extends i{getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=n.getDimensions(e,!0),this.textureSize=n.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio);const t=this.getTransferArrayType(e);this.preUploadValue=new t(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},{"../../../utils":126,"./unsigned-array":116}],107:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValueUnsignedInput:i}=e("./unsigned-input");t.exports={WebGLKernelValueDynamicUnsignedInput:class extends i{getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=e.size,this.textureSize=n.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio);const t=this.getTransferArrayType(e.value);this.preUploadValue=new t(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},{"../../../utils":126,"./unsigned-input":117}],108:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValue:i}=e("./index");t.exports={WebGLKernelValueFloat:class extends i{constructor(e,t){super(e,t),this.uploadValue=e}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(e){return"constants"===this.origin?Number.isInteger(e)?`const float ${this.id} = ${e}.0;\n`:`const float ${this.id} = ${e};\n`:`uniform float ${this.id};\n`}updateValue(e){"constants"!==this.origin&&this.kernel.setUniform1f(this.id,this.uploadValue=e)}}}},{"../../../utils":126,"./index":110}],109:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValue:i}=e("./index");t.exports={WebGLKernelValueHTMLImage:class extends i{constructor(e,t){super(e,t);const{width:r,height:n}=e;this.dimensions=[r,n,1],this.requestTexture(),this.textureSize=[r,n],this.uploadValue=e}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();const{context:t}=this;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue=e),this.kernel.setUniform1i(this.id,this.index)}}}},{"../../../utils":126,"./index":110}],110:[function(e,t,r){const{utils:n}=e("../../../utils"),{Input:i}=e("../../../input"),{KernelValue:o}=e("../../kernel-value");t.exports={WebGLKernelValue:class extends o{constructor(e,t){super(e,t),this.dimensionsId=null,this.sizeId=null,this.initialValueConstructor=e.constructor,this.onRequestTexture=t.onRequestTexture,this.onRequestIndex=t.onRequestIndex,this.uploadValue=null,this.textureSize=null,this.bitRatio=null}requestTexture(){this.texture=this.onRequestTexture(),this.setupTexture()}setupTexture(){this.contextHandle=this.onRequestContextHandle(),this.index=this.onRequestIndex(),this.dimensionsId=this.id+"Dim",this.sizeId=this.id+"Size"}getTransferArrayType(e){return Array.isArray(e[0])?this.getTransferArrayType(e[0]):e.constructor===Array?Float32Array:e.constructor}formatArrayTransfer(e,t,r){if(n.isArray(e[0])||this.optimizeFloatMemory){const r=new Float32Array(t);return n.flattenTo(e,r),r}switch(e.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:case Uint16Array:case Int16Array:case Float32Array:case Int32Array:{const i=new(r||e.constructor)(t);return n.flattenTo(e,i),i}default:{const r=new Float32Array(t);return n.flattenTo(e,r),r}}}getBitRatio(e){if(Array.isArray(e[0]))return this.getBitRatio(e[0]);if(e.constructor===i)return this.getBitRatio(e.value);switch(e.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}getStringValueHandler(){throw new Error(`"getStringValueHandler" not implemented on ${this.constructor.name}`)}}}},{"../../../input":122,"../../../utils":126,"../../kernel-value":71}],111:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValue:i}=e("./index");t.exports={WebGLKernelValueInteger:class extends i{constructor(e,t){super(e,t),this.uploadValue=e}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(e){return"constants"===this.origin?`const int ${this.id} = ${parseInt(e)};\n`:`uniform int ${this.id};\n`}updateValue(e){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=e)}}}},{"../../../utils":126,"./index":110}],112:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValue:i}=e("./index");t.exports={WebGLKernelValueMemoryOptimizedNumberTexture:class extends i{constructor(e,t){super(e,t),this.setupTexture(),this.dimensions=e.dimensions,this.textureSize=e.size,this.uploadValue=e.texture}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName}.texture;\n`}getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();if(this.checkContext&&e.context!==this.context)throw new Error(`Value ${this.name} (${this.type}) must be from same context`);const{context:t}=this;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.uploadValue=e.texture),this.kernel.setUniform1i(this.id,this.index)}}}},{"../../../utils":126,"./index":110}],113:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValue:i}=e("./index");t.exports={WebGLKernelValueNumberTexture:class extends i{constructor(e,t){super(e,t),this.setupTexture();const{size:r,dimensions:n}=e;this.bitRatio=this.getBitRatio(e),this.dimensions=n,this.textureSize=r,this.uploadValue=e.texture}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName}.texture;\n`}getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();if(this.checkContext&&e.context!==this.context)throw new Error(`Value ${this.name} (${this.type}) must be from same context`);const{context:t}=this;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.uploadValue=e.texture),this.kernel.setUniform1i(this.id,this.index)}}}},{"../../../utils":126,"./index":110}],114:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValue:i}=e("./index");t.exports={WebGLKernelValueSingleArray:class extends i{constructor(e,t){super(e,t),this.requestTexture(),this.bitRatio=4,this.dimensions=n.getDimensions(e,!0),this.textureSize=n.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return n.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}, uploadValue_${this.name})`])}getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();const{context:t}=this;n.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}}},{"../../../utils":126,"./index":110}],115:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValue:i}=e("./index");t.exports={WebGLKernelValueSingleInput:class extends i{constructor(e,t){super(e,t),this.requestTexture(),this.bitRatio=4,this.dimensions=e.size,this.textureSize=n.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return n.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}.value, uploadValue_${this.name})`])}getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();const{context:t}=this;n.flattenTo(e.value,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}}},{"../../../utils":126,"./index":110}],116:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValue:i}=e("./index");t.exports={WebGLKernelValueUnsignedArray:class extends i{constructor(e,t){super(e,t),this.requestTexture(),this.bitRatio=this.getBitRatio(e),this.dimensions=n.getDimensions(e,!0),this.textureSize=n.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.TranserArrayType=this.getTransferArrayType(e),this.preUploadValue=new this.TranserArrayType(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer)}getStringValueHandler(){return n.linesToString([`const preUploadValue_${this.name} = new ${this.TranserArrayType.name}(${this.uploadArrayLength})`,`const uploadValue_${this.name} = new Uint8Array(preUploadValue_${this.name}.buffer)`,`flattenTo(${this.varName}, preUploadValue_${this.name})`])}getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();const{context:t}=this;n.flattenTo(e,this.preUploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}}},{"../../../utils":126,"./index":110}],117:[function(e,t,r){const{utils:n}=e("../../../utils"),{WebGLKernelValue:i}=e("./index");t.exports={WebGLKernelValueUnsignedInput:class extends i{constructor(e,t){super(e,t),this.requestTexture(),this.bitRatio=this.getBitRatio(e),this.dimensions=e.size,this.textureSize=n.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.TranserArrayType=this.getTransferArrayType(e.value),this.preUploadValue=new this.TranserArrayType(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer)}getStringValueHandler(){return n.linesToString([`const preUploadValue_${this.name} = new ${this.TranserArrayType.name}(${this.uploadArrayLength})`,`const uploadValue_${this.name} = new Uint8Array(preUploadValue_${this.name}.buffer)`,`flattenTo(${this.varName}.value, preUploadValue_${this.name})`])}getSource(){return n.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();const{context:t}=this;n.flattenTo(e.value,this.preUploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}}},{"../../../utils":126,"./index":110}],118:[function(e,t,r){const{GLKernel:n}=e("../gl/kernel"),{FunctionBuilder:i}=e("../function-builder"),{WebGLFunctionNode:o}=e("./function-node"),{utils:s}=e("../../utils"),a=e("../../plugins/triangle-noise"),{fragmentShader:u}=e("./fragment-shader"),{vertexShader:l}=e("./vertex-shader"),{glKernelString:c}=e("../gl/kernel-string"),{lookupKernelValueType:h}=e("./kernel-value-maps");let p=null,f=null,d=null,m=null,g=null;const v=[a],y=[],b={};t.exports={WebGLKernel:class extends n{static get isSupported(){return null!==p?p:(this.setupFeatureChecks(),p=this.isContextMatch(d))}static setupFeatureChecks(){"undefined"!=typeof document?f=document.createElement("canvas"):"undefined"!=typeof OffscreenCanvas&&(f=new OffscreenCanvas(0,0)),f&&(d=f.getContext("webgl")||f.getContext("experimental-webgl"))&&d.getExtension&&(m={OES_texture_float:d.getExtension("OES_texture_float"),OES_texture_float_linear:d.getExtension("OES_texture_float_linear"),OES_element_index_uint:d.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:d.getExtension("WEBGL_draw_buffers")},g=this.getFeatures())}static isContextMatch(e){return"undefined"!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext}static getFeatures(){const e=this.getIsDrawBuffers();return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isTextureFloat:this.getIsTextureFloat(),isDrawBuffers:e,kernelMap:e,channelCount:this.getChannelCount()})}static getIsTextureFloat(){return Boolean(m.OES_texture_float)}static getIsDrawBuffers(){return Boolean(m.WEBGL_draw_buffers)}static getChannelCount(){return m.WEBGL_draw_buffers?d.getParameter(m.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}static lookupKernelValueType(e,t,r){return h(e,t,r)}static get testCanvas(){return f}static get testContext(){return d}static get features(){return g}static get fragmentShader(){return u}static get vertexShader(){return l}constructor(e,t){super(e,t),this.program=null,this.pipeline=t.pipeline,this.endianness=s.systemEndianness(),this.extensions={},this.subKernelOutputTextures=null,this.kernelArguments=null,this.argumentTextureCount=0,this.constantTextureCount=0,this.compiledFragmentShader=null,this.compiledVertexShader=null,this.fragShader=null,this.vertShader=null,this.drawBuffersMap=null,this.outputTexture=null,this.maxTexSize=null,this.switchingKernels=!1,this.onRequestSwitchKernel=null,this.mergeSettings(e.settings||t),this.threadDim=null,this.framebuffer=null,this.buffer=null,this.textureCache={},this.programUniformLocationCache={},this.uniform1fCache={},this.uniform1iCache={},this.uniform2fCache={},this.uniform2fvCache={},this.uniform2ivCache={},this.uniform3fvCache={},this.uniform3ivCache={}}initCanvas(){if("undefined"!=typeof document){const e=document.createElement("canvas");return e.width=2,e.height=2,e}if("undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(0,0)}initContext(){const e={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e)}initPlugins(e){const t=[],{source:r}=this;if("string"==typeof r)for(let e=0;e<v.length;e++){const n=v[e];r.match(n.functionMatch)&&t.push(n)}else if("object"==typeof r&&e.pluginNames)for(let r=0;r<v.length;r++){const n=v[r];e.pluginNames.some(e=>e===n.name)&&t.push(n)}return t}initExtensions(){this.extensions={OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:this.context.getExtension("WEBGL_color_buffer_float")}}validateSettings(){if(!this.validate)return void(this.texSize=s.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output));const{features:e}=this.constructor;if(!0===this.optimizeFloatMemory&&!e.isTextureFloat)throw new Error("Float textures are not supported");if("single"===this.precision&&!e.isFloatRead)throw new Error("Single precision not supported");if(!this.graphical&&null===this.precision&&e.isTextureFloat&&(this.precision=e.isFloatRead?"single":"unsigned"),this.subKernels&&this.subKernels.length>0&&!this.extensions.WEBGL_draw_buffers)throw new Error("could not instantiate draw buffers extension");if(null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!e.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&e.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==arguments.length)throw new Error("Auto output only supported for kernels with only one input");const e=s.getVariableType(arguments[0],this.strictIntegers);if("Array"===e)this.output=s.getDimensions(e);else{if("NumberTexture"!==e&&"ArrayTexture(4)"!==e)throw new Error("Auto output not supported for input type: "+e);this.output=arguments[0].output}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"precision"===this.precision&&(this.precision="unsigned",console.warn("Cannot use graphical mode and single precision at the same time")),void(this.texSize=s.clone(this.output))}null===this.precision&&e.isTextureFloat&&(this.precision="single"),this.texSize=s.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output)}updateMaxTexSize(){const{texSize:e,canvas:t}=this;if(null===this.maxTexSize){let r=y.indexOf(t);-1===r&&(r=y.length,y.push(t),b[r]=[e[0],e[1]]),this.maxTexSize=b[r]}this.maxTexSize[0]<e[0]&&(this.maxTexSize[0]=e[0]),this.maxTexSize[1]<e[1]&&(this.maxTexSize[1]=e[1])}_oldtranslateSource(){const e=i.fromKernel(this,o,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy}),t=e.getPrototypeString("kernel");this.returnType||(this.returnType=e.getKernelResultType());let r=0;const n=e.getReturnTypes();for(let e=0;e<n.length;e++)switch(n[e]){case"Float":case"Number":case"Integer":r++;break;case"Array(2)":r+=2;break;case"Array(3)":r+=3;break;case"Array(4)":r+=4}if(g&&r>g.channelCount)throw new Error("Too many channels!");return this.translatedSource=t}setupArguments(e){this.kernelArguments=[],this.argumentTextureCount=0;const t=null===this.argumentTypes;if(t&&(this.argumentTypes=[]),this.argumentSizes=[],this.argumentBitRatios=[],e.length<this.argumentNames.length)throw new Error("not enough arguments for kernel");if(e.length>this.argumentNames.length)throw new Error("too many arguments for kernel");const{context:r}=this;let n=0;for(let i=0;i<e.length;i++){const o=e[i],a=this.argumentNames[i];let u;t?(u=s.getVariableType(o,this.strictIntegers),this.argumentTypes.push(u)):u=this.argumentTypes[i];const l=this.constructor.lookupKernelValueType(u,this.dynamicArguments?"dynamic":"static",this.precision);if(null===l)return this.requestFallback(e);const c=new l(o,{name:a,origin:"user",context:r,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:()=>this.context.createTexture(),onRequestIndex:()=>n++,onUpdateValueMismatch:()=>{this.switchingKernels=!0},onRequestContextHandle:()=>r.TEXTURE0+this.constantTextureCount+this.argumentTextureCount++});this.kernelArguments.push(c),this.argumentSizes.push(c.textureSize),this.argumentBitRatios[i]=c.bitRatio}}setupConstants(e){const{context:t}=this;this.kernelConstants=[],this.constantTypes={},this.constantBitRatios={};let r=0;for(const n in this.constants){const i=this.constants[n],o=s.getVariableType(i,this.strictIntegers);this.constantTypes[n]=o;const a=this.constructor.lookupKernelValueType(o,"static",this.precision);if(null===a)return this.requestFallback(e);const u=new a(i,{name:n,origin:"constants",context:this.context,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:()=>this.context.createTexture(),onRequestIndex:()=>r++,onRequestContextHandle:()=>t.TEXTURE0+this.constantTextureCount++});this.constantBitRatios[n]=u.bitRatio,this.kernelConstants.push(u)}}build(){if(this.initExtensions(),this.validateSettings(),this.setupConstants(arguments),this.fallbackRequested)return;if(this.setupArguments(arguments),this.fallbackRequested)return;this.updateMaxTexSize(),this.translateSource();const e=this.pickRenderStrategy(arguments);if(e)return e;const{texSize:t,context:r,canvas:n}=this;r.enable(r.SCISSOR_TEST),this.pipeline&&this.precision,r.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),n.width=this.maxTexSize[0],n.height=this.maxTexSize[1];const i=this.threadDim=Array.from(this.output);for(;i.length<3;)i.push(1);const o=this.getVertexShader(arguments),s=r.createShader(r.VERTEX_SHADER);r.shaderSource(s,o),r.compileShader(s),this.vertShader=s;const a=this.getFragmentShader(arguments),u=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(u,a),r.compileShader(u),this.fragShader=u,this.debug&&(console.log("GLSL Shader Output:"),console.log(a)),!r.getShaderParameter(s,r.COMPILE_STATUS))throw new Error("Error compiling vertex shader: "+r.getShaderInfoLog(s));if(!r.getShaderParameter(u,r.COMPILE_STATUS))throw new Error("Error compiling fragment shader: "+r.getShaderInfoLog(u));const l=this.program=r.createProgram();r.attachShader(l,s),r.attachShader(l,u),r.linkProgram(l),this.framebuffer=r.createFramebuffer(),this.framebuffer.width=t[0],this.framebuffer.height=t[1];const c=new Float32Array([-1,-1,1,-1,-1,1,1,1]),h=new Float32Array([0,0,1,0,0,1,1,1]),p=c.byteLength;let f=this.buffer;f?r.bindBuffer(r.ARRAY_BUFFER,f):(f=this.buffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,c.byteLength+h.byteLength,r.STATIC_DRAW)),r.bufferSubData(r.ARRAY_BUFFER,0,c),r.bufferSubData(r.ARRAY_BUFFER,p,h);const d=r.getAttribLocation(this.program,"aPos");r.enableVertexAttribArray(d),r.vertexAttribPointer(d,2,r.FLOAT,!1,0,0);const m=r.getAttribLocation(this.program,"aTexCoord");r.enableVertexAttribArray(m),r.vertexAttribPointer(m,2,r.FLOAT,!1,0,p),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer);let g=0;r.useProgram(this.program);for(let e in this.constants)this.kernelConstants[g++].updateValue(this.constants[e]);this.immutable||(this._setupOutputTexture(),null!==this.subKernels&&this.subKernels.length>0&&this._setupSubOutputTextures())}translateSource(){const e=i.fromKernel(this,o,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});if(this.translatedSource=e.getPrototypeString("kernel"),this.graphical||this.returnType||(this.returnType=e.getKernelResultType()),this.subKernels&&this.subKernels.length>0)for(let t=0;t<this.subKernels.length;t++){const r=this.subKernels[t];r.returnType||(r.returnType=e.getSubKernelResultType(t))}}run(){const{kernelArguments:e}=this,t=this.texSize,r=this.context;r.useProgram(this.program),r.scissor(0,0,t[0],t[1]),this.dynamicOutput&&(this.setUniform3iv("uOutputDim",this.threadDim),this.setUniform2iv("uTexSize",t)),this.setUniform2f("ratio",t[0]/this.maxTexSize[0],t[1]/this.maxTexSize[1]),this.switchingKernels=!1;for(let t=0;t<e.length;t++){if(this.switchingKernels)return;e[t].updateValue(arguments[t])}if(this.plugins)for(let e=0;e<this.plugins.length;e++){const t=this.plugins[e];t.onBeforeRun&&t.onBeforeRun(this)}if(this.graphical)return this.pipeline?(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.outputTexture&&!this.immutable||this._setupOutputTexture(),r.drawArrays(r.TRIANGLE_STRIP,0,4),new this.TextureConstructor({texture:this.outputTexture,size:t,dimensions:this.threadDim,output:this.output,context:this.context})):(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,null),void r.drawArrays(r.TRIANGLE_STRIP,0,4));r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._setupOutputTexture(),null!==this.subKernels&&(this.immutable&&this._setupSubOutputTextures(),this.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(this.drawBuffersMap)),r.drawArrays(r.TRIANGLE_STRIP,0,4)}getOutputTexture(){return this.outputTexture}_setupOutputTexture(){const e=this.context,t=this.texSize,r=this.outputTexture=this.context.createTexture();if(e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),"single"===this.precision)if(this.pipeline)switch(this.returnType){case"Number":case"Float":case"Integer":this.optimizeFloatMemory,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null);break;case"Array(2)":case"Array(3)":case"Array(4)":e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null);break;default:if(!this.graphical)throw new Error("Unhandled return type")}else e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null);else e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.UNSIGNED_BYTE,null);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)}_setupSubOutputTextures(){const e=this.context,t=this.texSize;this.drawBuffersMap=[e.COLOR_ATTACHMENT0],this.subKernelOutputTextures=[];for(let r=0;r<this.subKernels.length;r++){const n=this.context.createTexture();this.subKernelOutputTextures.push(n),this.drawBuffersMap.push(e.COLOR_ATTACHMENT0+r+1),e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+r),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),"single"===this.precision?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+r+1,e.TEXTURE_2D,n,0)}}getArgumentTexture(e){return this.getTextureCache(`ARGUMENT_${e}`)}getTextureCache(e){return this.textureCache.hasOwnProperty(e)?this.textureCache[e]:this.textureCache[e]=this.context.createTexture()}detachTextureCache(e){delete this.textureCache[e]}setUniform1f(e,t){if(this.uniform1fCache.hasOwnProperty(e)&&t===this.uniform1fCache[e])return;this.uniform1fCache[e]=t;const r=this.getUniformLocation(e);this.context.uniform1f(r,t)}setUniform1i(e,t){if(this.uniform1iCache.hasOwnProperty(e)&&t===this.uniform1iCache[e])return;this.uniform1iCache[e]=t;const r=this.getUniformLocation(e);this.context.uniform1i(r,t)}setUniform2f(e,t,r){if(this.uniform2fCache.hasOwnProperty(e)){const n=this.uniform2fCache[e];if(t===n[0]&&r===n[1])return}this.uniform2fCache[e]=[t,r];const n=this.getUniformLocation(e);this.context.uniform2f(n,t,r)}setUniform2fv(e,t){if(this.uniform2fvCache.hasOwnProperty(e)){const r=this.uniform2fvCache[e];if(t[0]===r[0]&&t[1]===r[1])return}this.uniform2fvCache[e]=t;const r=this.getUniformLocation(e);this.context.uniform2fv(r,t)}setUniform2iv(e,t){if(this.uniform2ivCache.hasOwnProperty(e)){const r=this.uniform2ivCache[e];if(t[0]===r[0]&&t[1]===r[1])return}this.uniform2ivCache[e]=t;const r=this.getUniformLocation(e);this.context.uniform2iv(r,t)}setUniform3fv(e,t){if(this.uniform3fvCache.hasOwnProperty(e)){const r=this.uniform3fvCache[e];if(t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2])return}this.uniform3fvCache[e]=t;const r=this.getUniformLocation(e);this.context.uniform3fv(r,t)}setUniform3iv(e,t){if(this.uniform3ivCache.hasOwnProperty(e)){const r=this.uniform3ivCache[e];if(t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2])return}this.uniform3ivCache[e]=t;const r=this.getUniformLocation(e);this.context.uniform3iv(r,t)}getUniformLocation(e){return this.programUniformLocationCache.hasOwnProperty(e)?this.programUniformLocationCache[e]:this.programUniformLocationCache[e]=this.context.getUniformLocation(this.program,e)}_getFragShaderArtifactMap(e){return{HEADER:this._getHeaderString(),LOOP_MAX:this._getLoopMaxString(),PLUGINS:this._getPluginsString(),CONSTANTS:this._getConstantsString(),DECODE32_ENDIANNESS:this._getDecode32EndiannessString(),ENCODE32_ENDIANNESS:this._getEncode32EndiannessString(),DIVIDE_WITH_INTEGER_CHECK:this._getDivideWithIntegerCheckString(),MAIN_CONSTANTS:this._getMainConstantsString(),MAIN_ARGUMENTS:this._getMainArgumentsString(e),KERNEL:this.getKernelString(),MAIN_RESULT:this.getMainResultString()}}_getHeaderString(){return null!==this.subKernels?"#extension GL_EXT_draw_buffers : require\n":""}_getLoopMaxString(){return this.loopMaxIterations?` ${parseInt(this.loopMaxIterations)};\n`:" 1000;\n"}_getPluginsString(){return this.plugins?this.plugins.map(e=>e.source&&this.source.match(e.functionMatch)?e.source:"").join("\n"):"\n"}_getConstantsString(){const e=[],{threadDim:t,texSize:r}=this;return this.dynamicOutput?e.push("uniform ivec3 uOutputDim","uniform ivec2 uTexSize"):e.push(`ivec3 uOutputDim = ivec3(${t[0]}, ${t[1]}, ${t[2]})`,`ivec2 uTexSize = ivec2(${r[0]}, ${r[1]})`),s.linesToString(e)}_getTextureCoordinate(){const e=this.subKernels;return null===e||e.length<1?"varying vec2 vTexCoord;\n":"out vec2 vTexCoord;\n"}_getDecode32EndiannessString(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}_getEncode32EndiannessString(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}_getDivideWithIntegerCheckString(){return this.fixIntegerDivisionAccuracy?"float div_with_int_check(float x, float y) {\n  if (floor(x) == x && floor(y) == y && integerMod(x, y) == 0.0) {\n    return float(int(x)/int(y));\n  }\n  return x / y;\n}":""}_getMainArgumentsString(e){const t=[],{argumentNames:r}=this;for(let n=0;n<r.length;n++)t.push(this.kernelArguments[n].getSource(e[n]));return t.join("")}_getMainConstantsString(){const e=[],{constants:t}=this;if(t){let r=0;for(const n in t)e.push(this.kernelConstants[r++].getSource(this.constants[n]))}return e.join("")}getKernelString(){let e;switch(this.returnType){case"Array(2)":e="vec2 kernelResult";break;case"Array(3)":e="vec3 kernelResult";break;case"Array(4)":e="vec4 kernelResult";break;case"LiteralInteger":case"Float":case"Number":case"Integer":e="float kernelResult";break;default:if(!this.graphical)throw new Error(`unrecognized output type "${this.returnType}"`);e="float kernelResult"}const t=[],r=this.subKernels;if(null!==r)switch(t.push(e),this.returnType){case"Number":case"Float":case"Integer":for(let e=0;e<r.length;e++){const n=r[e];t.push("Integer"===n.returnType?`int subKernelResult_${n.name} = 0`:`float subKernelResult_${n.name} = 0.0`)}break;case"Array(2)":for(let e=0;e<r.length;e++)t.push(`vec2 subKernelResult_${r[e].name}`);break;case"Array(3)":for(let e=0;e<r.length;e++)t.push(`vec3 subKernelResult_${r[e].name}`);break;case"Array(4)":for(let e=0;e<r.length;e++)t.push(`vec4 subKernelResult_${r[e].name}`)}else t.push(e);return s.linesToString(t)+this.translatedSource}getMainResultGraphical(){return s.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragColor = actualColor"])}getMainResultPackedPixels(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error(`packed output only usable with Numbers, "${this.returnType}" specified`)}}getMainResultKernelPackedPixels(){return s.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()",`  gl_FragData[0] = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(kernelResult)`])}getMainResultSubKernelPackedPixels(){const e=[];if(!this.subKernels)return"";for(let t=0;t<this.subKernels.length;t++)"Integer"===this.subKernels[t].returnType?e.push(`  gl_FragData[${t+1}] = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(float(subKernelResult_${this.subKernels[t].name}))`):e.push(`  gl_FragData[${t+1}] = ${this.useLegacyEncoder?"legacyEncode32":"encode32"}(subKernelResult_${this.subKernels[t].name})`);return s.linesToString(e)}getMainResultMemoryOptimizedFloats(){const e=["  index *= 4"];switch(this.returnType){case"Number":case"Integer":case"Float":const t=["r","g","b","a"];for(let r=0;r<t.length;r++){const n=t[r];this.getMainResultKernelMemoryOptimizedFloats(e,n),this.getMainResultSubKernelMemoryOptimizedFloats(e,n),r+1<t.length&&e.push("  index += 1")}break;default:throw new Error(`optimized output only usable with Numbers, ${this.returnType} specified`)}return s.linesToString(e)}getMainResultKernelMemoryOptimizedFloats(e,t){e.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()",`  gl_FragData[0].${t} = kernelResult`)}getMainResultSubKernelMemoryOptimizedFloats(e,t){if(!this.subKernels)return e;for(let r=0;r<this.subKernels.length;r++)"Integer"===this.subKernels[r].returnType?e.push(`  gl_FragData[${r+1}].${t} = float(subKernelResult_${this.subKernels[r].name})`):e.push(`  gl_FragData[${r+1}].${t} = subKernelResult_${this.subKernels[r].name}`)}getMainResultKernelNumberTexture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult"]}getMainResultSubKernelNumberTexture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t){const r=this.subKernels[t];"Integer"===r.returnType?e.push(`  gl_FragData[${t+1}][0] = float(subKernelResult_${r.name})`):e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${r.name}`)}return e}getMainResultKernelArray2Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]"]}getMainResultSubKernelArray2Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`);return e}getMainResultKernelArray3Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]","  gl_FragData[0][2] = kernelResult[2]"]}getMainResultSubKernelArray3Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`,`  gl_FragData[${t+1}][2] = subKernelResult_${this.subKernels[t].name}[2]`);return e}getMainResultKernelArray4Texture(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0] = kernelResult"]}getMainResultSubKernelArray4Texture(){const e=[];if(!this.subKernels)return e;switch(this.returnType){case"Number":case"Float":case"Integer":for(let t=0;t<this.subKernels.length;++t)"Integer"===this.subKernels[t].returnType?e.push(`  gl_FragData[${t+1}] = float(subKernelResult_${this.subKernels[t].name})`):e.push(`  gl_FragData[${t+1}] = subKernelResult_${this.subKernels[t].name}`);break;case"Array(2)":for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`);break;case"Array(3)":for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`,`  gl_FragData[${t+1}][2] = subKernelResult_${this.subKernels[t].name}[2]`);break;case"Array(4)":for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`,`  gl_FragData[${t+1}][2] = subKernelResult_${this.subKernels[t].name}[2]`,`  gl_FragData[${t+1}][3] = subKernelResult_${this.subKernels[t].name}[3]`)}return e}replaceArtifacts(e,t){return e.replace(/[ ]*__([A-Z]+[0-9]*([_]?[A-Z])*)__;\n/g,(e,r)=>{if(t.hasOwnProperty(r))return t[r];throw`unhandled artifact ${r}`})}getFragmentShader(e){return null!==this.compiledFragmentShader?this.compiledFragmentShader:this.compiledFragmentShader=this.replaceArtifacts(this.constructor.fragmentShader,this._getFragShaderArtifactMap(e))}getVertexShader(e){return null!==this.compiledVertexShader?this.compiledVertexShader:this.compiledVertexShader=this.constructor.vertexShader}toString(){const e=s.linesToString(["const gl = context"]);return c(this.constructor,arguments,this,e)}destroy(e){this.outputTexture&&this.context.deleteTexture(this.outputTexture),this.buffer&&this.context.deleteBuffer(this.buffer),this.framebuffer&&this.context.deleteFramebuffer(this.framebuffer),this.vertShader&&this.context.deleteShader(this.vertShader),this.fragShader&&this.context.deleteShader(this.fragShader),this.program&&this.context.deleteProgram(this.program);const t=Object.keys(this.textureCache);for(let e=0;e<t.length;e++){const r=t[e];this.context.deleteTexture(this.textureCache[r])}if(this.subKernelOutputTextures)for(let e=0;e<this.subKernelOutputTextures.length;e++)this.context.deleteTexture(this.subKernelOutputTextures[e]);if(e){const e=y.indexOf(this.canvas);e>=0&&(y[e]=null,b[e]=null)}this.destroyExtensions(),delete this.context,delete this.canvas}destroyExtensions(){this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}static destroyContext(e){const t=e.getExtension("WEBGL_lose_context");t&&t.loseContext()}toJSON(){const e=super.toJSON();return e.functionNodes=i.fromKernel(this,o).toJSON(),e}}}},{"../../plugins/triangle-noise":124,"../../utils":126,"../function-builder":46,"../gl/kernel":50,"../gl/kernel-string":49,"./fragment-shader":97,"./function-node":98,"./kernel-value-maps":99,"./vertex-shader":119}],119:[function(e,t,r){t.exports={vertexShader:"precision highp float;\nprecision highp int;\nprecision highp sampler2D;\n\nattribute vec2 aPos;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}"}},{}],120:[function(e,t,r){const n=e("gpu-mock.js"),{utils:i}=e("./utils"),{CPUKernel:o}=e("./backend/cpu/kernel"),{HeadlessGLKernel:s}=e("./backend/headless-gl/kernel"),{WebGL2Kernel:a}=e("./backend/web-gl2/kernel"),{WebGLKernel:u}=e("./backend/web-gl/kernel"),{kernelRunShortcut:l}=e("./kernel-run-shortcut"),c=[s,a,u],h=["gpu","cpu"],p={headlessgl:s,webgl2:a,webgl:u};let f=!0;function d(e){if(!e)return{};const t=Object.assign({},e);return e.hasOwnProperty("floatOutput")&&(i.warnDeprecated("setting","floatOutput","precision"),t.precision=e.floatOutput?"single":"unsigned"),e.hasOwnProperty("outputToTexture")&&(i.warnDeprecated("setting","outputToTexture","pipeline"),t.pipeline=Boolean(e.outputToTexture)),e.hasOwnProperty("outputImmutable")&&(i.warnDeprecated("setting","outputImmutable","immutable"),t.immutable=Boolean(e.outputImmutable)),e.hasOwnProperty("floatTextures")&&(i.warnDeprecated("setting","floatTextures","optimizeFloatMemory"),t.optimizeFloatMemory=Boolean(e.floatTextures)),t}t.exports={GPU:class{static disableValidation(){f=!1}static enableValidation(){f=!0}static get isGPUSupported(){return c.some(e=>e.isSupported)}static get isKernelMapSupported(){return c.some(e=>e.isSupported&&e.features.kernelMap)}static get isOffscreenCanvasSupported(){return"undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas||"undefined"!=typeof importScripts}static get isWebGLSupported(){return u.isSupported}static get isWebGL2Supported(){return a.isSupported}static get isHeadlessGLSupported(){return s.isSupported}static get isCanvasSupported(){return"undefined"!=typeof HTMLCanvasElement}static get isGPUHTMLImageArraySupported(){return a.isSupported}static get isSinglePrecisionSupported(){return c.some(e=>e.isSupported&&e.features.isFloatRead&&e.features.isTextureFloat)}constructor(e){if(e=e||{},this.canvas=e.canvas||null,this.context=e.context||null,this.mode=e.mode,"dev"!==this.mode){if(this.Kernel=null,this.kernels=[],this.functions=[],this.nativeFunctions=[],this.chooseKernel(),e.functions)for(let t=0;t<e.functions.length;t++)this.addFunction(e.functions[t]);if(e.nativeFunctions)for(const t in e.nativeFunctions)this.addNativeFunction(t,e.nativeFunctions[t])}}chooseKernel(){if(this.Kernel)return;let e=null;if(this.context){for(let t=0;t<c.length;t++){const r=c[t];if(r.isContextMatch(this.context)){if(!r.isSupported)throw new Error(`Kernel type ${r.name} not supported`);e=r;break}}if(null===e)throw new Error("unknown Context")}else if(this.mode){if(this.mode in p)f&&!p[this.mode].isSupported||(e=p[this.mode]);else if("gpu"===this.mode){for(let t=0;t<c.length;t++)if(c[t].isSupported){e=c[t];break}}else"cpu"===this.mode&&(e=o);if(!e)throw new Error(`A requested mode of "${this.mode}" and is not supported`)}else{for(let t=0;t<c.length;t++)if(c[t].isSupported){e=c[t];break}e||(e=o)}this.mode||(this.mode=e.mode),this.Kernel=e}createKernel(e,t){if(void 0===e)throw new Error("Missing source parameter");if("object"!=typeof e&&!i.isFunction(e)&&"string"!=typeof e)throw new Error("source parameter not a function");if("dev"===this.mode)return n(e,d(t));e="function"==typeof e?e.toString():e;const r={},s=d(t)||{};t&&"object"==typeof t.argumentTypes&&(s.argumentTypes=Object.keys(t.argumentTypes).map(e=>t.argumentTypes[e]));const a=Object.assign({context:this.context,canvas:this.canvas,functions:this.functions,nativeFunctions:this.nativeFunctions,gpu:this,validate:f,onRequestFallback:t=>{const r=new o(e,a);r.build.apply(r,t);const n=r.run.apply(r,t);return u.replaceKernel(r),n},onRequestSwitchKernel:(t,n)=>{const o=[];for(let e=0;e<t.length;e++)o.push(i.getVariableType(t[e]));const s=o.join(","),a=r[s];if(a)return a.run.apply(a,t),a.renderKernels?a.renderKernels():a.renderOutput();const u=r[s]=new this.Kernel(e,{graphical:n.graphical,constants:n.constants,context:n.context,canvas:n.canvas,output:n.output,precision:n.precision,pipeline:n.pipeline,immutable:n.immutable,optimizeFloatMemory:n.optimizeFloatMemory,fixIntegerDivisionAccuracy:n.fixIntegerDivisionAccuracy,functions:n.functions,nativeFunctions:n.nativeFunctions,subKernels:n.subKernels,strictIntegers:n.strictIntegers,debug:n.debug,gpu:this,validate:f});return u.build.apply(u,t),u.run.apply(u,t),u.renderKernels?u.renderKernels():u.renderOutput()}},s),u=l(new this.Kernel(e,a));return this.canvas||(this.canvas=u.canvas),this.context||(this.context=u.context),this.kernels.push(u),u}createKernelMap(){let e,t;if("function"==typeof arguments[arguments.length-2]?(e=arguments[arguments.length-2],t=arguments[arguments.length-1]):e=arguments[arguments.length-1],(!this.Kernel.isSupported||!this.Kernel.features.kernelMap)&&this.mode&&h.indexOf(this.mode)<0)throw new Error(`kernelMap not supported on ${this.Kernel.name}`);const r=d(t);if(t&&"object"==typeof t.argumentTypes&&(r.argumentTypes=Object.keys(t.argumentTypes).map(e=>t.argumentTypes[e])),Array.isArray(arguments[0])){r.subKernels=[];const e=arguments[0];for(let t=0;t<e.length;t++){const n=e[t].toString(),o=i.getFunctionNameFromString(n);r.subKernels.push({name:o,source:n,property:t})}}else{r.subKernels=[];const e=arguments[0];for(let t in e){if(!e.hasOwnProperty(t))continue;const n=e[t].toString(),o=i.getFunctionNameFromString(n);r.subKernels.push({name:o||t,source:n,property:t})}}return this.createKernel(e,r)}combineKernels(){const e=arguments[0],t=arguments[arguments.length-1];if("cpu"===e.kernel.constructor.mode)return t;const r=arguments[0].canvas,n=arguments[0].context,i=arguments.length-1;for(let e=0;e<i;e++)arguments[e].setCanvas(r).setContext(n).setPipeline(!0);return function(){const e=t.apply(this,arguments);return e.toArray?e.toArray():e}}addFunction(e,t){return this.functions.push(i.functionToIFunction(e,t)),this}addNativeFunction(e,t,r){if(this.kernels.length>0)throw new Error('Cannot call "addNativeFunction" after "createKernels" has been called.');r=r||{};const{argumentTypes:n,argumentNames:i}=this.Kernel.nativeFunctionArguments(t)||{};return this.nativeFunctions.push({name:e,source:t,settings:r,argumentTypes:n,argumentNames:i,returnType:r.returnType||this.Kernel.nativeFunctionReturnType(t)}),this}destroy(){setTimeout(()=>{for(let e=0;e<this.kernels.length;e++)this.kernels[e].destroy(!0);this.kernels[0].kernel.constructor.destroyContext(this.context)},0)}},kernelOrder:c,kernelTypes:h}},{"./backend/cpu/kernel":45,"./backend/headless-gl/kernel":70,"./backend/web-gl/kernel":118,"./backend/web-gl2/kernel":95,"./kernel-run-shortcut":123,"./utils":126,"gpu-mock.js":41}],121:[function(e,t,r){const{GPU:n}=e("./gpu"),{alias:i}=e("./alias"),{utils:o}=e("./utils"),{Input:s,input:a}=e("./input"),{Texture:u}=e("./texture"),{FunctionBuilder:l}=e("./backend/function-builder"),{FunctionNode:c}=e("./backend/function-node"),{CPUFunctionNode:h}=e("./backend/cpu/function-node"),{CPUKernel:p}=e("./backend/cpu/kernel"),{HeadlessGLKernel:f}=e("./backend/headless-gl/kernel"),{WebGLFunctionNode:d}=e("./backend/web-gl/function-node"),{WebGLKernel:m}=e("./backend/web-gl/kernel"),{WebGL2FunctionNode:g}=e("./backend/web-gl2/function-node"),{WebGL2Kernel:v}=e("./backend/web-gl2/kernel"),{GLKernel:y}=e("./backend/gl/kernel"),{Kernel:b}=e("./backend/kernel");t.exports={alias:i,CPUFunctionNode:h,CPUKernel:p,GPU:n,FunctionBuilder:l,FunctionNode:c,HeadlessGLKernel:f,Input:s,input:a,Texture:u,utils:o,WebGL2FunctionNode:g,WebGL2Kernel:v,WebGLFunctionNode:d,WebGLKernel:m,GLKernel:y,Kernel:b}},{"./alias":42,"./backend/cpu/function-node":43,"./backend/cpu/kernel":45,"./backend/function-builder":46,"./backend/function-node":47,"./backend/gl/kernel":50,"./backend/headless-gl/kernel":70,"./backend/kernel":72,"./backend/web-gl/function-node":98,"./backend/web-gl/kernel":118,"./backend/web-gl2/function-node":74,"./backend/web-gl2/kernel":95,"./gpu":120,"./input":122,"./texture":125,"./utils":126}],122:[function(e,t,r){class n{constructor(e,t){if(this.value=e,this.size=new Int32Array(3),Array.isArray(t))for(let e=0;e<this.size.length;e++)this.size[e]=t[e]||1;else t.z?this.size=new Int32Array([t.x,t.y,t.z]):t.y?this.size=new Int32Array([t.x,t.y,1]):this.size=new Int32Array([t.x,1,1]);const[r,n,i]=this.size;if(this.value.length!==r*n*i)throw new Error(`Input size ${this.value.length} does not match ${n} * ${r} * ${i} = ${r*n*i}`)}}t.exports={Input:n,input:function(e,t){return new n(e,t)}}},{}],123:[function(e,t,r){const{utils:n}=e("./utils");function i(e,t){const r=n.allPropertiesOf(e);for(let n=0;n<r.length;n++){const i=r[n];"_"===i[0]&&"_"===i[1]||("function"==typeof e[i]?"add"===i.substring(0,3)||"set"===i.substring(0,3)?t[i]=function(){return e[i].apply(e,arguments),t}:"toString"===i?t.toString=function(){return e.toString.apply(e,arguments)}:t[i]=e[i].bind(e):(t.__defineGetter__(i,()=>e[i]),t.__defineSetter__(i,t=>{e[i]=t})))}}t.exports={kernelRunShortcut:function(e){let t=function(){return e.build.apply(e,arguments),e.renderKernels?(t=function(){return e.run.apply(e,arguments),e.switchingKernels?(e.switchingKernels=!1,e.onRequestSwitchKernel(arguments,e)):e.renderKernels()},e.run.apply(e,arguments),e.renderKernels()):e.renderOutput?(t=function(){return e.run.apply(e,arguments),e.switchingKernels?(e.switchingKernels=!1,e.onRequestSwitchKernel(arguments,e)):e.renderOutput()},e.run.apply(e,arguments),e.renderOutput()):(t=function(){return e.run.apply(e,arguments)},e.run.apply(e,arguments))};const r=function(){return t.apply(e,arguments)};return r.exec=function(){return new Promise((e,r)=>{try{e(t.apply(this,arguments))}catch(e){r(e)}})},r.replaceKernel=function(t){i(e=t,r),r.kernel=e},i(e,r),r.kernel=e,r}}},{"./utils":126}],124:[function(e,t,r){t.exports={name:"triangle-noise-noise",onBeforeRun:e=>{e.setUniform1f("triangle_noise_seed",Math.random())},functionMatch:"Math.random()",functionReplace:"n4rand(vTexCoord)",functionReturnType:"Number",source:"\n\nuniform highp float triangle_noise_seed;\nhighp float triangle_noise_shift = 0.000001;\n\n//https://www.shadertoy.com/view/4t2SDh\n//note: uniformly distributed, normalized rand, [0;1[\nfloat nrand( vec2 n )\n{\n  return fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453);\n}\n//note: remaps v to [0;1] in interval [a;b]\nfloat remap( float a, float b, float v )\n{\n  return clamp( (v-a) / (b-a), 0.0, 1.0 );\n}\n\nfloat n4rand( vec2 n )\n{\n  float t = fract( triangle_noise_seed + triangle_noise_shift );\n  float nrnd0 = nrand( n + 0.07*t );\n  float nrnd1 = nrand( n + 0.11*t );  \n  float nrnd2 = nrand( n + 0.13*t );\n  float nrnd3 = nrand( n + 0.17*t );\n  float result = (nrnd0+nrnd1+nrnd2+nrnd3) / 4.0;\n  triangle_noise_shift = result + 0.000001;\n  return result;\n}"}},{}],125:[function(e,t,r){t.exports={Texture:class{constructor(e){const{texture:t,size:r,dimensions:n,output:i,context:o,type:s="NumberTexture"}=e;if(!i)throw new Error('settings property "output" required.');if(!o)throw new Error('settings property "context" required.');this.texture=t,this.size=r,this.dimensions=n,this.output=i,this.context=o,this.kernel=null,this.type=s}toArray(){throw new Error(`Not implemented on ${this.constructor.name}`)}delete(){return this.context.deleteTexture(this.texture)}}}},{}],126:[function(e,t,r){const n=e("acorn"),{Input:i}=e("./input"),{Texture:o}=e("./texture"),s=/function ([^(]*)/,a=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,u=/([^\s,]+)/g,l={systemEndianness:()=>c,getSystemEndianness(){const e=new ArrayBuffer(4),t=new Uint32Array(e),r=new Uint8Array(e);if(t[0]=3735928559,239===r[0])return"LE";if(222===r[0])return"BE";throw new Error("unknown endianness")},isFunction:e=>"function"==typeof e,isFunctionString:e=>"string"==typeof e&&"function"===e.slice(0,"function".length).toLowerCase(),getFunctionNameFromString:e=>s.exec(e)[1].trim(),getFunctionBodyFromString:e=>e.substring(e.indexOf("{")+1,e.lastIndexOf("}")),getArgumentNamesFromString(e){const t=e.replace(a,"");let r=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(u);return null===r&&(r=[]),r},clone(e){if(null===e||"object"!=typeof e||e.hasOwnProperty("isActiveClone"))return e;const t=e.constructor();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e.isActiveClone=null,t[r]=l.clone(e[r]),delete e.isActiveClone);return t},isArray:e=>!isNaN(e.length),getVariableType(e,t){if(l.isArray(e))return"IMG"===e[0].nodeName?"HTMLImageArray":"Array";switch(e.constructor){case Boolean:return"Boolean";case Number:return t&&Number.isInteger(e)?"Integer":"Float";case o:return e.type;case i:return"Input"}return"IMG"===e.nodeName?"HTMLImage":e.hasOwnProperty("type")?e.type:"Unknown"},getKernelTextureSize(e,t){let[r,n,i]=t,o=(r||1)*(n||1)*(i||1);return e.optimizeFloatMemory&&"single"===e.precision&&(r=o=Math.ceil(o/4)),n>1&&r*n===o?new Int32Array([r,n]):l.closestSquareDimensions(o)},closestSquareDimensions(e){const t=Math.sqrt(e);let r=Math.ceil(t),n=Math.floor(t);for(;r*n<e;)r--,n=Math.ceil(e/r);return new Int32Array([n,Math.ceil(e/n)])},getMemoryOptimizedFloatTextureSize(e,t){const[r,n,i]=e,o=l.roundTo((r||1)*(n||1)*(i||1),4)/t;return l.closestSquareDimensions(o)},getMemoryOptimizedPackedTextureSize(e,t){const[r,n,i]=e,o=l.roundTo((r||1)*(n||1)*(i||1),4)/(4/t);return l.closestSquareDimensions(o)},roundTo:(e,t)=>Math.floor((e+t-1)/t)*t,getDimensions(e,t){let r;if(l.isArray(e)){const t=[];let n=e;for(;l.isArray(n);)t.push(n.length),n=n[0];r=t.reverse()}else if(e instanceof o)r=e.output;else{if(!(e instanceof i))throw new Error(`Unknown dimensions of ${e}`);r=e.size}if(t)for(r=Array.from(r);r.length<3;)r.push(1);return new Int32Array(r)},flatten2dArrayTo(e,t){let r=0;for(let n=0;n<e.length;n++)t.set(e[n],r),r+=e[n].length},flatten3dArrayTo(e,t){let r=0;for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)t.set(e[n][i],r),r+=e[n][i].length},flattenTo(e,t){l.isArray(e[0])?l.isArray(e[0][0])?l.flatten3dArrayTo(e,t):l.flatten2dArrayTo(e,t):t.set(e)},splitArray(e,t){const r=[];for(let n=0;n<e.length;n+=t)r.push(new e.constructor(e.buffer,4*n+e.byteOffset,t));return r},getAstString(e,t){const r=Array.isArray(e)?e:e.split(/\r?\n/g),n=t.loc.start,i=t.loc.end,o=[];o.push(r[n.line-1].slice(n.column));for(let e=n.line;e<i.line-1;e++)o.push(r[e]);return o.push(r[i.line-1].slice(0,i.column)),o.join("\n")},allPropertiesOf(e){const t=[];do{t.push.apply(t,Object.getOwnPropertyNames(e))}while(e=Object.getPrototypeOf(e));return t},linesToString:e=>e.length>0?e.join(";\n")+";\n":"\n",warnDeprecated(e,t,r){r?console.warn(`You are using a deprecated ${e} "${t}". It has been replaced with "${r}". Fixing, but please upgrade as it will soon be removed.`):console.warn(`You are using a deprecated ${e} "${t}". It has been removed. Fixing, but please upgrade as it will soon be removed.`)},functionToIFunction(e,t){if(t=t||{},"string"!=typeof e&&"function"!=typeof e)throw new Error("source not a string or function");const r="string"==typeof e?e:e.toString();let n=[];return{source:r,argumentTypes:n=Array.isArray(t.argumentTypes)?t.argumentTypes:"object"==typeof t.argumentTypes?l.getArgumentNamesFromString(r).map(e=>t.argumentTypes[e])||[]:t.argumentTypes||[],returnType:t.returnType||null}},flipPixels:(e,t,r)=>{const n=r/2|0,i=4*t,o=new Uint8ClampedArray(4*t),s=e.slice(0);for(let e=0;e<n;++e){const t=e*i,n=(r-e-1)*i;o.set(s.subarray(t,t+i)),s.copyWithin(t,n,n+i),s.set(o,n)}return s},erectPackedFloat:(e,t)=>e.subarray(0,t),erect2DPackedFloat:(e,t,r)=>{const n=new Array(r);for(let i=0;i<r;i++){const r=i*t,o=r+t;n[i]=e.subarray(r,o)}return n},erect3DPackedFloat:(e,t,r,n)=>{const i=new Array(n);for(let o=0;o<n;o++){const n=new Array(r);for(let i=0;i<r;i++){const s=o*r*t+i*t,a=s+t;n[i]=e.subarray(s,a)}i[o]=n}return i},erectMemoryOptimizedFloat:(e,t)=>e.subarray(0,t),erectMemoryOptimized2DFloat:(e,t,r)=>{const n=new Array(r);for(let i=0;i<r;i++){const r=i*t;n[i]=e.subarray(r,r+t)}return n},erectMemoryOptimized3DFloat:(e,t,r,n)=>{const i=new Array(n);for(let o=0;o<n;o++){const n=new Array(r);for(let i=0;i<r;i++){const s=o*r*t+i*t;n[i]=e.subarray(s,s+t)}i[o]=n}return i},erectFloat:(e,t)=>{const r=new Float32Array(t);let n=0;for(let i=0;i<t;i++)r[i]=e[n],n+=4;return r},erect2DFloat:(e,t,r)=>{const n=new Array(r);let i=0;for(let o=0;o<r;o++){const r=new Float32Array(t);for(let n=0;n<t;n++)r[n]=e[i],i+=4;n[o]=r}return n},erect3DFloat:(e,t,r,n)=>{const i=new Array(n);let o=0;for(let s=0;s<n;s++){const n=new Array(r);for(let i=0;i<r;i++){const r=new Float32Array(t);for(let n=0;n<t;n++)r[n]=e[o],o+=4;n[i]=r}i[s]=n}return i},erectArray2:(e,t)=>{const r=new Array(t),n=4*t;let i=0;for(let t=0;t<n;t+=4)r[i++]=e.subarray(t,t+2);return r},erect2DArray2:(e,t,r)=>{const n=new Array(r),i=4*t;for(let o=0;o<r;o++){const r=new Array(t),s=o*i;let a=0;for(let t=0;t<i;t+=4)r[a++]=e.subarray(t+s,t+s+2);n[o]=r}return n},erect3DArray2:(e,t,r,n)=>{const i=4*t,o=new Array(n);for(let s=0;s<n;s++){const n=new Array(r);for(let o=0;o<r;o++){const a=new Array(t),u=s*i*r+o*i;let l=0;for(let t=0;t<i;t+=4)a[l++]=e.subarray(t+u,t+u+2);n[o]=a}o[s]=n}return o},erectArray3:(e,t)=>{const r=new Array(t),n=4*t;let i=0;for(let t=0;t<n;t+=4)r[i++]=e.subarray(t,t+3);return r},erect2DArray3:(e,t,r)=>{const n=4*t,i=new Array(r);for(let o=0;o<r;o++){const r=new Array(t),s=o*n;let a=0;for(let t=0;t<n;t+=4)r[a++]=e.subarray(t+s,t+s+3);i[o]=r}return i},erect3DArray3:(e,t,r,n)=>{const i=4*t,o=new Array(n);for(let s=0;s<n;s++){const n=new Array(r);for(let o=0;o<r;o++){const a=new Array(t),u=s*i*r+o*i;let l=0;for(let t=0;t<i;t+=4)a[l++]=e.subarray(t+u,t+u+3);n[o]=a}o[s]=n}return o},erectArray4:(e,t)=>{const r=new Array(e),n=4*t;let i=0;for(let t=0;t<n;t+=4)r[i++]=e.subarray(t,t+4);return r},erect2DArray4:(e,t,r)=>{const n=4*t,i=new Array(r);for(let o=0;o<r;o++){const r=new Array(t),s=o*n;let a=0;for(let t=0;t<n;t+=4)r[a++]=e.subarray(t+s,t+s+4);i[o]=r}return i},erect3DArray4:(e,t,r,n)=>{const i=4*t,o=new Array(n);for(let s=0;s<n;s++){const n=new Array(r);for(let o=0;o<r;o++){const a=new Array(t),u=s*i*r+o*i;let l=0;for(let t=0;t<i;t+=4)a[l++]=e.subarray(t+u,t+u+4);n[o]=a}o[s]=n}return o},flattenFunctionToString:(e,t)=>{const{findDependency:r,thisLookup:i,doNotDefine:o}=t;let s=t.flattened;s||(s=t.flattened={});const a=[];const u=function e(t){if(Array.isArray(t)){const r=[];for(let n=0;n<t.length;n++)r.push(e(t[n]));return r.join("")}switch(t.type){case"Program":return e(t.body);case"FunctionDeclaration":return`function ${t.id.name}(${t.params.map(e).join(", ")}) ${e(t.body)}`;case"BlockStatement":{const r=[];for(let n=0;n<t.body.length;n++)r.push(e(t.body[n]),";\n");return`{\n${r.join("")}}`}case"VariableDeclaration":switch(t.declarations[0].id.type){case"ObjectPattern":{const r=e(t.declarations[0].init),n=t.declarations.map(t=>t.id.properties.map(e))[0];if(/this/.test(r)){const e=[],r=n.map(i);for(let i=0;i<r.length;i++){const o=r[i];if(null===o)continue;const s=n[i];e.push(`${t.kind} ${s} = ${o};\n`)}return e.join("")}return`${t.kind} { ${n} } = ${r}`}case"ArrayPattern":return`${t.kind} [ ${t.declarations.map(t=>e(t.id)).join(", ")} ] = ${e(t.declarations[0].init)}`}return o&&-1!==o.indexOf(t.declarations[0].id.name)?"":`${t.kind} ${t.declarations[0].id.name} = ${e(t.declarations[0].init)}`;case"CallExpression":if("subarray"===t.callee.property.name)return`${e(t.callee.object)}.${e(t.callee.property)}(${t.arguments.map(t=>e(t)).join(", ")})`;if("gl"===t.callee.object.name||"context"===t.callee.object.name)return`${e(t.callee.object)}.${e(t.callee.property)}(${t.arguments.map(t=>e(t)).join(", ")})`;if("ThisExpression"===t.callee.object.type)return a.push(r("this",t.callee.property.name)),`${t.callee.property.name}(${t.arguments.map(t=>e(t)).join(", ")})`;if(t.callee.object.name){const n=r(t.callee.object.name,t.callee.property.name);return null===n?`${t.callee.object.name}.${t.callee.property.name}(${t.arguments.map(t=>e(t)).join(", ")})`:(a.push(n),`${t.callee.property.name}(${t.arguments.map(t=>e(t)).join(", ")})`)}if("MemberExpression"===t.callee.object.type)return`${e(t.callee.object)}.${t.callee.property.name}(${t.arguments.map(t=>e(t)).join(", ")})`;throw new Error("unknown ast.callee");case"ReturnStatement":return`return ${e(t.argument)}`;case"BinaryExpression":return`(${e(t.left)}${t.operator}${e(t.right)})`;case"UnaryExpression":return t.prefix?`${t.operator} ${e(t.argument)}`:`${e(t.argument)} ${t.operator}`;case"ExpressionStatement":return`(${e(t.expression)})`;case"ArrowFunctionExpression":return`(${t.params.map(e).join(", ")}) => ${e(t.body)}`;case"Literal":return t.raw;case"Identifier":return t.name;case"MemberExpression":return"ThisExpression"===t.object.type?i(t.property.name):t.computed?`${e(t.object)}[${e(t.property)}]`:e(t.object)+"."+e(t.property);case"ThisExpression":return"this";case"NewExpression":return`new ${e(t.callee)}(${t.arguments.map(t=>e(t)).join(", ")})`;case"ForStatement":return`for (${e(t.init)};${e(t.test)};${e(t.update)}) ${e(t.body)}`;case"AssignmentExpression":return`${e(t.left)}${t.operator}${e(t.right)}`;case"UpdateExpression":return`${e(t.argument)}${t.operator}`;case"IfStatement":return`if (${e(t.test)}) ${e(t.consequent)}`;case"ThrowStatement":return`throw ${e(t.argument)}`;case"ObjectPattern":return t.properties.map(e).join(", ");case"ArrayPattern":return t.elements.map(e).join(", ");case"DebuggerStatement":return"debugger;";case"ConditionalExpression":return`${e(t.test)}?${e(t.consequent)}:${e(t.alternate)}`;case"Property":if("init"===t.kind)return e(t.key)}throw new Error(`unhandled ast.type of ${t.type}`)}(n.parse(e));if(a.length>0){const e=[];for(let r=0;r<a.length;r++){const n=a[r];s[n]||(s[n]=!0),e.push(l.flattenFunctionToString(n,t)+";\n")}return e.join("")+u}return u}},c=l.getSystemEndianness();t.exports={utils:l}},{"./input":122,"./texture":125,acorn:1}],127:[function(e,t,r){(function(r){"use strict";function n(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function i(e){return r.Buffer&&"function"==typeof r.Buffer.isBuffer?r.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=e("util/"),s=Object.prototype.hasOwnProperty,a=Array.prototype.slice,u="foo"===function(){}.name;function l(e){return Object.prototype.toString.call(e)}function c(e){return!i(e)&&("function"==typeof r.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var h=t.exports=v,p=/\s*function\s+([^\(\s]*)\s*/;function f(e){if(o.isFunction(e)){if(u)return e.name;var t=e.toString().match(p);return t&&t[1]}}function d(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function m(e){if(u||!o.isFunction(e))return o.inspect(e);var t=f(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,r,n,i){throw new h.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function v(e,t){e||g(e,!0,t,"==",h.ok)}function y(e,t,r,s){if(e===t)return!0;if(i(e)&&i(t))return 0===n(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(c(e)&&c(t)&&l(e)===l(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var u=(s=s||{actual:[],expected:[]}).actual.indexOf(e);return-1!==u&&u===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),function(e,t,r,n){if(null===e||void 0===e||null===t||void 0===t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=b(e),s=b(t);if(i&&!s||!i&&s)return!1;if(i)return e=a.call(e),t=a.call(t),y(e,t,r);var u,l,c=w(e),h=w(t);if(c.length!==h.length)return!1;for(c.sort(),h.sort(),l=c.length-1;l>=0;l--)if(c[l]!==h[l])return!1;for(l=c.length-1;l>=0;l--)if(u=c[l],!y(e[u],t[u],r,n))return!1;return!0}(e,t,r,s))}return r?e===t:e==t}function b(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function x(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&g(i,r,"Missing expected exception"+n);var s="string"==typeof n,a=!e&&o.isError(i),u=!e&&i&&!r;if((a&&s&&x(i,r)||u)&&g(i,r,"Got unwanted exception"+n),e&&i&&r&&!x(i,r)||!e&&i)throw i}h.AssertionError=function(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=d(m((t=this).actual),128)+" "+t.operator+" "+d(m(t.expected),128),this.generatedMessage=!0);var r=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var n=new Error;if(n.stack){var i=n.stack,o=f(r),s=i.indexOf("\n"+o);if(s>=0){var a=i.indexOf("\n",s+1);i=i.substring(a+1)}this.stack=i}}},o.inherits(h.AssertionError,Error),h.fail=g,h.ok=v,h.equal=function(e,t,r){e!=t&&g(e,t,r,"==",h.equal)},h.notEqual=function(e,t,r){e==t&&g(e,t,r,"!=",h.notEqual)},h.deepEqual=function(e,t,r){y(e,t,!1)||g(e,t,r,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(e,t,r){y(e,t,!0)||g(e,t,r,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(e,t,r){y(e,t,!1)&&g(e,t,r,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function e(t,r,n){y(t,r,!0)&&g(t,r,n,"notDeepStrictEqual",e)},h.strictEqual=function(e,t,r){e!==t&&g(e,t,r,"===",h.strictEqual)},h.notStrictEqual=function(e,t,r){e===t&&g(e,t,r,"!==",h.notStrictEqual)},h.throws=function(e,t,r){_(!0,e,t,r)},h.doesNotThrow=function(e,t,r){_(!1,e,t,r)},h.ifError=function(e){if(e)throw e};var w=Object.keys||function(e){var t=[];for(var r in e)s.call(e,r)&&t.push(r);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":130}],128:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],129:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],130:[function(e,t,r){(function(t,n){var i=/%[sdj%]/g;r.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(a(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(e).replace(i,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),u=n[r];r<o;u=n[++r])m(u)||!x(u)?s+=" "+u:s+=" "+a(u);return s},r.deprecate=function(e,i){if(y(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}};var o,s={};function a(e,t){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(t)?n.showHidden=t:t&&r._extend(n,t),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),c(n,e,n.depth)}function u(e,t){var r=a.styles[t];return r?"["+a.colors[r][0]+"m"+e+"["+a.colors[r][1]+"m":e}function l(e,t){return e}function c(e,t,n){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return v(i)||(i=c(e,i,n)),i}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(g(t))return e.stylize(""+t,"number");if(d(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,t);if(o)return o;var s=Object.keys(t),a=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),w(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(t);if(0===s.length){if(k(t)){var u=t.name?": "+t.name:"";return e.stylize("[Function"+u+"]","special")}if(b(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(_(t))return e.stylize(Date.prototype.toString.call(t),"date");if(w(t))return h(t)}var l,x="",T=!1,E=["{","}"];(f(t)&&(T=!0,E=["[","]"]),k(t))&&(x=" [Function"+(t.name?": "+t.name:"")+"]");return b(t)&&(x=" "+RegExp.prototype.toString.call(t)),_(t)&&(x=" "+Date.prototype.toUTCString.call(t)),w(t)&&(x=" "+h(t)),0!==s.length||T&&0!=t.length?n<0?b(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=T?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)C(t,String(s))?o.push(p(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,r,n,i,!0))}),o}(e,t,n,a,s):s.map(function(r){return p(e,t,n,a,r,T)}),e.seen.pop(),function(e,t,r){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,x,E)):E[0]+x+E[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),C(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=m(r)?c(e,u.value,null):c(e,u.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),y(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function f(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return x(e)&&"[object RegExp]"===T(e)}function x(e){return"object"==typeof e&&null!==e}function _(e){return x(e)&&"[object Date]"===T(e)}function w(e){return x(e)&&("[object Error]"===T(e)||e instanceof Error)}function k(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}r.debuglog=function(e){if(y(o)&&(o=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=t.pid;s[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else s[e]=function(){};return s[e]},r.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=f,r.isBoolean=d,r.isNull=m,r.isNullOrUndefined=function(e){return null==e},r.isNumber=g,r.isString=v,r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=y,r.isRegExp=b,r.isObject=x,r.isDate=_,r.isError=w,r.isFunction=k,r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e("./support/isBuffer");var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":"),[e.getDate(),S[e.getMonth()],t].join(" ")),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!x(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":129,_process:200,inherits:128}],131:[function(e,t,r){(function(t,n){"use strict";var i=e("assert"),o=e("pako/lib/zlib/zstream"),s=e("pako/lib/zlib/deflate.js"),a=e("pako/lib/zlib/inflate.js"),u=e("pako/lib/zlib/constants");for(var l in u)r[l]=u[l];r.NONE=0,r.DEFLATE=1,r.INFLATE=2,r.GZIP=3,r.GUNZIP=4,r.DEFLATERAW=5,r.INFLATERAW=6,r.UNZIP=7;function c(e){if("number"!=typeof e||e<r.DEFLATE||e>r.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}c.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=r.UNZIP),this.mode===r.DEFLATE||this.mode===r.GZIP||this.mode===r.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==r.INFLATE&&this.mode!==r.GUNZIP&&this.mode!==r.INFLATERAW&&this.mode!==r.UNZIP||a.inflateEnd(this.strm),this.mode=r.NONE,this.dictionary=null)},c.prototype.write=function(e,t,r,n,i,o,s){return this._write(!0,e,t,r,n,i,o,s)},c.prototype.writeSync=function(e,t,r,n,i,o,s){return this._write(!1,e,t,r,n,i,o,s)},c.prototype._write=function(e,o,s,a,u,l,c,h){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==r.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===o,"must provide flush value"),this.write_in_progress=!0,o!==r.Z_NO_FLUSH&&o!==r.Z_PARTIAL_FLUSH&&o!==r.Z_SYNC_FLUSH&&o!==r.Z_FULL_FLUSH&&o!==r.Z_FINISH&&o!==r.Z_BLOCK)throw new Error("Invalid flush value");if(null==s&&(s=n.alloc(0),u=0,a=0),this.strm.avail_in=u,this.strm.input=s,this.strm.next_in=a,this.strm.avail_out=h,this.strm.output=l,this.strm.next_out=c,this.flush=o,!e)return this._process(),this._checkError()?this._afterSync():void 0;var p=this;return t.nextTick(function(){p._process(),p._after()}),this},c.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},c.prototype._process=function(){var e=null;switch(this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case r.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=r.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=r.GUNZIP):this.mode=r.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:for(this.err=a.inflate(this.strm,this.flush),this.err===r.Z_NEED_DICT&&this.dictionary&&(this.err=a.inflateSetDictionary(this.strm,this.dictionary),this.err===r.Z_OK?this.err=a.inflate(this.strm,this.flush):this.err===r.Z_DATA_ERROR&&(this.err=r.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===r.GUNZIP&&this.err===r.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=a.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},c.prototype._checkError=function(){switch(this.err){case r.Z_OK:case r.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===r.Z_FINISH)return this._error("unexpected end of file"),!1;break;case r.Z_STREAM_END:break;case r.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},c.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},c.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},c.prototype.init=function(e,t,n,o,s){i(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(e>=8&&e<=15,"invalid windowBits"),i(t>=-1&&t<=9,"invalid compression level"),i(n>=1&&n<=9,"invalid memlevel"),i(o===r.Z_FILTERED||o===r.Z_HUFFMAN_ONLY||o===r.Z_RLE||o===r.Z_FIXED||o===r.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(t,e,n,o,s),this._setDictionary()},c.prototype.params=function(){throw new Error("deflateParams Not supported")},c.prototype.reset=function(){this._reset(),this._setDictionary()},c.prototype._init=function(e,t,n,i,u){switch(this.level=e,this.windowBits=t,this.memLevel=n,this.strategy=i,this.flush=r.Z_NO_FLUSH,this.err=r.Z_OK,this.mode!==r.GZIP&&this.mode!==r.GUNZIP||(this.windowBits+=16),this.mode===r.UNZIP&&(this.windowBits+=32),this.mode!==r.DEFLATERAW&&this.mode!==r.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new o,this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,r.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:case r.UNZIP:this.err=a.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==r.Z_OK&&this._error("Init error"),this.dictionary=u,this.write_in_progress=!1,this.init_done=!0},c.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=r.Z_OK,this.mode){case r.DEFLATE:case r.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==r.Z_OK&&this._error("Failed to set dictionary")}},c.prototype._reset=function(){switch(this.err=r.Z_OK,this.mode){case r.DEFLATE:case r.DEFLATERAW:case r.GZIP:this.err=s.deflateReset(this.strm);break;case r.INFLATE:case r.INFLATERAW:case r.GUNZIP:this.err=a.inflateReset(this.strm)}this.err!==r.Z_OK&&this._error("Failed to reset stream")},r.Zlib=c}).call(this,e("_process"),e("buffer").Buffer)},{_process:200,assert:127,buffer:134,"pako/lib/zlib/constants":138,"pako/lib/zlib/deflate.js":140,"pako/lib/zlib/inflate.js":142,"pako/lib/zlib/zstream":146}],132:[function(e,t,r){(function(t){"use strict";var n=e("buffer").Buffer,i=e("stream").Transform,o=e("./binding"),s=e("util"),a=e("assert").ok,u=e("buffer").kMaxLength,l="Cannot create final Buffer. It would be larger than 0x"+u.toString(16)+" bytes";o.Z_MIN_WINDOWBITS=8,o.Z_MAX_WINDOWBITS=15,o.Z_DEFAULT_WINDOWBITS=15,o.Z_MIN_CHUNK=64,o.Z_MAX_CHUNK=1/0,o.Z_DEFAULT_CHUNK=16384,o.Z_MIN_MEMLEVEL=1,o.Z_MAX_MEMLEVEL=9,o.Z_DEFAULT_MEMLEVEL=8,o.Z_MIN_LEVEL=-1,o.Z_MAX_LEVEL=9,o.Z_DEFAULT_LEVEL=o.Z_DEFAULT_COMPRESSION;for(var c=Object.keys(o),h=0;h<c.length;h++){var p=c[h];p.match(/^Z/)&&Object.defineProperty(r,p,{enumerable:!0,value:o[p],writable:!1})}for(var f={Z_OK:o.Z_OK,Z_STREAM_END:o.Z_STREAM_END,Z_NEED_DICT:o.Z_NEED_DICT,Z_ERRNO:o.Z_ERRNO,Z_STREAM_ERROR:o.Z_STREAM_ERROR,Z_DATA_ERROR:o.Z_DATA_ERROR,Z_MEM_ERROR:o.Z_MEM_ERROR,Z_BUF_ERROR:o.Z_BUF_ERROR,Z_VERSION_ERROR:o.Z_VERSION_ERROR},d=Object.keys(f),m=0;m<d.length;m++){var g=d[m];f[f[g]]=g}function v(e,t,r){var i=[],o=0;function s(){for(var t;null!==(t=e.read());)i.push(t),o+=t.length;e.once("readable",s)}function a(){var t,s=null;o>=u?s=new RangeError(l):t=n.concat(i,o),i=[],e.close(),r(s,t)}e.on("error",function(t){e.removeListener("end",a),e.removeListener("readable",s),r(t)}),e.on("end",a),e.end(t),s()}function y(e,t){if("string"==typeof t&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Not a string or buffer");var r=e._finishFlushFlag;return e._processChunk(t,r)}function b(e){if(!(this instanceof b))return new b(e);C.call(this,e,o.DEFLATE)}function x(e){if(!(this instanceof x))return new x(e);C.call(this,e,o.INFLATE)}function _(e){if(!(this instanceof _))return new _(e);C.call(this,e,o.GZIP)}function w(e){if(!(this instanceof w))return new w(e);C.call(this,e,o.GUNZIP)}function k(e){if(!(this instanceof k))return new k(e);C.call(this,e,o.DEFLATERAW)}function T(e){if(!(this instanceof T))return new T(e);C.call(this,e,o.INFLATERAW)}function E(e){if(!(this instanceof E))return new E(e);C.call(this,e,o.UNZIP)}function S(e){return e===o.Z_NO_FLUSH||e===o.Z_PARTIAL_FLUSH||e===o.Z_SYNC_FLUSH||e===o.Z_FULL_FLUSH||e===o.Z_FINISH||e===o.Z_BLOCK}function C(e,t){var s=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||r.Z_DEFAULT_CHUNK,i.call(this,e),e.flush&&!S(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!S(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||o.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:o.Z_FINISH,e.chunkSize&&(e.chunkSize<r.Z_MIN_CHUNK||e.chunkSize>r.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<r.Z_MIN_WINDOWBITS||e.windowBits>r.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<r.Z_MIN_LEVEL||e.level>r.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<r.Z_MIN_MEMLEVEL||e.memLevel>r.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=r.Z_FILTERED&&e.strategy!=r.Z_HUFFMAN_ONLY&&e.strategy!=r.Z_RLE&&e.strategy!=r.Z_FIXED&&e.strategy!=r.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!n.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new o.Zlib(t);var a=this;this._hadError=!1,this._handle.onerror=function(e,t){A(a),a._hadError=!0;var n=new Error(e);n.errno=t,n.code=r.codes[t],a.emit("error",n)};var u=r.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(u=e.level);var l=r.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(l=e.strategy),this._handle.init(e.windowBits||r.Z_DEFAULT_WINDOWBITS,u,e.memLevel||r.Z_DEFAULT_MEMLEVEL,l,e.dictionary),this._buffer=n.allocUnsafe(this._chunkSize),this._offset=0,this._level=u,this._strategy=l,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!s._handle},configurable:!0,enumerable:!0})}function A(e,r){r&&t.nextTick(r),e._handle&&(e._handle.close(),e._handle=null)}function B(e){e.emit("close")}Object.defineProperty(r,"codes",{enumerable:!0,value:Object.freeze(f),writable:!1}),r.Deflate=b,r.Inflate=x,r.Gzip=_,r.Gunzip=w,r.DeflateRaw=k,r.InflateRaw=T,r.Unzip=E,r.createDeflate=function(e){return new b(e)},r.createInflate=function(e){return new x(e)},r.createDeflateRaw=function(e){return new k(e)},r.createInflateRaw=function(e){return new T(e)},r.createGzip=function(e){return new _(e)},r.createGunzip=function(e){return new w(e)},r.createUnzip=function(e){return new E(e)},r.deflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),v(new b(t),e,r)},r.deflateSync=function(e,t){return y(new b(t),e)},r.gzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),v(new _(t),e,r)},r.gzipSync=function(e,t){return y(new _(t),e)},r.deflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),v(new k(t),e,r)},r.deflateRawSync=function(e,t){return y(new k(t),e)},r.unzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),v(new E(t),e,r)},r.unzipSync=function(e,t){return y(new E(t),e)},r.inflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),v(new x(t),e,r)},r.inflateSync=function(e,t){return y(new x(t),e)},r.gunzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),v(new w(t),e,r)},r.gunzipSync=function(e,t){return y(new w(t),e)},r.inflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),v(new T(t),e,r)},r.inflateRawSync=function(e,t){return y(new T(t),e)},s.inherits(C,i),C.prototype.params=function(e,n,i){if(e<r.Z_MIN_LEVEL||e>r.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=r.Z_FILTERED&&n!=r.Z_HUFFMAN_ONLY&&n!=r.Z_RLE&&n!=r.Z_FIXED&&n!=r.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var s=this;this.flush(o.Z_SYNC_FLUSH,function(){a(s._handle,"zlib binding closed"),s._handle.params(e,n),s._hadError||(s._level=e,s._strategy=n,i&&i())})}else t.nextTick(i)},C.prototype.reset=function(){return a(this._handle,"zlib binding closed"),this._handle.reset()},C.prototype._flush=function(e){this._transform(n.alloc(0),"",e)},C.prototype.flush=function(e,r){var i=this,s=this._writableState;("function"==typeof e||void 0===e&&!r)&&(r=e,e=o.Z_FULL_FLUSH),s.ended?r&&t.nextTick(r):s.ending?r&&this.once("end",r):s.needDrain?r&&this.once("drain",function(){return i.flush(e,r)}):(this._flushFlag=e,this.write(n.alloc(0),"",r))},C.prototype.close=function(e){A(this,e),t.nextTick(B,this)},C.prototype._transform=function(e,t,r){var i,s=this._writableState,a=(s.ending||s.ended)&&(!e||s.length===e.length);return null===e||n.isBuffer(e)?this._handle?(a?i=this._finishFlushFlag:(i=this._flushFlag,e.length>=s.length&&(this._flushFlag=this._opts.flush||o.Z_NO_FLUSH)),void this._processChunk(e,i,r)):r(new Error("zlib binding closed")):r(new Error("invalid input"))},C.prototype._processChunk=function(e,t,r){var i=e&&e.length,o=this._chunkSize-this._offset,s=0,c=this,h="function"==typeof r;if(!h){var p,f=[],d=0;this.on("error",function(e){p=e}),a(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(t,e,s,i,this._buffer,this._offset,o)}while(!this._hadError&&y(m[0],m[1]));if(this._hadError)throw p;if(d>=u)throw A(this),new RangeError(l);var g=n.concat(f,d);return A(this),g}a(this._handle,"zlib binding closed");var v=this._handle.write(t,e,s,i,this._buffer,this._offset,o);function y(u,l){if(this&&(this.buffer=null,this.callback=null),!c._hadError){var p=o-l;if(a(p>=0,"have should not go down"),p>0){var m=c._buffer.slice(c._offset,c._offset+p);c._offset+=p,h?c.push(m):(f.push(m),d+=m.length)}if((0===l||c._offset>=c._chunkSize)&&(o=c._chunkSize,c._offset=0,c._buffer=n.allocUnsafe(c._chunkSize)),0===l){if(s+=i-u,i=u,!h)return!0;var g=c._handle.write(t,e,s,i,c._buffer,c._offset,c._chunkSize);return g.callback=y,void(g.buffer=e)}if(!h)return!1;r()}}v.buffer=e,v.callback=y},s.inherits(b,C),s.inherits(x,C),s.inherits(_,C),s.inherits(w,C),s.inherits(k,C),s.inherits(T,C),s.inherits(E,C)}).call(this,e("_process"))},{"./binding":131,_process:200,assert:127,buffer:134,stream:251,util:261}],133:[function(e,t,r){arguments[4][4][0].apply(r,arguments)},{dup:4}],134:[function(e,t,r){"use strict";var n=e("base64-js"),i=e("ieee754");r.Buffer=a,r.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},r.INSPECT_MAX_BYTES=50;var o=2147483647;function s(e){if(e>o)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=a.prototype,t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(e)}return u(e,t,r)}function u(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return U(e)?function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");var n;n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return n.__proto__=a.prototype,n}(e,t,r):"string"==typeof e?function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(e,t),n=s(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t):function(e){if(a.isBuffer(e)){var t=0|p(e.length),r=s(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(e){if(z(e)||"length"in e)return"number"!=typeof e.length||$(e.length)?s(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e){return l(e),s(e<0?0:0|p(e))}function h(e){for(var t=e.length<0?0:0|p(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if(z(e)||U(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return O(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(n)return O(e).length;t=(""+t).toLowerCase(),n=!0}}function d(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),$(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(o=r;o<a;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var h=!0,p=0;p<u;p++)if(l(e,o+p)!==l(t,p)){h=!1;break}if(h)return o}return-1}function v(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if($(a))return s;e[r+s]=a}return s}function y(e,t,r,n){return N(O(t,e.length-r),e,r,n)}function b(e,t,r,n){return N(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return b(e,t,r,n)}function _(e,t,r,n){return N(j(t),e,r,n)}function w(e,t,r,n){return N(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,u,l=e[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&l)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=E));return r}(n)}r.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(e,t,r){return u(e,t,r)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)d(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return C(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,r,n,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,s=r-t,u=Math.min(o,s),l=this.slice(n,i),c=e.slice(t,r),h=0;h<u;++h)if(l[h]!==c[h]){o=l[h],s=c[h];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return y(this,e,t,r);case"ascii":return b(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function S(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function C(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function A(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=L(e[o]);return i}function B(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,n,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function R(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,n,o){return t=+t,r>>>=0,o||R(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,o){return t=+t,r>>>=0,o||R(e,0,r,8),i.write(e,t,r,n,52,8),r+8}a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=a.prototype,n},a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=a.isBuffer(e)?e:new a(e,n),u=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%u]}return this};var D=/[^+/0-9A-Za-z-_]/g;function L(e){return e<16?"0"+e.toString(16):e.toString(16)}function O(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function j(e){return n.toByteArray(function(e){if((e=e.trim().replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function N(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function U(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function z(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function $(e){return e!=e}},{"base64-js":2,ieee754:147}],135:[function(e,t,r){var n=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return r},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function s(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=n(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0;var a,u=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),a=0===l.x}catch(e){a=!1}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,r,i){var o,s,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),a=s[t]):(s=e._events=n(null),e._eventsCount=0),a){if("function"==typeof a?a=s[t]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),!a.warned&&(o=c(e))&&o>0&&a.length>o){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=s[t]=r,++e._eventsCount;return e}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function f(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=o.call(p,n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(!n)return[];var i=n[t];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):g(i,i.length):[]}function m(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}a?Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');u=e}}):s.defaultMaxListeners=u,s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){var t,r,n,i,o,s,a="error"===e;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var u=new Error('Unhandled "error" event. ('+t+")");throw u.context=t,u}if(!(r=s[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:!function(e,t,r){if(t)e.call(r);else for(var n=e.length,i=g(e,n),o=0;o<n;++o)i[o].call(r)}(r,l,this);break;case 2:!function(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=g(e,i),s=0;s<i;++s)o[s].call(r,n)}(r,l,this,arguments[1]);break;case 3:!function(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,s=g(e,o),a=0;a<o;++a)s[a].call(r,n,i)}(r,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var s=e.length,a=g(e,s),u=0;u<s;++u)a[u].call(r,n,i,o)}(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];!function(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=g(e,i),s=0;s<i;++s)o[s].apply(r,n)}(r,l,this,i)}return!0},s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,f(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,i,o,s,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=n(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){a=r[s].listener,o=s;break}if(o<0)return this;0===o?r.shift():function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,o),1===r.length&&(i[e]=r[0]),i.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.removeAllListeners=function(e){var t,r,o;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=n(null),this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=n(null):delete r[e]),this;if(0===arguments.length){var s,a=i(r);for(o=0;o<a.length;++o)"removeListener"!==(s=a[o])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=n(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],136:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,s;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)o=e[t],s.set(o,i),i+=o.length;return s}},s={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],137:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{o=o+(i=i+t[n++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}},{}],138:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],139:[function(e,t,r){"use strict";var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,i){var o=n,s=i+r;e^=-1;for(var a=i;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},{}],140:[function(e,t,r){"use strict";var n,i=e("../utils/common"),o=e("./trees"),s=e("./adler32"),a=e("./crc32"),u=e("./messages"),l=0,c=1,h=3,p=4,f=5,d=0,m=1,g=-2,v=-3,y=-5,b=-1,x=1,_=2,w=3,k=4,T=0,E=2,S=8,C=9,A=15,B=8,I=286,P=30,R=19,M=2*I+1,F=15,D=3,L=258,O=L+D+1,j=32,N=42,U=69,z=73,$=91,V=103,G=113,K=666,q=1,W=2,X=3,H=4,Y=3;function Z(e,t){return e.msg=u[t],t}function J(e){return(e<<1)-(e>4?9:0)}function Q(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function te(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function re(e,t){e.pending_buf[e.pending++]=t}function ne(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function ie(e,t){var r,n,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-O?e.strstart-(e.w_size-O):0,l=e.window,c=e.w_mask,h=e.prev,p=e.strstart+L,f=l[o+s-1],d=l[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(l[(r=t)+s]===d&&l[r+s-1]===f&&l[r]===l[o]&&l[++r]===l[o+1]){o+=2,r++;do{}while(l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&o<p);if(n=L-(p-o),o=p-L,n>s){if(e.match_start=t,s=n,n>=a)break;f=l[o+s-1],d=l[o+s]}}}while((t=h[t&c])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead}function oe(e){var t,r,n,o,u,l,c,h,p,f,d=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-O)){i.arraySet(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=d?n-d:0}while(--r);t=r=d;do{n=e.prev[--t],e.prev[t]=n>=d?n-d:0}while(--r);o+=d}if(0===e.strm.avail_in)break;if(l=e.strm,c=e.window,h=e.strstart+e.lookahead,p=o,f=void 0,(f=l.avail_in)>p&&(f=p),r=0===f?0:(l.avail_in-=f,i.arraySet(c,l.input,l.next_in,f,h),1===l.state.wrap?l.adler=s(l.adler,c,f,h):2===l.state.wrap&&(l.adler=a(l.adler,c,f,h)),l.next_in+=f,l.total_in+=f,f),e.lookahead+=r,e.lookahead+e.insert>=D)for(u=e.strstart-e.insert,e.ins_h=e.window[u],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+D-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<D)););}while(e.lookahead<O&&0!==e.strm.avail_in)}function se(e,t){for(var r,n;;){if(e.lookahead<O){if(oe(e),e.lookahead<O&&t===l)return q;if(0===e.lookahead)break}if(r=0,e.lookahead>=D&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-O&&(e.match_length=ie(e,r)),e.match_length>=D)if(n=o._tr_tally(e,e.strstart-e.match_start,e.match_length-D),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=D){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=e.strstart<D-1?e.strstart:D-1,t===p?(te(e,!0),0===e.strm.avail_out?X:H):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:W}function ae(e,t){for(var r,n,i;;){if(e.lookahead<O){if(oe(e),e.lookahead<O&&t===l)return q;if(0===e.lookahead)break}if(r=0,e.lookahead>=D&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=D-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-O&&(e.match_length=ie(e,r),e.match_length<=5&&(e.strategy===x||e.match_length===D&&e.strstart-e.match_start>4096)&&(e.match_length=D-1)),e.prev_length>=D&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-D,n=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-D),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+D-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=D-1,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return q}else if(e.match_available){if((n=o._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return q}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<D-1?e.strstart:D-1,t===p?(te(e,!0),0===e.strm.avail_out?X:H):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:W}function ue(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function le(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=E,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?N:G,e.adler=2===t.wrap?0:1,t.last_flush=l,o._tr_init(t),d):Z(e,g)}function ce(e){var t,r=le(e);return r===d&&((t=e.state).window_size=2*t.w_size,Q(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=D-1,t.match_available=0,t.ins_h=0),r}function he(e,t,r,n,o,s){if(!e)return g;var a=1;if(t===b&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>C||r!==S||n<8||n>15||t<0||t>9||s<0||s>k)return Z(e,g);8===n&&(n=9);var u=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*M),this.dyn_dtree=new i.Buf16(2*(2*P+1)),this.bl_tree=new i.Buf16(2*(2*R+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(F+1),this.heap=new i.Buf16(2*I+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*I+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return e.state=u,u.strm=e,u.wrap=a,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+D-1)/D),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=r,ce(e)}n=[new ue(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(oe(e),0===e.lookahead&&t===l)return q;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,te(e,!1),0===e.strm.avail_out))return q;if(e.strstart-e.block_start>=e.w_size-O&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===p?(te(e,!0),0===e.strm.avail_out?X:H):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),q)}),new ue(4,4,8,4,se),new ue(4,5,16,8,se),new ue(4,6,32,32,se),new ue(4,4,16,16,ae),new ue(8,16,32,32,ae),new ue(8,16,128,128,ae),new ue(8,32,128,256,ae),new ue(32,128,258,1024,ae),new ue(32,258,258,4096,ae)],r.deflateInit=function(e,t){return he(e,t,S,A,B,T)},r.deflateInit2=he,r.deflateReset=ce,r.deflateResetKeep=le,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?g:(e.state.gzhead=t,d):g},r.deflate=function(e,t){var r,i,s,u;if(!e||!e.state||t>f||t<0)return e?Z(e,g):g;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===K&&t!==p)return Z(e,0===e.avail_out?y:g);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===N)if(2===i.wrap)e.adler=0,re(i,31),re(i,139),re(i,8),i.gzhead?(re(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),re(i,255&i.gzhead.time),re(i,i.gzhead.time>>8&255),re(i,i.gzhead.time>>16&255),re(i,i.gzhead.time>>24&255),re(i,9===i.level?2:i.strategy>=_||i.level<2?4:0),re(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(re(i,255&i.gzhead.extra.length),re(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=U):(re(i,0),re(i,0),re(i,0),re(i,0),re(i,0),re(i,9===i.level?2:i.strategy>=_||i.level<2?4:0),re(i,Y),i.status=G);else{var v=S+(i.w_bits-8<<4)<<8;v|=(i.strategy>=_||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(v|=j),v+=31-v%31,i.status=G,ne(i,v),0!==i.strstart&&(ne(i,e.adler>>>16),ne(i,65535&e.adler)),e.adler=1}if(i.status===U)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),ee(e),s=i.pending,i.pending!==i.pending_buf_size));)re(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=z)}else i.status=z;if(i.status===z)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),ee(e),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,re(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=$)}else i.status=$;if(i.status===$)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),ee(e),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,re(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=V)}else i.status=V;if(i.status===V&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&ee(e),i.pending+2<=i.pending_buf_size&&(re(i,255&e.adler),re(i,e.adler>>8&255),e.adler=0,i.status=G)):i.status=G),0!==i.pending){if(ee(e),0===e.avail_out)return i.last_flush=-1,d}else if(0===e.avail_in&&J(t)<=J(r)&&t!==p)return Z(e,y);if(i.status===K&&0!==e.avail_in)return Z(e,y);if(0!==e.avail_in||0!==i.lookahead||t!==l&&i.status!==K){var b=i.strategy===_?function(e,t){for(var r;;){if(0===e.lookahead&&(oe(e),0===e.lookahead)){if(t===l)return q;break}if(e.match_length=0,r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===p?(te(e,!0),0===e.strm.avail_out?X:H):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:W}(i,t):i.strategy===w?function(e,t){for(var r,n,i,s,a=e.window;;){if(e.lookahead<=L){if(oe(e),e.lookahead<=L&&t===l)return q;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=D&&e.strstart>0&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){s=e.strstart+L;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);e.match_length=L-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=D?(r=o._tr_tally(e,1,e.match_length-D),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(te(e,!1),0===e.strm.avail_out))return q}return e.insert=0,t===p?(te(e,!0),0===e.strm.avail_out?X:H):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?q:W}(i,t):n[i.level].func(i,t);if(b!==X&&b!==H||(i.status=K),b===q||b===X)return 0===e.avail_out&&(i.last_flush=-1),d;if(b===W&&(t===c?o._tr_align(i):t!==f&&(o._tr_stored_block(i,0,0,!1),t===h&&(Q(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),ee(e),0===e.avail_out))return i.last_flush=-1,d}return t!==p?d:i.wrap<=0?m:(2===i.wrap?(re(i,255&e.adler),re(i,e.adler>>8&255),re(i,e.adler>>16&255),re(i,e.adler>>24&255),re(i,255&e.total_in),re(i,e.total_in>>8&255),re(i,e.total_in>>16&255),re(i,e.total_in>>24&255)):(ne(i,e.adler>>>16),ne(i,65535&e.adler)),ee(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?d:m)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==N&&t!==U&&t!==z&&t!==$&&t!==V&&t!==G&&t!==K?Z(e,g):(e.state=null,t===G?Z(e,v):d):g},r.deflateSetDictionary=function(e,t){var r,n,o,a,u,l,c,h,p=t.length;if(!e||!e.state)return g;if(2===(a=(r=e.state).wrap)||1===a&&r.status!==N||r.lookahead)return g;for(1===a&&(e.adler=s(e.adler,t,p,0)),r.wrap=0,p>=r.w_size&&(0===a&&(Q(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new i.Buf8(r.w_size),i.arraySet(h,t,p-r.w_size,r.w_size,0),t=h,p=r.w_size),u=e.avail_in,l=e.next_in,c=e.input,e.avail_in=p,e.next_in=0,e.input=t,oe(r);r.lookahead>=D;){n=r.strstart,o=r.lookahead-(D-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+D-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=D-1,oe(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=D-1,r.match_available=0,e.next_in=l,e.input=c,e.avail_in=u,r.wrap=a,d},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":136,"./adler32":137,"./crc32":139,"./messages":144,"./trees":145}],141:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,i,o,s,a,u,l,c,h,p,f,d,m,g,v,y,b,x,_,w,k,T,E,S;r=e.state,n=e.next_in,E=e.input,i=n+(e.avail_in-5),o=e.next_out,S=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),u=r.dmax,l=r.wsize,c=r.whave,h=r.wnext,p=r.window,f=r.hold,d=r.bits,m=r.lencode,g=r.distcode,v=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{d<15&&(f+=E[n++]<<d,d+=8,f+=E[n++]<<d,d+=8),b=m[f&v];t:for(;;){if(f>>>=x=b>>>24,d-=x,0===(x=b>>>16&255))S[o++]=65535&b;else{if(!(16&x)){if(0==(64&x)){b=m[(65535&b)+(f&(1<<x)-1)];continue t}if(32&x){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}_=65535&b,(x&=15)&&(d<x&&(f+=E[n++]<<d,d+=8),_+=f&(1<<x)-1,f>>>=x,d-=x),d<15&&(f+=E[n++]<<d,d+=8,f+=E[n++]<<d,d+=8),b=g[f&y];r:for(;;){if(f>>>=x=b>>>24,d-=x,!(16&(x=b>>>16&255))){if(0==(64&x)){b=g[(65535&b)+(f&(1<<x)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(w=65535&b,d<(x&=15)&&(f+=E[n++]<<d,(d+=8)<x&&(f+=E[n++]<<d,d+=8)),(w+=f&(1<<x)-1)>u){e.msg="invalid distance too far back",r.mode=30;break e}if(f>>>=x,d-=x,w>(x=o-s)){if((x=w-x)>c&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(k=0,T=p,0===h){if(k+=l-x,x<_){_-=x;do{S[o++]=p[k++]}while(--x);k=o-w,T=S}}else if(h<x){if(k+=l+h-x,(x-=h)<_){_-=x;do{S[o++]=p[k++]}while(--x);if(k=0,h<_){_-=x=h;do{S[o++]=p[k++]}while(--x);k=o-w,T=S}}}else if(k+=h-x,x<_){_-=x;do{S[o++]=p[k++]}while(--x);k=o-w,T=S}for(;_>2;)S[o++]=T[k++],S[o++]=T[k++],S[o++]=T[k++],_-=3;_&&(S[o++]=T[k++],_>1&&(S[o++]=T[k++]))}else{k=o-w;do{S[o++]=S[k++],S[o++]=S[k++],S[o++]=S[k++],_-=3}while(_>2);_&&(S[o++]=S[k++],_>1&&(S[o++]=S[k++]))}break}}break}}while(n<i&&o<a);n-=_=d>>3,f&=(1<<(d-=_<<3))-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<a?a-o+257:257-(o-a),r.hold=f,r.bits=d}},{}],142:[function(e,t,r){"use strict";var n=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),s=e("./inffast"),a=e("./inftrees"),u=0,l=1,c=2,h=4,p=5,f=6,d=0,m=1,g=2,v=-2,y=-3,b=-4,x=-5,_=8,w=1,k=2,T=3,E=4,S=5,C=6,A=7,B=8,I=9,P=10,R=11,M=12,F=13,D=14,L=15,O=16,j=17,N=18,U=19,z=20,$=21,V=22,G=23,K=24,q=25,W=26,X=27,H=28,Y=29,Z=30,J=31,Q=32,ee=852,te=592,re=15;function ne(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ie(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=w,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(ee),t.distcode=t.distdyn=new n.Buf32(te),t.sane=1,t.back=-1,d):v}function oe(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,ie(e)):v}function se(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?v:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,oe(e))):v}function ae(e,t){var r,i;return e?(i=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},e.state=i,i.window=null,(r=se(e,t))!==d&&(e.state=null),r):v}var ue,le,ce=!0;function he(e){if(ce){var t;for(ue=new n.Buf32(512),le=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(l,e.lens,0,288,ue,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(c,e.lens,0,32,le,0,e.work,{bits:5}),ce=!1}e.lencode=ue,e.lenbits=9,e.distcode=le,e.distbits=5}function pe(e,t,r,i){var o,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>i&&(o=i),n.arraySet(s.window,t,r-i,o,s.wnext),(i-=o)?(n.arraySet(s.window,t,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}r.inflateReset=oe,r.inflateReset2=se,r.inflateResetKeep=ie,r.inflateInit=function(e){return ae(e,re)},r.inflateInit2=ae,r.inflate=function(e,t){var r,ee,te,re,ie,oe,se,ae,ue,le,ce,fe,de,me,ge,ve,ye,be,xe,_e,we,ke,Te,Ee,Se=0,Ce=new n.Buf8(4),Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return v;(r=e.state).mode===M&&(r.mode=F),ie=e.next_out,te=e.output,se=e.avail_out,re=e.next_in,ee=e.input,oe=e.avail_in,ae=r.hold,ue=r.bits,le=oe,ce=se,ke=d;e:for(;;)switch(r.mode){case w:if(0===r.wrap){r.mode=F;break}for(;ue<16;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}if(2&r.wrap&&35615===ae){r.check=0,Ce[0]=255&ae,Ce[1]=ae>>>8&255,r.check=o(r.check,Ce,2,0),ae=0,ue=0,r.mode=k;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&ae)<<8)+(ae>>8))%31){e.msg="incorrect header check",r.mode=Z;break}if((15&ae)!==_){e.msg="unknown compression method",r.mode=Z;break}if(ue-=4,we=8+(15&(ae>>>=4)),0===r.wbits)r.wbits=we;else if(we>r.wbits){e.msg="invalid window size",r.mode=Z;break}r.dmax=1<<we,e.adler=r.check=1,r.mode=512&ae?P:M,ae=0,ue=0;break;case k:for(;ue<16;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}if(r.flags=ae,(255&r.flags)!==_){e.msg="unknown compression method",r.mode=Z;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Z;break}r.head&&(r.head.text=ae>>8&1),512&r.flags&&(Ce[0]=255&ae,Ce[1]=ae>>>8&255,r.check=o(r.check,Ce,2,0)),ae=0,ue=0,r.mode=T;case T:for(;ue<32;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}r.head&&(r.head.time=ae),512&r.flags&&(Ce[0]=255&ae,Ce[1]=ae>>>8&255,Ce[2]=ae>>>16&255,Ce[3]=ae>>>24&255,r.check=o(r.check,Ce,4,0)),ae=0,ue=0,r.mode=E;case E:for(;ue<16;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}r.head&&(r.head.xflags=255&ae,r.head.os=ae>>8),512&r.flags&&(Ce[0]=255&ae,Ce[1]=ae>>>8&255,r.check=o(r.check,Ce,2,0)),ae=0,ue=0,r.mode=S;case S:if(1024&r.flags){for(;ue<16;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}r.length=ae,r.head&&(r.head.extra_len=ae),512&r.flags&&(Ce[0]=255&ae,Ce[1]=ae>>>8&255,r.check=o(r.check,Ce,2,0)),ae=0,ue=0}else r.head&&(r.head.extra=null);r.mode=C;case C:if(1024&r.flags&&((fe=r.length)>oe&&(fe=oe),fe&&(r.head&&(we=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,ee,re,fe,we)),512&r.flags&&(r.check=o(r.check,ee,fe,re)),oe-=fe,re+=fe,r.length-=fe),r.length))break e;r.length=0,r.mode=A;case A:if(2048&r.flags){if(0===oe)break e;fe=0;do{we=ee[re+fe++],r.head&&we&&r.length<65536&&(r.head.name+=String.fromCharCode(we))}while(we&&fe<oe);if(512&r.flags&&(r.check=o(r.check,ee,fe,re)),oe-=fe,re+=fe,we)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=B;case B:if(4096&r.flags){if(0===oe)break e;fe=0;do{we=ee[re+fe++],r.head&&we&&r.length<65536&&(r.head.comment+=String.fromCharCode(we))}while(we&&fe<oe);if(512&r.flags&&(r.check=o(r.check,ee,fe,re)),oe-=fe,re+=fe,we)break e}else r.head&&(r.head.comment=null);r.mode=I;case I:if(512&r.flags){for(;ue<16;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}if(ae!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Z;break}ae=0,ue=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=M;break;case P:for(;ue<32;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}e.adler=r.check=ne(ae),ae=0,ue=0,r.mode=R;case R:if(0===r.havedict)return e.next_out=ie,e.avail_out=se,e.next_in=re,e.avail_in=oe,r.hold=ae,r.bits=ue,g;e.adler=r.check=1,r.mode=M;case M:if(t===p||t===f)break e;case F:if(r.last){ae>>>=7&ue,ue-=7&ue,r.mode=X;break}for(;ue<3;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}switch(r.last=1&ae,ue-=1,3&(ae>>>=1)){case 0:r.mode=D;break;case 1:if(he(r),r.mode=z,t===f){ae>>>=2,ue-=2;break e}break;case 2:r.mode=j;break;case 3:e.msg="invalid block type",r.mode=Z}ae>>>=2,ue-=2;break;case D:for(ae>>>=7&ue,ue-=7&ue;ue<32;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}if((65535&ae)!=(ae>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Z;break}if(r.length=65535&ae,ae=0,ue=0,r.mode=L,t===f)break e;case L:r.mode=O;case O:if(fe=r.length){if(fe>oe&&(fe=oe),fe>se&&(fe=se),0===fe)break e;n.arraySet(te,ee,re,fe,ie),oe-=fe,re+=fe,se-=fe,ie+=fe,r.length-=fe;break}r.mode=M;break;case j:for(;ue<14;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}if(r.nlen=257+(31&ae),ae>>>=5,ue-=5,r.ndist=1+(31&ae),ae>>>=5,ue-=5,r.ncode=4+(15&ae),ae>>>=4,ue-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Z;break}r.have=0,r.mode=N;case N:for(;r.have<r.ncode;){for(;ue<3;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}r.lens[Ae[r.have++]]=7&ae,ae>>>=3,ue-=3}for(;r.have<19;)r.lens[Ae[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Te={bits:r.lenbits},ke=a(u,r.lens,0,19,r.lencode,0,r.work,Te),r.lenbits=Te.bits,ke){e.msg="invalid code lengths set",r.mode=Z;break}r.have=0,r.mode=U;case U:for(;r.have<r.nlen+r.ndist;){for(;ve=(Se=r.lencode[ae&(1<<r.lenbits)-1])>>>16&255,ye=65535&Se,!((ge=Se>>>24)<=ue);){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}if(ye<16)ae>>>=ge,ue-=ge,r.lens[r.have++]=ye;else{if(16===ye){for(Ee=ge+2;ue<Ee;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}if(ae>>>=ge,ue-=ge,0===r.have){e.msg="invalid bit length repeat",r.mode=Z;break}we=r.lens[r.have-1],fe=3+(3&ae),ae>>>=2,ue-=2}else if(17===ye){for(Ee=ge+3;ue<Ee;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}ue-=ge,we=0,fe=3+(7&(ae>>>=ge)),ae>>>=3,ue-=3}else{for(Ee=ge+7;ue<Ee;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}ue-=ge,we=0,fe=11+(127&(ae>>>=ge)),ae>>>=7,ue-=7}if(r.have+fe>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Z;break}for(;fe--;)r.lens[r.have++]=we}}if(r.mode===Z)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Z;break}if(r.lenbits=9,Te={bits:r.lenbits},ke=a(l,r.lens,0,r.nlen,r.lencode,0,r.work,Te),r.lenbits=Te.bits,ke){e.msg="invalid literal/lengths set",r.mode=Z;break}if(r.distbits=6,r.distcode=r.distdyn,Te={bits:r.distbits},ke=a(c,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Te),r.distbits=Te.bits,ke){e.msg="invalid distances set",r.mode=Z;break}if(r.mode=z,t===f)break e;case z:r.mode=$;case $:if(oe>=6&&se>=258){e.next_out=ie,e.avail_out=se,e.next_in=re,e.avail_in=oe,r.hold=ae,r.bits=ue,s(e,ce),ie=e.next_out,te=e.output,se=e.avail_out,re=e.next_in,ee=e.input,oe=e.avail_in,ae=r.hold,ue=r.bits,r.mode===M&&(r.back=-1);break}for(r.back=0;ve=(Se=r.lencode[ae&(1<<r.lenbits)-1])>>>16&255,ye=65535&Se,!((ge=Se>>>24)<=ue);){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}if(ve&&0==(240&ve)){for(be=ge,xe=ve,_e=ye;ve=(Se=r.lencode[_e+((ae&(1<<be+xe)-1)>>be)])>>>16&255,ye=65535&Se,!(be+(ge=Se>>>24)<=ue);){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}ae>>>=be,ue-=be,r.back+=be}if(ae>>>=ge,ue-=ge,r.back+=ge,r.length=ye,0===ve){r.mode=W;break}if(32&ve){r.back=-1,r.mode=M;break}if(64&ve){e.msg="invalid literal/length code",r.mode=Z;break}r.extra=15&ve,r.mode=V;case V:if(r.extra){for(Ee=r.extra;ue<Ee;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}r.length+=ae&(1<<r.extra)-1,ae>>>=r.extra,ue-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=G;case G:for(;ve=(Se=r.distcode[ae&(1<<r.distbits)-1])>>>16&255,ye=65535&Se,!((ge=Se>>>24)<=ue);){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}if(0==(240&ve)){for(be=ge,xe=ve,_e=ye;ve=(Se=r.distcode[_e+((ae&(1<<be+xe)-1)>>be)])>>>16&255,ye=65535&Se,!(be+(ge=Se>>>24)<=ue);){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}ae>>>=be,ue-=be,r.back+=be}if(ae>>>=ge,ue-=ge,r.back+=ge,64&ve){e.msg="invalid distance code",r.mode=Z;break}r.offset=ye,r.extra=15&ve,r.mode=K;case K:if(r.extra){for(Ee=r.extra;ue<Ee;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}r.offset+=ae&(1<<r.extra)-1,ae>>>=r.extra,ue-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Z;break}r.mode=q;case q:if(0===se)break e;if(fe=ce-se,r.offset>fe){if((fe=r.offset-fe)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Z;break}fe>r.wnext?(fe-=r.wnext,de=r.wsize-fe):de=r.wnext-fe,fe>r.length&&(fe=r.length),me=r.window}else me=te,de=ie-r.offset,fe=r.length;fe>se&&(fe=se),se-=fe,r.length-=fe;do{te[ie++]=me[de++]}while(--fe);0===r.length&&(r.mode=$);break;case W:if(0===se)break e;te[ie++]=r.length,se--,r.mode=$;break;case X:if(r.wrap){for(;ue<32;){if(0===oe)break e;oe--,ae|=ee[re++]<<ue,ue+=8}if(ce-=se,e.total_out+=ce,r.total+=ce,ce&&(e.adler=r.check=r.flags?o(r.check,te,ce,ie-ce):i(r.check,te,ce,ie-ce)),ce=se,(r.flags?ae:ne(ae))!==r.check){e.msg="incorrect data check",r.mode=Z;break}ae=0,ue=0}r.mode=H;case H:if(r.wrap&&r.flags){for(;ue<32;){if(0===oe)break e;oe--,ae+=ee[re++]<<ue,ue+=8}if(ae!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Z;break}ae=0,ue=0}r.mode=Y;case Y:ke=m;break e;case Z:ke=y;break e;case J:return b;case Q:default:return v}return e.next_out=ie,e.avail_out=se,e.next_in=re,e.avail_in=oe,r.hold=ae,r.bits=ue,(r.wsize||ce!==e.avail_out&&r.mode<Z&&(r.mode<X||t!==h))&&pe(e,e.output,e.next_out,ce-e.avail_out)?(r.mode=J,b):(le-=e.avail_in,ce-=e.avail_out,e.total_in+=le,e.total_out+=ce,r.total+=ce,r.wrap&&ce&&(e.adler=r.check=r.flags?o(r.check,te,ce,e.next_out-ce):i(r.check,te,ce,e.next_out-ce)),e.data_type=r.bits+(r.last?64:0)+(r.mode===M?128:0)+(r.mode===z||r.mode===L?256:0),(0===le&&0===ce||t===h)&&ke===d&&(ke=x),ke)},r.inflateEnd=function(e){if(!e||!e.state)return v;var t=e.state;return t.window&&(t.window=null),e.state=null,d},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?v:(r.head=t,t.done=!1,d):v},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==R?v:r.mode===R&&i(1,t,n,0)!==r.check?y:pe(e,t,n,n)?(r.mode=J,b):(r.havedict=1,d):v},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":136,"./adler32":137,"./crc32":139,"./inffast":141,"./inftrees":143}],143:[function(e,t,r){"use strict";var n=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,u,l,c,h,p){var f,d,m,g,v,y,b,x,_,w=p.bits,k=0,T=0,E=0,S=0,C=0,A=0,B=0,I=0,P=0,R=0,M=null,F=0,D=new n.Buf16(16),L=new n.Buf16(16),O=null,j=0;for(k=0;k<=15;k++)D[k]=0;for(T=0;T<u;T++)D[t[r+T]]++;for(C=w,S=15;S>=1&&0===D[S];S--);if(C>S&&(C=S),0===S)return l[c++]=20971520,l[c++]=20971520,p.bits=1,0;for(E=1;E<S&&0===D[E];E++);for(C<E&&(C=E),I=1,k=1;k<=15;k++)if(I<<=1,(I-=D[k])<0)return-1;if(I>0&&(0===e||1!==S))return-1;for(L[1]=0,k=1;k<15;k++)L[k+1]=L[k]+D[k];for(T=0;T<u;T++)0!==t[r+T]&&(h[L[t[r+T]]++]=T);if(0===e?(M=O=h,y=19):1===e?(M=i,F-=257,O=o,j-=257,y=256):(M=s,O=a,y=-1),R=0,T=0,k=E,v=c,A=C,B=0,m=-1,g=(P=1<<C)-1,1===e&&P>852||2===e&&P>592)return 1;for(;;){b=k-B,h[T]<y?(x=0,_=h[T]):h[T]>y?(x=O[j+h[T]],_=M[F+h[T]]):(x=96,_=0),f=1<<k-B,E=d=1<<A;do{l[v+(R>>B)+(d-=f)]=b<<24|x<<16|_|0}while(0!==d);for(f=1<<k-1;R&f;)f>>=1;if(0!==f?(R&=f-1,R+=f):R=0,T++,0==--D[k]){if(k===S)break;k=t[r+h[T]]}if(k>C&&(R&g)!==m){for(0===B&&(B=C),v+=E,I=1<<(A=k-B);A+B<S&&!((I-=D[A+B])<=0);)A++,I<<=1;if(P+=1<<A,1===e&&P>852||2===e&&P>592)return 1;l[m=R&g]=C<<24|A<<16|v-c|0}}return 0!==R&&(l[v+R]=k-B<<24|64<<16|0),p.bits=C,0}},{"../utils/common":136}],144:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],145:[function(e,t,r){"use strict";var n=e("../utils/common"),i=4,o=0,s=1,a=2;function u(e){for(var t=e.length;--t>=0;)e[t]=0}var l=0,c=1,h=2,p=29,f=256,d=f+1+p,m=30,g=19,v=2*d+1,y=15,b=16,x=7,_=256,w=16,k=17,T=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(2*(d+2));u(B);var I=new Array(2*m);u(I);var P=new Array(512);u(P);var R=new Array(256);u(R);var M=new Array(p);u(M);var F,D,L,O=new Array(m);function j(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function N(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function U(e){return e<256?P[e]:P[256+(e>>>7)]}function z(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function $(e,t,r){e.bi_valid>b-r?(e.bi_buf|=t<<e.bi_valid&65535,z(e,e.bi_buf),e.bi_buf=t>>b-e.bi_valid,e.bi_valid+=r-b):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function V(e,t,r){$(e,r[2*t],r[2*t+1])}function G(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function K(e,t,r){var n,i,o=new Array(y+1),s=0;for(n=1;n<=y;n++)o[n]=s=s+r[n-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=G(o[a]++,a))}}function q(e){var t;for(t=0;t<d;t++)e.dyn_ltree[2*t]=0;for(t=0;t<m;t++)e.dyn_dtree[2*t]=0;for(t=0;t<g;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*_]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function W(e){e.bi_valid>8?z(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function X(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function H(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&X(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!X(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function Y(e,t,r){var n,i,o,s,a=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===n?V(e,i,t):(V(e,(o=R[i])+f+1,t),0!==(s=E[o])&&$(e,i-=M[o],s),V(e,o=U(--n),r),0!==(s=S[o])&&$(e,n-=O[o],s))}while(a<e.last_lit);V(e,_,t)}function Z(e,t){var r,n,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=v,r=0;r<u;r++)0!==o[2*r]?(e.heap[++e.heap_len]=l=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=l,r=e.heap_len>>1;r>=1;r--)H(e,o,r);i=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],H(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,H(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,o,s,a,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,d=t.stat_desc.max_length,m=0;for(o=0;o<=y;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<v;r++)(o=u[2*u[2*(n=e.heap[r])+1]+1]+1)>d&&(o=d,m++),u[2*n+1]=o,n>l||(e.bl_count[o]++,s=0,n>=f&&(s=p[n-f]),a=u[2*n],e.opt_len+=a*(o+s),h&&(e.static_len+=a*(c[2*n+1]+s)));if(0!==m){do{for(o=d-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[d]--,m-=2}while(m>0);for(o=d;0!==o;o--)for(n=e.bl_count[o];0!==n;)(i=e.heap[--r])>l||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}(e,t),K(o,l,e.bl_count)}function J(e,t,r){var n,i,o=-1,s=t[1],a=0,u=7,l=4;for(0===s&&(u=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++a<u&&i===s||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*w]++):a<=10?e.bl_tree[2*k]++:e.bl_tree[2*T]++,a=0,o=i,0===s?(u=138,l=3):i===s?(u=6,l=3):(u=7,l=4))}function Q(e,t,r){var n,i,o=-1,s=t[1],a=0,u=7,l=4;for(0===s&&(u=138,l=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++a<u&&i===s)){if(a<l)do{V(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(V(e,i,e.bl_tree),a--),V(e,w,e.bl_tree),$(e,a-3,2)):a<=10?(V(e,k,e.bl_tree),$(e,a-3,3)):(V(e,T,e.bl_tree),$(e,a-11,7));a=0,o=i,0===s?(u=138,l=3):i===s?(u=6,l=3):(u=7,l=4)}}u(O);var ee=!1;function te(e,t,r,i){$(e,(l<<1)+(i?1:0),3),function(e,t,r,i){W(e),i&&(z(e,r),z(e,~r)),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}r._tr_init=function(e){ee||(function(){var e,t,r,n,i,o=new Array(y+1);for(r=0,n=0;n<p-1;n++)for(M[n]=r,e=0;e<1<<E[n];e++)R[r++]=n;for(R[r-1]=n,i=0,n=0;n<16;n++)for(O[n]=i,e=0;e<1<<S[n];e++)P[i++]=n;for(i>>=7;n<m;n++)for(O[n]=i<<7,e=0;e<1<<S[n]-7;e++)P[256+i++]=n;for(t=0;t<=y;t++)o[t]=0;for(e=0;e<=143;)B[2*e+1]=8,e++,o[8]++;for(;e<=255;)B[2*e+1]=9,e++,o[9]++;for(;e<=279;)B[2*e+1]=7,e++,o[7]++;for(;e<=287;)B[2*e+1]=8,e++,o[8]++;for(K(B,d+1,o),e=0;e<m;e++)I[2*e+1]=5,I[2*e]=G(e,5);F=new j(B,E,f+1,d,y),D=new j(I,S,0,m,y),L=new j(new Array(0),C,0,g,x)}(),ee=!0),e.l_desc=new N(e.dyn_ltree,F),e.d_desc=new N(e.dyn_dtree,D),e.bl_desc=new N(e.bl_tree,L),e.bi_buf=0,e.bi_valid=0,q(e)},r._tr_stored_block=te,r._tr_flush_block=function(e,t,r,n){var u,l,p=0;e.level>0?(e.strm.data_type===a&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(t=32;t<f;t++)if(0!==e.dyn_ltree[2*t])return s;return o}(e)),Z(e,e.l_desc),Z(e,e.d_desc),p=function(e){var t;for(J(e,e.dyn_ltree,e.l_desc.max_code),J(e,e.dyn_dtree,e.d_desc.max_code),Z(e,e.bl_desc),t=g-1;t>=3&&0===e.bl_tree[2*A[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),u=e.opt_len+3+7>>>3,(l=e.static_len+3+7>>>3)<=u&&(u=l)):u=l=r+5,r+4<=u&&-1!==t?te(e,t,r,n):e.strategy===i||l===u?($(e,(c<<1)+(n?1:0),3),Y(e,B,I)):($(e,(h<<1)+(n?1:0),3),function(e,t,r,n){var i;for($(e,t-257,5),$(e,r-1,5),$(e,n-4,4),i=0;i<n;i++)$(e,e.bl_tree[2*A[i]+1],3);Q(e,e.dyn_ltree,t-1),Q(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,p+1),Y(e,e.dyn_ltree,e.dyn_dtree)),q(e),n&&W(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(R[r]+f+1)]++,e.dyn_dtree[2*U(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){$(e,c<<1,3),V(e,_,B),function(e){16===e.bi_valid?(z(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":136}],146:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],147:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,l=u>>1,c=-7,h=r?i-1:0,p=r?-1:1,f=e[t+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+e[t+h],h+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+h],h+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),o-=l}return(f?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,d=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(t*u-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[r+f]=255&s,f+=d,s/=256,l-=8);e[r+f-d]|=128*m}},{}],148:[function(e,t,r){t.exports=[function(e,t){return{options:e,draw:function(t,r,n){n.stop(!0),n.overrideFlag=!0;var i=this;return t.pixelManipulation({output:function(e,t,r){i.output={src:t,format:r}},changePixel:function(e,t,r,n){return[255-e,255-t,255-r,n]},format:t.format,image:e.image,inBrowser:e.inBrowser,callback:r})},output:void 0,UI:t}},{name:"Invert",description:"Inverts the image.",inputs:{}}]},{}],149:[function(e,t,r){"use strict";var n=e("underscore"),i=t.exports={Bitmap:e("./lib/bitmap")};n.extend(i,e("./lib/enums"))},{"./lib/bitmap":150,"./lib/enums":151,underscore:256}],150:[function(e,t,r){(function(r){"use strict";var n=e("fs"),i=(e("underscore"),e("bluebird")),o=e("jpeg-js"),s=e("node-png").PNG,a=e("./enums"),u=e("./utils"),l=e("./resize"),c={r:0,g:0,b:0,a:0},h=t.exports=function(e){e&&(e instanceof h?this._data={data:new r(e.data.data),width:e.width,height:e.height}:e.data?this._data=e:e.width&&e.height&&(this._data={data:new r(4*e.width*e.height),width:e.width,height:e.height},e.color&&this._fill(e.color)))};h.prototype={get width(){return this._data.width},get height(){return this._data.height},attach:function(e){var t=this._data;return this._data=e,t},detach:function(){var e=this._data;return delete this._data,e},_deduceFileType:function(e){if(!e)throw new Error("Can't determine image type");switch(e.substr(-4).toLowerCase()){case".jpg":return a.ImageType.JPG;case".png":return a.ImageType.PNG}if(".jpeg"==e.substr(-5).toLowerCase())return a.ImageType.JPG;throw new Error("Can't recognise image type: "+e)},_readStream:function(e){var t=i.defer(),n=[];return e.on("data",function(e){n.push(e)}),e.on("end",function(){var e=r.concat(n);t.resolve(e)}),e.on("error",function(e){t.reject(e)}),t.promise},_readPNG:function(e){var t=i.defer(),r=new s({filterType:4});return r.on("parsed",function(){t.resolve(r)}),r.on("error",function(e){t.rejecyt(e)}),e.pipe(r),t.promise},_parseOptions:function(e,t){return"number"==typeof(e=e||{})&&(e={type:e}),e.type=e.type||this._deduceFileType(t),e},read:function(e,t){var r=this;switch((t=this._parseOptions(t)).type){case a.ImageType.JPG:return this._readStream(e).then(function(e){r._data=o.decode(e)});case a.ImageType.PNG:return this._readPNG(e).then(function(e){r._data={data:e.data,width:e.width,height:e.height}});default:return i.reject(new Error("Not supported: ImageType "+t.type))}},readFile:function(e,t){var r=this;return u.fs.exists(e).then(function(i){if(i){t=r._parseOptions(t,e);var o=n.createReadStream(e);return r.read(o,t)}throw new Error("File Not Found: "+e)})},write:function(e,t){t=this._parseOptions(t);var r=i.defer();try{switch(e.on("finish",function(){r.resolve()}),e.on("error",function(e){r.reject(e)}),t.type){case a.ImageType.JPG:var n=o.encode(this._data,t.quality||90).data;e.write(n),e.end();break;case a.ImageType.PNG:var u=new s;u.width=this.width,u.height=this.height,u.data=this._data.data,u.on("end",function(){r.resolve()}),u.on("error",function(e){r.reject(e)}),u.pack().pipe(e);break;default:throw new Error("Not supported: ImageType "+t.type)}}catch(e){r.reject(e)}return r.promise},writeFile:function(e,t){t=this._parseOptions(t,e);var r=n.createWriteStream(e);return this.write(r,t)},clone:function(){return new h({width:this.width,height:this.height,data:new r(this._data.data)})},setPixel:function(e,t,r,n,i,o){if(void 0===n){var s=r;r=s.r,n=s.g,i=s.b,o=s.a}void 0===o&&(o=255);var a=4*(t*this.width+e),u=this._data.data;u[a++]=r,u[a++]=n,u[a++]=i,u[a++]=o},getPixel:function(e,t,r){var n=4*(t*this.width+e);r=r||{};var i=this._data.data;return r.r=i[n++],r.g=i[n++],r.b=i[n++],r.a=i[n++],r},negative:function(){for(var e=new h({width:this.width,height:this.height}),t=this.width*this.height,r=this._data.data,n=e._data.data,i=0,o=0,s=0;s<t;s++)n[o++]=255-r[i++],n[o++]=255-r[i++],n[o++]=255-r[i++],n[o++]=r[i++];return e},resize:function(e){var t,r=new h(e);switch(e.fit){case"pad":var n=e.padColor||c,i=this.width/this.height,o=Math.round(i*r.height),s=Math.round(r.width/i),a=0,u=0;o<r.width?(t=new h({width:o,height:r.height}),a=(r.width-o)/2,r._fill(n,0,0,Math.floor(a),r.height),r._fill(n,r.width-Math.ceil(a),0,Math.ceil(a),r.height),l[e.algorithm](this,t,e),r._blt(t,{left:Math.floor(a),top:Math.floor(u)})):s<r.height?(t=new h({width:r.width,height:s}),u=(r.height-s)/2,r._fill(n,0,0,r.width,Math.floor(u)),r._fill(n,0,r.height-Math.ceil(u),r.width,Math.ceil(u)),l[e.algorithm](this,t,e),r._blt(t,{left:Math.floor(a),top:Math.floor(u)})):l[e.algorithm](this,r,e);break;case"crop":var p=e.gravity||{x:.5,y:.5},f=r.width/r.height;o=Math.round(f*this.height),s=Math.round(this.width/f);if(o<this.width){var d=this.width-o;t=this.crop({left:Math.round(p.x*d),top:0,width:o,height:this.height})}else if(s<this.height){var m=this.height-s;t=this.crop({left:0,top:Math.round(p.y*m),width:this.width,height:s})}else t=this;l[e.algorithm](t,r,e);break;case"stretch":default:l[e.algorithm](this,r,e)}return r},rotate:function(e){var t=void 0!==e.radians?e.radians:3.141592653589793*e.degrees/180;if(t<1e-9)return new h(this);var r,n,i={forward:{cos:Math.cos(t),sin:Math.sin(t)},backward:{cos:Math.cos(-t),sin:Math.sin(-t)}},o=this.width,s=this.height,a=o/2,u=s/2,l=e.padColor||c,p=[l.r,l.g,l.b,l.a],f=function(e,t){var r=t.cos*e.x-t.sin*e.y,n=t.sin*e.x+t.cos*e.y;return e.x=r,e.y=n,e},d=function(e){var t=Math.abs(e.x/a),r=Math.abs(e.y/u);return Math.max(t,r)};switch(e.fit){case"custom":r=e.width,n=e.height;break;case"pad":var m=f({x:-a,y:u},i.forward),g=f({x:a,y:u},i.forward),v=f({x:-a,y:-u},i.forward),y=f({x:a,y:-u},i.forward);r=Math.round(Math.max(m.x,g.x,v.x,y.x)-Math.min(m.x,g.x,v.x,y.x)),n=Math.round(Math.max(m.y,g.y,v.y,y.y)-Math.min(m.y,g.y,v.y,y.y));break;case"crop":m=f({x:-a,y:u},i.forward),g=f({x:a,y:u},i.forward),v=f({x:-a,y:-u},i.forward),y=f({x:a,y:-u},i.forward);var b=Math.max(d(m),d(g),d(v),d(y));r=Math.floor(o/b),n=Math.floor(s/b);break;case"same":default:r=o,n=s}for(var x=new h({width:r,height:n}),_=this._data.data,w=x._data.data,k={},T=r/2,E=n/2,S=4*o,C=0;C<n;C++)for(var A=0;A<r;A++){k.x=A-T,k.y=E-C,f(k,i.backward);var B=k.x+a,I=u-k.y,P=4*(C*r+A);if(B>-1&&B<o&&I>-1&&I<s)for(var R=Math.floor(B),M=Math.floor(I),F=4*(M*o+R),D=0;D<4;D++){var L=F+D,O=p[D],j=B-R,N=I-M,U=(1-j)*(m=B>=0&&I>=0?_[L]:O)+j*(g=B<o-1&&I>=0?_[L+4]:O),z=(1-j)*(v=B>=0&&I<s-1?_[L+S]:O)+j*(y=B<o-1&&I<s-1?_[L+S+4]:O);w[P++]=(1-N)*U+N*z}else w[P++]=l.r,w[P++]=l.g,w[P++]=l.b,w[P++]=l.a}return x},crop:function(e){for(var t=e.top,r=e.left,n=e.width,i=e.height,o=new h({width:n,height:i}),s=this._data.data,a=o._data.data,u=4*n,l=0;l<i;l++){var c=4*((l+t)*this.width+r),p=l*n*4;s.copy(a,p,c,c+u)}return o},blur:function(e){for(var t=new h({width:this.width,height:this.height}),r=this.width,n=this.height,i=r-1,o=n-1,s=4*r,a=this._data.data,u=t._data.data,l=0;l<n;l++)for(var c=0;c<r;c++)for(var p=0;p<4;p++){var f=4*(l*r+c)+p,d=1*a[f-(l>0?s:0)-(c>0?4:0)]+2*a[f-(l>0?s:0)]+1*a[f-(l>0?s:0)+(c<i?4:0)]+2*a[f-(c>0?4:0)]+4*a[f]+2*a[f+(c<i?4:0)]+1*a[f+(l<o?s:0)-(c>0?4:0)]+2*a[f+(l<o?s:0)]+1*a[f+(l<o?s:0)+(c<i?4:0)];u[f]=Math.round(d/16)}return t},_fill:function(e,t,r,n,i){t=t||0,r=r||0,n=n||this.width-t,i=i||this.height-r;for(var o=(e=e||c).r||0,s=e.g||0,a=e.b||0,u=e.a||0,l=this._data.data,h=r+i,p=t+n,f=this.width,d=4*(r*f+t),m=d,g=t;g<p;g++)l[m++]=o,l[m++]=s,l[m++]=a,l[m++]=u;for(var v=d+4*n,y=r;y<h;y++){m=4*(y*f+t);l.copy(l,m,d,v)}},_blt:function(e,t){for(var r=t.left,n=t.top,i=Math.min(this.width-r,e.width),o=Math.min(this.height-n,e.height),s=4*i,a=e._data.data,u=this._data.data,l=0;l<o;l++){var c=l*e.width*4,h=4*((l+n)*this.width+r);a.copy(u,h,c,c+s)}}}}).call(this,e("buffer").Buffer)},{"./enums":151,"./resize":152,"./utils":153,bluebird:3,buffer:134,fs:133,"jpeg-js":154,"node-png":175,underscore:256}],151:[function(e,t,r){"use strict";t.exports={ImageType:{JPG:1,PNG:2}}},{}],152:[function(e,t,r){(function(r){"use strict";e("underscore"),e("bluebird");t.exports={_writeFile:function(t,r,n,i){new(e("./bitmap"))({width:t,height:r,data:n}).writeFile(i)},nearestNeighbor:function(e,t,r){for(var n=e.width,i=e.height,o=t.width,s=t.height,a=e._data.data,u=t._data.data,l=0;l<s;l++)for(var c=0;c<o;c++){var h=4*(l*o+c),p=4*(Math.round(l*i/s)*n+Math.round(c*n/o));u[h++]=a[p++],u[h++]=a[p++],u[h++]=a[p++],u[h++]=a[p++]}},bilinearInterpolation:function(e,t,r){for(var n=e.width,i=e.height,o=t.width,s=t.height,a=e._data.data,u=t._data.data,l=function(e,t,r,n,i){return t===n?r:Math.round((e-t)*i+(n-e)*r)},c=function(e,t,r,i,o,s,c,h){var p=4*(c*n+i)+t,f=4*(c*n+o)+t,d=l(r,i,a[p],o,a[f]);if(h===c)u[e+t]=d;else{f=4*(h*n+o)+t;var m=l(r,i,a[p=4*(h*n+i)+t],o,a[f]);u[e+t]=l(s,c,d,h,m)}},h=0;h<s;h++)for(var p=0;p<o;p++){var f=4*(h*o+p),d=p*n/o,m=Math.floor(d),g=Math.min(Math.ceil(d),n-1),v=h*i/s,y=Math.floor(v),b=Math.min(Math.ceil(v),i-1);c(f,0,d,m,g,v,y,b),c(f,1,d,m,g,v,y,b),c(f,2,d,m,g,v,y,b),c(f,3,d,m,g,v,y,b)}},_interpolate2D:function(e,t,n,i){for(var o=e._data.data,s=t._data.data,a=e.width,u=e.height,l=t.width,c=t.height,h=Math.max(1,Math.floor(a/l)),p=l*h,f=Math.max(1,Math.floor(u/c)),d=c*f,m=new r(p*u*4),g=0;g<u;g++)for(var v=0;v<p;v++)for(var y=(U=v*(a-1)/p)-(z=Math.floor(U)),b=4*(g*a+z),x=4*(g*p+v),_=0;_<4;_++){var w=b+_,k=z>0?o[w-4]:2*o[w]-o[w+4],T=o[w],E=o[w+4],S=z<a-2?o[w+8]:2*o[w+4]-o[w];m[x+_]=i(k,T,E,S,y)}var C=new r(p*d*4);for(g=0;g<d;g++)for(v=0;v<p;v++){y=(j=g*(u-1)/d)-(N=Math.floor(j)),x=4*(N*p+v);var A=4*(g*p+v);for(_=0;_<4;_++){w=x+_;var B=N>0?m[w-4*p]:2*m[w]-m[w+4*p],I=m[w],P=m[w+4*p],R=N<u-2?m[w+8*p]:2*m[w+4*p]-m[w];C[A+_]=i(B,I,P,R,y)}}var M=h*f;if(M>1)for(g=0;g<c;g++)for(v=0;v<l;v++){for(var F=0,D=0,L=0,O=0,j=0;j<f;j++)for(var N=g*f+j,U=0;U<h;U++){var z,$=4*(N*p+(z=v*h+U));F+=C[$],D+=C[$+1],L+=C[$+2],O+=C[$+3]}var V=4*(g*l+v);s[V]=Math.round(F/M),s[V+1]=Math.round(D/M),s[V+2]=Math.round(L/M),s[V+3]=Math.round(O/M)}else t._data.data=C},bicubicInterpolation:function(e,t,r){return this._interpolate2D(e,t,r,function(e,t,r,n,i){var o=n-r-e+t,s=e-t-o,a=r-e,u=t;return Math.max(0,Math.min(255,o*(i*i*i)+s*(i*i)+a*i+u))})},hermiteInterpolation:function(e,t,r){return this._interpolate2D(e,t,r,function(e,t,r,n,i){var o=t,s=.5*(r-e),a=e-2.5*t+2*r-.5*n,u=.5*(n-e)+1.5*(t-r);return Math.max(0,Math.min(255,Math.round(((u*i+a)*i+s)*i+o)))})},bezierInterpolation:function(e,t,r){return this._interpolate2D(e,t,r,function(e,t,r,n,i){var o=1-i,s=t*o*o*o,a=3*(t+(r-e)/4)*o*o*i,u=3*(r-(n-t)/4)*o*i*i,l=r*i*i*i;return Math.max(0,Math.min(255,Math.round(s+a+u+l)))})}}}).call(this,e("buffer").Buffer)},{"./bitmap":150,bluebird:3,buffer:134,underscore:256}],153:[function(e,t,r){"use strict";var n=e("fs"),i=(e("underscore"),e("bluebird"));t.exports={fs:{exists:function(e){var t=i.defer();return n.exists(e,function(e){t.resolve(e)}),t.promise}}}},{bluebird:3,fs:133,underscore:256}],154:[function(e,t,r){var n=e("./lib/encoder"),i=e("./lib/decoder");t.exports={encode:n,decode:i}},{"./lib/decoder":155,"./lib/encoder":156}],155:[function(e,t,r){(function(e){var r=function(){"use strict";var e=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),t=4017,r=799,n=3406,i=2276,o=1567,s=3784,a=5793,u=2896;function l(){}function c(e,t){for(var r,n,i=0,o=[],s=16;s>0&&!e[s-1];)s--;o.push({children:[],index:0});var a,u=o[0];for(r=0;r<s;r++){for(n=0;n<e[r];n++){for((u=o.pop()).children[u.index]=t[i];u.index>0;)u=o.pop();for(u.index++,o.push(u);o.length<=r;)o.push(a={children:[],index:0}),u.children[u.index]=a.children,u=a;i++}r+1<s&&(o.push(a={children:[],index:0}),u.children[u.index]=a.children,u=a)}return o[0].children}function h(t,r,n,i,o,s,a,u,l){n.precision,n.samplesPerLine,n.scanLines;var c=n.mcusPerLine,h=n.progressive,p=(n.maxH,n.maxV,r),f=0,d=0;function m(){if(d>0)return f>>--d&1;if(255==(f=t[r++])){var e=t[r++];if(e)throw"unexpected marker: "+(f<<8|e).toString(16)}return d=7,f>>>7}function g(e){for(var t,r=e;null!==(t=m());){if("number"==typeof(r=r[t]))return r;if("object"!=typeof r)throw"invalid huffman sequence"}return null}function v(e){for(var t=0;e>0;){var r=m();if(null===r)return;t=t<<1|r,e--}return t}function y(e){var t=v(e);return t>=1<<e-1?t:t+(-1<<e)+1}var b=0;var x,_=0;function w(e,t,r,n,i){var o=r%c,s=(r/c|0)*e.v+n,a=o*e.h+i;t(e,e.blocks[s][a])}function k(e,t,r){var n=r/e.blocksPerLine|0,i=r%e.blocksPerLine;t(e,e.blocks[n][i])}var T,E,S,C,A,B,I=i.length;B=h?0===s?0===u?function(e,t){var r=g(e.huffmanTableDC),n=0===r?0:y(r)<<l;t[0]=e.pred+=n}:function(e,t){t[0]|=m()<<l}:0===u?function(t,r){if(b>0)b--;else for(var n=s,i=a;n<=i;){var o=g(t.huffmanTableAC),u=15&o,c=o>>4;if(0!==u)r[e[n+=c]]=y(u)*(1<<l),n++;else{if(c<15){b=v(c)+(1<<c)-1;break}n+=16}}}:function(t,r){for(var n=s,i=a,o=0;n<=i;){var u=e[n];switch(_){case 0:var c=g(t.huffmanTableAC),h=15&c;if(o=c>>4,0===h)o<15?(b=v(o)+(1<<o),_=4):(o=16,_=1);else{if(1!==h)throw"invalid ACn encoding";x=y(h),_=o?2:3}continue;case 1:case 2:r[u]?r[u]+=m()<<l:0==--o&&(_=2==_?3:0);break;case 3:r[u]?r[u]+=m()<<l:(r[u]=x<<l,_=0);break;case 4:r[u]&&(r[u]+=m()<<l)}n++}4===_&&0==--b&&(_=0)}:function(t,r){var n=g(t.huffmanTableDC),i=0===n?0:y(n);r[0]=t.pred+=i;for(var o=1;o<64;){var s=g(t.huffmanTableAC),a=15&s,u=s>>4;if(0!==a)r[e[o+=u]]=y(a),o++;else{if(u<15)break;o+=16}}};var P,R,M,F,D=0;for(R=1==I?i[0].blocksPerLine*i[0].blocksPerColumn:c*n.mcusPerColumn,o||(o=R);D<R;){for(E=0;E<I;E++)i[E].pred=0;if(b=0,1==I)for(T=i[0],A=0;A<o;A++)k(T,B,D),D++;else for(A=0;A<o;A++){for(E=0;E<I;E++)for(M=(T=i[E]).h,F=T.v,S=0;S<F;S++)for(C=0;C<M;C++)w(T,B,D,S,C);if(++D===R)break}if(d=0,(P=t[r]<<8|t[r+1])<65280)throw"marker was not found";if(!(P>=65488&&P<=65495))break;r+=2}return r-p}function p(e,l){var c,h,p=[],f=l.blocksPerLine,d=l.blocksPerColumn,m=f<<3,g=new Int32Array(64),v=new Uint8Array(64);function y(e,c,h){var p,f,d,m,g,v,y,b,x,_,w=l.quantizationTable,k=h;for(_=0;_<64;_++)k[_]=e[_]*w[_];for(_=0;_<8;++_){var T=8*_;0!=k[1+T]||0!=k[2+T]||0!=k[3+T]||0!=k[4+T]||0!=k[5+T]||0!=k[6+T]||0!=k[7+T]?(p=a*k[0+T]+128>>8,f=a*k[4+T]+128>>8,d=k[2+T],m=k[6+T],g=u*(k[1+T]-k[7+T])+128>>8,b=u*(k[1+T]+k[7+T])+128>>8,v=k[3+T]<<4,y=k[5+T]<<4,x=p-f+1>>1,p=p+f+1>>1,f=x,x=d*s+m*o+128>>8,d=d*o-m*s+128>>8,m=x,x=g-y+1>>1,g=g+y+1>>1,y=x,x=b+v+1>>1,v=b-v+1>>1,b=x,x=p-m+1>>1,p=p+m+1>>1,m=x,x=f-d+1>>1,f=f+d+1>>1,d=x,x=g*i+b*n+2048>>12,g=g*n-b*i+2048>>12,b=x,x=v*r+y*t+2048>>12,v=v*t-y*r+2048>>12,y=x,k[0+T]=p+b,k[7+T]=p-b,k[1+T]=f+y,k[6+T]=f-y,k[2+T]=d+v,k[5+T]=d-v,k[3+T]=m+g,k[4+T]=m-g):(x=a*k[0+T]+512>>10,k[0+T]=x,k[1+T]=x,k[2+T]=x,k[3+T]=x,k[4+T]=x,k[5+T]=x,k[6+T]=x,k[7+T]=x)}for(_=0;_<8;++_){var E=_;0!=k[8+E]||0!=k[16+E]||0!=k[24+E]||0!=k[32+E]||0!=k[40+E]||0!=k[48+E]||0!=k[56+E]?(p=a*k[0+E]+2048>>12,f=a*k[32+E]+2048>>12,d=k[16+E],m=k[48+E],g=u*(k[8+E]-k[56+E])+2048>>12,b=u*(k[8+E]+k[56+E])+2048>>12,v=k[24+E],y=k[40+E],x=p-f+1>>1,p=p+f+1>>1,f=x,x=d*s+m*o+2048>>12,d=d*o-m*s+2048>>12,m=x,x=g-y+1>>1,g=g+y+1>>1,y=x,x=b+v+1>>1,v=b-v+1>>1,b=x,x=p-m+1>>1,p=p+m+1>>1,m=x,x=f-d+1>>1,f=f+d+1>>1,d=x,x=g*i+b*n+2048>>12,g=g*n-b*i+2048>>12,b=x,x=v*r+y*t+2048>>12,v=v*t-y*r+2048>>12,y=x,k[0+E]=p+b,k[56+E]=p-b,k[8+E]=f+y,k[48+E]=f-y,k[16+E]=d+v,k[40+E]=d-v,k[24+E]=m+g,k[32+E]=m-g):(x=a*h[_+0]+8192>>14,k[0+E]=x,k[8+E]=x,k[16+E]=x,k[24+E]=x,k[32+E]=x,k[40+E]=x,k[48+E]=x,k[56+E]=x)}for(_=0;_<64;++_){var S=128+(k[_]+8>>4);c[_]=S<0?0:S>255?255:S}}for(var b=0;b<d;b++){var x=b<<3;for(c=0;c<8;c++)p.push(new Uint8Array(m));for(var _=0;_<f;_++){y(l.blocks[b][_],v,g);var w=0,k=_<<3;for(h=0;h<8;h++){var T=p[x+h];for(c=0;c<8;c++)T[k+c]=v[w++]}}}return p}function f(e){return e<0?0:e>255?255:e}return l.prototype={load:function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){var e=new Uint8Array(t.response||t.mozResponseArrayBuffer);this.parse(e),this.onload&&this.onload()}.bind(this),t.send(null)},parse:function(t){var r=0;t.length;function n(){var e=t[r]<<8|t[r+1];return r+=2,e}function i(){var e=n(),i=t.subarray(r,r+e-2);return r+=i.length,i}function o(e){var t,r,n=0,i=0;for(r in e.components)e.components.hasOwnProperty(r)&&(n<(t=e.components[r]).h&&(n=t.h),i<t.v&&(i=t.v));var o=Math.ceil(e.samplesPerLine/8/n),s=Math.ceil(e.scanLines/8/i);for(r in e.components)if(e.components.hasOwnProperty(r)){t=e.components[r];for(var a=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/n),u=Math.ceil(Math.ceil(e.scanLines/8)*t.v/i),l=o*t.h,c=s*t.v,h=[],p=0;p<c;p++){for(var f=[],d=0;d<l;d++)f.push(new Int32Array(64));h.push(f)}t.blocksPerLine=a,t.blocksPerColumn=u,t.blocks=h}e.maxH=n,e.maxV=i,e.mcusPerLine=o,e.mcusPerColumn=s}var s,a,u=null,l=null,f=[],d=[],m=[],g=[],v=n();if(65496!=v)throw"SOI not found";for(v=n();65497!=v;){switch(v){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var y=i();65504===v&&74===y[0]&&70===y[1]&&73===y[2]&&70===y[3]&&0===y[4]&&(u={version:{major:y[5],minor:y[6]},densityUnits:y[7],xDensity:y[8]<<8|y[9],yDensity:y[10]<<8|y[11],thumbWidth:y[12],thumbHeight:y[13],thumbData:y.subarray(14,14+3*y[12]*y[13])}),65518===v&&65===y[0]&&100===y[1]&&111===y[2]&&98===y[3]&&101===y[4]&&0===y[5]&&(l={version:y[6],flags0:y[7]<<8|y[8],flags1:y[9]<<8|y[10],transformCode:y[11]});break;case 65499:for(var b=n()+r-2;r<b;){var x=t[r++],_=new Int32Array(64);if(x>>4==0)for(z=0;z<64;z++){_[e[z]]=t[r++]}else{if(x>>4!=1)throw"DQT: invalid table spec";for(z=0;z<64;z++){_[e[z]]=n()}}f[15&x]=_}break;case 65472:case 65473:case 65474:n(),(s={}).extended=65473===v,s.progressive=65474===v,s.precision=t[r++],s.scanLines=n(),s.samplesPerLine=n(),s.components={},s.componentsOrder=[];var w,k=t[r++];for(N=0;N<k;N++){w=t[r];var T=t[r+1]>>4,E=15&t[r+1],S=t[r+2];s.componentsOrder.push(w),s.components[w]={h:T,v:E,quantizationIdx:S},r+=3}o(s),d.push(s);break;case 65476:var C=n();for(N=2;N<C;){var A=t[r++],B=new Uint8Array(16),I=0;for(z=0;z<16;z++,r++)I+=B[z]=t[r];var P=new Uint8Array(I);for(z=0;z<I;z++,r++)P[z]=t[r];N+=17+I,(A>>4==0?g:m)[15&A]=c(B,P)}break;case 65501:n(),a=n();break;case 65498:n();var R=t[r++],M=[];for(N=0;N<R;N++){$=s.components[t[r++]];var F=t[r++];$.huffmanTableDC=g[F>>4],$.huffmanTableAC=m[15&F],M.push($)}var D=t[r++],L=t[r++],O=t[r++],j=h(t,r,s,M,a,D,L,O>>4,15&O);r+=j;break;default:if(255==t[r-3]&&t[r-2]>=192&&t[r-2]<=254){r-=3;break}throw"unknown JPEG marker "+v.toString(16)}v=n()}if(1!=d.length)throw"only single frame JPEGs supported";for(var N=0;N<d.length;N++){var U=d[N].components;for(var z in U)U[z].quantizationTable=f[U[z].quantizationIdx],delete U[z].quantizationIdx}this.width=s.samplesPerLine,this.height=s.scanLines,this.jfif=u,this.adobe=l,this.components=[];for(N=0;N<s.componentsOrder.length;N++){var $=s.components[s.componentsOrder[N]];this.components.push({lines:p(0,$),scaleX:$.h/s.maxH,scaleY:$.v/s.maxV})}},getData:function(e,t){var r,n,i,o,s,a,u,l,c,h,p,d,m,g,v,y,b,x,_,w,k,T=this.width/e,E=this.height/t,S=0,C=e*t*this.components.length,A=new Uint8Array(C);switch(this.components.length){case 1:for(r=this.components[0],h=0;h<t;h++)for(s=r.lines[0|h*r.scaleY*E],c=0;c<e;c++)p=s[0|c*r.scaleX*T],A[S++]=p;break;case 2:for(r=this.components[0],n=this.components[1],h=0;h<t;h++)for(s=r.lines[0|h*r.scaleY*E],a=n.lines[0|h*n.scaleY*E],c=0;c<e;c++)p=s[0|c*r.scaleX*T],A[S++]=p,p=a[0|c*n.scaleX*T],A[S++]=p;break;case 3:for(k=!0,this.adobe&&this.adobe.transformCode?k=!0:void 0!==this.colorTransform&&(k=!!this.colorTransform),r=this.components[0],n=this.components[1],i=this.components[2],h=0;h<t;h++)for(s=r.lines[0|h*r.scaleY*E],a=n.lines[0|h*n.scaleY*E],u=i.lines[0|h*i.scaleY*E],c=0;c<e;c++)k?(p=s[0|c*r.scaleX*T],d=a[0|c*n.scaleX*T],x=f(p+1.402*((m=u[0|c*i.scaleX*T])-128)),_=f(p-.3441363*(d-128)-.71413636*(m-128)),w=f(p+1.772*(d-128))):(x=s[0|c*r.scaleX*T],_=a[0|c*n.scaleX*T],w=u[0|c*i.scaleX*T]),A[S++]=x,A[S++]=_,A[S++]=w;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";for(k=!1,this.adobe&&this.adobe.transformCode?k=!0:void 0!==this.colorTransform&&(k=!!this.colorTransform),r=this.components[0],n=this.components[1],i=this.components[2],o=this.components[3],h=0;h<t;h++)for(s=r.lines[0|h*r.scaleY*E],a=n.lines[0|h*n.scaleY*E],u=i.lines[0|h*i.scaleY*E],l=o.lines[0|h*o.scaleY*E],c=0;c<e;c++)k?(p=s[0|c*r.scaleX*T],d=a[0|c*n.scaleX*T],m=u[0|c*i.scaleX*T],g=l[0|c*o.scaleX*T],v=255-f(p+1.402*(m-128)),y=255-f(p-.3441363*(d-128)-.71413636*(m-128)),b=255-f(p+1.772*(d-128))):(v=s[0|c*r.scaleX*T],y=a[0|c*n.scaleX*T],b=u[0|c*i.scaleX*T],g=l[0|c*o.scaleX*T]),A[S++]=v,A[S++]=y,A[S++]=b,A[S++]=g;break;default:throw"Unsupported color mode"}return A},copyToImageData:function(e){var t,r,n,i,o,s,a,u,l,c=e.width,h=e.height,p=e.data,d=this.getData(c,h),m=0,g=0;switch(this.components.length){case 1:for(r=0;r<h;r++)for(t=0;t<c;t++)n=d[m++],p[g++]=n,p[g++]=n,p[g++]=n,p[g++]=255;break;case 3:for(r=0;r<h;r++)for(t=0;t<c;t++)a=d[m++],u=d[m++],l=d[m++],p[g++]=a,p[g++]=u,p[g++]=l,p[g++]=255;break;case 4:for(r=0;r<h;r++)for(t=0;t<c;t++)o=d[m++],s=d[m++],n=d[m++],a=255-f(o*(1-(i=d[m++])/255)+i),u=255-f(s*(1-i/255)+i),l=255-f(n*(1-i/255)+i),p[g++]=a,p[g++]=u,p[g++]=l,p[g++]=255;break;default:throw"Unsupported color mode"}}},l}();t.exports=function(t){var n=new Uint8Array(t),i=new r;i.parse(n);var o={width:i.width,height:i.height,data:new e(i.width*i.height*4)};return i.copyToImageData(o),o}}).call(this,e("buffer").Buffer)},{buffer:134}],156:[function(e,t,r){(function(e){function r(t){Math.round;var r,n,i,o,s,a=Math.floor,u=new Array(64),l=new Array(64),c=new Array(64),h=new Array(64),p=new Array(65535),f=new Array(65535),d=new Array(64),m=new Array(64),g=[],v=0,y=7,b=new Array(64),x=new Array(64),_=new Array(64),w=new Array(256),k=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],R=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function M(e,t){for(var r=0,n=0,i=new Array,o=1;o<=16;o++){for(var s=1;s<=e[o];s++)i[t[n]]=[],i[t[n]][0]=r,i[t[n]][1]=o,n++,r++;r*=2}return i}function F(e){for(var t=e[0],r=e[1]-1;r>=0;)t&1<<r&&(v|=1<<y),r--,--y<0&&(255==v?(D(255),D(0)):D(v),y=7,v=0)}function D(e){g.push(e)}function L(e){D(e>>8&255),D(255&e)}function O(e,t,r,n,i){var o,s=i[0],a=i[240];for(var u=function(e,t){var r,n,i,o,s,a,u,l,c,h,p=0;for(c=0;c<8;++c){r=e[p],n=e[p+1],i=e[p+2],o=e[p+3],s=e[p+4],a=e[p+5],u=e[p+6];var f=r+(l=e[p+7]),m=r-l,g=n+u,v=n-u,y=i+a,b=i-a,x=o+s,_=o-s,w=f+x,k=f-x,T=g+y,E=g-y;e[p]=w+T,e[p+4]=w-T;var S=.707106781*(E+k);e[p+2]=k+S,e[p+6]=k-S;var C=.382683433*((w=_+b)-(E=v+m)),A=.5411961*w+C,B=1.306562965*E+C,I=.707106781*(T=b+v),P=m+I,R=m-I;e[p+5]=R+A,e[p+3]=R-A,e[p+1]=P+B,e[p+7]=P-B,p+=8}for(p=0,c=0;c<8;++c){r=e[p],n=e[p+8],i=e[p+16],o=e[p+24],s=e[p+32],a=e[p+40],u=e[p+48];var M=r+(l=e[p+56]),F=r-l,D=n+u,L=n-u,O=i+a,j=i-a,N=o+s,U=o-s,z=M+N,$=M-N,V=D+O,G=D-O;e[p]=z+V,e[p+32]=z-V;var K=.707106781*(G+$);e[p+16]=$+K,e[p+48]=$-K;var q=.382683433*((z=U+j)-(G=L+F)),W=.5411961*z+q,X=1.306562965*G+q,H=.707106781*(V=j+L),Y=F+H,Z=F-H;e[p+40]=Z+W,e[p+24]=Z-W,e[p+8]=Y+X,e[p+56]=Y-X,p++}for(c=0;c<64;++c)h=e[c]*t[c],d[c]=h>0?h+.5|0:h-.5|0;return d}(e,t),l=0;l<64;++l)m[T[l]]=u[l];var c=m[0]-r;r=m[0],0==c?F(n[0]):(F(n[f[o=32767+c]]),F(p[o]));for(var h=63;h>0&&0==m[h];h--);if(0==h)return F(s),r;for(var g,v=1;v<=h;){for(var y=v;0==m[v]&&v<=h;++v);var b=v-y;if(b>=16){g=b>>4;for(var x=1;x<=g;++x)F(a);b&=15}o=32767+m[v],F(i[(b<<4)+f[o]]),F(p[o]),v++}return 63!=h&&F(s),r}function j(e){if(e<=0&&(e=1),e>100&&(e=100),s!=e){(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var n=a((t[r]*e+50)/100);n<1?n=1:n>255&&(n=255),u[T[r]]=n}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var s=a((i[o]*e+50)/100);s<1?s=1:s>255&&(s=255),l[T[o]]=s}for(var p=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,d=0;d<8;d++)for(var m=0;m<8;m++)c[f]=1/(u[T[f]]*p[d]*p[m]*8),h[f]=1/(l[T[f]]*p[d]*p[m]*8),f++})(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),s=e}}this.encode=function(t,s){(new Date).getTime();s&&j(s),g=new Array,v=0,y=7,L(65496),L(65504),L(16),D(74),D(70),D(73),D(70),D(0),D(1),D(1),D(0),L(1),L(1),D(0),D(0),function(){L(65499),L(132),D(0);for(var e=0;e<64;e++)D(u[e]);D(1);for(var t=0;t<64;t++)D(l[t])}(),function(e,t){L(65472),L(17),D(8),L(t),L(e),D(3),D(1),D(17),D(0),D(2),D(17),D(1),D(3),D(17),D(1)}(t.width,t.height),function(){L(65476),L(418),D(0);for(var e=0;e<16;e++)D(E[e+1]);for(var t=0;t<=11;t++)D(S[t]);D(16);for(var r=0;r<16;r++)D(C[r+1]);for(var n=0;n<=161;n++)D(A[n]);D(1);for(var i=0;i<16;i++)D(B[i+1]);for(var o=0;o<=11;o++)D(I[o]);D(17);for(var s=0;s<16;s++)D(P[s+1]);for(var a=0;a<=161;a++)D(R[a])}(),L(65498),L(12),D(3),D(1),D(0),D(2),D(17),D(3),D(17),D(0),D(63),D(0);var a=0,p=0,f=0;v=0,y=7,this.encode.displayName="_encode_";for(var d,m,w,T,M,N,U,z,$,V=t.data,G=t.width,K=t.height,q=4*G,W=0;W<K;){for(d=0;d<q;){for(N=M=q*W+d,U=-1,z=0,$=0;$<64;$++)N=M+(z=$>>3)*q+(U=4*(7&$)),W+z>=K&&(N-=q*(W+1+z-K)),d+U>=q&&(N-=d+U-q+4),m=V[N++],w=V[N++],T=V[N++],b[$]=(k[m]+k[w+256>>0]+k[T+512>>0]>>16)-128,x[$]=(k[m+768>>0]+k[w+1024>>0]+k[T+1280>>0]>>16)-128,_[$]=(k[m+1280>>0]+k[w+1536>>0]+k[T+1792>>0]>>16)-128;a=O(b,c,a,r,i),p=O(x,h,p,n,o),f=O(_,h,f,n,o),d+=32}W+=8}if(y>=0){var X=[];X[1]=y+1,X[0]=(1<<y+1)-1,F(X)}return L(65497),new e(g)},function(){(new Date).getTime();t||(t=50),function(){for(var e=String.fromCharCode,t=0;t<256;t++)w[t]=e(t)}(),r=M(E,S),n=M(B,I),i=M(C,A),o=M(P,R),function(){for(var e=1,t=2,r=1;r<=15;r++){for(var n=e;n<t;n++)f[32767+n]=r,p[32767+n]=[],p[32767+n][1]=r,p[32767+n][0]=n;for(var i=-(t-1);i<=-e;i++)f[32767+i]=r,p[32767+i]=[],p[32767+i][1]=r,p[32767+i][0]=t-1+i;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)k[e]=19595*e,k[e+256>>0]=38470*e,k[e+512>>0]=7471*e+32768,k[e+768>>0]=-11059*e,k[e+1024>>0]=-21709*e,k[e+1280>>0]=32768*e+8421375,k[e+1536>>0]=-27439*e,k[e+1792>>0]=-5329*e}(),j(t),(new Date).getTime()}()}t.exports=function(e,t){void 0===t&&(t=50);return{data:new r(t).encode(e,t),width:e.width,height:e.height}}}).call(this,e("buffer").Buffer)},{buffer:134}],157:[function(e,t,r){arguments[4][128][0].apply(r,arguments)},{dup:128}],158:[function(e,t,r){"use strict";t.exports=function(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}},{}],159:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],160:[function(e,t,r){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],161:[function(e,t,r){var n,i;n="undefined"!=typeof self?self:this,i=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.width=t,this.height=e.length/t,this.data=e}return e.createEmpty=function(t,r){return new e(new Uint8ClampedArray(t*r),t)},e.prototype.get=function(e,t){return!(e<0||e>=this.width||t<0||t>=this.height)&&!!this.data[t*this.width+e]},e.prototype.set=function(e,t,r){this.data[t*this.width+e]=r?1:0},e.prototype.setRegion=function(e,t,r,n,i){for(var o=t;o<t+n;o++)for(var s=e;s<e+r;s++)this.set(s,o,!!i)},e.prototype.getInverted=function(){return new e(this.data.map(function(e){return 0===e?1:0}),this.width)},e}();t.BitMatrix=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.addOrSubtractGF=function(e,t){return e^t};var i=function(){function e(e,t,r){this.primitive=e,this.size=t,this.generatorBase=r,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var i=1,o=0;o<this.size;o++)this.expTable[o]=i,(i*=2)>=this.size&&(i=(i^this.primitive)&this.size-1);for(o=0;o<this.size-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new n.default(this,Uint8ClampedArray.from([0])),this.one=new n.default(this,Uint8ClampedArray.from([1]))}return e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},e.prototype.inverse=function(e){if(0===e)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[e]-1]},e.prototype.buildMonomial=function(e,t){if(e<0)throw new Error("Invalid monomial degree less than 0");if(0===t)return this.zero;var r=new Uint8ClampedArray(e+1);return r[0]=t,new n.default(this,r)},e.prototype.log=function(e){if(0===e)throw new Error("Can't take log(0)");return this.logTable[e]},e.prototype.exp=function(e){return this.expTable[e]},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(e,t){if(0===t.length)throw new Error("No coefficients.");this.field=e;var r=t.length;if(r>1&&0===t[0]){for(var n=1;n<r&&0===t[n];)n++;if(n===r)this.coefficients=e.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(r-n);for(var i=0;i<this.coefficients.length;i++)this.coefficients[i]=t[n+i]}}else this.coefficients=t}return e.prototype.degree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.addOrSubtract=function(t){if(this.isZero())return t;if(t.isZero())return this;var r=this.coefficients,i=t.coefficients;r.length>i.length&&(r=(o=[i,r])[0],i=o[1]);for(var o,s=new Uint8ClampedArray(i.length),a=i.length-r.length,u=0;u<a;u++)s[u]=i[u];for(u=a;u<i.length;u++)s[u]=n.addOrSubtractGF(r[u-a],i[u]);return new e(this.field,s)},e.prototype.multiply=function(t){if(0===t)return this.field.zero;if(1===t)return this;for(var r=this.coefficients.length,n=new Uint8ClampedArray(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],t);return new e(this.field,n)},e.prototype.multiplyPoly=function(t){if(this.isZero()||t.isZero())return this.field.zero;for(var r=this.coefficients,i=r.length,o=t.coefficients,s=o.length,a=new Uint8ClampedArray(i+s-1),u=0;u<i;u++)for(var l=r[u],c=0;c<s;c++)a[u+c]=n.addOrSubtractGF(a[u+c],this.field.multiply(l,o[c]));return new e(this.field,a)},e.prototype.multiplyByMonomial=function(t,r){if(t<0)throw new Error("Invalid degree less than 0");if(0===r)return this.field.zero;for(var n=this.coefficients.length,i=new Uint8ClampedArray(n+t),o=0;o<n;o++)i[o]=this.field.multiply(this.coefficients[o],r);return new e(this.field,i)},e.prototype.evaluateAt=function(e){var t=0;if(0===e)return this.getCoefficient(0);var r=this.coefficients.length;if(1===e)return this.coefficients.forEach(function(e){t=n.addOrSubtractGF(t,e)}),t;t=this.coefficients[0];for(var i=1;i<r;i++)t=n.addOrSubtractGF(this.field.multiply(e,t),this.coefficients[i]);return t},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(5),o=r(11),s=r(12);function a(e){var t=s.locate(e);if(!t)return null;var r=o.extract(e,t),n=i.decode(r.matrix);return n?{binaryData:n.bytes,data:n.text,chunks:n.chunks,location:{topRightCorner:r.mappingFunction(t.dimension,0),topLeftCorner:r.mappingFunction(0,0),bottomRightCorner:r.mappingFunction(t.dimension,t.dimension),bottomLeftCorner:r.mappingFunction(0,t.dimension),topRightFinderPattern:t.topRight,topLeftFinderPattern:t.topLeft,bottomLeftFinderPattern:t.bottomLeft,bottomRightAlignmentPattern:t.alignmentPattern}}:null}function u(e,t,r){var i=n.binarize(e,t,r),o=a(i);return o||(o=a(i.getInverted())),o}u.default=u,t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=8,o=24;function s(e,t,r){return e<t?t:e>r?r:e}var a=function(){function e(e,t){this.width=e,this.data=new Uint8ClampedArray(e*t)}return e.prototype.get=function(e,t){return this.data[t*this.width+e]},e.prototype.set=function(e,t,r){this.data[t*this.width+e]=r},e}();t.binarize=function(e,t,r){if(e.length!==t*r*4)throw new Error("Malformed data passed to binarizer.");for(var u=new a(t,r),l=0;l<t;l++)for(var c=0;c<r;c++){var h=e[4*(c*t+l)+0],p=e[4*(c*t+l)+1],f=e[4*(c*t+l)+2];u.set(l,c,.2126*h+.7152*p+.0722*f)}for(var d=Math.ceil(t/i),m=Math.ceil(r/i),g=new a(d,m),v=0;v<m;v++)for(var y=0;y<d;y++){var b=0,x=1/0,_=0;for(c=0;c<i;c++)for(l=0;l<i;l++){var w=u.get(y*i+l,v*i+c);b+=w,x=Math.min(x,w),_=Math.max(_,w)}var k=b/Math.pow(i,2);if(_-x<=o&&(k=x/2,v>0&&y>0)){var T=(g.get(y,v-1)+2*g.get(y-1,v)+g.get(y-1,v-1))/4;x<T&&(k=T)}g.set(y,v,k)}var E=n.BitMatrix.createEmpty(t,r);for(v=0;v<m;v++)for(y=0;y<d;y++){for(var S=s(y,2,d-3),C=s(v,2,m-3),A=(b=0,-2);A<=2;A++)for(var B=-2;B<=2;B++)b+=g.get(S+A,C+B);var I=b/25;for(l=0;l<i;l++)for(c=0;c<i;c++){var P=u.get(y*i+l,v*i+c);E.set(y*i+l,v*i+c,P<=I)}}return E}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(6),o=r(9),s=r(10);function a(e,t){for(var r=e^t,n=0;r;)n++,r&=r-1;return n}function u(e,t){return t<<1|e}var l=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],c=[function(e){return(e.y+e.x)%2==0},function(e){return e.y%2==0},function(e){return e.x%3==0},function(e){return(e.y+e.x)%3==0},function(e){return(Math.floor(e.y/2)+Math.floor(e.x/3))%2==0},function(e){return e.x*e.y%2+e.x*e.y%3==0},function(e){return(e.y*e.x%2+e.y*e.x%3)%2==0},function(e){return((e.y+e.x)%2+e.y*e.x%3)%2==0}];function h(e,t,r){for(var i=c[r.dataMask],o=e.height,s=function(e){var t=17+4*e.versionNumber,r=n.BitMatrix.createEmpty(t,t);r.setRegion(0,0,9,9,!0),r.setRegion(t-8,0,8,9,!0),r.setRegion(0,t-8,9,8,!0);for(var i=0,o=e.alignmentPatternCenters;i<o.length;i++)for(var s=o[i],a=0,u=e.alignmentPatternCenters;a<u.length;a++){var l=u[a];6===s&&6===l||6===s&&l===t-7||s===t-7&&6===l||r.setRegion(s-2,l-2,5,5,!0)}return r.setRegion(6,9,1,t-17,!0),r.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(r.setRegion(t-11,0,3,6,!0),r.setRegion(0,t-11,6,3,!0)),r}(t),a=[],l=0,h=0,p=!0,f=o-1;f>0;f-=2){6===f&&f--;for(var d=0;d<o;d++)for(var m=p?o-1-d:d,g=0;g<2;g++){var v=f-g;if(!s.get(v,m)){h++;var y=e.get(v,m);i({y:m,x:v})&&(y=!y),l=u(y,l),8===h&&(a.push(l),h=0,l=0)}}p=!p}return a}function p(e){var t=function(e){var t=e.height,r=Math.floor((t-17)/4);if(r<=6)return s.VERSIONS[r-1];for(var n=0,i=5;i>=0;i--)for(var o=t-9;o>=t-11;o--)n=u(e.get(o,i),n);var l=0;for(o=5;o>=0;o--)for(i=t-9;i>=t-11;i--)l=u(e.get(o,i),l);for(var c,h=1/0,p=0,f=s.VERSIONS;p<f.length;p++){var d=f[p];if(d.infoBits===n||d.infoBits===l)return d;var m=a(n,d.infoBits);m<h&&(c=d,h=m),(m=a(l,d.infoBits))<h&&(c=d,h=m)}return h<=3?c:void 0}(e);if(!t)return null;var r=function(e){for(var t=0,r=0;r<=8;r++)6!==r&&(t=u(e.get(r,8),t));for(var n=7;n>=0;n--)6!==n&&(t=u(e.get(8,n),t));var i=e.height,o=0;for(n=i-1;n>=i-7;n--)o=u(e.get(8,n),o);for(r=i-8;r<i;r++)o=u(e.get(r,8),o);for(var s=1/0,c=null,h=0,p=l;h<p.length;h++){var f=p[h],d=f.bits,m=f.formatInfo;if(d===t||d===o)return m;var g=a(t,d);g<s&&(c=m,s=g),t!==o&&(g=a(o,d))<s&&(c=m,s=g)}return s<=3?c:null}(e);if(!r)return null;var n=function(e,t,r){var n=t.errorCorrectionLevels[r],i=[],o=0;if(n.ecBlocks.forEach(function(e){for(var t=0;t<e.numBlocks;t++)i.push({numDataCodewords:e.dataCodewordsPerBlock,codewords:[]}),o+=e.dataCodewordsPerBlock+n.ecCodewordsPerBlock}),e.length<o)return null;e=e.slice(0,o);for(var s=n.ecBlocks[0].dataCodewordsPerBlock,a=0;a<s;a++)for(var u=0,l=i;u<l.length;u++)l[u].codewords.push(e.shift());if(n.ecBlocks.length>1){var c=n.ecBlocks[0].numBlocks,h=n.ecBlocks[1].numBlocks;for(a=0;a<h;a++)i[c+a].codewords.push(e.shift())}for(;e.length>0;)for(var p=0,f=i;p<f.length;p++)f[p].codewords.push(e.shift());return i}(h(e,t,r),t,r.errorCorrectionLevel);if(!n)return null;for(var c=n.reduce(function(e,t){return e+t.numDataCodewords},0),p=new Uint8ClampedArray(c),f=0,d=0,m=n;d<m.length;d++){var g=m[d],v=o.decode(g.codewords,g.codewords.length-g.numDataCodewords);if(!v)return null;for(var y=0;y<g.numDataCodewords;y++)p[f++]=v[y]}try{return i.decode(p,t.versionNumber)}catch(e){return null}}t.decode=function(e){if(null==e)return null;var t=p(e);if(t)return t;for(var r=0;r<e.width;r++)for(var n=r+1;n<e.height;n++)e.get(r,n)!==e.get(n,r)&&(e.set(r,n,!e.get(r,n)),e.set(n,r,!e.get(n,r)));return p(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o=r(7),s=r(8);function a(e,t){for(var r=[],n="",i=[10,12,14][t],o=e.readBits(i);o>=3;){if((l=e.readBits(10))>=1e3)throw new Error("Invalid numeric value above 999");var s=Math.floor(l/100),a=Math.floor(l/10)%10,u=l%10;r.push(48+s,48+a,48+u),n+=s.toString()+a.toString()+u.toString(),o-=3}if(2===o){if((l=e.readBits(7))>=100)throw new Error("Invalid numeric value above 99");s=Math.floor(l/10),a=l%10;r.push(48+s,48+a),n+=s.toString()+a.toString()}else if(1===o){var l;if((l=e.readBits(4))>=10)throw new Error("Invalid numeric value above 9");r.push(48+l),n+=l.toString()}return{bytes:r,text:n}}!function(e){e.Numeric="numeric",e.Alphanumeric="alphanumeric",e.Byte="byte",e.Kanji="kanji",e.ECI="eci"}(n=t.Mode||(t.Mode={})),function(e){e[e.Terminator=0]="Terminator",e[e.Numeric=1]="Numeric",e[e.Alphanumeric=2]="Alphanumeric",e[e.Byte=4]="Byte",e[e.Kanji=8]="Kanji",e[e.ECI=7]="ECI"}(i||(i={}));var u=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function l(e,t){for(var r=[],n="",i=[9,11,13][t],o=e.readBits(i);o>=2;){var s=e.readBits(11),a=Math.floor(s/45),l=s%45;r.push(u[a].charCodeAt(0),u[l].charCodeAt(0)),n+=u[a]+u[l],o-=2}if(1===o){a=e.readBits(6);r.push(u[a].charCodeAt(0)),n+=u[a]}return{bytes:r,text:n}}function c(e,t){for(var r=[],n="",i=[8,16,16][t],o=e.readBits(i),s=0;s<o;s++){var a=e.readBits(8);r.push(a)}try{n+=decodeURIComponent(r.map(function(e){return"%"+("0"+e.toString(16)).substr(-2)}).join(""))}catch(e){}return{bytes:r,text:n}}function h(e,t){for(var r=[],n="",i=[8,10,12][t],o=e.readBits(i),a=0;a<o;a++){var u=e.readBits(13),l=Math.floor(u/192)<<8|u%192;l+=l<7936?33088:49472,r.push(l>>8,255&l),n+=String.fromCharCode(s.shiftJISTable[l])}return{bytes:r,text:n}}t.decode=function(e,t){for(var r,s,u,p,f=new o.BitStream(e),d=t<=9?0:t<=26?1:2,m={text:"",bytes:[],chunks:[]};f.available()>=4;){var g=f.readBits(4);if(g===i.Terminator)return m;if(g===i.ECI)0===f.readBits(1)?m.chunks.push({type:n.ECI,assignmentNumber:f.readBits(7)}):0===f.readBits(1)?m.chunks.push({type:n.ECI,assignmentNumber:f.readBits(14)}):0===f.readBits(1)?m.chunks.push({type:n.ECI,assignmentNumber:f.readBits(21)}):m.chunks.push({type:n.ECI,assignmentNumber:-1});else if(g===i.Numeric){var v=a(f,d);m.text+=v.text,(r=m.bytes).push.apply(r,v.bytes),m.chunks.push({type:n.Numeric,text:v.text})}else if(g===i.Alphanumeric){var y=l(f,d);m.text+=y.text,(s=m.bytes).push.apply(s,y.bytes),m.chunks.push({type:n.Alphanumeric,text:y.text})}else if(g===i.Byte){var b=c(f,d);m.text+=b.text,(u=m.bytes).push.apply(u,b.bytes),m.chunks.push({type:n.Byte,bytes:b.bytes,text:b.text})}else if(g===i.Kanji){var x=h(f,d);m.text+=x.text,(p=m.bytes).push.apply(p,x.bytes),m.chunks.push({type:n.Kanji,bytes:x.bytes,text:x.text})}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.byteOffset=0,this.bitOffset=0,this.bytes=e}return e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Error("Cannot read "+e.toString()+" bits");var t=0;if(this.bitOffset>0){var r=8-this.bitOffset,n=e<r?e:r,i=255>>8-n<<(o=r-n);t=(this.bytes[this.byteOffset]&i)>>o,e-=n,this.bitOffset+=n,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(e>0){for(;e>=8;)t=t<<8|255&this.bytes[this.byteOffset],this.byteOffset++,e-=8;if(e>0){var o;i=255>>(o=8-e)<<o;t=t<<e|(this.bytes[this.byteOffset]&i)>>o,this.bitOffset+=e}}return t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();t.BitStream=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35000:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36000:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37000:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38000:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39000:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,40000:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58000:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59000:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,60000:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(2);t.decode=function(e,t){var r=new Uint8ClampedArray(e.length);r.set(e);for(var o=new n.default(285,256,0),s=new i.default(o,r),a=new Uint8ClampedArray(t),u=!1,l=0;l<t;l++){var c=s.evaluateAt(o.exp(l+o.generatorBase));a[a.length-1-l]=c,0!==c&&(u=!0)}if(!u)return r;var h=new i.default(o,a),p=function(e,t,r,n){t.degree()<r.degree()&&(t=(g=[r,t])[0],r=g[1]);for(var i=t,o=r,s=e.zero,a=e.one;o.degree()>=n/2;){var u=i,l=s;if(s=a,(i=o).isZero())return null;o=u;for(var c=e.zero,h=i.getCoefficient(i.degree()),p=e.inverse(h);o.degree()>=i.degree()&&!o.isZero();){var f=o.degree()-i.degree(),d=e.multiply(o.getCoefficient(o.degree()),p);c=c.addOrSubtract(e.buildMonomial(f,d)),o=o.addOrSubtract(i.multiplyByMonomial(f,d))}if(a=c.multiplyPoly(s).addOrSubtract(l),o.degree()>=i.degree())return null}var m=a.getCoefficient(0);if(0===m)return null;var g,v=e.inverse(m);return[a.multiply(v),o.multiply(v)]}(o,o.buildMonomial(t,1),h,t);if(null===p)return null;var f=function(e,t){var r=t.degree();if(1===r)return[t.getCoefficient(1)];for(var n=new Array(r),i=0,o=1;o<e.size&&i<r;o++)0===t.evaluateAt(o)&&(n[i]=e.inverse(o),i++);return i!==r?null:n}(o,p[0]);if(null==f)return null;for(var d=function(e,t,r){for(var i=r.length,o=new Array(i),s=0;s<i;s++){for(var a=e.inverse(r[s]),u=1,l=0;l<i;l++)s!==l&&(u=e.multiply(u,n.addOrSubtractGF(1,e.multiply(r[l],a))));o[s]=e.multiply(t.evaluateAt(a),e.inverse(u)),0!==e.generatorBase&&(o[s]=e.multiply(o[s],a))}return o}(o,p[1],f),m=0;m<f.length;m++){var g=r.length-1-o.log(f[m]);if(g<0)return null;r[g]=n.addOrSubtractGF(r[g],d[m])}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);function i(e,t,r,n){var i=e.x-t.x+r.x-n.x,o=e.y-t.y+r.y-n.y;if(0===i&&0===o)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:r.x-t.x,a22:r.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};var s=t.x-r.x,a=n.x-r.x,u=t.y-r.y,l=n.y-r.y,c=s*l-a*u,h=(i*l-a*o)/c,p=(s*o-i*u)/c;return{a11:t.x-e.x+h*t.x,a12:t.y-e.y+h*t.y,a13:h,a21:n.x-e.x+p*n.x,a22:n.y-e.y+p*n.y,a23:p,a31:e.x,a32:e.y,a33:1}}t.extract=function(e,t){for(var r,o,s=function(e,t,r,n){var o=i(e,t,r,n);return{a11:o.a22*o.a33-o.a23*o.a32,a12:o.a13*o.a32-o.a12*o.a33,a13:o.a12*o.a23-o.a13*o.a22,a21:o.a23*o.a31-o.a21*o.a33,a22:o.a11*o.a33-o.a13*o.a31,a23:o.a13*o.a21-o.a11*o.a23,a31:o.a21*o.a32-o.a22*o.a31,a32:o.a12*o.a31-o.a11*o.a32,a33:o.a11*o.a22-o.a12*o.a21}}({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),a=i(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft),u=(o=s,{a11:(r=a).a11*o.a11+r.a21*o.a12+r.a31*o.a13,a12:r.a12*o.a11+r.a22*o.a12+r.a32*o.a13,a13:r.a13*o.a11+r.a23*o.a12+r.a33*o.a13,a21:r.a11*o.a21+r.a21*o.a22+r.a31*o.a23,a22:r.a12*o.a21+r.a22*o.a22+r.a32*o.a23,a23:r.a13*o.a21+r.a23*o.a22+r.a33*o.a23,a31:r.a11*o.a31+r.a21*o.a32+r.a31*o.a33,a32:r.a12*o.a31+r.a22*o.a32+r.a32*o.a33,a33:r.a13*o.a31+r.a23*o.a32+r.a33*o.a33}),l=n.BitMatrix.createEmpty(t.dimension,t.dimension),c=function(e,t){var r=u.a13*e+u.a23*t+u.a33;return{x:(u.a11*e+u.a21*t+u.a31)/r,y:(u.a12*e+u.a22*t+u.a32)/r}},h=0;h<t.dimension;h++)for(var p=0;p<t.dimension;p++){var f=c(p+.5,h+.5);l.set(p,h,e.get(Math.floor(f.x),Math.floor(f.y)))}return{matrix:l,mappingFunction:c}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=4,i=.5,o=1.5,s=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function a(e){return e.reduce(function(e,t){return e+t})}function u(e,t,r,n){var i,o,a,u,l=[{x:Math.floor(e.x),y:Math.floor(e.y)}],c=Math.abs(t.y-e.y)>Math.abs(t.x-e.x);c?(i=Math.floor(e.y),o=Math.floor(e.x),a=Math.floor(t.y),u=Math.floor(t.x)):(i=Math.floor(e.x),o=Math.floor(e.y),a=Math.floor(t.x),u=Math.floor(t.y));for(var h=Math.abs(a-i),p=Math.abs(u-o),f=Math.floor(-h/2),d=i<a?1:-1,m=o<u?1:-1,g=!0,v=i,y=o;v!==a+d;v+=d){var b=c?y:v,x=c?v:y;if(r.get(b,x)!==g&&(g=!g,l.push({x:b,y:x}),l.length===n+1))break;if((f+=p)>0){if(y===u)break;y+=m,f-=h}}for(var _=[],w=0;w<n;w++)l[w]&&l[w+1]?_.push(s(l[w],l[w+1])):_.push(0);return _}function l(e,t,r,n){var i,o=t.y-e.y,s=t.x-e.x,a=u(e,t,r,Math.ceil(n/2)),l=u(e,{x:e.x-s,y:e.y-o},r,Math.ceil(n/2)),c=a.shift()+l.shift()-1;return(i=l.concat(c)).concat.apply(i,a)}function c(e,t){var r=a(e)/a(t),n=0;return t.forEach(function(t,i){n+=Math.pow(e[i]-t*r,2)}),{averageSize:r,error:n}}function h(e,t,r){try{var n=l(e,{x:-1,y:e.y},r,t.length),i=l(e,{x:e.x,y:-1},r,t.length),o=l(e,{x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},r,t.length),s=l(e,{x:Math.min(r.width,e.x+e.y)+1,y:Math.min(r.height,e.y+e.x)+1},r,t.length),a=c(n,t),u=c(i,t),h=c(o,t),p=c(s,t),f=Math.sqrt(a.error*a.error+u.error*u.error+h.error*h.error+p.error*p.error),d=(a.averageSize+u.averageSize+h.averageSize+p.averageSize)/4;return f+(Math.pow(a.averageSize-d,2)+Math.pow(u.averageSize-d,2)+Math.pow(h.averageSize-d,2)+Math.pow(p.averageSize-d,2))/d}catch(e){return 1/0}}t.locate=function(e){for(var t=[],r=[],u=[],c=[],p=function(n){for(var s=0,l=!1,h=[0,0,0,0,0],p=function(t){var u=e.get(t,n);if(u===l)s++;else{h=[h[1],h[2],h[3],h[4],s],s=1,l=u;var p=a(h)/7,f=Math.abs(h[0]-p)<p&&Math.abs(h[1]-p)<p&&Math.abs(h[2]-3*p)<3*p&&Math.abs(h[3]-p)<p&&Math.abs(h[4]-p)<p&&!u,d=a(h.slice(-3))/3,m=Math.abs(h[2]-d)<d&&Math.abs(h[3]-d)<d&&Math.abs(h[4]-d)<d&&u;if(f){var g=t-h[3]-h[4],v=g-h[2],y={startX:v,endX:g,y:n};(b=r.filter(function(e){return v>=e.bottom.startX&&v<=e.bottom.endX||g>=e.bottom.startX&&v<=e.bottom.endX||v<=e.bottom.startX&&g>=e.bottom.endX&&h[2]/(e.bottom.endX-e.bottom.startX)<o&&h[2]/(e.bottom.endX-e.bottom.startX)>i})).length>0?b[0].bottom=y:r.push({top:y,bottom:y})}if(m){var b,x=t-h[4],_=x-h[3];y={startX:_,y:n,endX:x},(b=c.filter(function(e){return _>=e.bottom.startX&&_<=e.bottom.endX||x>=e.bottom.startX&&_<=e.bottom.endX||_<=e.bottom.startX&&x>=e.bottom.endX&&h[2]/(e.bottom.endX-e.bottom.startX)<o&&h[2]/(e.bottom.endX-e.bottom.startX)>i})).length>0?b[0].bottom=y:c.push({top:y,bottom:y})}}},f=-1;f<=e.width;f++)p(f);t.push.apply(t,r.filter(function(e){return e.bottom.y!==n&&e.bottom.y-e.top.y>=2})),r=r.filter(function(e){return e.bottom.y===n}),u.push.apply(u,c.filter(function(e){return e.bottom.y!==n})),c=c.filter(function(e){return e.bottom.y===n})},f=0;f<=e.height;f++)p(f);t.push.apply(t,r.filter(function(e){return e.bottom.y-e.top.y>=2})),u.push.apply(u,c);var d=t.filter(function(e){return e.bottom.y-e.top.y>=2}).map(function(t){var r=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,n=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.round(r),Math.round(n))){var i=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1],o=a(i)/i.length;return{score:h({x:Math.round(r),y:Math.round(n)},[1,1,3,1,1],e),x:r,y:n,size:o}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score}).map(function(e,t,r){if(t>n)return null;var i=r.filter(function(e,r){return t!==r}).map(function(t){return{x:t.x,y:t.y,score:t.score+Math.pow(t.size-e.size,2)/e.size,size:t.size}}).sort(function(e,t){return e.score-t.score});if(i.length<2)return null;var o=e.score+i[0].score+i[1].score;return{points:[e].concat(i.slice(0,2)),score:o}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});if(0===d.length)return null;var m,g,v=function(e,t,r){var n,i,o,a,u,l,c,h=s(e,t),p=s(t,r),f=s(e,r);return p>=h&&p>=f?(n=(a=[t,e,r])[0],i=a[1],o=a[2]):f>=p&&f>=h?(n=(u=[e,t,r])[0],i=u[1],o=u[2]):(n=(l=[e,r,t])[0],i=l[1],o=l[2]),(o.x-i.x)*(n.y-i.y)-(o.y-i.y)*(n.x-i.x)<0&&(n=(c=[o,n])[0],o=c[1]),{bottomLeft:n,topLeft:i,topRight:o}}(d[0].points[0],d[0].points[1],d[0].points[2]),y=v.topRight,b=v.topLeft,x=v.bottomLeft;try{_=function(e,t,r,n){var i=(a(l(e,r,n,5))/7+a(l(e,t,n,5))/7+a(l(r,e,n,5))/7+a(l(t,e,n,5))/7)/4;if(i<1)throw new Error("Invalid module size");var o=Math.round(s(e,t)/i),u=Math.round(s(e,r)/i),c=Math.floor((o+u)/2)+7;switch(c%4){case 0:c++;break;case 2:c--}return{dimension:c,moduleSize:i}}(b,y,x,e),m=_.dimension,g=_.moduleSize}catch(e){return null}var _,w=y.x-b.x+x.x,k=y.y-b.y+x.y,T=(s(b,x)+s(b,y))/2/g,E=1-3/T,S={x:b.x+E*(w-b.x),y:b.y+E*(k-b.y)},C=u.map(function(t){var r=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,n=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.floor(r),Math.floor(n))){var i=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1];return a(i),{x:r,y:n,score:h({x:Math.floor(r),y:Math.floor(n)},[1,1,1],e)+s({x:r,y:n},S)}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score}),A=T>=15&&C.length?C[0]:S;return{alignmentPattern:{x:A.x,y:A.y},bottomLeft:{x:x.x,y:x.y},dimension:m,topLeft:{x:b.x,y:b.y},topRight:{x:y.x,y:y.y}}}}]).default},"object"==typeof r&&"object"==typeof t?t.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof r?r.jsQR=i():n.jsQR=i()},{}],162:[function(e,t,r){(function(e){(function(){var n,i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="__lodash_hash_undefined__",u=500,l="__lodash_placeholder__",c=1,h=2,p=4,f=1,d=2,m=1,g=2,v=4,y=8,b=16,x=32,_=64,w=128,k=256,T=512,E=30,S="...",C=800,A=16,B=1,I=2,P=1/0,R=9007199254740991,M=1.7976931348623157e308,F=NaN,D=4294967295,L=D-1,O=D>>>1,j=[["ary",w],["bind",m],["bindKey",g],["curry",y],["curryRight",b],["flip",T],["partial",x],["partialRight",_],["rearg",k]],N="[object Arguments]",U="[object Array]",z="[object AsyncFunction]",$="[object Boolean]",V="[object Date]",G="[object DOMException]",K="[object Error]",q="[object Function]",W="[object GeneratorFunction]",X="[object Map]",H="[object Number]",Y="[object Null]",Z="[object Object]",J="[object Proxy]",Q="[object RegExp]",ee="[object Set]",te="[object String]",re="[object Symbol]",ne="[object Undefined]",ie="[object WeakMap]",oe="[object WeakSet]",se="[object ArrayBuffer]",ae="[object DataView]",ue="[object Float32Array]",le="[object Float64Array]",ce="[object Int8Array]",he="[object Int16Array]",pe="[object Int32Array]",fe="[object Uint8Array]",de="[object Uint8ClampedArray]",me="[object Uint16Array]",ge="[object Uint32Array]",ve=/\b__p \+= '';/g,ye=/\b(__p \+=) '' \+/g,be=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xe=/&(?:amp|lt|gt|quot|#39);/g,_e=/[&<>"']/g,we=RegExp(xe.source),ke=RegExp(_e.source),Te=/<%-([\s\S]+?)%>/g,Ee=/<%([\s\S]+?)%>/g,Se=/<%=([\s\S]+?)%>/g,Ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,Be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ie=/[\\^$.*+?()[\]{}|]/g,Pe=RegExp(Ie.source),Re=/^\s+|\s+$/g,Me=/^\s+/,Fe=/\s+$/,De=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Le=/\{\n\/\* \[wrapped with (.+)\] \*/,Oe=/,? & /,je=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ne=/\\(\\)?/g,Ue=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ze=/\w*$/,$e=/^[-+]0x[0-9a-f]+$/i,Ve=/^0b[01]+$/i,Ge=/^\[object .+?Constructor\]$/,Ke=/^0o[0-7]+$/i,qe=/^(?:0|[1-9]\d*)$/,We=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xe=/($^)/,He=/['\n\r\u2028\u2029\\]/g,Ye="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ze="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Je="[\\ud800-\\udfff]",Qe="["+Ze+"]",et="["+Ye+"]",tt="\\d+",rt="[\\u2700-\\u27bf]",nt="[a-z\\xdf-\\xf6\\xf8-\\xff]",it="[^\\ud800-\\udfff"+Ze+tt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ot="\\ud83c[\\udffb-\\udfff]",st="[^\\ud800-\\udfff]",at="(?:\\ud83c[\\udde6-\\uddff]){2}",ut="[\\ud800-\\udbff][\\udc00-\\udfff]",lt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ct="(?:"+nt+"|"+it+")",ht="(?:"+lt+"|"+it+")",pt="(?:"+et+"|"+ot+")"+"?",ft="[\\ufe0e\\ufe0f]?"+pt+("(?:\\u200d(?:"+[st,at,ut].join("|")+")[\\ufe0e\\ufe0f]?"+pt+")*"),dt="(?:"+[rt,at,ut].join("|")+")"+ft,mt="(?:"+[st+et+"?",et,at,ut,Je].join("|")+")",gt=RegExp("['’]","g"),vt=RegExp(et,"g"),yt=RegExp(ot+"(?="+ot+")|"+mt+ft,"g"),bt=RegExp([lt+"?"+nt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Qe,lt,"$"].join("|")+")",ht+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Qe,lt+ct,"$"].join("|")+")",lt+"?"+ct+"+(?:['’](?:d|ll|m|re|s|t|ve))?",lt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tt,dt].join("|"),"g"),xt=RegExp("[\\u200d\\ud800-\\udfff"+Ye+"\\ufe0e\\ufe0f]"),_t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],kt=-1,Tt={};Tt[ue]=Tt[le]=Tt[ce]=Tt[he]=Tt[pe]=Tt[fe]=Tt[de]=Tt[me]=Tt[ge]=!0,Tt[N]=Tt[U]=Tt[se]=Tt[$]=Tt[ae]=Tt[V]=Tt[K]=Tt[q]=Tt[X]=Tt[H]=Tt[Z]=Tt[Q]=Tt[ee]=Tt[te]=Tt[ie]=!1;var Et={};Et[N]=Et[U]=Et[se]=Et[ae]=Et[$]=Et[V]=Et[ue]=Et[le]=Et[ce]=Et[he]=Et[pe]=Et[X]=Et[H]=Et[Z]=Et[Q]=Et[ee]=Et[te]=Et[re]=Et[fe]=Et[de]=Et[me]=Et[ge]=!0,Et[K]=Et[q]=Et[ie]=!1;var St={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ct=parseFloat,At=parseInt,Bt="object"==typeof e&&e&&e.Object===Object&&e,It="object"==typeof self&&self&&self.Object===Object&&self,Pt=Bt||It||Function("return this")(),Rt="object"==typeof r&&r&&!r.nodeType&&r,Mt=Rt&&"object"==typeof t&&t&&!t.nodeType&&t,Ft=Mt&&Mt.exports===Rt,Dt=Ft&&Bt.process,Lt=function(){try{var e=Mt&&Mt.require&&Mt.require("util").types;return e||Dt&&Dt.binding&&Dt.binding("util")}catch(e){}}(),Ot=Lt&&Lt.isArrayBuffer,jt=Lt&&Lt.isDate,Nt=Lt&&Lt.isMap,Ut=Lt&&Lt.isRegExp,zt=Lt&&Lt.isSet,$t=Lt&&Lt.isTypedArray;function Vt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Gt(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(n,s,r(s),e)}return n}function Kt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function qt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Wt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Xt(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}function Ht(e,t){return!!(null==e?0:e.length)&&or(e,t,0)>-1}function Yt(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function Zt(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Jt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Qt(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function er(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function tr(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var rr=lr("length");function nr(e,t,r){var n;return r(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n}function ir(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function or(e,t,r){return t==t?function(e,t,r){var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):ir(e,ar,r)}function sr(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}function ar(e){return e!=e}function ur(e,t){var r=null==e?0:e.length;return r?pr(e,t)/r:F}function lr(e){return function(t){return null==t?n:t[e]}}function cr(e){return function(t){return null==e?n:e[t]}}function hr(e,t,r,n,i){return i(e,function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)}),r}function pr(e,t){for(var r,i=-1,o=e.length;++i<o;){var s=t(e[i]);s!==n&&(r=r===n?s:r+s)}return r}function fr(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function dr(e){return function(t){return e(t)}}function mr(e,t){return Zt(t,function(t){return e[t]})}function gr(e,t){return e.has(t)}function vr(e,t){for(var r=-1,n=e.length;++r<n&&or(t,e[r],0)>-1;);return r}function yr(e,t){for(var r=e.length;r--&&or(t,e[r],0)>-1;);return r}var br=cr({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),xr=cr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function _r(e){return"\\"+St[e]}function wr(e){return xt.test(e)}function kr(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function Tr(e,t){return function(r){return e(t(r))}}function Er(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r];s!==t&&s!==l||(e[r]=l,o[i++]=r)}return o}function Sr(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function Cr(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function Ar(e){return wr(e)?function(e){var t=yt.lastIndex=0;for(;yt.test(e);)++t;return t}(e):rr(e)}function Br(e){return wr(e)?function(e){return e.match(yt)||[]}(e):function(e){return e.split("")}(e)}var Ir=cr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Pr=function e(t){var r,Ye=(t=null==t?Pt:Pr.defaults(Pt.Object(),t,Pr.pick(Pt,wt))).Array,Ze=t.Date,Je=t.Error,Qe=t.Function,et=t.Math,tt=t.Object,rt=t.RegExp,nt=t.String,it=t.TypeError,ot=Ye.prototype,st=Qe.prototype,at=tt.prototype,ut=t["__core-js_shared__"],lt=st.toString,ct=at.hasOwnProperty,ht=0,pt=(r=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",ft=at.toString,dt=lt.call(tt),mt=Pt._,yt=rt("^"+lt.call(ct).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xt=Ft?t.Buffer:n,St=t.Symbol,Bt=t.Uint8Array,It=xt?xt.allocUnsafe:n,Rt=Tr(tt.getPrototypeOf,tt),Mt=tt.create,Dt=at.propertyIsEnumerable,Lt=ot.splice,rr=St?St.isConcatSpreadable:n,cr=St?St.iterator:n,Rr=St?St.toStringTag:n,Mr=function(){try{var e=No(tt,"defineProperty");return e({},"",{}),e}catch(e){}}(),Fr=t.clearTimeout!==Pt.clearTimeout&&t.clearTimeout,Dr=Ze&&Ze.now!==Pt.Date.now&&Ze.now,Lr=t.setTimeout!==Pt.setTimeout&&t.setTimeout,Or=et.ceil,jr=et.floor,Nr=tt.getOwnPropertySymbols,Ur=xt?xt.isBuffer:n,zr=t.isFinite,$r=ot.join,Vr=Tr(tt.keys,tt),Gr=et.max,Kr=et.min,qr=Ze.now,Wr=t.parseInt,Xr=et.random,Hr=ot.reverse,Yr=No(t,"DataView"),Zr=No(t,"Map"),Jr=No(t,"Promise"),Qr=No(t,"Set"),en=No(t,"WeakMap"),tn=No(tt,"create"),rn=en&&new en,nn={},on=hs(Yr),sn=hs(Zr),an=hs(Jr),un=hs(Qr),ln=hs(en),cn=St?St.prototype:n,hn=cn?cn.valueOf:n,pn=cn?cn.toString:n;function fn(e){if(Aa(e)&&!va(e)&&!(e instanceof vn)){if(e instanceof gn)return e;if(ct.call(e,"__wrapped__"))return ps(e)}return new gn(e)}var dn=function(){function e(){}return function(t){if(!Ca(t))return{};if(Mt)return Mt(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function mn(){}function gn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function vn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=D,this.__views__=[]}function yn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function bn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function xn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function _n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new xn;++t<r;)this.add(e[t])}function wn(e){var t=this.__data__=new bn(e);this.size=t.size}function kn(e,t){var r=va(e),n=!r&&ga(e),i=!r&&!n&&_a(e),o=!r&&!n&&!i&&La(e),s=r||n||i||o,a=s?fr(e.length,nt):[],u=a.length;for(var l in e)!t&&!ct.call(e,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||qo(l,u))||a.push(l);return a}function Tn(e){var t=e.length;return t?e[_i(0,t-1)]:n}function En(e,t){return us(ro(e),Fn(t,0,e.length))}function Sn(e){return us(ro(e))}function Cn(e,t,r){(r===n||fa(e[t],r))&&(r!==n||t in e)||Rn(e,t,r)}function An(e,t,r){var i=e[t];ct.call(e,t)&&fa(i,r)&&(r!==n||t in e)||Rn(e,t,r)}function Bn(e,t){for(var r=e.length;r--;)if(fa(e[r][0],t))return r;return-1}function In(e,t,r,n){return Nn(e,function(e,i,o){t(n,e,r(e),o)}),n}function Pn(e,t){return e&&no(t,iu(t),e)}function Rn(e,t,r){"__proto__"==t&&Mr?Mr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Mn(e,t){for(var r=-1,i=t.length,o=Ye(i),s=null==e;++r<i;)o[r]=s?n:Qa(e,t[r]);return o}function Fn(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function Dn(e,t,r,i,o,s){var a,u=t&c,l=t&h,f=t&p;if(r&&(a=o?r(e,i,o,s):r(e)),a!==n)return a;if(!Ca(e))return e;var d=va(e);if(d){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&ct.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!u)return ro(e,a)}else{var m=$o(e),g=m==q||m==W;if(_a(e))return Yi(e,u);if(m==Z||m==N||g&&!o){if(a=l||g?{}:Go(e),!u)return l?function(e,t){return no(e,zo(e),t)}(e,function(e,t){return e&&no(t,ou(t),e)}(a,e)):function(e,t){return no(e,Uo(e),t)}(e,Pn(a,e))}else{if(!Et[m])return o?e:{};a=function(e,t,r){var n,i,o,s=e.constructor;switch(t){case se:return Zi(e);case $:case V:return new s(+e);case ae:return function(e,t){var r=t?Zi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case ue:case le:case ce:case he:case pe:case fe:case de:case me:case ge:return Ji(e,r);case X:return new s;case H:case te:return new s(e);case Q:return(o=new(i=e).constructor(i.source,ze.exec(i))).lastIndex=i.lastIndex,o;case ee:return new s;case re:return n=e,hn?tt(hn.call(n)):{}}}(e,m,u)}}s||(s=new wn);var v=s.get(e);if(v)return v;if(s.set(e,a),Ma(e))return e.forEach(function(n){a.add(Dn(n,t,r,n,e,s))}),a;if(Ba(e))return e.forEach(function(n,i){a.set(i,Dn(n,t,r,i,e,s))}),a;var y=d?n:(f?l?Ro:Po:l?ou:iu)(e);return Kt(y||e,function(n,i){y&&(n=e[i=n]),An(a,i,Dn(n,t,r,i,e,s))}),a}function Ln(e,t,r){var i=r.length;if(null==e)return!i;for(e=tt(e);i--;){var o=r[i],s=t[o],a=e[o];if(a===n&&!(o in e)||!s(a))return!1}return!0}function On(e,t,r){if("function"!=typeof e)throw new it(s);return is(function(){e.apply(n,r)},t)}function jn(e,t,r,n){var o=-1,s=Ht,a=!0,u=e.length,l=[],c=t.length;if(!u)return l;r&&(t=Zt(t,dr(r))),n?(s=Yt,a=!1):t.length>=i&&(s=gr,a=!1,t=new _n(t));e:for(;++o<u;){var h=e[o],p=null==r?h:r(h);if(h=n||0!==h?h:0,a&&p==p){for(var f=c;f--;)if(t[f]===p)continue e;l.push(h)}else s(t,p,n)||l.push(h)}return l}fn.templateSettings={escape:Te,evaluate:Ee,interpolate:Se,variable:"",imports:{_:fn}},fn.prototype=mn.prototype,fn.prototype.constructor=fn,gn.prototype=dn(mn.prototype),gn.prototype.constructor=gn,vn.prototype=dn(mn.prototype),vn.prototype.constructor=vn,yn.prototype.clear=function(){this.__data__=tn?tn(null):{},this.size=0},yn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},yn.prototype.get=function(e){var t=this.__data__;if(tn){var r=t[e];return r===a?n:r}return ct.call(t,e)?t[e]:n},yn.prototype.has=function(e){var t=this.__data__;return tn?t[e]!==n:ct.call(t,e)},yn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=tn&&t===n?a:t,this},bn.prototype.clear=function(){this.__data__=[],this.size=0},bn.prototype.delete=function(e){var t=this.__data__,r=Bn(t,e);return!(r<0||(r==t.length-1?t.pop():Lt.call(t,r,1),--this.size,0))},bn.prototype.get=function(e){var t=this.__data__,r=Bn(t,e);return r<0?n:t[r][1]},bn.prototype.has=function(e){return Bn(this.__data__,e)>-1},bn.prototype.set=function(e,t){var r=this.__data__,n=Bn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},xn.prototype.clear=function(){this.size=0,this.__data__={hash:new yn,map:new(Zr||bn),string:new yn}},xn.prototype.delete=function(e){var t=Oo(this,e).delete(e);return this.size-=t?1:0,t},xn.prototype.get=function(e){return Oo(this,e).get(e)},xn.prototype.has=function(e){return Oo(this,e).has(e)},xn.prototype.set=function(e,t){var r=Oo(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},_n.prototype.add=_n.prototype.push=function(e){return this.__data__.set(e,a),this},_n.prototype.has=function(e){return this.__data__.has(e)},wn.prototype.clear=function(){this.__data__=new bn,this.size=0},wn.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},wn.prototype.get=function(e){return this.__data__.get(e)},wn.prototype.has=function(e){return this.__data__.has(e)},wn.prototype.set=function(e,t){var r=this.__data__;if(r instanceof bn){var n=r.__data__;if(!Zr||n.length<i-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new xn(n)}return r.set(e,t),this.size=r.size,this};var Nn=so(Wn),Un=so(Xn,!0);function zn(e,t){var r=!0;return Nn(e,function(e,n,i){return r=!!t(e,n,i)}),r}function $n(e,t,r){for(var i=-1,o=e.length;++i<o;){var s=e[i],a=t(s);if(null!=a&&(u===n?a==a&&!Da(a):r(a,u)))var u=a,l=s}return l}function Vn(e,t){var r=[];return Nn(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function Gn(e,t,r,n,i){var o=-1,s=e.length;for(r||(r=Ko),i||(i=[]);++o<s;){var a=e[o];t>0&&r(a)?t>1?Gn(a,t-1,r,n,i):Jt(i,a):n||(i[i.length]=a)}return i}var Kn=ao(),qn=ao(!0);function Wn(e,t){return e&&Kn(e,t,iu)}function Xn(e,t){return e&&qn(e,t,iu)}function Hn(e,t){return Xt(t,function(t){return Ta(e[t])})}function Yn(e,t){for(var r=0,i=(t=qi(t,e)).length;null!=e&&r<i;)e=e[cs(t[r++])];return r&&r==i?e:n}function Zn(e,t,r){var n=t(e);return va(e)?n:Jt(n,r(e))}function Jn(e){return null==e?e===n?ne:Y:Rr&&Rr in tt(e)?function(e){var t=ct.call(e,Rr),r=e[Rr];try{e[Rr]=n;var i=!0}catch(e){}var o=ft.call(e);return i&&(t?e[Rr]=r:delete e[Rr]),o}(e):function(e){return ft.call(e)}(e)}function Qn(e,t){return e>t}function ei(e,t){return null!=e&&ct.call(e,t)}function ti(e,t){return null!=e&&t in tt(e)}function ri(e,t,r){for(var i=r?Yt:Ht,o=e[0].length,s=e.length,a=s,u=Ye(s),l=1/0,c=[];a--;){var h=e[a];a&&t&&(h=Zt(h,dr(t))),l=Kr(h.length,l),u[a]=!r&&(t||o>=120&&h.length>=120)?new _n(a&&h):n}h=e[0];var p=-1,f=u[0];e:for(;++p<o&&c.length<l;){var d=h[p],m=t?t(d):d;if(d=r||0!==d?d:0,!(f?gr(f,m):i(c,m,r))){for(a=s;--a;){var g=u[a];if(!(g?gr(g,m):i(e[a],m,r)))continue e}f&&f.push(m),c.push(d)}}return c}function ni(e,t,r){var i=null==(e=ts(e,t=qi(t,e)))?e:e[cs(ks(t))];return null==i?n:Vt(i,e,r)}function ii(e){return Aa(e)&&Jn(e)==N}function oi(e,t,r,i,o){return e===t||(null==e||null==t||!Aa(e)&&!Aa(t)?e!=e&&t!=t:function(e,t,r,i,o,s){var a=va(e),u=va(t),l=a?U:$o(e),c=u?U:$o(t),h=(l=l==N?Z:l)==Z,p=(c=c==N?Z:c)==Z,m=l==c;if(m&&_a(e)){if(!_a(t))return!1;a=!0,h=!1}if(m&&!h)return s||(s=new wn),a||La(e)?Bo(e,t,r,i,o,s):function(e,t,r,n,i,o,s){switch(r){case ae:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case se:return!(e.byteLength!=t.byteLength||!o(new Bt(e),new Bt(t)));case $:case V:case H:return fa(+e,+t);case K:return e.name==t.name&&e.message==t.message;case Q:case te:return e==t+"";case X:var a=kr;case ee:var u=n&f;if(a||(a=Sr),e.size!=t.size&&!u)return!1;var l=s.get(e);if(l)return l==t;n|=d,s.set(e,t);var c=Bo(a(e),a(t),n,i,o,s);return s.delete(e),c;case re:if(hn)return hn.call(e)==hn.call(t)}return!1}(e,t,l,r,i,o,s);if(!(r&f)){var g=h&&ct.call(e,"__wrapped__"),v=p&&ct.call(t,"__wrapped__");if(g||v){var y=g?e.value():e,b=v?t.value():t;return s||(s=new wn),o(y,b,r,i,s)}}return!!m&&(s||(s=new wn),function(e,t,r,i,o,s){var a=r&f,u=Po(e),l=u.length,c=Po(t).length;if(l!=c&&!a)return!1;for(var h=l;h--;){var p=u[h];if(!(a?p in t:ct.call(t,p)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var m=!0;s.set(e,t),s.set(t,e);for(var g=a;++h<l;){p=u[h];var v=e[p],y=t[p];if(i)var b=a?i(y,v,p,t,e,s):i(v,y,p,e,t,s);if(!(b===n?v===y||o(v,y,r,i,s):b)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var x=e.constructor,_=t.constructor;x!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _)&&(m=!1)}return s.delete(e),s.delete(t),m}(e,t,r,i,o,s))}(e,t,r,i,oi,o))}function si(e,t,r,i){var o=r.length,s=o,a=!i;if(null==e)return!s;for(e=tt(e);o--;){var u=r[o];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<s;){var l=(u=r[o])[0],c=e[l],h=u[1];if(a&&u[2]){if(c===n&&!(l in e))return!1}else{var p=new wn;if(i)var m=i(c,h,l,e,t,p);if(!(m===n?oi(h,c,f|d,i,p):m))return!1}}return!0}function ai(e){return!(!Ca(e)||pt&&pt in e)&&(Ta(e)?yt:Ge).test(hs(e))}function ui(e){return"function"==typeof e?e:null==e?Iu:"object"==typeof e?va(e)?di(e[0],e[1]):fi(e):Nu(e)}function li(e){if(!Zo(e))return Vr(e);var t=[];for(var r in tt(e))ct.call(e,r)&&"constructor"!=r&&t.push(r);return t}function ci(e){if(!Ca(e))return function(e){var t=[];if(null!=e)for(var r in tt(e))t.push(r);return t}(e);var t=Zo(e),r=[];for(var n in e)("constructor"!=n||!t&&ct.call(e,n))&&r.push(n);return r}function hi(e,t){return e<t}function pi(e,t){var r=-1,n=ba(e)?Ye(e.length):[];return Nn(e,function(e,i,o){n[++r]=t(e,i,o)}),n}function fi(e){var t=jo(e);return 1==t.length&&t[0][2]?Qo(t[0][0],t[0][1]):function(r){return r===e||si(r,e,t)}}function di(e,t){return Xo(e)&&Jo(t)?Qo(cs(e),t):function(r){var i=Qa(r,e);return i===n&&i===t?eu(r,e):oi(t,i,f|d)}}function mi(e,t,r,i,o){e!==t&&Kn(t,function(s,a){if(Ca(s))o||(o=new wn),function(e,t,r,i,o,s,a){var u=rs(e,r),l=rs(t,r),c=a.get(l);if(c)Cn(e,r,c);else{var h=s?s(u,l,r+"",e,t,a):n,p=h===n;if(p){var f=va(l),d=!f&&_a(l),m=!f&&!d&&La(l);h=l,f||d||m?va(u)?h=u:xa(u)?h=ro(u):d?(p=!1,h=Yi(l,!0)):m?(p=!1,h=Ji(l,!0)):h=[]:Pa(l)||ga(l)?(h=u,ga(u)?h=Ga(u):Ca(u)&&!Ta(u)||(h=Go(l))):p=!1}p&&(a.set(l,h),o(h,l,i,s,a),a.delete(l)),Cn(e,r,h)}}(e,t,a,r,mi,i,o);else{var u=i?i(rs(e,a),s,a+"",e,t,o):n;u===n&&(u=s),Cn(e,a,u)}},ou)}function gi(e,t){var r=e.length;if(r)return qo(t+=t<0?r:0,r)?e[t]:n}function vi(e,t,r){var n=-1;return t=Zt(t.length?t:[Iu],dr(Lo())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(pi(e,function(e,r,i){return{criteria:Zt(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,s=i.length,a=r.length;++n<s;){var u=Qi(i[n],o[n]);if(u){if(n>=a)return u;var l=r[n];return u*("desc"==l?-1:1)}}return e.index-t.index}(e,t,r)})}function yi(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],a=Yn(e,s);r(a,s)&&Si(o,qi(s,e),a)}return o}function bi(e,t,r,n){var i=n?sr:or,o=-1,s=t.length,a=e;for(e===t&&(t=ro(t)),r&&(a=Zt(e,dr(r)));++o<s;)for(var u=0,l=t[o],c=r?r(l):l;(u=i(a,c,u,n))>-1;)a!==e&&Lt.call(a,u,1),Lt.call(e,u,1);return e}function xi(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;qo(i)?Lt.call(e,i,1):ji(e,i)}}return e}function _i(e,t){return e+jr(Xr()*(t-e+1))}function wi(e,t){var r="";if(!e||t<1||t>R)return r;do{t%2&&(r+=e),(t=jr(t/2))&&(e+=e)}while(t);return r}function ki(e,t){return os(es(e,t,Iu),e+"")}function Ti(e){return Tn(fu(e))}function Ei(e,t){var r=fu(e);return us(r,Fn(t,0,r.length))}function Si(e,t,r,i){if(!Ca(e))return e;for(var o=-1,s=(t=qi(t,e)).length,a=s-1,u=e;null!=u&&++o<s;){var l=cs(t[o]),c=r;if(o!=a){var h=u[l];(c=i?i(h,l,u):n)===n&&(c=Ca(h)?h:qo(t[o+1])?[]:{})}An(u,l,c),u=u[l]}return e}var Ci=rn?function(e,t){return rn.set(e,t),e}:Iu,Ai=Mr?function(e,t){return Mr(e,"toString",{configurable:!0,enumerable:!1,value:Cu(t),writable:!0})}:Iu;function Bi(e){return us(fu(e))}function Ii(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Ye(i);++n<i;)o[n]=e[n+t];return o}function Pi(e,t){var r;return Nn(e,function(e,n,i){return!(r=t(e,n,i))}),!!r}function Ri(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=O){for(;n<i;){var o=n+i>>>1,s=e[o];null!==s&&!Da(s)&&(r?s<=t:s<t)?n=o+1:i=o}return i}return Mi(e,t,Iu,r)}function Mi(e,t,r,i){t=r(t);for(var o=0,s=null==e?0:e.length,a=t!=t,u=null===t,l=Da(t),c=t===n;o<s;){var h=jr((o+s)/2),p=r(e[h]),f=p!==n,d=null===p,m=p==p,g=Da(p);if(a)var v=i||m;else v=c?m&&(i||f):u?m&&f&&(i||!d):l?m&&f&&!d&&(i||!g):!d&&!g&&(i?p<=t:p<t);v?o=h+1:s=h}return Kr(s,L)}function Fi(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r],a=t?t(s):s;if(!r||!fa(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function Di(e){return"number"==typeof e?e:Da(e)?F:+e}function Li(e){if("string"==typeof e)return e;if(va(e))return Zt(e,Li)+"";if(Da(e))return pn?pn.call(e):"";var t=e+"";return"0"==t&&1/e==-P?"-0":t}function Oi(e,t,r){var n=-1,o=Ht,s=e.length,a=!0,u=[],l=u;if(r)a=!1,o=Yt;else if(s>=i){var c=t?null:ko(e);if(c)return Sr(c);a=!1,o=gr,l=new _n}else l=t?[]:u;e:for(;++n<s;){var h=e[n],p=t?t(h):h;if(h=r||0!==h?h:0,a&&p==p){for(var f=l.length;f--;)if(l[f]===p)continue e;t&&l.push(p),u.push(h)}else o(l,p,r)||(l!==u&&l.push(p),u.push(h))}return u}function ji(e,t){return null==(e=ts(e,t=qi(t,e)))||delete e[cs(ks(t))]}function Ni(e,t,r,n){return Si(e,t,r(Yn(e,t)),n)}function Ui(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?Ii(e,n?0:o,n?o+1:i):Ii(e,n?o+1:0,n?i:o)}function zi(e,t){var r=e;return r instanceof vn&&(r=r.value()),Qt(t,function(e,t){return t.func.apply(t.thisArg,Jt([e],t.args))},r)}function $i(e,t,r){var n=e.length;if(n<2)return n?Oi(e[0]):[];for(var i=-1,o=Ye(n);++i<n;)for(var s=e[i],a=-1;++a<n;)a!=i&&(o[i]=jn(o[i]||s,e[a],t,r));return Oi(Gn(o,1),t,r)}function Vi(e,t,r){for(var i=-1,o=e.length,s=t.length,a={};++i<o;){var u=i<s?t[i]:n;r(a,e[i],u)}return a}function Gi(e){return xa(e)?e:[]}function Ki(e){return"function"==typeof e?e:Iu}function qi(e,t){return va(e)?e:Xo(e,t)?[e]:ls(Ka(e))}var Wi=ki;function Xi(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:Ii(e,t,r)}var Hi=Fr||function(e){return Pt.clearTimeout(e)};function Yi(e,t){if(t)return e.slice();var r=e.length,n=It?It(r):new e.constructor(r);return e.copy(n),n}function Zi(e){var t=new e.constructor(e.byteLength);return new Bt(t).set(new Bt(e)),t}function Ji(e,t){var r=t?Zi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Qi(e,t){if(e!==t){var r=e!==n,i=null===e,o=e==e,s=Da(e),a=t!==n,u=null===t,l=t==t,c=Da(t);if(!u&&!c&&!s&&e>t||s&&a&&l&&!u&&!c||i&&a&&l||!r&&l||!o)return 1;if(!i&&!s&&!c&&e<t||c&&r&&o&&!i&&!s||u&&r&&o||!a&&o||!l)return-1}return 0}function eo(e,t,r,n){for(var i=-1,o=e.length,s=r.length,a=-1,u=t.length,l=Gr(o-s,0),c=Ye(u+l),h=!n;++a<u;)c[a]=t[a];for(;++i<s;)(h||i<o)&&(c[r[i]]=e[i]);for(;l--;)c[a++]=e[i++];return c}function to(e,t,r,n){for(var i=-1,o=e.length,s=-1,a=r.length,u=-1,l=t.length,c=Gr(o-a,0),h=Ye(c+l),p=!n;++i<c;)h[i]=e[i];for(var f=i;++u<l;)h[f+u]=t[u];for(;++s<a;)(p||i<o)&&(h[f+r[s]]=e[i++]);return h}function ro(e,t){var r=-1,n=e.length;for(t||(t=Ye(n));++r<n;)t[r]=e[r];return t}function no(e,t,r,i){var o=!r;r||(r={});for(var s=-1,a=t.length;++s<a;){var u=t[s],l=i?i(r[u],e[u],u,r,e):n;l===n&&(l=e[u]),o?Rn(r,u,l):An(r,u,l)}return r}function io(e,t){return function(r,n){var i=va(r)?Gt:In,o=t?t():{};return i(r,e,Lo(n,2),o)}}function oo(e){return ki(function(t,r){var i=-1,o=r.length,s=o>1?r[o-1]:n,a=o>2?r[2]:n;for(s=e.length>3&&"function"==typeof s?(o--,s):n,a&&Wo(r[0],r[1],a)&&(s=o<3?n:s,o=1),t=tt(t);++i<o;){var u=r[i];u&&e(t,u,i,s)}return t})}function so(e,t){return function(r,n){if(null==r)return r;if(!ba(r))return e(r,n);for(var i=r.length,o=t?i:-1,s=tt(r);(t?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function ao(e){return function(t,r,n){for(var i=-1,o=tt(t),s=n(t),a=s.length;a--;){var u=s[e?a:++i];if(!1===r(o[u],u,o))break}return t}}function uo(e){return function(t){var r=wr(t=Ka(t))?Br(t):n,i=r?r[0]:t.charAt(0),o=r?Xi(r,1).join(""):t.slice(1);return i[e]()+o}}function lo(e){return function(t){return Qt(Tu(gu(t).replace(gt,"")),e,"")}}function co(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=dn(e.prototype),n=e.apply(r,t);return Ca(n)?n:r}}function ho(e){return function(t,r,i){var o=tt(t);if(!ba(t)){var s=Lo(r,3);t=iu(t),r=function(e){return s(o[e],e,o)}}var a=e(t,r,i);return a>-1?o[s?t[a]:a]:n}}function po(e){return Io(function(t){var r=t.length,i=r,o=gn.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new it(s);if(o&&!u&&"wrapper"==Fo(a))var u=new gn([],!0)}for(i=u?i:r;++i<r;){var l=Fo(a=t[i]),c="wrapper"==l?Mo(a):n;u=c&&Ho(c[0])&&c[1]==(w|y|x|k)&&!c[4].length&&1==c[9]?u[Fo(c[0])].apply(u,c[3]):1==a.length&&Ho(a)?u[l]():u.thru(a)}return function(){var e=arguments,n=e[0];if(u&&1==e.length&&va(n))return u.plant(n).value();for(var i=0,o=r?t[i].apply(this,e):n;++i<r;)o=t[i].call(this,o);return o}})}function fo(e,t,r,i,o,s,a,u,l,c){var h=t&w,p=t&m,f=t&g,d=t&(y|b),v=t&T,x=f?n:co(e);return function m(){for(var g=arguments.length,y=Ye(g),b=g;b--;)y[b]=arguments[b];if(d)var _=Do(m),w=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(y,_);if(i&&(y=eo(y,i,o,d)),s&&(y=to(y,s,a,d)),g-=w,d&&g<c){var k=Er(y,_);return _o(e,t,fo,m.placeholder,r,y,k,u,l,c-g)}var T=p?r:this,E=f?T[e]:e;return g=y.length,u?y=function(e,t){for(var r=e.length,i=Kr(t.length,r),o=ro(e);i--;){var s=t[i];e[i]=qo(s,r)?o[s]:n}return e}(y,u):v&&g>1&&y.reverse(),h&&l<g&&(y.length=l),this&&this!==Pt&&this instanceof m&&(E=x||co(E)),E.apply(T,y)}}function mo(e,t){return function(r,n){return function(e,t,r,n){return Wn(e,function(e,i,o){t(n,r(e),i,o)}),n}(r,e,t(n),{})}}function go(e,t){return function(r,i){var o;if(r===n&&i===n)return t;if(r!==n&&(o=r),i!==n){if(o===n)return i;"string"==typeof r||"string"==typeof i?(r=Li(r),i=Li(i)):(r=Di(r),i=Di(i)),o=e(r,i)}return o}}function vo(e){return Io(function(t){return t=Zt(t,dr(Lo())),ki(function(r){var n=this;return e(t,function(e){return Vt(e,n,r)})})})}function yo(e,t){var r=(t=t===n?" ":Li(t)).length;if(r<2)return r?wi(t,e):t;var i=wi(t,Or(e/Ar(t)));return wr(t)?Xi(Br(i),0,e).join(""):i.slice(0,e)}function bo(e){return function(t,r,i){return i&&"number"!=typeof i&&Wo(t,r,i)&&(r=i=n),t=Ua(t),r===n?(r=t,t=0):r=Ua(r),function(e,t,r,n){for(var i=-1,o=Gr(Or((t-e)/(r||1)),0),s=Ye(o);o--;)s[n?o:++i]=e,e+=r;return s}(t,r,i=i===n?t<r?1:-1:Ua(i),e)}}function xo(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=Va(t),r=Va(r)),e(t,r)}}function _o(e,t,r,i,o,s,a,u,l,c){var h=t&y;t|=h?x:_,(t&=~(h?_:x))&v||(t&=~(m|g));var p=[e,t,o,h?s:n,h?a:n,h?n:s,h?n:a,u,l,c],f=r.apply(n,p);return Ho(e)&&ns(f,p),f.placeholder=i,ss(f,e,t)}function wo(e){var t=et[e];return function(e,r){if(e=Va(e),r=null==r?0:Kr(za(r),292)){var n=(Ka(e)+"e").split("e");return+((n=(Ka(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var ko=Qr&&1/Sr(new Qr([,-0]))[1]==P?function(e){return new Qr(e)}:Du;function To(e){return function(t){var r=$o(t);return r==X?kr(t):r==ee?Cr(t):function(e,t){return Zt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Eo(e,t,r,i,o,a,u,c){var h=t&g;if(!h&&"function"!=typeof e)throw new it(s);var p=i?i.length:0;if(p||(t&=~(x|_),i=o=n),u=u===n?u:Gr(za(u),0),c=c===n?c:za(c),p-=o?o.length:0,t&_){var f=i,d=o;i=o=n}var T=h?n:Mo(e),E=[e,t,r,i,o,f,d,a,u,c];if(T&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<(m|g|w),s=n==w&&r==y||n==w&&r==k&&e[7].length<=t[8]||n==(w|k)&&t[7].length<=t[8]&&r==y;if(!o&&!s)return e;n&m&&(e[2]=t[2],i|=r&m?0:v);var a=t[3];if(a){var u=e[3];e[3]=u?eo(u,a,t[4]):a,e[4]=u?Er(e[3],l):t[4]}(a=t[5])&&(u=e[5],e[5]=u?to(u,a,t[6]):a,e[6]=u?Er(e[5],l):t[6]),(a=t[7])&&(e[7]=a),n&w&&(e[8]=null==e[8]?t[8]:Kr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(E,T),e=E[0],t=E[1],r=E[2],i=E[3],o=E[4],!(c=E[9]=E[9]===n?h?0:e.length:Gr(E[9]-p,0))&&t&(y|b)&&(t&=~(y|b)),t&&t!=m)S=t==y||t==b?function(e,t,r){var i=co(e);return function o(){for(var s=arguments.length,a=Ye(s),u=s,l=Do(o);u--;)a[u]=arguments[u];var c=s<3&&a[0]!==l&&a[s-1]!==l?[]:Er(a,l);return(s-=c.length)<r?_o(e,t,fo,o.placeholder,n,a,c,n,n,r-s):Vt(this&&this!==Pt&&this instanceof o?i:e,this,a)}}(e,t,c):t!=x&&t!=(m|x)||o.length?fo.apply(n,E):function(e,t,r,n){var i=t&m,o=co(e);return function t(){for(var s=-1,a=arguments.length,u=-1,l=n.length,c=Ye(l+a),h=this&&this!==Pt&&this instanceof t?o:e;++u<l;)c[u]=n[u];for(;a--;)c[u++]=arguments[++s];return Vt(h,i?r:this,c)}}(e,t,r,i);else var S=function(e,t,r){var n=t&m,i=co(e);return function t(){return(this&&this!==Pt&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,r);return ss((T?Ci:ns)(S,E),e,t)}function So(e,t,r,i){return e===n||fa(e,at[r])&&!ct.call(i,r)?t:e}function Co(e,t,r,i,o,s){return Ca(e)&&Ca(t)&&(s.set(t,e),mi(e,t,n,Co,s),s.delete(t)),e}function Ao(e){return Pa(e)?n:e}function Bo(e,t,r,i,o,s){var a=r&f,u=e.length,l=t.length;if(u!=l&&!(a&&l>u))return!1;var c=s.get(e);if(c&&s.get(t))return c==t;var h=-1,p=!0,m=r&d?new _n:n;for(s.set(e,t),s.set(t,e);++h<u;){var g=e[h],v=t[h];if(i)var y=a?i(v,g,h,t,e,s):i(g,v,h,e,t,s);if(y!==n){if(y)continue;p=!1;break}if(m){if(!tr(t,function(e,t){if(!gr(m,t)&&(g===e||o(g,e,r,i,s)))return m.push(t)})){p=!1;break}}else if(g!==v&&!o(g,v,r,i,s)){p=!1;break}}return s.delete(e),s.delete(t),p}function Io(e){return os(es(e,n,ys),e+"")}function Po(e){return Zn(e,iu,Uo)}function Ro(e){return Zn(e,ou,zo)}var Mo=rn?function(e){return rn.get(e)}:Du;function Fo(e){for(var t=e.name+"",r=nn[t],n=ct.call(nn,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function Do(e){return(ct.call(fn,"placeholder")?fn:e).placeholder}function Lo(){var e=fn.iteratee||Pu;return e=e===Pu?ui:e,arguments.length?e(arguments[0],arguments[1]):e}function Oo(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function jo(e){for(var t=iu(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Jo(i)]}return t}function No(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return ai(r)?r:n}var Uo=Nr?function(e){return null==e?[]:(e=tt(e),Xt(Nr(e),function(t){return Dt.call(e,t)}))}:$u,zo=Nr?function(e){for(var t=[];e;)Jt(t,Uo(e)),e=Rt(e);return t}:$u,$o=Jn;function Vo(e,t,r){for(var n=-1,i=(t=qi(t,e)).length,o=!1;++n<i;){var s=cs(t[n]);if(!(o=null!=e&&r(e,s)))break;e=e[s]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&Sa(i)&&qo(s,i)&&(va(e)||ga(e))}function Go(e){return"function"!=typeof e.constructor||Zo(e)?{}:dn(Rt(e))}function Ko(e){return va(e)||ga(e)||!!(rr&&e&&e[rr])}function qo(e,t){var r=typeof e;return!!(t=null==t?R:t)&&("number"==r||"symbol"!=r&&qe.test(e))&&e>-1&&e%1==0&&e<t}function Wo(e,t,r){if(!Ca(r))return!1;var n=typeof t;return!!("number"==n?ba(r)&&qo(t,r.length):"string"==n&&t in r)&&fa(r[t],e)}function Xo(e,t){if(va(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Da(e))||Ae.test(e)||!Ce.test(e)||null!=t&&e in tt(t)}function Ho(e){var t=Fo(e),r=fn[t];if("function"!=typeof r||!(t in vn.prototype))return!1;if(e===r)return!0;var n=Mo(r);return!!n&&e===n[0]}(Yr&&$o(new Yr(new ArrayBuffer(1)))!=ae||Zr&&$o(new Zr)!=X||Jr&&"[object Promise]"!=$o(Jr.resolve())||Qr&&$o(new Qr)!=ee||en&&$o(new en)!=ie)&&($o=function(e){var t=Jn(e),r=t==Z?e.constructor:n,i=r?hs(r):"";if(i)switch(i){case on:return ae;case sn:return X;case an:return"[object Promise]";case un:return ee;case ln:return ie}return t});var Yo=ut?Ta:Vu;function Zo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||at)}function Jo(e){return e==e&&!Ca(e)}function Qo(e,t){return function(r){return null!=r&&r[e]===t&&(t!==n||e in tt(r))}}function es(e,t,r){return t=Gr(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=Gr(n.length-t,0),s=Ye(o);++i<o;)s[i]=n[t+i];i=-1;for(var a=Ye(t+1);++i<t;)a[i]=n[i];return a[t]=r(s),Vt(e,this,a)}}function ts(e,t){return t.length<2?e:Yn(e,Ii(t,0,-1))}function rs(e,t){if("__proto__"!=t)return e[t]}var ns=as(Ci),is=Lr||function(e,t){return Pt.setTimeout(e,t)},os=as(Ai);function ss(e,t,r){var n=t+"";return os(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(De,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Kt(j,function(r){var n="_."+r[0];t&r[1]&&!Ht(e,n)&&e.push(n)}),e.sort()}(function(e){var t=e.match(Le);return t?t[1].split(Oe):[]}(n),r)))}function as(e){var t=0,r=0;return function(){var i=qr(),o=A-(i-r);if(r=i,o>0){if(++t>=C)return arguments[0]}else t=0;return e.apply(n,arguments)}}function us(e,t){var r=-1,i=e.length,o=i-1;for(t=t===n?i:t;++r<t;){var s=_i(r,o),a=e[s];e[s]=e[r],e[r]=a}return e.length=t,e}var ls=function(e){var t=aa(e,function(e){return r.size===u&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Be,function(e,r,n,i){t.push(n?i.replace(Ne,"$1"):r||e)}),t});function cs(e){if("string"==typeof e||Da(e))return e;var t=e+"";return"0"==t&&1/e==-P?"-0":t}function hs(e){if(null!=e){try{return lt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ps(e){if(e instanceof vn)return e.clone();var t=new gn(e.__wrapped__,e.__chain__);return t.__actions__=ro(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var fs=ki(function(e,t){return xa(e)?jn(e,Gn(t,1,xa,!0)):[]}),ds=ki(function(e,t){var r=ks(t);return xa(r)&&(r=n),xa(e)?jn(e,Gn(t,1,xa,!0),Lo(r,2)):[]}),ms=ki(function(e,t){var r=ks(t);return xa(r)&&(r=n),xa(e)?jn(e,Gn(t,1,xa,!0),n,r):[]});function gs(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:za(r);return i<0&&(i=Gr(n+i,0)),ir(e,Lo(t,3),i)}function vs(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return r!==n&&(o=za(r),o=r<0?Gr(i+o,0):Kr(o,i-1)),ir(e,Lo(t,3),o,!0)}function ys(e){return null!=e&&e.length?Gn(e,1):[]}function bs(e){return e&&e.length?e[0]:n}var xs=ki(function(e){var t=Zt(e,Gi);return t.length&&t[0]===e[0]?ri(t):[]}),_s=ki(function(e){var t=ks(e),r=Zt(e,Gi);return t===ks(r)?t=n:r.pop(),r.length&&r[0]===e[0]?ri(r,Lo(t,2)):[]}),ws=ki(function(e){var t=ks(e),r=Zt(e,Gi);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?ri(r,n,t):[]});function ks(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Ts=ki(Es);function Es(e,t){return e&&e.length&&t&&t.length?bi(e,t):e}var Ss=Io(function(e,t){var r=null==e?0:e.length,n=Mn(e,t);return xi(e,Zt(t,function(e){return qo(e,r)?+e:e}).sort(Qi)),n});function Cs(e){return null==e?e:Hr.call(e)}var As=ki(function(e){return Oi(Gn(e,1,xa,!0))}),Bs=ki(function(e){var t=ks(e);return xa(t)&&(t=n),Oi(Gn(e,1,xa,!0),Lo(t,2))}),Is=ki(function(e){var t=ks(e);return t="function"==typeof t?t:n,Oi(Gn(e,1,xa,!0),n,t)});function Ps(e){if(!e||!e.length)return[];var t=0;return e=Xt(e,function(e){if(xa(e))return t=Gr(e.length,t),!0}),fr(t,function(t){return Zt(e,lr(t))})}function Rs(e,t){if(!e||!e.length)return[];var r=Ps(e);return null==t?r:Zt(r,function(e){return Vt(t,n,e)})}var Ms=ki(function(e,t){return xa(e)?jn(e,t):[]}),Fs=ki(function(e){return $i(Xt(e,xa))}),Ds=ki(function(e){var t=ks(e);return xa(t)&&(t=n),$i(Xt(e,xa),Lo(t,2))}),Ls=ki(function(e){var t=ks(e);return t="function"==typeof t?t:n,$i(Xt(e,xa),n,t)}),Os=ki(Ps);var js=ki(function(e){var t=e.length,r=t>1?e[t-1]:n;return Rs(e,r="function"==typeof r?(e.pop(),r):n)});function Ns(e){var t=fn(e);return t.__chain__=!0,t}function Us(e,t){return t(e)}var zs=Io(function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,o=function(t){return Mn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof vn&&qo(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:Us,args:[o],thisArg:n}),new gn(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(n),e})):this.thru(o)});var $s=io(function(e,t,r){ct.call(e,r)?++e[r]:Rn(e,r,1)});var Vs=ho(gs),Gs=ho(vs);function Ks(e,t){return(va(e)?Kt:Nn)(e,Lo(t,3))}function qs(e,t){return(va(e)?qt:Un)(e,Lo(t,3))}var Ws=io(function(e,t,r){ct.call(e,r)?e[r].push(t):Rn(e,r,[t])});var Xs=ki(function(e,t,r){var n=-1,i="function"==typeof t,o=ba(e)?Ye(e.length):[];return Nn(e,function(e){o[++n]=i?Vt(t,e,r):ni(e,t,r)}),o}),Hs=io(function(e,t,r){Rn(e,r,t)});function Ys(e,t){return(va(e)?Zt:pi)(e,Lo(t,3))}var Zs=io(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});var Js=ki(function(e,t){if(null==e)return[];var r=t.length;return r>1&&Wo(e,t[0],t[1])?t=[]:r>2&&Wo(t[0],t[1],t[2])&&(t=[t[0]]),vi(e,Gn(t,1),[])}),Qs=Dr||function(){return Pt.Date.now()};function ea(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,Eo(e,w,n,n,n,n,t)}function ta(e,t){var r;if("function"!=typeof t)throw new it(s);return e=za(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var ra=ki(function(e,t,r){var n=m;if(r.length){var i=Er(r,Do(ra));n|=x}return Eo(e,n,t,r,i)}),na=ki(function(e,t,r){var n=m|g;if(r.length){var i=Er(r,Do(na));n|=x}return Eo(t,n,e,r,i)});function ia(e,t,r){var i,o,a,u,l,c,h=0,p=!1,f=!1,d=!0;if("function"!=typeof e)throw new it(s);function m(t){var r=i,s=o;return i=o=n,h=t,u=e.apply(s,r)}function g(e){var r=e-c;return c===n||r>=t||r<0||f&&e-h>=a}function v(){var e=Qs();if(g(e))return y(e);l=is(v,function(e){var r=t-(e-c);return f?Kr(r,a-(e-h)):r}(e))}function y(e){return l=n,d&&i?m(e):(i=o=n,u)}function b(){var e=Qs(),r=g(e);if(i=arguments,o=this,c=e,r){if(l===n)return function(e){return h=e,l=is(v,t),p?m(e):u}(c);if(f)return l=is(v,t),m(c)}return l===n&&(l=is(v,t)),u}return t=Va(t)||0,Ca(r)&&(p=!!r.leading,a=(f="maxWait"in r)?Gr(Va(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d),b.cancel=function(){l!==n&&Hi(l),h=0,i=c=o=l=n},b.flush=function(){return l===n?u:y(Qs())},b}var oa=ki(function(e,t){return On(e,1,t)}),sa=ki(function(e,t,r){return On(e,Va(t)||0,r)});function aa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new it(s);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(aa.Cache||xn),r}function ua(e){if("function"!=typeof e)throw new it(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}aa.Cache=xn;var la=Wi(function(e,t){var r=(t=1==t.length&&va(t[0])?Zt(t[0],dr(Lo())):Zt(Gn(t,1),dr(Lo()))).length;return ki(function(n){for(var i=-1,o=Kr(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return Vt(e,this,n)})}),ca=ki(function(e,t){var r=Er(t,Do(ca));return Eo(e,x,n,t,r)}),ha=ki(function(e,t){var r=Er(t,Do(ha));return Eo(e,_,n,t,r)}),pa=Io(function(e,t){return Eo(e,k,n,n,n,t)});function fa(e,t){return e===t||e!=e&&t!=t}var da=xo(Qn),ma=xo(function(e,t){return e>=t}),ga=ii(function(){return arguments}())?ii:function(e){return Aa(e)&&ct.call(e,"callee")&&!Dt.call(e,"callee")},va=Ye.isArray,ya=Ot?dr(Ot):function(e){return Aa(e)&&Jn(e)==se};function ba(e){return null!=e&&Sa(e.length)&&!Ta(e)}function xa(e){return Aa(e)&&ba(e)}var _a=Ur||Vu,wa=jt?dr(jt):function(e){return Aa(e)&&Jn(e)==V};function ka(e){if(!Aa(e))return!1;var t=Jn(e);return t==K||t==G||"string"==typeof e.message&&"string"==typeof e.name&&!Pa(e)}function Ta(e){if(!Ca(e))return!1;var t=Jn(e);return t==q||t==W||t==z||t==J}function Ea(e){return"number"==typeof e&&e==za(e)}function Sa(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=R}function Ca(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Aa(e){return null!=e&&"object"==typeof e}var Ba=Nt?dr(Nt):function(e){return Aa(e)&&$o(e)==X};function Ia(e){return"number"==typeof e||Aa(e)&&Jn(e)==H}function Pa(e){if(!Aa(e)||Jn(e)!=Z)return!1;var t=Rt(e);if(null===t)return!0;var r=ct.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&lt.call(r)==dt}var Ra=Ut?dr(Ut):function(e){return Aa(e)&&Jn(e)==Q};var Ma=zt?dr(zt):function(e){return Aa(e)&&$o(e)==ee};function Fa(e){return"string"==typeof e||!va(e)&&Aa(e)&&Jn(e)==te}function Da(e){return"symbol"==typeof e||Aa(e)&&Jn(e)==re}var La=$t?dr($t):function(e){return Aa(e)&&Sa(e.length)&&!!Tt[Jn(e)]};var Oa=xo(hi),ja=xo(function(e,t){return e<=t});function Na(e){if(!e)return[];if(ba(e))return Fa(e)?Br(e):ro(e);if(cr&&e[cr])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[cr]());var t=$o(e);return(t==X?kr:t==ee?Sr:fu)(e)}function Ua(e){return e?(e=Va(e))===P||e===-P?(e<0?-1:1)*M:e==e?e:0:0===e?e:0}function za(e){var t=Ua(e),r=t%1;return t==t?r?t-r:t:0}function $a(e){return e?Fn(za(e),0,D):0}function Va(e){if("number"==typeof e)return e;if(Da(e))return F;if(Ca(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ca(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Re,"");var r=Ve.test(e);return r||Ke.test(e)?At(e.slice(2),r?2:8):$e.test(e)?F:+e}function Ga(e){return no(e,ou(e))}function Ka(e){return null==e?"":Li(e)}var qa=oo(function(e,t){if(Zo(t)||ba(t))no(t,iu(t),e);else for(var r in t)ct.call(t,r)&&An(e,r,t[r])}),Wa=oo(function(e,t){no(t,ou(t),e)}),Xa=oo(function(e,t,r,n){no(t,ou(t),e,n)}),Ha=oo(function(e,t,r,n){no(t,iu(t),e,n)}),Ya=Io(Mn);var Za=ki(function(e,t){e=tt(e);var r=-1,i=t.length,o=i>2?t[2]:n;for(o&&Wo(t[0],t[1],o)&&(i=1);++r<i;)for(var s=t[r],a=ou(s),u=-1,l=a.length;++u<l;){var c=a[u],h=e[c];(h===n||fa(h,at[c])&&!ct.call(e,c))&&(e[c]=s[c])}return e}),Ja=ki(function(e){return e.push(n,Co),Vt(au,n,e)});function Qa(e,t,r){var i=null==e?n:Yn(e,t);return i===n?r:i}function eu(e,t){return null!=e&&Vo(e,t,ti)}var tu=mo(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ft.call(t)),e[t]=r},Cu(Iu)),ru=mo(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ft.call(t)),ct.call(e,t)?e[t].push(r):e[t]=[r]},Lo),nu=ki(ni);function iu(e){return ba(e)?kn(e):li(e)}function ou(e){return ba(e)?kn(e,!0):ci(e)}var su=oo(function(e,t,r){mi(e,t,r)}),au=oo(function(e,t,r,n){mi(e,t,r,n)}),uu=Io(function(e,t){var r={};if(null==e)return r;var n=!1;t=Zt(t,function(t){return t=qi(t,e),n||(n=t.length>1),t}),no(e,Ro(e),r),n&&(r=Dn(r,c|h|p,Ao));for(var i=t.length;i--;)ji(r,t[i]);return r});var lu=Io(function(e,t){return null==e?{}:function(e,t){return yi(e,t,function(t,r){return eu(e,r)})}(e,t)});function cu(e,t){if(null==e)return{};var r=Zt(Ro(e),function(e){return[e]});return t=Lo(t),yi(e,r,function(e,r){return t(e,r[0])})}var hu=To(iu),pu=To(ou);function fu(e){return null==e?[]:mr(e,iu(e))}var du=lo(function(e,t,r){return t=t.toLowerCase(),e+(r?mu(t):t)});function mu(e){return ku(Ka(e).toLowerCase())}function gu(e){return(e=Ka(e))&&e.replace(We,br).replace(vt,"")}var vu=lo(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),yu=lo(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),bu=uo("toLowerCase");var xu=lo(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});var _u=lo(function(e,t,r){return e+(r?" ":"")+ku(t)});var wu=lo(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),ku=uo("toUpperCase");function Tu(e,t,r){return e=Ka(e),(t=r?n:t)===n?function(e){return _t.test(e)}(e)?function(e){return e.match(bt)||[]}(e):function(e){return e.match(je)||[]}(e):e.match(t)||[]}var Eu=ki(function(e,t){try{return Vt(e,n,t)}catch(e){return ka(e)?e:new Je(e)}}),Su=Io(function(e,t){return Kt(t,function(t){t=cs(t),Rn(e,t,ra(e[t],e))}),e});function Cu(e){return function(){return e}}var Au=po(),Bu=po(!0);function Iu(e){return e}function Pu(e){return ui("function"==typeof e?e:Dn(e,c))}var Ru=ki(function(e,t){return function(r){return ni(r,e,t)}}),Mu=ki(function(e,t){return function(r){return ni(e,r,t)}});function Fu(e,t,r){var n=iu(t),i=Hn(t,n);null!=r||Ca(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=Hn(t,iu(t)));var o=!(Ca(r)&&"chain"in r&&!r.chain),s=Ta(e);return Kt(i,function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__);return(r.__actions__=ro(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Jt([this.value()],arguments))})}),e}function Du(){}var Lu=vo(Zt),Ou=vo(Wt),ju=vo(tr);function Nu(e){return Xo(e)?lr(cs(e)):function(e){return function(t){return Yn(t,e)}}(e)}var Uu=bo(),zu=bo(!0);function $u(){return[]}function Vu(){return!1}var Gu=go(function(e,t){return e+t},0),Ku=wo("ceil"),qu=go(function(e,t){return e/t},1),Wu=wo("floor");var Xu,Hu=go(function(e,t){return e*t},1),Yu=wo("round"),Zu=go(function(e,t){return e-t},0);return fn.after=function(e,t){if("function"!=typeof t)throw new it(s);return e=za(e),function(){if(--e<1)return t.apply(this,arguments)}},fn.ary=ea,fn.assign=qa,fn.assignIn=Wa,fn.assignInWith=Xa,fn.assignWith=Ha,fn.at=Ya,fn.before=ta,fn.bind=ra,fn.bindAll=Su,fn.bindKey=na,fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return va(e)?e:[e]},fn.chain=Ns,fn.chunk=function(e,t,r){t=(r?Wo(e,t,r):t===n)?1:Gr(za(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,a=Ye(Or(i/t));o<i;)a[s++]=Ii(e,o,o+=t);return a},fn.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Ye(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Jt(va(r)?ro(r):[r],Gn(t,1))},fn.cond=function(e){var t=null==e?0:e.length,r=Lo();return e=t?Zt(e,function(e){if("function"!=typeof e[1])throw new it(s);return[r(e[0]),e[1]]}):[],ki(function(r){for(var n=-1;++n<t;){var i=e[n];if(Vt(i[0],this,r))return Vt(i[1],this,r)}})},fn.conforms=function(e){return function(e){var t=iu(e);return function(r){return Ln(r,e,t)}}(Dn(e,c))},fn.constant=Cu,fn.countBy=$s,fn.create=function(e,t){var r=dn(e);return null==t?r:Pn(r,t)},fn.curry=function e(t,r,i){var o=Eo(t,y,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},fn.curryRight=function e(t,r,i){var o=Eo(t,b,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},fn.debounce=ia,fn.defaults=Za,fn.defaultsDeep=Ja,fn.defer=oa,fn.delay=sa,fn.difference=fs,fn.differenceBy=ds,fn.differenceWith=ms,fn.drop=function(e,t,r){var i=null==e?0:e.length;return i?Ii(e,(t=r||t===n?1:za(t))<0?0:t,i):[]},fn.dropRight=function(e,t,r){var i=null==e?0:e.length;return i?Ii(e,0,(t=i-(t=r||t===n?1:za(t)))<0?0:t):[]},fn.dropRightWhile=function(e,t){return e&&e.length?Ui(e,Lo(t,3),!0,!0):[]},fn.dropWhile=function(e,t){return e&&e.length?Ui(e,Lo(t,3),!0):[]},fn.fill=function(e,t,r,i){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&Wo(e,t,r)&&(r=0,i=o),function(e,t,r,i){var o=e.length;for((r=za(r))<0&&(r=-r>o?0:o+r),(i=i===n||i>o?o:za(i))<0&&(i+=o),i=r>i?0:$a(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},fn.filter=function(e,t){return(va(e)?Xt:Vn)(e,Lo(t,3))},fn.flatMap=function(e,t){return Gn(Ys(e,t),1)},fn.flatMapDeep=function(e,t){return Gn(Ys(e,t),P)},fn.flatMapDepth=function(e,t,r){return r=r===n?1:za(r),Gn(Ys(e,t),r)},fn.flatten=ys,fn.flattenDeep=function(e){return null!=e&&e.length?Gn(e,P):[]},fn.flattenDepth=function(e,t){return null!=e&&e.length?Gn(e,t=t===n?1:za(t)):[]},fn.flip=function(e){return Eo(e,T)},fn.flow=Au,fn.flowRight=Bu,fn.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},fn.functions=function(e){return null==e?[]:Hn(e,iu(e))},fn.functionsIn=function(e){return null==e?[]:Hn(e,ou(e))},fn.groupBy=Ws,fn.initial=function(e){return null!=e&&e.length?Ii(e,0,-1):[]},fn.intersection=xs,fn.intersectionBy=_s,fn.intersectionWith=ws,fn.invert=tu,fn.invertBy=ru,fn.invokeMap=Xs,fn.iteratee=Pu,fn.keyBy=Hs,fn.keys=iu,fn.keysIn=ou,fn.map=Ys,fn.mapKeys=function(e,t){var r={};return t=Lo(t,3),Wn(e,function(e,n,i){Rn(r,t(e,n,i),e)}),r},fn.mapValues=function(e,t){var r={};return t=Lo(t,3),Wn(e,function(e,n,i){Rn(r,n,t(e,n,i))}),r},fn.matches=function(e){return fi(Dn(e,c))},fn.matchesProperty=function(e,t){return di(e,Dn(t,c))},fn.memoize=aa,fn.merge=su,fn.mergeWith=au,fn.method=Ru,fn.methodOf=Mu,fn.mixin=Fu,fn.negate=ua,fn.nthArg=function(e){return e=za(e),ki(function(t){return gi(t,e)})},fn.omit=uu,fn.omitBy=function(e,t){return cu(e,ua(Lo(t)))},fn.once=function(e){return ta(2,e)},fn.orderBy=function(e,t,r,i){return null==e?[]:(va(t)||(t=null==t?[]:[t]),va(r=i?n:r)||(r=null==r?[]:[r]),vi(e,t,r))},fn.over=Lu,fn.overArgs=la,fn.overEvery=Ou,fn.overSome=ju,fn.partial=ca,fn.partialRight=ha,fn.partition=Zs,fn.pick=lu,fn.pickBy=cu,fn.property=Nu,fn.propertyOf=function(e){return function(t){return null==e?n:Yn(e,t)}},fn.pull=Ts,fn.pullAll=Es,fn.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?bi(e,t,Lo(r,2)):e},fn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?bi(e,t,n,r):e},fn.pullAt=Ss,fn.range=Uu,fn.rangeRight=zu,fn.rearg=pa,fn.reject=function(e,t){return(va(e)?Xt:Vn)(e,ua(Lo(t,3)))},fn.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=Lo(t,3);++n<o;){var s=e[n];t(s,n,e)&&(r.push(s),i.push(n))}return xi(e,i),r},fn.rest=function(e,t){if("function"!=typeof e)throw new it(s);return ki(e,t=t===n?t:za(t))},fn.reverse=Cs,fn.sampleSize=function(e,t,r){return t=(r?Wo(e,t,r):t===n)?1:za(t),(va(e)?En:Ei)(e,t)},fn.set=function(e,t,r){return null==e?e:Si(e,t,r)},fn.setWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:Si(e,t,r,i)},fn.shuffle=function(e){return(va(e)?Sn:Bi)(e)},fn.slice=function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&Wo(e,t,r)?(t=0,r=i):(t=null==t?0:za(t),r=r===n?i:za(r)),Ii(e,t,r)):[]},fn.sortBy=Js,fn.sortedUniq=function(e){return e&&e.length?Fi(e):[]},fn.sortedUniqBy=function(e,t){return e&&e.length?Fi(e,Lo(t,2)):[]},fn.split=function(e,t,r){return r&&"number"!=typeof r&&Wo(e,t,r)&&(t=r=n),(r=r===n?D:r>>>0)?(e=Ka(e))&&("string"==typeof t||null!=t&&!Ra(t))&&!(t=Li(t))&&wr(e)?Xi(Br(e),0,r):e.split(t,r):[]},fn.spread=function(e,t){if("function"!=typeof e)throw new it(s);return t=null==t?0:Gr(za(t),0),ki(function(r){var n=r[t],i=Xi(r,0,t);return n&&Jt(i,n),Vt(e,this,i)})},fn.tail=function(e){var t=null==e?0:e.length;return t?Ii(e,1,t):[]},fn.take=function(e,t,r){return e&&e.length?Ii(e,0,(t=r||t===n?1:za(t))<0?0:t):[]},fn.takeRight=function(e,t,r){var i=null==e?0:e.length;return i?Ii(e,(t=i-(t=r||t===n?1:za(t)))<0?0:t,i):[]},fn.takeRightWhile=function(e,t){return e&&e.length?Ui(e,Lo(t,3),!1,!0):[]},fn.takeWhile=function(e,t){return e&&e.length?Ui(e,Lo(t,3)):[]},fn.tap=function(e,t){return t(e),e},fn.throttle=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new it(s);return Ca(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),ia(e,t,{leading:n,maxWait:t,trailing:i})},fn.thru=Us,fn.toArray=Na,fn.toPairs=hu,fn.toPairsIn=pu,fn.toPath=function(e){return va(e)?Zt(e,cs):Da(e)?[e]:ro(ls(Ka(e)))},fn.toPlainObject=Ga,fn.transform=function(e,t,r){var n=va(e),i=n||_a(e)||La(e);if(t=Lo(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:Ca(e)&&Ta(o)?dn(Rt(e)):{}}return(i?Kt:Wn)(e,function(e,n,i){return t(r,e,n,i)}),r},fn.unary=function(e){return ea(e,1)},fn.union=As,fn.unionBy=Bs,fn.unionWith=Is,fn.uniq=function(e){return e&&e.length?Oi(e):[]},fn.uniqBy=function(e,t){return e&&e.length?Oi(e,Lo(t,2)):[]},fn.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?Oi(e,n,t):[]},fn.unset=function(e,t){return null==e||ji(e,t)},fn.unzip=Ps,fn.unzipWith=Rs,fn.update=function(e,t,r){return null==e?e:Ni(e,t,Ki(r))},fn.updateWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:Ni(e,t,Ki(r),i)},fn.values=fu,fn.valuesIn=function(e){return null==e?[]:mr(e,ou(e))},fn.without=Ms,fn.words=Tu,fn.wrap=function(e,t){return ca(Ki(t),e)},fn.xor=Fs,fn.xorBy=Ds,fn.xorWith=Ls,fn.zip=Os,fn.zipObject=function(e,t){return Vi(e||[],t||[],An)},fn.zipObjectDeep=function(e,t){return Vi(e||[],t||[],Si)},fn.zipWith=js,fn.entries=hu,fn.entriesIn=pu,fn.extend=Wa,fn.extendWith=Xa,Fu(fn,fn),fn.add=Gu,fn.attempt=Eu,fn.camelCase=du,fn.capitalize=mu,fn.ceil=Ku,fn.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=Va(r))==r?r:0),t!==n&&(t=(t=Va(t))==t?t:0),Fn(Va(e),t,r)},fn.clone=function(e){return Dn(e,p)},fn.cloneDeep=function(e){return Dn(e,c|p)},fn.cloneDeepWith=function(e,t){return Dn(e,c|p,t="function"==typeof t?t:n)},fn.cloneWith=function(e,t){return Dn(e,p,t="function"==typeof t?t:n)},fn.conformsTo=function(e,t){return null==t||Ln(e,t,iu(t))},fn.deburr=gu,fn.defaultTo=function(e,t){return null==e||e!=e?t:e},fn.divide=qu,fn.endsWith=function(e,t,r){e=Ka(e),t=Li(t);var i=e.length,o=r=r===n?i:Fn(za(r),0,i);return(r-=t.length)>=0&&e.slice(r,o)==t},fn.eq=fa,fn.escape=function(e){return(e=Ka(e))&&ke.test(e)?e.replace(_e,xr):e},fn.escapeRegExp=function(e){return(e=Ka(e))&&Pe.test(e)?e.replace(Ie,"\\$&"):e},fn.every=function(e,t,r){var i=va(e)?Wt:zn;return r&&Wo(e,t,r)&&(t=n),i(e,Lo(t,3))},fn.find=Vs,fn.findIndex=gs,fn.findKey=function(e,t){return nr(e,Lo(t,3),Wn)},fn.findLast=Gs,fn.findLastIndex=vs,fn.findLastKey=function(e,t){return nr(e,Lo(t,3),Xn)},fn.floor=Wu,fn.forEach=Ks,fn.forEachRight=qs,fn.forIn=function(e,t){return null==e?e:Kn(e,Lo(t,3),ou)},fn.forInRight=function(e,t){return null==e?e:qn(e,Lo(t,3),ou)},fn.forOwn=function(e,t){return e&&Wn(e,Lo(t,3))},fn.forOwnRight=function(e,t){return e&&Xn(e,Lo(t,3))},fn.get=Qa,fn.gt=da,fn.gte=ma,fn.has=function(e,t){return null!=e&&Vo(e,t,ei)},fn.hasIn=eu,fn.head=bs,fn.identity=Iu,fn.includes=function(e,t,r,n){e=ba(e)?e:fu(e),r=r&&!n?za(r):0;var i=e.length;return r<0&&(r=Gr(i+r,0)),Fa(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&or(e,t,r)>-1},fn.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:za(r);return i<0&&(i=Gr(n+i,0)),or(e,t,i)},fn.inRange=function(e,t,r){return t=Ua(t),r===n?(r=t,t=0):r=Ua(r),function(e,t,r){return e>=Kr(t,r)&&e<Gr(t,r)}(e=Va(e),t,r)},fn.invoke=nu,fn.isArguments=ga,fn.isArray=va,fn.isArrayBuffer=ya,fn.isArrayLike=ba,fn.isArrayLikeObject=xa,fn.isBoolean=function(e){return!0===e||!1===e||Aa(e)&&Jn(e)==$},fn.isBuffer=_a,fn.isDate=wa,fn.isElement=function(e){return Aa(e)&&1===e.nodeType&&!Pa(e)},fn.isEmpty=function(e){if(null==e)return!0;if(ba(e)&&(va(e)||"string"==typeof e||"function"==typeof e.splice||_a(e)||La(e)||ga(e)))return!e.length;var t=$o(e);if(t==X||t==ee)return!e.size;if(Zo(e))return!li(e).length;for(var r in e)if(ct.call(e,r))return!1;return!0},fn.isEqual=function(e,t){return oi(e,t)},fn.isEqualWith=function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return i===n?oi(e,t,n,r):!!i},fn.isError=ka,fn.isFinite=function(e){return"number"==typeof e&&zr(e)},fn.isFunction=Ta,fn.isInteger=Ea,fn.isLength=Sa,fn.isMap=Ba,fn.isMatch=function(e,t){return e===t||si(e,t,jo(t))},fn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,si(e,t,jo(t),r)},fn.isNaN=function(e){return Ia(e)&&e!=+e},fn.isNative=function(e){if(Yo(e))throw new Je(o);return ai(e)},fn.isNil=function(e){return null==e},fn.isNull=function(e){return null===e},fn.isNumber=Ia,fn.isObject=Ca,fn.isObjectLike=Aa,fn.isPlainObject=Pa,fn.isRegExp=Ra,fn.isSafeInteger=function(e){return Ea(e)&&e>=-R&&e<=R},fn.isSet=Ma,fn.isString=Fa,fn.isSymbol=Da,fn.isTypedArray=La,fn.isUndefined=function(e){return e===n},fn.isWeakMap=function(e){return Aa(e)&&$o(e)==ie},fn.isWeakSet=function(e){return Aa(e)&&Jn(e)==oe},fn.join=function(e,t){return null==e?"":$r.call(e,t)},fn.kebabCase=vu,fn.last=ks,fn.lastIndexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i;return r!==n&&(o=(o=za(r))<0?Gr(i+o,0):Kr(o,i-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):ir(e,ar,o,!0)},fn.lowerCase=yu,fn.lowerFirst=bu,fn.lt=Oa,fn.lte=ja,fn.max=function(e){return e&&e.length?$n(e,Iu,Qn):n},fn.maxBy=function(e,t){return e&&e.length?$n(e,Lo(t,2),Qn):n},fn.mean=function(e){return ur(e,Iu)},fn.meanBy=function(e,t){return ur(e,Lo(t,2))},fn.min=function(e){return e&&e.length?$n(e,Iu,hi):n},fn.minBy=function(e,t){return e&&e.length?$n(e,Lo(t,2),hi):n},fn.stubArray=$u,fn.stubFalse=Vu,fn.stubObject=function(){return{}},fn.stubString=function(){return""},fn.stubTrue=function(){return!0},fn.multiply=Hu,fn.nth=function(e,t){return e&&e.length?gi(e,za(t)):n},fn.noConflict=function(){return Pt._===this&&(Pt._=mt),this},fn.noop=Du,fn.now=Qs,fn.pad=function(e,t,r){e=Ka(e);var n=(t=za(t))?Ar(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return yo(jr(i),r)+e+yo(Or(i),r)},fn.padEnd=function(e,t,r){e=Ka(e);var n=(t=za(t))?Ar(e):0;return t&&n<t?e+yo(t-n,r):e},fn.padStart=function(e,t,r){e=Ka(e);var n=(t=za(t))?Ar(e):0;return t&&n<t?yo(t-n,r)+e:e},fn.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),Wr(Ka(e).replace(Me,""),t||0)},fn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&Wo(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Ua(e),t===n?(t=e,e=0):t=Ua(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var o=Xr();return Kr(e+o*(t-e+Ct("1e-"+((o+"").length-1))),t)}return _i(e,t)},fn.reduce=function(e,t,r){var n=va(e)?Qt:hr,i=arguments.length<3;return n(e,Lo(t,4),r,i,Nn)},fn.reduceRight=function(e,t,r){var n=va(e)?er:hr,i=arguments.length<3;return n(e,Lo(t,4),r,i,Un)},fn.repeat=function(e,t,r){return t=(r?Wo(e,t,r):t===n)?1:za(t),wi(Ka(e),t)},fn.replace=function(){var e=arguments,t=Ka(e[0]);return e.length<3?t:t.replace(e[1],e[2])},fn.result=function(e,t,r){var i=-1,o=(t=qi(t,e)).length;for(o||(o=1,e=n);++i<o;){var s=null==e?n:e[cs(t[i])];s===n&&(i=o,s=r),e=Ta(s)?s.call(e):s}return e},fn.round=Yu,fn.runInContext=e,fn.sample=function(e){return(va(e)?Tn:Ti)(e)},fn.size=function(e){if(null==e)return 0;if(ba(e))return Fa(e)?Ar(e):e.length;var t=$o(e);return t==X||t==ee?e.size:li(e).length},fn.snakeCase=xu,fn.some=function(e,t,r){var i=va(e)?tr:Pi;return r&&Wo(e,t,r)&&(t=n),i(e,Lo(t,3))},fn.sortedIndex=function(e,t){return Ri(e,t)},fn.sortedIndexBy=function(e,t,r){return Mi(e,t,Lo(r,2))},fn.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=Ri(e,t);if(n<r&&fa(e[n],t))return n}return-1},fn.sortedLastIndex=function(e,t){return Ri(e,t,!0)},fn.sortedLastIndexBy=function(e,t,r){return Mi(e,t,Lo(r,2),!0)},fn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=Ri(e,t,!0)-1;if(fa(e[r],t))return r}return-1},fn.startCase=_u,fn.startsWith=function(e,t,r){return e=Ka(e),r=null==r?0:Fn(za(r),0,e.length),t=Li(t),e.slice(r,r+t.length)==t},fn.subtract=Zu,fn.sum=function(e){return e&&e.length?pr(e,Iu):0},fn.sumBy=function(e,t){return e&&e.length?pr(e,Lo(t,2)):0},fn.template=function(e,t,r){var i=fn.templateSettings;r&&Wo(e,t,r)&&(t=n),e=Ka(e),t=Xa({},t,i,So);var o,s,a=Xa({},t.imports,i.imports,So),u=iu(a),l=mr(a,u),c=0,h=t.interpolate||Xe,p="__p += '",f=rt((t.escape||Xe).source+"|"+h.source+"|"+(h===Se?Ue:Xe).source+"|"+(t.evaluate||Xe).source+"|$","g"),d="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++kt+"]")+"\n";e.replace(f,function(t,r,n,i,a,u){return n||(n=i),p+=e.slice(c,u).replace(He,_r),r&&(o=!0,p+="' +\n__e("+r+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),p+="';\n";var m=t.variable;m||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(ve,""):p).replace(ye,"$1").replace(be,"$1;"),p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var g=Eu(function(){return Qe(u,d+"return "+p).apply(n,l)});if(g.source=p,ka(g))throw g;return g},fn.times=function(e,t){if((e=za(e))<1||e>R)return[];var r=D,n=Kr(e,D);t=Lo(t),e-=D;for(var i=fr(n,t);++r<e;)t(r);return i},fn.toFinite=Ua,fn.toInteger=za,fn.toLength=$a,fn.toLower=function(e){return Ka(e).toLowerCase()},fn.toNumber=Va,fn.toSafeInteger=function(e){return e?Fn(za(e),-R,R):0===e?e:0},fn.toString=Ka,fn.toUpper=function(e){return Ka(e).toUpperCase()},fn.trim=function(e,t,r){if((e=Ka(e))&&(r||t===n))return e.replace(Re,"");if(!e||!(t=Li(t)))return e;var i=Br(e),o=Br(t);return Xi(i,vr(i,o),yr(i,o)+1).join("")},fn.trimEnd=function(e,t,r){if((e=Ka(e))&&(r||t===n))return e.replace(Fe,"");if(!e||!(t=Li(t)))return e;var i=Br(e);return Xi(i,0,yr(i,Br(t))+1).join("")},fn.trimStart=function(e,t,r){if((e=Ka(e))&&(r||t===n))return e.replace(Me,"");if(!e||!(t=Li(t)))return e;var i=Br(e);return Xi(i,vr(i,Br(t))).join("")},fn.truncate=function(e,t){var r=E,i=S;if(Ca(t)){var o="separator"in t?t.separator:o;r="length"in t?za(t.length):r,i="omission"in t?Li(t.omission):i}var s=(e=Ka(e)).length;if(wr(e)){var a=Br(e);s=a.length}if(r>=s)return e;var u=r-Ar(i);if(u<1)return i;var l=a?Xi(a,0,u).join(""):e.slice(0,u);if(o===n)return l+i;if(a&&(u+=l.length-u),Ra(o)){if(e.slice(u).search(o)){var c,h=l;for(o.global||(o=rt(o.source,Ka(ze.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var p=c.index;l=l.slice(0,p===n?u:p)}}else if(e.indexOf(Li(o),u)!=u){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+i},fn.unescape=function(e){return(e=Ka(e))&&we.test(e)?e.replace(xe,Ir):e},fn.uniqueId=function(e){var t=++ht;return Ka(e)+t},fn.upperCase=wu,fn.upperFirst=ku,fn.each=Ks,fn.eachRight=qs,fn.first=bs,Fu(fn,(Xu={},Wn(fn,function(e,t){ct.call(fn.prototype,t)||(Xu[t]=e)}),Xu),{chain:!1}),fn.VERSION="4.17.11",Kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){fn[e].placeholder=fn}),Kt(["drop","take"],function(e,t){vn.prototype[e]=function(r){r=r===n?1:Gr(za(r),0);var i=this.__filtered__&&!t?new vn(this):this.clone();return i.__filtered__?i.__takeCount__=Kr(r,i.__takeCount__):i.__views__.push({size:Kr(r,D),type:e+(i.__dir__<0?"Right":"")}),i},vn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Kt(["filter","map","takeWhile"],function(e,t){var r=t+1,n=r==B||3==r;vn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Lo(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),Kt(["head","last"],function(e,t){var r="take"+(t?"Right":"");vn.prototype[e]=function(){return this[r](1).value()[0]}}),Kt(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");vn.prototype[e]=function(){return this.__filtered__?new vn(this):this[r](1)}}),vn.prototype.compact=function(){return this.filter(Iu)},vn.prototype.find=function(e){return this.filter(e).head()},vn.prototype.findLast=function(e){return this.reverse().find(e)},vn.prototype.invokeMap=ki(function(e,t){return"function"==typeof e?new vn(this):this.map(function(r){return ni(r,e,t)})}),vn.prototype.reject=function(e){return this.filter(ua(Lo(e)))},vn.prototype.slice=function(e,t){e=za(e);var r=this;return r.__filtered__&&(e>0||t<0)?new vn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=za(t))<0?r.dropRight(-t):r.take(t-e)),r)},vn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},vn.prototype.toArray=function(){return this.take(D)},Wn(vn.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=fn[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);o&&(fn.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,u=t instanceof vn,l=a[0],c=u||va(t),h=function(e){var t=o.apply(fn,Jt([e],a));return i&&p?t[0]:t};c&&r&&"function"==typeof l&&1!=l.length&&(u=c=!1);var p=this.__chain__,f=!!this.__actions__.length,d=s&&!p,m=u&&!f;if(!s&&c){t=m?t:new vn(this);var g=e.apply(t,a);return g.__actions__.push({func:Us,args:[h],thisArg:n}),new gn(g,p)}return d&&m?e.apply(this,a):(g=this.thru(h),d?i?g.value()[0]:g.value():g)})}),Kt(["pop","push","shift","sort","splice","unshift"],function(e){var t=ot[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);fn.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(va(i)?i:[],e)}return this[r](function(r){return t.apply(va(r)?r:[],e)})}}),Wn(vn.prototype,function(e,t){var r=fn[t];if(r){var n=r.name+"";(nn[n]||(nn[n]=[])).push({name:t,func:r})}}),nn[fo(n,g).name]=[{name:"wrapper",func:n}],vn.prototype.clone=function(){var e=new vn(this.__wrapped__);return e.__actions__=ro(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ro(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ro(this.__views__),e},vn.prototype.reverse=function(){if(this.__filtered__){var e=new vn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},vn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=va(e),n=t<0,i=r?e.length:0,o=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Kr(t,e+s);break;case"takeRight":e=Gr(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,l=n?a:s-1,c=this.__iteratees__,h=c.length,p=0,f=Kr(u,this.__takeCount__);if(!r||!n&&i==u&&f==u)return zi(e,this.__actions__);var d=[];e:for(;u--&&p<f;){for(var m=-1,g=e[l+=t];++m<h;){var v=c[m],y=v.iteratee,b=v.type,x=y(g);if(b==I)g=x;else if(!x){if(b==B)continue e;break e}}d[p++]=g}return d},fn.prototype.at=zs,fn.prototype.chain=function(){return Ns(this)},fn.prototype.commit=function(){return new gn(this.value(),this.__chain__)},fn.prototype.next=function(){this.__values__===n&&(this.__values__=Na(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},fn.prototype.plant=function(e){for(var t,r=this;r instanceof mn;){var i=ps(r);i.__index__=0,i.__values__=n,t?o.__wrapped__=i:t=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,t},fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof vn){var t=e;return this.__actions__.length&&(t=new vn(this)),(t=t.reverse()).__actions__.push({func:Us,args:[Cs],thisArg:n}),new gn(t,this.__chain__)}return this.thru(Cs)},fn.prototype.toJSON=fn.prototype.valueOf=fn.prototype.value=function(){return zi(this.__wrapped__,this.__actions__)},fn.prototype.first=fn.prototype.head,cr&&(fn.prototype[cr]=function(){return this}),fn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Pt._=Pr,define(function(){return Pr})):Mt?((Mt.exports=Pr)._=Pr,Rt._=Pr):Pt._=Pr}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],163:[function(e,t,r){(function(r){e("path");var n=e("fs");function i(){this.types=Object.create(null),this.extensions=Object.create(null)}i.prototype.define=function(e){for(var t in e){for(var n=e[t],i=0;i<n.length;i++)r.env.DEBUG_MIME&&this.types[n[i]]&&console.warn((this._loading||"define()").replace(/.*\//,""),'changes "'+n[i]+'" extension type from '+this.types[n[i]]+" to "+t),this.types[n[i]]=t;this.extensions[t]||(this.extensions[t]=n[0])}},i.prototype.load=function(e){this._loading=e;var t={};n.readFileSync(e,"ascii").split(/[\r\n]+/).forEach(function(e){var r=e.replace(/\s*#.*|^\s*|\s*$/g,"").split(/\s+/);t[r.shift()]=r}),this.define(t),this._loading=null},i.prototype.lookup=function(e,t){var r=e.replace(/^.*[\.\/\\]/,"").toLowerCase();return this.types[r]||t||this.default_type},i.prototype.extension=function(e){var t=e.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[t]};var o=new i;o.define(e("./types.json")),o.default_type=o.lookup("bin"),o.Mime=i,o.charsets={lookup:function(e,t){return/^text\/|^application\/(javascript|json)/.test(e)?"UTF-8":t}},t.exports=o}).call(this,e("_process"))},{"./types.json":164,_process:200,fs:133,path:178}],164:[function(e,t,r){t.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/font-woff":[],"application/font-woff2":[],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/prs.cww":["cww"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":[],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":[],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":[],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":[],"application/x-msdownload":["com","bat"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["wmf","emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":[],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":[],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":[],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/wav":["wav"],"audio/wave":[],"audio/webm":["weba"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":[],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":[],"audio/x-wav":[],"audio/xm":["xm"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/g3fax":["g3"],"image/gif":["gif"],"image/ief":["ief"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/ktx":["ktx"],"image/png":["png"],"image/prs.btif":["btif"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/tiff":["tiff","tif"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":[],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/webp":["webp"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":[],"image/x-pcx":["pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/rfc822":["eml","mime"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.vtu":["vtu"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["x3db","x3dbz"],"model/x3d+vrml":["x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/hjson":["hjson"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/prs.lines.tag":["dsc"],"text/richtext":["rtx"],"text/rtf":[],"text/sgml":["sgml","sgm"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/vtt":["vtt"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":[],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"text/xml":[],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}},{}],165:[function(e,t,r){"use strict";var n=e("cwise-compiler"),i={body:"",args:[],thisVars:[],localVars:[]};function o(e){if(!e)return i;for(var t=0;t<e.args.length;++t){var r=e.args[t];e.args[t]=0===t?{name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function s(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(e){return n({args:e.args,pre:o(e.pre),body:o(e.body),post:o(e.proc),funcName:e.funcName})}(e))}var a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in a){var t=a[e];r[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),r[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in u){var t=u[e];r[e]=s({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),r[e+"eq"]=s({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in l){var t=l[e];r[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),r[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var t=c[e];r[t]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),r[t+"eq"]=s({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var e=0;e<h.length;++e){var t=h[e];r[t]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),r[t+"s"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),r[t+"eq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var p=["atan2","pow"];!function(){for(var e=0;e<p.length;++e){var t=p[e];r[t+"op"]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),r[t+"ops"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),r[t+"opeq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),r[t+"opseq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),r.any=n({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=n({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=s({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=s({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=s({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=n({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":15}],166:[function(e,t,r){"use strict";var n=e("ndarray"),i=e("./doConvert.js");t.exports=function(e,t){for(var r=[],o=e,s=1;Array.isArray(o);)r.push(o.length),s*=o.length,o=o[0];return 0===r.length?n():(t||(t=n(new Float64Array(s),r)),i(t,e),t)}},{"./doConvert.js":167,ndarray:168}],167:[function(e,t,r){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":15}],168:[function(e,t,r){var n=e("iota-array"),i=e("is-buffer"),o="undefined"!=typeof Float64Array;function s(e,t){return e[0]-t[0]}function a(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(s);var n=new Array(r.length);for(e=0;e<n.length;++e)n[e]=r[e][1];return n}function u(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var i="generic"===e;if(-1===t){var o="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(o)()}if(0===t){o="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",o)(l[e][0])}o=["'use strict'"];var s=n(t),u=s.map(function(e){return"i"+e}),c="this.offset+"+s.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),h=s.map(function(e){return"b"+e}).join(","),p=s.map(function(e){return"c"+e}).join(",");o.push("function "+r+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+s.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),t<4?(o.push("function "+r+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),i?o.push("return this.data.set("+c+",v)}"):o.push("return this.data["+c+"]=v}"),o.push("proto.get=function "+r+"_get("+u.join(",")+"){"),i?o.push("return this.data.get("+c+")}"):o.push("return this.data["+c+"]}"),o.push("proto.index=function "+r+"_index(",u.join(),"){return "+c+"}"),o.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+s.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+s.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var f=s.map(function(e){return"a"+e+"=this.shape["+e+"]"}),d=s.map(function(e){return"c"+e+"=this.stride["+e+"]"});o.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+f.join(",")+","+d.join(","));for(var m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");o.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"c"+e}).join(",")+",b)}"),o.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+s.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+s.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");o.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"b"+e}).join(",")+",c)}");var g=new Array(t),v=new Array(t);for(m=0;m<t;++m)g[m]="a[i"+m+"]",v[m]="b[i"+m+"]";o.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+v.join(",")+",this.offset)}"),o.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset");for(m=0;m<t;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");return o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+s.map(function(e){return"shape["+e+"]"}).join(",")+","+s.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",o.join("\n"))(l[e],a)}var l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(e,t,r,n){if(void 0===e)return(0,l.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var s=t.length;if(void 0===r){r=new Array(s);for(var a=s-1,c=1;a>=0;--a)r[a]=c,c*=t[a]}if(void 0===n)for(n=0,a=0;a<s;++a)r[a]<0&&(n-=(t[a]-1)*r[a]);for(var h=function(e){if(i(e))return"buffer";if(o)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}(e),p=l[h];p.length<=s+1;)p.push(u(h,p.length-1));return(0,p[s+1])(e,t,r,n)}},{"iota-array":158,"is-buffer":159}],169:[function(e,t,r){(function(r,n){"use strict";var i=e("util"),o=e("stream"),s=t.exports=function(){o.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};i.inherits(s,o),s.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),r.nextTick(function(){this._process(),this._paused&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))},s.prototype.write=function(e,t){return this.writable?(n.isBuffer(e)||(e=new n(e,t||this._encoding)),this._buffers.push(e),this._buffered+=e.length,this._process(),this._reads&&0==this._reads.length&&(this._paused=!0),this.writable&&!this._paused):(this.emit("error",new Error("Stream not writable")),!1)},s.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(0==this._buffers.length?this._end():(this._buffers.push(null),this._process()))},s.prototype.destroySoon=s.prototype.end,s.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("There are some read requests waitng on finished stream")),this.destroy()},s.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},s.prototype._process=function(){for(;this._buffered>0&&this._reads&&this._reads.length>0;){var e=this._reads[0];if(e.allowLess){this._reads.shift(),(o=this._buffers[0]).length>e.length?(this._buffered-=e.length,this._buffers[0]=o.slice(e.length),e.func.call(this,o.slice(0,e.length))):(this._buffered-=o.length,this._buffers.shift(),e.func.call(this,o))}else{if(!(this._buffered>=e.length))break;this._reads.shift();for(var t=0,r=0,i=new n(e.length);t<e.length;){var o=this._buffers[r++],s=Math.min(o.length,e.length-t);o.copy(i,t,0,s),t+=s,s!=o.length&&(this._buffers[--r]=o.slice(s))}r>0&&this._buffers.splice(0,r),this._buffered-=e.length,e.func.call(this,i)}}this._buffers&&this._buffers.length>0&&null==this._buffers[0]&&this._end()}}).call(this,e("_process"),e("buffer").Buffer)},{_process:200,buffer:134,stream:251,util:261}],170:[function(e,t,r){"use strict";t.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLOR_PALETTE:1,COLOR_COLOR:2,COLOR_ALPHA:4}},{}],171:[function(e,t,r){"use strict";var n=e("util"),i=e("stream"),o=t.exports=function(){i.call(this),this._crc=-1,this.writable=!0};n.inherits(o,i),o.prototype.write=function(e){for(var t=0;t<e.length;t++)this._crc=s[255&(this._crc^e[t])]^this._crc>>>8;return!0},o.prototype.end=function(e){e&&this.write(e),this.emit("crc",this.crc32())},o.prototype.crc32=function(){return-1^this._crc},o.crc32=function(e){for(var t=-1,r=0;r<e.length;r++)t=s[255&(t^e[r])]^t>>>8;return-1^t};for(var s=[],a=0;a<256;a++){for(var u=a,l=0;l<8;l++)1&u?u=3988292384^u>>>1:u>>>=1;s[a]=u}},{stream:251,util:261}],172:[function(e,t,r){(function(r){"use strict";var n=e("util"),i=(e("zlib"),e("./chunkstream")),o=t.exports=function(e,t,r,n,o){i.call(this),this._width=e,this._height=t,this._Bpp=r,this._data=n,this._options=o,this._line=0,"filterType"in o&&-1!=o.filterType?"number"==typeof o.filterType&&(o.filterType=[o.filterType]):o.filterType=[0,1,2,3,4],this._filters={0:this._filterNone.bind(this),1:this._filterSub.bind(this),2:this._filterUp.bind(this),3:this._filterAvg.bind(this),4:this._filterPaeth.bind(this)},this.read(this._width*r+1,this._reverseFilterLine.bind(this))};n.inherits(o,i);var s={1:{0:0,1:0,2:0,3:255},2:{0:0,1:0,2:0,3:1},3:{0:0,1:1,2:2,3:255},4:{0:0,1:1,2:2,3:3}};o.prototype._reverseFilterLine=function(e){var t=this._data,r=this._width<<2,n=this._line*r,i=e[0];if(0==i)for(var o=0;o<this._width;o++)for(var u=n+(o<<2),l=1+o*this._Bpp,c=0;c<4;c++){var h=s[this._Bpp][c];t[u+c]=255!=h?e[l+h]:255}else if(1==i)for(o=0;o<this._width;o++)for(u=n+(o<<2),l=1+o*this._Bpp,c=0;c<4;c++){h=s[this._Bpp][c];var p=o>0?t[u+c-4]:0;t[u+c]=255!=h?e[l+h]+p:255}else if(2==i)for(o=0;o<this._width;o++)for(u=n+(o<<2),l=1+o*this._Bpp,c=0;c<4;c++){h=s[this._Bpp][c];var f=this._line>0?t[u-r+c]:0;t[u+c]=255!=h?e[l+h]+f:255}else if(3==i)for(o=0;o<this._width;o++)for(u=n+(o<<2),l=1+o*this._Bpp,c=0;c<4;c++){h=s[this._Bpp][c],p=o>0?t[u+c-4]:0,f=this._line>0?t[u-r+c]:0;var d=Math.floor((p+f)/2);t[u+c]=255!=h?e[l+h]+d:255}else if(4==i)for(o=0;o<this._width;o++)for(u=n+(o<<2),l=1+o*this._Bpp,c=0;c<4;c++){h=s[this._Bpp][c],p=o>0?t[u+c-4]:0,f=this._line>0?t[u-r+c]:0;var m=o>0&&this._line>0?t[u-r+c-4]:0;d=a(p,f,m);t[u+c]=255!=h?e[l+h]+d:255}this._line++,this._line<this._height?this.read(this._width*this._Bpp+1,this._reverseFilterLine.bind(this)):this.emit("complete",this._data,this._width,this._height)},o.prototype.filter=function(){for(var e=this._data,t=new r((1+(this._width<<2))*this._height),n=0;n<this._height;n++){for(var i=this._options.filterType,o=1/0,s=0,a=0;a<i.length;a++){var u=this._filters[i[a]](e,n,null);u<o&&(s=i[a],o=u)}this._filters[s](e,n,t)}return t},o.prototype._filterNone=function(e,t,r){var n=this._width<<2,i=n+1,o=0;if(r)r[t*i]=0,e.copy(r,i*t+1,n*t,n*(t+1));else for(var s=0;s<n;s++)o+=Math.abs(e[t*n+s]);return o},o.prototype._filterSub=function(e,t,r){var n=this._width<<2,i=n+1,o=0;r&&(r[t*i]=1);for(var s=0;s<n;s++){var a=s>=4?e[t*n+s-4]:0,u=e[t*n+s]-a;r?r[t*i+1+s]=u:o+=Math.abs(u)}return o},o.prototype._filterUp=function(e,t,r){var n=this._width<<2,i=n+1,o=0;r&&(r[t*i]=2);for(var s=0;s<n;s++){var a=t>0?e[(t-1)*n+s]:0,u=e[t*n+s]-a;r?r[t*i+1+s]=u:o+=Math.abs(u)}return o},o.prototype._filterAvg=function(e,t,r){var n=this._width<<2,i=n+1,o=0;r&&(r[t*i]=3);for(var s=0;s<n;s++){var a=s>=4?e[t*n+s-4]:0,u=t>0?e[(t-1)*n+s]:0,l=e[t*n+s]-(a+u>>1);r?r[t*i+1+s]=l:o+=Math.abs(l)}return o},o.prototype._filterPaeth=function(e,t,r){var n=this._width<<2,i=n+1,o=0;r&&(r[t*i]=4);for(var s=0;s<n;s++){var u=s>=4?e[t*n+s-4]:0,l=t>0?e[(t-1)*n+s]:0,c=s>=4&&t>0?e[(t-1)*n+s-4]:0,h=e[t*n+s]-a(u,l,c);r?r[t*i+1+s]=h:o+=Math.abs(h)}return o};var a=function(e,t,r){var n=e+t-r,i=Math.abs(n-e),o=Math.abs(n-t),s=Math.abs(n-r);return i<=o&&i<=s?e:o<=s?t:r}}).call(this,e("buffer").Buffer)},{"./chunkstream":169,buffer:134,util:261,zlib:132}],173:[function(e,t,r){(function(r){"use strict";var n=e("util"),i=e("stream"),o=e("zlib"),s=e("./filter"),a=e("./crc"),u=e("./constants"),l=t.exports=function(e){i.call(this),this._options=e,e.deflateChunkSize=e.deflateChunkSize||32768,e.deflateLevel=e.deflateLevel||9,e.deflateStrategy=e.deflateStrategy||3,this.readable=!0};n.inherits(l,i),l.prototype.pack=function(e,t,n){this.emit("data",new r(u.PNG_SIGNATURE)),this.emit("data",this._packIHDR(t,n));e=new s(t,n,4,e,this._options).filter();var i=o.createDeflate({chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy});i.on("error",this.emit.bind(this,"error")),i.on("data",function(e){this.emit("data",this._packIDAT(e))}.bind(this)),i.on("end",function(){this.emit("data",this._packIEND()),this.emit("end")}.bind(this)),i.end(e)},l.prototype._packChunk=function(e,t){var n=t?t.length:0,i=new r(n+12);return i.writeUInt32BE(n,0),i.writeUInt32BE(e,4),t&&t.copy(i,8),i.writeInt32BE(a.crc32(i.slice(4,i.length-4)),i.length-4),i},l.prototype._packIHDR=function(e,t){var n=new r(13);return n.writeUInt32BE(e,0),n.writeUInt32BE(t,4),n[8]=8,n[9]=6,n[10]=0,n[11]=0,n[12]=0,this._packChunk(u.TYPE_IHDR,n)},l.prototype._packIDAT=function(e){return this._packChunk(u.TYPE_IDAT,e)},l.prototype._packIEND=function(){return this._packChunk(u.TYPE_IEND,null)}}).call(this,e("buffer").Buffer)},{"./constants":170,"./crc":171,"./filter":172,buffer:134,stream:251,util:261,zlib:132}],174:[function(e,t,r){(function(r){"use strict";var n=e("util"),i=e("zlib"),o=e("./crc"),s=e("./chunkstream"),a=e("./constants"),u=e("./filter"),l=t.exports=function(e){s.call(this),this._options=e,e.checkCRC=!1!==e.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._inflate=null,this._filter=null,this._crc=null,this._palette=[],this._colorType=0,this._chunks={},this._chunks[a.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[a.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[a.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[a.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[a.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[a.TYPE_gAMA]=this._handleGAMA.bind(this),this.writable=!0,this.on("error",this._handleError.bind(this)),this._handleSignature()};n.inherits(l,s),l.prototype._handleError=function(){this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy()},l.prototype._handleSignature=function(){this.read(a.PNG_SIGNATURE.length,this._parseSignature.bind(this))},l.prototype._parseSignature=function(e){for(var t=a.PNG_SIGNATURE,r=0;r<t.length;r++)if(e[r]!=t[r])return void this.emit("error",new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},l.prototype._parseChunkBegin=function(e){for(var t=e.readUInt32BE(0),n=e.readUInt32BE(4),i="",s=4;s<8;s++)i+=String.fromCharCode(e[s]);var u=!!(32&e[4]);e[5],e[7];if(this._hasIHDR||n==a.TYPE_IHDR){if(this._crc=new o,this._crc.write(new r(i)),this._chunks[n])return this._chunks[n](t);u?this.read(t+4,this._skipChunk.bind(this)):this.emit("error",new Error("Unsupported critical chunk type "+i))}else this.emit("error",new Error("Expected IHDR on beggining"))},l.prototype._skipChunk=function(e){this.read(8,this._parseChunkBegin.bind(this))},l.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},l.prototype._parseChunkEnd=function(e){var t=e.readInt32BE(0),r=this._crc.crc32();this._options.checkCRC&&r!=t?this.emit("error",new Error("Crc error")):this._hasIEND?this.destroySoon():this.read(8,this._parseChunkBegin.bind(this))},l.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))},l.prototype._parseIHDR=function(e){this._crc.write(e);var t=e.readUInt32BE(0),n=e.readUInt32BE(4),i=e[8],o=e[9],s=e[10],l=e[11],h=e[12];8==i?o in c?0==s?0==l?0==h?(this._colorType=o,this._data=new r(t*n*4),this._filter=new u(t,n,c[this._colorType],this._data,this._options),this._hasIHDR=!0,this.emit("metadata",{width:t,height:n,palette:!!(o&a.COLOR_PALETTE),color:!!(o&a.COLOR_COLOR),alpha:!!(o&a.COLOR_ALPHA),data:this._data}),this._handleChunkEnd()):this.emit("error",new Error("Unsupported interlace method")):this.emit("error",new Error("Unsupported filter method")):this.emit("error",new Error("Unsupported compression method")):this.emit("error",new Error("Unsupported color type")):this.emit("error",new Error("Unsupported bit depth "+i))},l.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))},l.prototype._parsePLTE=function(e){this._crc.write(e);for(var t=Math.floor(e.length/3),r=0;r<t;r++)this._palette.push([e.readUInt8(3*r),e.readUInt8(3*r+1),e.readUInt8(3*r+2),255]);this._handleChunkEnd()},l.prototype._handleTRNS=function(e){this.read(e,this._parseTRNS.bind(this))},l.prototype._parseTRNS=function(e){if(this._crc.write(e),3==this._colorType){if(0==this._palette.length)return void this.emit("error",new Error("Transparency chunk must be after palette"));if(e.length>this._palette.length)return void this.emit("error",new Error("More transparent colors than palette size"));for(var t=0;t<this._palette.length;t++)this._palette[t][3]=t<e.length?e.readUInt8(t):255}this._handleChunkEnd()},l.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))},l.prototype._parseGAMA=function(e){this._crc.write(e),this.emit("gamma",e.readUInt32BE(0)/1e5),this._handleChunkEnd()},l.prototype._handleIDAT=function(e){this.read(-e,this._parseIDAT.bind(this,e))},l.prototype._parseIDAT=function(e,t){if(this._crc.write(t),3==this._colorType&&0==this._palette.length)throw new Error("Expected palette not found");this._inflate||(this._inflate=i.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._reverseFiltered.bind(this)),this._inflate.pipe(this._filter)),this._inflate.write(t),(e-=t.length)>0?this._handleIDAT(e):this._handleChunkEnd()},l.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))},l.prototype._parseIEND=function(e){this._crc.write(e),this._inflate.end(),this._hasIEND=!0,this._handleChunkEnd()};var c={0:1,2:3,3:1,4:2,6:4};l.prototype._reverseFiltered=function(e,t,r){if(3==this._colorType)for(var n=t<<2,i=0;i<r;i++)for(var o=i*n,s=0;s<t;s++)for(var a=o+(s<<2),u=this._palette[e[a]],l=0;l<4;l++)e[a+l]=u[l];this.emit("parsed",e)}}).call(this,e("buffer").Buffer)},{"./chunkstream":169,"./constants":170,"./crc":171,"./filter":172,buffer:134,util:261,zlib:132}],175:[function(e,t,r){(function(t,n){"use strict";var i=e("util"),o=e("stream"),s=e("./parser"),a=e("./packer"),u=r.PNG=function(e){o.call(this),e=e||{},this.width=e.width||0,this.height=e.height||0,this.data=this.width>0&&this.height>0?new n(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new s(e||{}),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(e){this.data=e,this.emit("parsed",e)}.bind(this)),this._packer=new a(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};i.inherits(u,o),u.prototype.pack=function(){return t.nextTick(function(){this._packer.pack(this.data,this.width,this.height)}.bind(this)),this},u.prototype.parse=function(e,t){if(t){var r,n=null;this.once("parsed",r=function(e){this.removeListener("error",n),this.data=e,t(null,this)}.bind(this)),this.once("error",n=function(e){this.removeListener("parsed",r),t(e,null)}.bind(this))}return this.end(e),this},u.prototype.write=function(e){return this._parser.write(e),!0},u.prototype.end=function(e){this._parser.end(e)},u.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.data=e.data,delete e.data,this.emit("metadata",e)},u.prototype._gamma=function(e){this.gamma=e},u.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},u.prototype.bitblt=function(e,t,r,n,i,o,s){if(t>this.width||r>this.height||t+n>this.width||r+i>this.height)throw new Error("bitblt reading outside image");if(o>e.width||s>e.height||o+n>e.width||s+i>e.height)throw new Error("bitblt writing outside image");for(var a=0;a<i;a++)this.data.copy(e.data,(s+a)*e.width+o<<2,(r+a)*this.width+t<<2,(r+a)*this.width+t+n<<2);return this}}).call(this,e("_process"),e("buffer").Buffer)},{"./packer":173,"./parser":174,_process:200,buffer:134,stream:251,util:261}],176:[function(e,t,r){"use strict";function n(e,t,r,n){for(var i=e[t++],o=1<<i,s=o+1,a=s+1,u=i+1,l=(1<<u)-1,c=0,h=0,p=0,f=e[t++],d=new Int32Array(4096),m=null;;){for(;c<16&&0!==f;)h|=e[t++]<<c,c+=8,1===f?f=e[t++]:--f;if(c<u)break;var g=h&l;if(h>>=u,c-=u,g!==o){if(g===s)break;for(var v=g<a?g:m,y=0,b=v;b>o;)b=d[b]>>8,++y;var x=b;if(p+y+(v!==g?1:0)>n)return void console.log("Warning, gif stream longer than expected.");r[p++]=x;var _=p+=y;for(v!==g&&(r[p++]=x),b=v;y--;)b=d[b],r[--_]=255&b,b>>=8;null!==m&&a<4096&&(d[a++]=m<<8|x,a>=l+1&&u<12&&(++u,l=l<<1|1)),m=g}else a=s+1,l=(1<<(u=i+1))-1,m=null}return p!==n&&console.log("Warning, gif stream shorter than expected."),r}try{r.GifWriter=function(e,t,r,n){var i=0,o=void 0===(n=void 0===n?{}:n).loop?null:n.loop,s=void 0===n.palette?null:n.palette;if(t<=0||r<=0||t>65535||r>65535)throw new Error("Width/Height invalid.");function a(e){var t=e.length;if(t<2||t>256||t&t-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return t}e[i++]=71,e[i++]=73,e[i++]=70,e[i++]=56,e[i++]=57,e[i++]=97;var u=0,l=0;if(null!==s){for(var c=a(s);c>>=1;)++u;if(c=1<<u,--u,void 0!==n.background){if((l=n.background)>=c)throw new Error("Background index out of range.");if(0===l)throw new Error("Background index explicitly passed as 0.")}}if(e[i++]=255&t,e[i++]=t>>8&255,e[i++]=255&r,e[i++]=r>>8&255,e[i++]=(null!==s?128:0)|u,e[i++]=l,e[i++]=0,null!==s)for(var h=0,p=s.length;h<p;++h){var f=s[h];e[i++]=f>>16&255,e[i++]=f>>8&255,e[i++]=255&f}if(null!==o){if(o<0||o>65535)throw new Error("Loop count invalid.");e[i++]=33,e[i++]=255,e[i++]=11,e[i++]=78,e[i++]=69,e[i++]=84,e[i++]=83,e[i++]=67,e[i++]=65,e[i++]=80,e[i++]=69,e[i++]=50,e[i++]=46,e[i++]=48,e[i++]=3,e[i++]=1,e[i++]=255&o,e[i++]=o>>8&255,e[i++]=0}var d=!1;this.addFrame=function(t,r,n,o,u,l){if(!0===d&&(--i,d=!1),l=void 0===l?{}:l,t<0||r<0||t>65535||r>65535)throw new Error("x/y invalid.");if(n<=0||o<=0||n>65535||o>65535)throw new Error("Width/Height invalid.");if(u.length<n*o)throw new Error("Not enough pixels for the frame size.");var c=!0,h=l.palette;if(void 0!==h&&null!==h||(c=!1,h=s),void 0===h||null===h)throw new Error("Must supply either a local or global palette.");for(var p=a(h),f=0;p>>=1;)++f;p=1<<f;var m=void 0===l.delay?0:l.delay,g=void 0===l.disposal?0:l.disposal;if(g<0||g>3)throw new Error("Disposal out of range.");var v=!1,y=0;if(void 0!==l.transparent&&null!==l.transparent&&(v=!0,(y=l.transparent)<0||y>=p))throw new Error("Transparent color index.");if((0!==g||v||0!==m)&&(e[i++]=33,e[i++]=249,e[i++]=4,e[i++]=g<<2|(!0===v?1:0),e[i++]=255&m,e[i++]=m>>8&255,e[i++]=y,e[i++]=0),e[i++]=44,e[i++]=255&t,e[i++]=t>>8&255,e[i++]=255&r,e[i++]=r>>8&255,e[i++]=255&n,e[i++]=n>>8&255,e[i++]=255&o,e[i++]=o>>8&255,e[i++]=!0===c?128|f-1:0,!0===c)for(var b=0,x=h.length;b<x;++b){var _=h[b];e[i++]=_>>16&255,e[i++]=_>>8&255,e[i++]=255&_}return i=function(e,t,r,n){e[t++]=r;var i=t++,o=1<<r,s=o-1,a=o+1,u=a+1,l=r+1,c=0,h=0;function p(r){for(;c>=r;)e[t++]=255&h,h>>=8,c-=8,t===i+256&&(e[i]=255,i=t++)}function f(e){h|=e<<c,c+=l,p(8)}var d=n[0]&s,m={};f(o);for(var g=1,v=n.length;g<v;++g){var y=n[g]&s,b=d<<8|y,x=m[b];if(void 0===x){for(h|=d<<c,c+=l;c>=8;)e[t++]=255&h,h>>=8,c-=8,t===i+256&&(e[i]=255,i=t++);4096===u?(f(o),u=a+1,l=r+1,m={}):(u>=1<<l&&++l,m[b]=u++),d=y}else d=x}return f(d),f(a),p(1),i+1===t?e[i]=0:(e[i]=t-i-1,e[t++]=0),t}(e,i,f<2?2:f,u)},this.end=function(){return!1===d&&(e[i++]=59,d=!0),i},this.getOutputBuffer=function(){return e},this.setOutputBuffer=function(t){e=t},this.getOutputBufferPosition=function(){return i},this.setOutputBufferPosition=function(e){i=e}},r.GifReader=function(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,o=e[t++],s=o>>7,a=1<<1+(7&o);e[t++],e[t++];var u=null,l=null;s&&(u=t,l=a,t+=3*a);var c=!0,h=[],p=0,f=null,d=0,m=null;for(this.width=r,this.height=i;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var g=e[t++];p=e[t++]|e[t++]<<8,f=e[t++],0==(1&g)&&(f=null),d=g>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,_=e[t++],w=_>>6&1,k=1<<1+(7&_),T=u,E=l,S=!1;_>>7&&(S=!0,T=t,E=k,t+=3*k);var C=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}h.push({x:v,y:y,width:b,height:x,has_local_palette:S,palette_offset:T,palette_size:E,data_offset:C,data_length:t-C,transparent_index:f,interlaced:!!w,delay:p,disposal:d});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return m},this.frameInfo=function(e){if(e<0||e>=h.length)throw new Error("Frame index out of range.");return h[e]},this.decodeAndBlitFrameBGRA=function(t,i){var o=this.frameInfo(t),s=o.width*o.height,a=new Uint8Array(s);n(e,o.data_offset,a,s);var u=o.palette_offset,l=o.transparent_index;null===l&&(l=256);var c=o.width,h=r-c,p=c,f=4*(o.y*r+o.x),d=4*((o.y+o.height)*r+o.x),m=f,g=4*h;!0===o.interlaced&&(g+=4*r*7);for(var v=8,y=0,b=a.length;y<b;++y){var x=a[y];if(0===p&&(p=c,(m+=g)>=d&&(g=4*h+4*r*(v-1),m=f+(c+h)*(v<<1),v>>=1)),x===l)m+=4;else{var _=e[u+3*x],w=e[u+3*x+1],k=e[u+3*x+2];i[m++]=k,i[m++]=w,i[m++]=_,i[m++]=255}--p}},this.decodeAndBlitFrameRGBA=function(t,i){var o=this.frameInfo(t),s=o.width*o.height,a=new Uint8Array(s);n(e,o.data_offset,a,s);var u=o.palette_offset,l=o.transparent_index;null===l&&(l=256);var c=o.width,h=r-c,p=c,f=4*(o.y*r+o.x),d=4*((o.y+o.height)*r+o.x),m=f,g=4*h;!0===o.interlaced&&(g+=4*r*7);for(var v=8,y=0,b=a.length;y<b;++y){var x=a[y];if(0===p&&(p=c,(m+=g)>=d&&(g=4*h+4*r*(v-1),m=f+(c+h)*(v<<1),v>>=1)),x===l)m+=4;else{var _=e[u+3*x],w=e[u+3*x+1],k=e[u+3*x+2];i[m++]=_,i[m++]=w,i[m++]=k,i[m++]=255}--p}}}}catch(e){}},{}],177:[function(e,t,r){(function(r){var n=e("charm");function i(e){if(!(e=e||{}).total)throw new Error("You MUST specify the total number of operations that will be processed.");this.total=e.total,this.current=0,this.max_burden=e.maxBurden||.5,this.show_burden=e.showBurden||!1,this.started=!1,this.size=50,this.inner_time=0,this.outer_time=0,this.elapsed=0,this.time_start=0,this.time_end=0,this.time_left=0,this.time_burden=0,this.skip_steps=0,this.skipped=0,this.aborted=!1,this.charm=n(),this.charm.pipe(r.stdout),this.charm.write("\n\n\n")}function o(e,t,r){for(r=r||" ";e.length<t;)e=r+e;return e}function s(e,t,r,n){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var i=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0,s=void 0===n?",":n,a=void 0===r?".":r,u="";return(u=(o?function(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}(i,o):""+Math.round(i)).split("."))[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(u[1]||"").length<o&&(u[1]=u[1]||"",u[1]+=new Array(o-u[1].length+1).join("0")),u.join(a)}t.exports=function(e){return"number"==typeof e&&(e={total:e}),new i(e)},i.prototype.op=function(e){e?this.current=e:this.current++,this.burdenReached()||(this.started||(this.started=(new Date).getTime()),this.time_start=(new Date).getTime(),this.updateTimes(),this.clear(),this.outputProgress(),this.outputStats(),this.outputTimes(),this.current>=this.total&&this.finished(),this.time_end=(new Date).getTime(),this.inner_time=this.time_end-this.time_start)},i.prototype.updateTimes=function(){this.elapsed=this.time_start-this.started,this.time_end>0&&(this.outer_time=this.time_start-this.time_end),this.inner_time>0&&this.outer_time>0&&(this.time_burden=this.inner_time/(this.inner_time+this.outer_time)*100,this.time_left=this.elapsed/this.current*(this.total-this.current),this.time_left<0&&(this.time_left=0)),this.time_burden>this.max_burden&&this.skip_steps<this.total/this.size&&(this.skip_steps=Math.floor(1.3*++this.skip_steps))},i.prototype.clear=function(){this.charm.erase("line").up(1).erase("line").up(1).erase("line").write("\r")},i.prototype.outputProgress=function(){this.charm.write("Processing: "),this.charm.foreground("green").background("green");for(var e=0;e<this.current/this.total*this.size-1;e++)this.charm.write(" ");for(this.charm.foreground("white").background("white");e<this.size-1;)this.charm.write(" "),e++;this.charm.display("reset").down(1).left(100)},i.prototype.outputStats=function(){this.perc=this.current/this.total*100,this.perc=o(this.perc.toFixed(2),2),this.charm.write("            ").display("bright").write(this.perc+"%").display("reset"),this.total_len=s(this.total).length,this.charm.write("   ").display("bright").write(o(s(this.current),this.total_len)).display("reset"),this.charm.write("/"+s(this.total)),this.show_burden&&(this.charm.write("    ").display("bright").write("Burden: ").display("reset"),this.charm.write(this.time_burden.toFixed(2)+"% / "+this.skip_steps)),this.charm.display("reset").down(1).left(100)},i.prototype.outputTimes=function(){var e=Math.floor(this.elapsed/36e5),t=Math.floor(this.elapsed/1e3%3600/60),r=Math.floor(this.elapsed/1e3%60);this.charm.write("            ").display("bright").write("Elapsed: ").display("reset"),this.charm.write(e+"h "+t+"m "+r+"s"),this.time_left&&(e=Math.floor(this.time_left/36e5),t=Math.floor(this.time_left/1e3%3600/60),r=Math.ceil(this.time_left/1e3%60),this.charm.write("   ").display("bright").write("Remaining: ").display("reset"),this.charm.write(e+"h "+t+"m "+r+"s"))},i.prototype.finished=function(){this.charm.write("\n\n"),this.charm.write("Finished!"),this.charm.write("\n\n")},i.prototype.burdenReached=function(){if(this.skip_steps>0&&this.current<this.total){if(this.skipped<this.skip_steps)return this.skipped++,!0;this.skipped=0}return!1}}).call(this,e("_process"))},{_process:200,charm:5}],178:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,i="/"===s.charAt(0))}return r=t(n(r.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(e){var o=r.isAbsolute(e),s="/"===i(e,-1);return(e=t(n(e.split("/"),function(e){return!!e}),!o).join("/"))||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var i=n(e.split("/")),o=n(t.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}var l=[];for(u=a;u<i.length;u++)l.push("..");return(l=l.concat(o.slice(a))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},r.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){r=t+1;break}}else-1===n&&(i=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===n&&(i=!1,n=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){r=s+1;break}}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===r+1?"":e.slice(t,n)};var i="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:200}],179:[function(e,t,r){(function(t){"use strict";var n=e("./interlace"),i={1:{0:0,1:0,2:0,3:255},2:{0:0,1:0,2:0,3:1},3:{0:0,1:1,2:2,3:255},4:{0:0,1:1,2:2,3:3}};function o(e,t,r,n,o,s){for(var a=e.width,u=e.height,l=e.index,c=0;c<u;c++)for(var h=0;h<a;h++){for(var p=r(h,c,l),f=0;f<4;f++){var d=i[n][f];if(f===o.length)throw new Error("Ran out of data");t[p+f]=255!==d?o[d+s]:255}s+=n}return s}function s(e,t,r,n,o,s){for(var a=e.width,u=e.height,l=e.index,c=0;c<u;c++){for(var h=0;h<a;h++)for(var p=o.get(n),f=r(h,c,l),d=0;d<4;d++){var m=i[n][d];t[f+d]=255!==m?p[m]:s}o.resetAfterLine()}}r.dataToBitMap=function(e,r){var i,a=r.width,u=r.height,l=r.depth,c=r.bpp,h=r.interlace;if(8!==l)var p=function(e,t){var r=[],n=0;function i(){if(n===e.length)throw new Error("Ran out of data");var i,o,s,a,u,l,c,h,p=e[n];switch(n++,t){default:throw new Error("unrecognised depth");case 16:c=e[n],n++,r.push((p<<8)+c);break;case 4:c=15&p,h=p>>4,r.push(h,c);break;case 2:u=3&p,l=p>>2&3,c=p>>4&3,h=p>>6&3,r.push(h,c,l,u);break;case 1:i=1&p,o=p>>1&1,s=p>>2&1,a=p>>3&1,u=p>>4&1,l=p>>5&1,c=p>>6&1,h=p>>7&1,r.push(h,c,l,u,a,s,o,i)}}return{get:function(e){for(;r.length<e;)i();var t=r.slice(0,e);return r=r.slice(e),t},resetAfterLine:function(){r.length=0},end:function(){if(n!==e.length)throw new Error("extra data found")}}}(e,l);i=l<=8?new t(a*u*4):new Uint16Array(a*u*4);var f,d,m=Math.pow(2,l)-1,g=0;if(h)f=n.getImagePasses(a,u),d=n.getInterlaceIterator(a,u);else{var v=0;d=function(){var e=v;return v+=4,e},f=[{width:a,height:u}]}for(var y=0;y<f.length;y++)8===l?g=o(f[y],i,d,c,e,g):s(f[y],i,d,c,p,m);if(8===l){if(g!==e.length)throw new Error("extra data found")}else p.end();return i}}).call(this,e("buffer").Buffer)},{"./interlace":189,buffer:134}],180:[function(e,t,r){(function(r){"use strict";var n=e("./constants");t.exports=function(e,t,i,o){var s=o.colorType===n.COLORTYPE_COLOR_ALPHA;if(o.inputHasAlpha&&s)return e;if(!o.inputHasAlpha&&!s)return e;var a=s?4:3,u=new r(t*i*a),l=o.inputHasAlpha?4:3,c=0,h=0,p=o.bgColor||{};void 0===p.red&&(p.red=255),void 0===p.green&&(p.green=255),void 0===p.blue&&(p.blue=255);for(var f=0;f<i;f++)for(var d=0;d<t;d++){var m,g=e[c],v=e[c+1],y=e[c+2];o.inputHasAlpha?(m=e[c+3],s||(m/=255,g=Math.min(Math.max(Math.round((1-m)*p.red+m*g),0),255),v=Math.min(Math.max(Math.round((1-m)*p.green+m*v),0),255),y=Math.min(Math.max(Math.round((1-m)*p.blue+m*y),0),255))):m=255,u[h]=g,u[h+1]=v,u[h+2]=y,s&&(u[h+3]=m),c+=l,h+=a}return u}}).call(this,e("buffer").Buffer)},{"./constants":182,buffer:134}],181:[function(e,t,r){(function(r,n){"use strict";var i=e("util"),o=e("stream"),s=t.exports=function(){o.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};i.inherits(s,o),s.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),r.nextTick(function(){this._process(),this._paused&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))},s.prototype.write=function(e,t){return this.writable?(r=n.isBuffer(e)?e:new n(e,t||this._encoding),this._buffers.push(r),this._buffered+=r.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused):(this.emit("error",new Error("Stream not writable")),!1);var r},s.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},s.prototype.destroySoon=s.prototype.end,s.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("There are some read requests waitng on finished stream")),this.destroy()},s.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},s.prototype._processReadAllowingLess=function(e){this._reads.shift();var t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))},s.prototype._processRead=function(e){this._reads.shift();for(var t=0,r=0,i=new n(e.length);t<e.length;){var o=this._buffers[r++],s=Math.min(o.length,e.length-t);o.copy(i,t,0,s),t+=s,s!==o.length&&(this._buffers[--r]=o.slice(s))}r>0&&this._buffers.splice(0,r),this._buffered-=e.length,e.func.call(this,i)},s.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){var e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else{if(!(this._buffered>=e.length))break;this._processRead(e)}}this._buffers&&this._buffers.length>0&&null===this._buffers[0]&&this._end()}catch(e){this.emit("error",e)}}}).call(this,e("_process"),e("buffer").Buffer)},{_process:200,buffer:134,stream:251,util:261}],182:[function(e,t,r){"use strict";t.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},{}],183:[function(e,t,r){"use strict";var n=[];!function(){for(var e=0;e<256;e++){for(var t=e,r=0;r<8;r++)1&t?t=3988292384^t>>>1:t>>>=1;n[e]=t}}();var i=t.exports=function(){this._crc=-1};i.prototype.write=function(e){for(var t=0;t<e.length;t++)this._crc=n[255&(this._crc^e[t])]^this._crc>>>8;return!0},i.prototype.crc32=function(){return-1^this._crc},i.crc32=function(e){for(var t=-1,r=0;r<e.length;r++)t=n[255&(t^e[r])]^t>>>8;return-1^t}},{}],184:[function(e,t,r){(function(r){"use strict";var n=e("./paeth-predictor");var i={0:function(e,t,r,n,i){e.copy(n,i,t,t+r)},1:function(e,t,r,n,i,o){for(var s=0;s<r;s++){var a=s>=o?e[t+s-o]:0,u=e[t+s]-a;n[i+s]=u}},2:function(e,t,r,n,i){for(var o=0;o<r;o++){var s=t>0?e[t+o-r]:0,a=e[t+o]-s;n[i+o]=a}},3:function(e,t,r,n,i,o){for(var s=0;s<r;s++){var a=s>=o?e[t+s-o]:0,u=t>0?e[t+s-r]:0,l=e[t+s]-(a+u>>1);n[i+s]=l}},4:function(e,t,r,i,o,s){for(var a=0;a<r;a++){var u=a>=s?e[t+a-s]:0,l=t>0?e[t+a-r]:0,c=t>0&&a>=s?e[t+a-(r+s)]:0,h=e[t+a]-n(u,l,c);i[o+a]=h}}},o={0:function(e,t,r){for(var n=0,i=t+r,o=t;o<i;o++)n+=Math.abs(e[o]);return n},1:function(e,t,r,n){for(var i=0,o=0;o<r;o++){var s=o>=n?e[t+o-n]:0,a=e[t+o]-s;i+=Math.abs(a)}return i},2:function(e,t,r){for(var n=0,i=t+r,o=t;o<i;o++){var s=t>0?e[o-r]:0,a=e[o]-s;n+=Math.abs(a)}return n},3:function(e,t,r,n){for(var i=0,o=0;o<r;o++){var s=o>=n?e[t+o-n]:0,a=t>0?e[t+o-r]:0,u=e[t+o]-(s+a>>1);i+=Math.abs(u)}return i},4:function(e,t,r,i){for(var o=0,s=0;s<r;s++){var a=s>=i?e[t+s-i]:0,u=t>0?e[t+s-r]:0,l=t>0&&s>=i?e[t+s-(r+i)]:0,c=e[t+s]-n(a,u,l);o+=Math.abs(c)}return o}};t.exports=function(e,t,n,s,a){var u;if("filterType"in s&&-1!==s.filterType){if("number"!=typeof s.filterType)throw new Error("unrecognised filter types");u=[s.filterType]}else u=[0,1,2,3,4];for(var l=t*a,c=0,h=0,p=new r((l+1)*n),f=u[0],d=0;d<n;d++){if(u.length>1)for(var m=1/0,g=0;g<u.length;g++){var v=o[u[g]](e,h,l,a);v<m&&(f=u[g],m=v)}p[c]=f,c++,i[f](e,h,l,p,c,a),c+=l,h+=l}return p}}).call(this,e("buffer").Buffer)},{"./paeth-predictor":193,buffer:134}],185:[function(e,t,r){(function(r){"use strict";var n=e("util"),i=e("./chunkstream"),o=e("./filter-parse"),s=t.exports=function(e){i.call(this);var t=[],n=this;this._filter=new o(e,{read:this.read.bind(this),write:function(e){t.push(e)},complete:function(){n.emit("complete",r.concat(t))}}),this._filter.start()};n.inherits(s,i)}).call(this,e("buffer").Buffer)},{"./chunkstream":181,"./filter-parse":187,buffer:134,util:261}],186:[function(e,t,r){(function(t){"use strict";var n=e("./sync-reader"),i=e("./filter-parse");r.process=function(e,r){var o=[],s=new n(e);return new i(r,{read:s.read.bind(s),write:function(e){o.push(e)},complete:function(){}}).start(),s.process(),t.concat(o)}}).call(this,e("buffer").Buffer)},{"./filter-parse":187,"./sync-reader":199,buffer:134}],187:[function(e,t,r){(function(r){"use strict";var n=e("./interlace"),i=e("./paeth-predictor");function o(e,t,r){var n=e*t;return 8!==r&&(n=Math.ceil(n/(8/r))),n}var s=t.exports=function(e,t){var r=e.width,i=e.height,s=e.interlace,a=e.bpp,u=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],s)for(var l=n.getImagePasses(r,i),c=0;c<l.length;c++)this._images.push({byteWidth:o(l[c].width,a,u),height:l[c].height,lineIndex:0});else this._images.push({byteWidth:o(r,a,u),height:i,lineIndex:0});this._xComparison=8===u?a:16===u?2*a:1};s.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},s.prototype._unFilterType1=function(e,t,r){for(var n=this._xComparison,i=n-1,o=0;o<r;o++){var s=e[1+o],a=o>i?t[o-n]:0;t[o]=s+a}},s.prototype._unFilterType2=function(e,t,r){for(var n=this._lastLine,i=0;i<r;i++){var o=e[1+i],s=n?n[i]:0;t[i]=o+s}},s.prototype._unFilterType3=function(e,t,r){for(var n=this._xComparison,i=n-1,o=this._lastLine,s=0;s<r;s++){var a=e[1+s],u=o?o[s]:0,l=s>i?t[s-n]:0,c=Math.floor((l+u)/2);t[s]=a+c}},s.prototype._unFilterType4=function(e,t,r){for(var n=this._xComparison,o=n-1,s=this._lastLine,a=0;a<r;a++){var u=e[1+a],l=s?s[a]:0,c=a>o?t[a-n]:0,h=a>o&&s?s[a-n]:0,p=i(c,l,h);t[a]=u+p}},s.prototype._reverseFilterLine=function(e){var t,n=e[0],i=this._images[this._imageIndex],o=i.byteWidth;if(0===n)t=e.slice(1,o+1);else switch(t=new r(o),n){case 1:this._unFilterType1(e,t,o);break;case 2:this._unFilterType2(e,t,o);break;case 3:this._unFilterType3(e,t,o);break;case 4:this._unFilterType4(e,t,o);break;default:throw new Error("Unrecognised filter type - "+n)}this.write(t),i.lineIndex++,i.lineIndex>=i.height?(this._lastLine=null,this._imageIndex++,i=this._images[this._imageIndex]):this._lastLine=t,i?this.read(i.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}}).call(this,e("buffer").Buffer)},{"./interlace":189,"./paeth-predictor":193,buffer:134}],188:[function(e,t,r){(function(e){"use strict";t.exports=function(t,r){var n=r.depth,i=r.width,o=r.height,s=r.colorType,a=r.transColor,u=r.palette,l=t;return 3===s?function(e,t,r,n,i){for(var o=0,s=0;s<n;s++)for(var a=0;a<r;a++){var u=i[e[o]];if(!u)throw new Error("index "+e[o]+" not in palette");for(var l=0;l<4;l++)t[o+l]=u[l];o+=4}}(t,l,i,o,u):(a&&function(e,t,r,n,i){for(var o=0,s=0;s<n;s++)for(var a=0;a<r;a++){var u=!1;if(1===i.length?i[0]===e[o]&&(u=!0):i[0]===e[o]&&i[1]===e[o+1]&&i[2]===e[o+2]&&(u=!0),u)for(var l=0;l<4;l++)t[o+l]=0;o+=4}}(t,l,i,o,a),8!==n&&(16===n&&(l=new e(i*o*4)),function(e,t,r,n,i){for(var o=Math.pow(2,i)-1,s=0,a=0;a<n;a++)for(var u=0;u<r;u++){for(var l=0;l<4;l++)t[s+l]=Math.floor(255*e[s+l]/o+.5);s+=4}}(t,l,i,o,n))),l}}).call(this,e("buffer").Buffer)},{buffer:134}],189:[function(e,t,r){"use strict";var n=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];r.getImagePasses=function(e,t){for(var r=[],i=e%8,o=t%8,s=(e-i)/8,a=(t-o)/8,u=0;u<n.length;u++){for(var l=n[u],c=s*l.x.length,h=a*l.y.length,p=0;p<l.x.length&&l.x[p]<i;p++)c++;for(p=0;p<l.y.length&&l.y[p]<o;p++)h++;c>0&&h>0&&r.push({width:c,height:h,index:u})}return r},r.getInterlaceIterator=function(e){return function(t,r,i){var o=t%n[i].x.length,s=(t-o)/n[i].x.length*8+n[i].x[o],a=r%n[i].y.length;return 4*s+((r-a)/n[i].y.length*8+n[i].y[a])*e*4}}},{}],190:[function(e,t,r){(function(r){"use strict";var n=e("util"),i=e("stream"),o=e("./constants"),s=e("./packer"),a=t.exports=function(e){i.call(this);var t=e||{};this._packer=new s(t),this._deflate=this._packer.createDeflate(),this.readable=!0};n.inherits(a,i),a.prototype.pack=function(e,t,n,i){this.emit("data",new r(o.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,n)),i&&this.emit("data",this._packer.packGAMA(i));var s=this._packer.filterData(e,t,n);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(e){this.emit("data",this._packer.packIDAT(e))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(s)}}).call(this,e("buffer").Buffer)},{"./constants":182,"./packer":192,buffer:134,stream:251,util:261}],191:[function(e,t,r){(function(r){"use strict";var n=!0,i=e("zlib");i.deflateSync||(n=!1);var o=e("./constants"),s=e("./packer");t.exports=function(e,t){if(!n)throw new Error("To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport");var a=new s(t||{}),u=[];u.push(new r(o.PNG_SIGNATURE)),u.push(a.packIHDR(e.width,e.height)),e.gamma&&u.push(a.packGAMA(e.gamma));var l=a.filterData(e.data,e.width,e.height),c=i.deflateSync(l,a.getDeflateOptions());if(l=null,!c||!c.length)throw new Error("bad png - invalid compressed data response");return u.push(a.packIDAT(c)),u.push(a.packIEND()),r.concat(u)}}).call(this,e("buffer").Buffer)},{"./constants":182,"./packer":192,buffer:134,zlib:132}],192:[function(e,t,r){(function(r){"use strict";var n=e("./constants"),i=e("./crc"),o=e("./bitpacker"),s=e("./filter-pack"),a=e("zlib"),u=t.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32768,e.deflateLevel=null!=e.deflateLevel?e.deflateLevel:9,e.deflateStrategy=null!=e.deflateStrategy?e.deflateStrategy:3,e.inputHasAlpha=null==e.inputHasAlpha||e.inputHasAlpha,e.deflateFactory=e.deflateFactory||a.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType="number"==typeof e.colorType?e.colorType:n.COLORTYPE_COLOR_ALPHA,e.colorType!==n.COLORTYPE_COLOR&&e.colorType!==n.COLORTYPE_COLOR_ALPHA)throw new Error("option color type:"+e.colorType+" is not supported at present");if(8!==e.bitDepth)throw new Error("option bit depth:"+e.bitDepth+" is not supported at present")};u.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},u.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},u.prototype.filterData=function(e,t,r){var i=o(e,t,r,this._options),a=n.COLORTYPE_TO_BPP_MAP[this._options.colorType];return s(i,t,r,this._options,a)},u.prototype._packChunk=function(e,t){var n=t?t.length:0,o=new r(n+12);return o.writeUInt32BE(n,0),o.writeUInt32BE(e,4),t&&t.copy(o,8),o.writeInt32BE(i.crc32(o.slice(4,o.length-4)),o.length-4),o},u.prototype.packGAMA=function(e){var t=new r(4);return t.writeUInt32BE(Math.floor(e*n.GAMMA_DIVISION),0),this._packChunk(n.TYPE_gAMA,t)},u.prototype.packIHDR=function(e,t){var i=new r(13);return i.writeUInt32BE(e,0),i.writeUInt32BE(t,4),i[8]=this._options.bitDepth,i[9]=this._options.colorType,i[10]=0,i[11]=0,i[12]=0,this._packChunk(n.TYPE_IHDR,i)},u.prototype.packIDAT=function(e){return this._packChunk(n.TYPE_IDAT,e)},u.prototype.packIEND=function(){return this._packChunk(n.TYPE_IEND,null)}}).call(this,e("buffer").Buffer)},{"./bitpacker":180,"./constants":182,"./crc":183,"./filter-pack":184,buffer:134,zlib:132}],193:[function(e,t,r){"use strict";t.exports=function(e,t,r){var n=e+t-r,i=Math.abs(n-e),o=Math.abs(n-t),s=Math.abs(n-r);return i<=o&&i<=s?e:o<=s?t:r}},{}],194:[function(e,t,r){"use strict";var n=e("util"),i=e("zlib"),o=e("./chunkstream"),s=e("./filter-parse-async"),a=e("./parser"),u=e("./bitmapper"),l=e("./format-normaliser"),c=t.exports=function(e){o.call(this),this._parser=new a(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};n.inherits(c,o),c.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this.errord=!0},c.prototype._inflateData=function(e){this._inflate||(this._inflate=i.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter)),this._inflate.write(e)},c.prototype._handleMetaData=function(e){this.emit("metadata",e),this._bitmapInfo=Object.create(e),this._filter=new s(this._bitmapInfo)},c.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e},c.prototype._handlePalette=function(e){this._bitmapInfo.palette=e},c.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"),this.destroySoon())},c.prototype._complete=function(e){if(!this.errord){try{var t=u.dataToBitMap(e,this._bitmapInfo),r=l(t,this._bitmapInfo);t=null}catch(e){return void this._handleError(e)}this.emit("parsed",r)}}},{"./bitmapper":179,"./chunkstream":181,"./filter-parse-async":185,"./format-normaliser":188,"./parser":196,util:261,zlib:132}],195:[function(e,t,r){(function(r){"use strict";var n=!0,i=e("zlib");i.deflateSync||(n=!1);var o=e("./sync-reader"),s=e("./filter-parse-sync"),a=e("./parser"),u=e("./bitmapper"),l=e("./format-normaliser");t.exports=function(e,t){if(!n)throw new Error("To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport");var c,h,p;var f=[];var d=new o(e);if(new a(t,{read:d.read.bind(d),error:function(e){c=e},metadata:function(e){h=e},gamma:function(e){p=e},palette:function(e){h.palette=e},transColor:function(e){h.transColor=e},inflateData:function(e){f.push(e)}}).start(),d.process(),c)throw c;var m=r.concat(f);f.length=0;var g=i.inflateSync(m);if(m=null,!g||!g.length)throw new Error("bad png - invalid inflate data response");var v=s.process(g,h);m=null;var y=u.dataToBitMap(v,h);v=null;var b=l(y,h);return h.data=b,h.gamma=p||0,h}}).call(this,e("buffer").Buffer)},{"./bitmapper":179,"./filter-parse-sync":186,"./format-normaliser":188,"./parser":196,"./sync-reader":199,buffer:134,zlib:132}],196:[function(e,t,r){(function(r){"use strict";var n=e("./constants"),i=e("./crc"),o=t.exports=function(e,t){this._options=e,e.checkCRC=!1!==e.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[n.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[n.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[n.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[n.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[n.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[n.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.inflateData=t.inflateData,this.finished=t.finished};o.prototype.start=function(){this.read(n.PNG_SIGNATURE.length,this._parseSignature.bind(this))},o.prototype._parseSignature=function(e){for(var t=n.PNG_SIGNATURE,r=0;r<t.length;r++)if(e[r]!==t[r])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},o.prototype._parseChunkBegin=function(e){for(var t=e.readUInt32BE(0),o=e.readUInt32BE(4),s="",a=4;a<8;a++)s+=String.fromCharCode(e[a]);var u=Boolean(32&e[4]);if(this._hasIHDR||o===n.TYPE_IHDR){if(this._crc=new i,this._crc.write(new r(s)),this._chunks[o])return this._chunks[o](t);u?this.read(t+4,this._skipChunk.bind(this)):this.error(new Error("Unsupported critical chunk type "+s))}else this.error(new Error("Expected IHDR on beggining"))},o.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},o.prototype._parseChunkEnd=function(e){var t=e.readInt32BE(0),r=this._crc.crc32();this._options.checkCRC&&r!==t?this.error(new Error("Crc error - "+t+" - "+r)):this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))},o.prototype._parseIHDR=function(e){this._crc.write(e);var t=e.readUInt32BE(0),r=e.readUInt32BE(4),i=e[8],o=e[9],s=e[10],a=e[11],u=e[12];if(8===i||4===i||2===i||1===i||16===i)if(o in n.COLORTYPE_TO_BPP_MAP)if(0===s)if(0===a)if(0===u||1===u){this._colorType=o;var l=n.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:r,depth:i,interlace:Boolean(u),palette:Boolean(o&n.COLORTYPE_PALETTE),color:Boolean(o&n.COLORTYPE_COLOR),alpha:Boolean(o&n.COLORTYPE_ALPHA),bpp:l,colorType:o}),this._handleChunkEnd()}else this.error(new Error("Unsupported interlace method"));else this.error(new Error("Unsupported filter method"));else this.error(new Error("Unsupported compression method"));else this.error(new Error("Unsupported color type"));else this.error(new Error("Unsupported bit depth "+i))},o.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))},o.prototype._parsePLTE=function(e){this._crc.write(e);for(var t=Math.floor(e.length/3),r=0;r<t;r++)this._palette.push([e[3*r],e[3*r+1],e[3*r+2],255]);this.palette(this._palette),this._handleChunkEnd()},o.prototype._handleTRNS=function(e){this.read(e,this._parseTRNS.bind(this))},o.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===n.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length)return void this.error(new Error("Transparency chunk must be after palette"));if(e.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(var t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===n.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===n.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()},o.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))},o.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/n.GAMMA_DIVISION),this._handleChunkEnd()},o.prototype._handleIDAT=function(e){this.read(-e,this._parseIDAT.bind(this,e))},o.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===n.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw new Error("Expected palette not found");this.inflateData(t);var r=e-t.length;r>0?this._handleIDAT(r):this._handleChunkEnd()},o.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))},o.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}}).call(this,e("buffer").Buffer)},{"./constants":182,"./crc":183,buffer:134}],197:[function(e,t,r){"use strict";var n=e("./parser-sync"),i=e("./packer-sync");r.read=function(e,t){return n(e,t||{})},r.write=function(e){return i(e)}},{"./packer-sync":191,"./parser-sync":195}],198:[function(e,t,r){(function(t,n){"use strict";var i=e("util"),o=e("stream"),s=e("./parser-async"),a=e("./packer-async"),u=e("./png-sync"),l=r.PNG=function(e){o.call(this),e=e||{},this.width=e.width||0,this.height=e.height||0,this.data=this.width>0&&this.height>0?new n(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new s(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(e){this.data=e,this.emit("parsed",e)}.bind(this)),this._packer=new a(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};i.inherits(l,o),l.sync=u,l.prototype.pack=function(){return this.data&&this.data.length?(t.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this):(this.emit("error","No data provided"),this)},l.prototype.parse=function(e,t){var r,n;t&&(r=function(e){this.removeListener("error",n),this.data=e,t(null,this)}.bind(this),n=function(e){this.removeListener("parsed",r),t(e,null)}.bind(this),this.once("parsed",r),this.once("error",n));return this.end(e),this},l.prototype.write=function(e){return this._parser.write(e),!0},l.prototype.end=function(e){this._parser.end(e)},l.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)},l.prototype._gamma=function(e){this.gamma=e},l.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},l.bitblt=function(e,t,r,n,i,o,s,a){if(r>e.width||n>e.height||r+i>e.width||n+o>e.height)throw new Error("bitblt reading outside image");if(s>t.width||a>t.height||s+i>t.width||a+o>t.height)throw new Error("bitblt writing outside image");for(var u=0;u<o;u++)e.data.copy(t.data,(a+u)*t.width+s<<2,(n+u)*e.width+r<<2,(n+u)*e.width+r+i<<2)},l.prototype.bitblt=function(e,t,r,n,i,o,s){return l.bitblt(this,e,t,r,n,i,o,s),this},l.adjustGamma=function(e){if(e.gamma){for(var t=0;t<e.height;t++)for(var r=0;r<e.width;r++)for(var n=e.width*t+r<<2,i=0;i<3;i++){var o=e.data[n+i]/255;o=Math.pow(o,1/2.2/e.gamma),e.data[n+i]=Math.round(255*o)}e.gamma=0}},l.prototype.adjustGamma=function(){l.adjustGamma(this)}}).call(this,e("_process"),e("buffer").Buffer)},{"./packer-async":190,"./parser-async":194,"./png-sync":197,_process:200,buffer:134,stream:251,util:261}],199:[function(e,t,r){"use strict";var n=t.exports=function(e){this._buffer=e,this._reads=[]};n.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})},n.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){var e=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=e.length||e.allowLess))break;this._reads.shift();var t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}return this._reads.length>0?new Error("There are some read requests waitng on finished stream"):this._buffer.length>0?new Error("unrecognised content at end of stream"):void 0}},{}],200:[function(e,t,r){var n,i,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,c=[],h=!1,p=-1;function f(){h&&l&&(h=!1,l.length?c=l.concat(c):p=-1,c.length&&d())}function d(){if(!h){var e=u(f);h=!0;for(var t=c.length;t;){for(l=c,c=[];++p<t;)l&&l[p].run();p=-1,t=c.length}l=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||h||u(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],201:[function(e,t,r){var n=e("./can-promise"),i=e("./core/qrcode"),o=e("./renderer/canvas"),s=e("./renderer/svg-tag.js");function a(e,t,r,o,s){var a=[].slice.call(arguments,1),u=a.length,l="function"==typeof a[u-1];if(!l&&!n())throw new Error("Callback required as last argument");if(!l){if(u<1)throw new Error("Too few arguments provided");return 1===u?(r=t,t=o=void 0):2!==u||t.getContext||(o=r,r=t,t=void 0),new Promise(function(n,s){try{var a=i.create(r,o);n(e(a,t,o))}catch(e){s(e)}})}if(u<2)throw new Error("Too few arguments provided");2===u?(s=r,r=t,t=o=void 0):3===u&&(t.getContext&&void 0===s?(s=o,o=void 0):(s=o,o=r,r=t,t=void 0));try{var c=i.create(r,o);s(null,e(c,t,o))}catch(e){s(e)}}r.create=i.create,r.toCanvas=a.bind(null,o.render),r.toDataURL=a.bind(null,o.renderToDataURL),r.toString=a.bind(null,function(e,t,r){return s.render(e,r)})},{"./can-promise":202,"./core/qrcode":218,"./renderer/canvas":225,"./renderer/svg-tag.js":226}],202:[function(e,t,r){t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},{}],203:[function(e,t,r){var n=e("./utils").getSymbolSize;r.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,r=n(e),i=145===r?26:2*Math.ceil((r-13)/(2*t-2)),o=[r-7],s=1;s<t-1;s++)o[s]=o[s-1]-i;return o.push(6),o.reverse()},r.getPositions=function(e){for(var t=[],n=r.getRowColCoords(e),i=n.length,o=0;o<i;o++)for(var s=0;s<i;s++)0===o&&0===s||0===o&&s===i-1||o===i-1&&0===s||t.push([n[o],n[s]]);return t}},{"./utils":222}],204:[function(e,t,r){var n=e("./mode"),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=n.ALPHANUMERIC,this.data=e}o.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var r=45*i.indexOf(this.data[t]);r+=i.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(i.indexOf(this.data[t]),6)},t.exports=o},{"./mode":215}],205:[function(e,t,r){function n(){this.buffer=[],this.length=0}n.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},t.exports=n},{}],206:[function(e,t,r){var n=e("../utils/buffer");function i(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new n(e*e),this.data.fill(0),this.reservedBit=new n(e*e),this.reservedBit.fill(0)}i.prototype.set=function(e,t,r,n){var i=e*this.size+t;this.data[i]=r,n&&(this.reservedBit[i]=!0)},i.prototype.get=function(e,t){return this.data[e*this.size+t]},i.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},i.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},t.exports=i},{"../utils/buffer":228}],207:[function(e,t,r){var n=e("../utils/buffer"),i=e("./mode");function o(e){this.mode=i.BYTE,this.data=new n(e)}o.getBitsLength=function(e){return 8*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){for(var t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},t.exports=o},{"../utils/buffer":228,"./mode":215}],208:[function(e,t,r){var n=e("./error-correction-level"),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];r.getBlocksCount=function(e,t){switch(t){case n.L:return i[4*(e-1)+0];case n.M:return i[4*(e-1)+1];case n.Q:return i[4*(e-1)+2];case n.H:return i[4*(e-1)+3];default:return}},r.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return o[4*(e-1)+0];case n.M:return o[4*(e-1)+1];case n.Q:return o[4*(e-1)+2];case n.H:return o[4*(e-1)+3];default:return}}},{"./error-correction-level":209}],209:[function(e,t,r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2},r.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},r.from=function(e,t){if(r.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return t}}},{}],210:[function(e,t,r){var n=e("./utils").getSymbolSize;r.getPositions=function(e){var t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},{"./utils":222}],211:[function(e,t,r){var n=e("./utils"),i=n.getBCHDigit(1335);r.getEncodedBits=function(e,t){for(var r=e.bit<<3|t,o=r<<10;n.getBCHDigit(o)-i>=0;)o^=1335<<n.getBCHDigit(o)-i;return 21522^(r<<10|o)}},{"./utils":222}],212:[function(e,t,r){var n=e("../utils/buffer");if(n.alloc)var i=n.alloc(512),o=n.alloc(256);else i=new n(512),o=new n(256);!function(){for(var e=1,t=0;t<255;t++)i[t]=e,o[e]=t,256&(e<<=1)&&(e^=285);for(t=255;t<512;t++)i[t]=i[t-255]}(),r.log=function(e){if(e<1)throw new Error("log("+e+")");return o[e]},r.exp=function(e){return i[e]},r.mul=function(e,t){return 0===e||0===t?0:i[o[e]+o[t]]}},{"../utils/buffer":228}],213:[function(e,t,r){var n=e("./mode"),i=e("./utils");function o(e){this.mode=n.KANJI,this.data=e}o.getBitsLength=function(e){return 13*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var r=i.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else{if(!(r>=57408&&r<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");r-=49472}r=192*(r>>>8&255)+(255&r),e.put(r,13)}},t.exports=o},{"./mode":215,"./utils":222}],214:[function(e,t,r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var n=3,i=3,o=40,s=10;function a(e,t,n){switch(e){case r.Patterns.PATTERN000:return(t+n)%2==0;case r.Patterns.PATTERN001:return t%2==0;case r.Patterns.PATTERN010:return n%3==0;case r.Patterns.PATTERN011:return(t+n)%3==0;case r.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case r.Patterns.PATTERN101:return t*n%2+t*n%3==0;case r.Patterns.PATTERN110:return(t*n%2+t*n%3)%2==0;case r.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}r.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},r.from=function(e){return r.isValid(e)?parseInt(e,10):void 0},r.getPenaltyN1=function(e){for(var t=e.size,r=0,i=0,o=0,s=null,a=null,u=0;u<t;u++){i=o=0,s=a=null;for(var l=0;l<t;l++){var c=e.get(u,l);c===s?i++:(i>=5&&(r+=n+(i-5)),s=c,i=1),(c=e.get(l,u))===a?o++:(o>=5&&(r+=n+(o-5)),a=c,o=1)}i>=5&&(r+=n+(i-5)),o>=5&&(r+=n+(o-5))}return r},r.getPenaltyN2=function(e){for(var t=e.size,r=0,n=0;n<t-1;n++)for(var o=0;o<t-1;o++){var s=e.get(n,o)+e.get(n,o+1)+e.get(n+1,o)+e.get(n+1,o+1);4!==s&&0!==s||r++}return r*i},r.getPenaltyN3=function(e){for(var t=e.size,r=0,n=0,i=0,s=0;s<t;s++){n=i=0;for(var a=0;a<t;a++)n=n<<1&2047|e.get(s,a),a>=10&&(1488===n||93===n)&&r++,i=i<<1&2047|e.get(a,s),a>=10&&(1488===i||93===i)&&r++}return r*o},r.getPenaltyN4=function(e){for(var t=0,r=e.data.length,n=0;n<r;n++)t+=e.data[n];return Math.abs(Math.ceil(100*t/r/5)-10)*s},r.applyMask=function(e,t){for(var r=t.size,n=0;n<r;n++)for(var i=0;i<r;i++)t.isReserved(i,n)||t.xor(i,n,a(e,i,n))},r.getBestMask=function(e,t){for(var n=Object.keys(r.Patterns).length,i=0,o=1/0,s=0;s<n;s++){t(s),r.applyMask(s,e);var a=r.getPenaltyN1(e)+r.getPenaltyN2(e)+r.getPenaltyN3(e)+r.getPenaltyN4(e);r.applyMask(s,e),a<o&&(o=a,i=s)}return i}},{}],215:[function(e,t,r){var n=e("./version-check"),i=e("./regex");r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!n.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},r.getBestModeForData=function(e){return i.testNumeric(e)?r.NUMERIC:i.testAlphanumeric(e)?r.ALPHANUMERIC:i.testKanji(e)?r.KANJI:r.BYTE},r.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},r.isValid=function(e){return e&&e.bit&&e.ccBits},r.from=function(e,t){if(r.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return t}}},{"./regex":220,"./version-check":223}],216:[function(e,t,r){var n=e("./mode");function i(e){this.mode=n.NUMERIC,this.data=e.toString()}i.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(e){var t,r,n;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),n=parseInt(r,10),e.put(n,10);var i=this.data.length-t;i>0&&(r=this.data.substr(t),n=parseInt(r,10),e.put(n,3*i+1))},t.exports=i},{"./mode":215}],217:[function(e,t,r){var n=e("../utils/buffer"),i=e("./galois-field");r.mul=function(e,t){var r=new n(e.length+t.length-1);r.fill(0);for(var o=0;o<e.length;o++)for(var s=0;s<t.length;s++)r[o+s]^=i.mul(e[o],t[s]);return r},r.mod=function(e,t){for(var r=new n(e);r.length-t.length>=0;){for(var o=r[0],s=0;s<t.length;s++)r[s]^=i.mul(t[s],o);for(var a=0;a<r.length&&0===r[a];)a++;r=r.slice(a)}return r},r.generateECPolynomial=function(e){for(var t=new n([1]),o=0;o<e;o++)t=r.mul(t,[1,i.exp(o)]);return t}},{"../utils/buffer":228,"./galois-field":212}],218:[function(e,t,r){var n=e("../utils/buffer"),i=e("./utils"),o=e("./error-correction-level"),s=e("./bit-buffer"),a=e("./bit-matrix"),u=e("./alignment-pattern"),l=e("./finder-pattern"),c=e("./mask-pattern"),h=e("./error-correction-code"),p=e("./reed-solomon-encoder"),f=e("./version"),d=e("./format-info"),m=e("./mode"),g=e("./segments"),v=e("isarray");function y(e,t,r){var n,i,o=e.size,s=d.getEncodedBits(t,r);for(n=0;n<15;n++)i=1==(s>>n&1),n<6?e.set(n,8,i,!0):n<8?e.set(n+1,8,i,!0):e.set(o-15+n,8,i,!0),n<8?e.set(8,o-n-1,i,!0):n<9?e.set(8,15-n-1+1,i,!0):e.set(8,15-n-1,i,!0);e.set(o-8,8,1,!0)}function b(e,t,r){var o=new s;r.forEach(function(t){o.put(t.mode.bit,4),o.put(t.getLength(),m.getCharCountIndicator(t.mode,e)),t.write(o)});var a=8*(i.getSymbolTotalCodewords(e)-h.getTotalCodewordsCount(e,t));for(o.getLengthInBits()+4<=a&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(0);for(var u=(a-o.getLengthInBits())/8,l=0;l<u;l++)o.put(l%2?17:236,8);return function(e,t,r){for(var o=i.getSymbolTotalCodewords(t),s=h.getTotalCodewordsCount(t,r),a=o-s,u=h.getBlocksCount(t,r),l=u-o%u,c=Math.floor(o/u),f=Math.floor(a/u),d=f+1,m=c-f,g=new p(m),v=0,y=new Array(u),b=new Array(u),x=0,_=new n(e.buffer),w=0;w<u;w++){var k=w<l?f:d;y[w]=_.slice(v,v+k),b[w]=g.encode(y[w]),v+=k,x=Math.max(x,k)}var T,E,S=new n(o),C=0;for(T=0;T<x;T++)for(E=0;E<u;E++)T<y[E].length&&(S[C++]=y[E][T]);for(T=0;T<m;T++)for(E=0;E<u;E++)S[C++]=b[E][T];return S}(o,e,t)}function x(e,t,r,n){var o;if(v(e))o=g.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");var s=t;if(!s){var h=g.rawSplit(e);s=f.getBestVersionForData(h,r)}o=g.fromString(e,s||40)}var p=f.getBestVersionForData(o,r);if(!p)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<p)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+p+".\n")}else t=p;var d=b(t,r,o),m=i.getSymbolSize(t),x=new a(m);return function(e,t){for(var r=e.size,n=l.getPositions(t),i=0;i<n.length;i++)for(var o=n[i][0],s=n[i][1],a=-1;a<=7;a++)if(!(o+a<=-1||r<=o+a))for(var u=-1;u<=7;u++)s+u<=-1||r<=s+u||(a>=0&&a<=6&&(0===u||6===u)||u>=0&&u<=6&&(0===a||6===a)||a>=2&&a<=4&&u>=2&&u<=4?e.set(o+a,s+u,!0,!0):e.set(o+a,s+u,!1,!0))}(x,t),function(e){for(var t=e.size,r=8;r<t-8;r++){var n=r%2==0;e.set(r,6,n,!0),e.set(6,r,n,!0)}}(x),function(e,t){for(var r=u.getPositions(t),n=0;n<r.length;n++)for(var i=r[n][0],o=r[n][1],s=-2;s<=2;s++)for(var a=-2;a<=2;a++)-2===s||2===s||-2===a||2===a||0===s&&0===a?e.set(i+s,o+a,!0,!0):e.set(i+s,o+a,!1,!0)}(x,t),y(x,r,0),t>=7&&function(e,t){for(var r,n,i,o=e.size,s=f.getEncodedBits(t),a=0;a<18;a++)r=Math.floor(a/3),n=a%3+o-8-3,i=1==(s>>a&1),e.set(r,n,i,!0),e.set(n,r,i,!0)}(x,t),function(e,t){for(var r=e.size,n=-1,i=r-1,o=7,s=0,a=r-1;a>0;a-=2)for(6===a&&a--;;){for(var u=0;u<2;u++)if(!e.isReserved(i,a-u)){var l=!1;s<t.length&&(l=1==(t[s]>>>o&1)),e.set(i,a-u,l),-1==--o&&(s++,o=7)}if((i+=n)<0||r<=i){i-=n,n=-n;break}}}(x,d),isNaN(n)&&(n=c.getBestMask(x,y.bind(null,x,r))),c.applyMask(n,x),y(x,r,n),{modules:x,version:t,errorCorrectionLevel:r,maskPattern:n,segments:o}}r.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");var r,n,s=o.M;return void 0!==t&&(s=o.from(t.errorCorrectionLevel,o.M),r=f.from(t.version),n=c.from(t.maskPattern),t.toSJISFunc&&i.setToSJISFunction(t.toSJISFunc)),x(e,r,s,n)}},{"../utils/buffer":228,"./alignment-pattern":203,"./bit-buffer":205,"./bit-matrix":206,"./error-correction-code":208,"./error-correction-level":209,"./finder-pattern":210,"./format-info":211,"./mask-pattern":214,"./mode":215,"./reed-solomon-encoder":219,"./segments":221,"./utils":222,"./version":224,isarray:229}],219:[function(e,t,r){var n=e("../utils/buffer"),i=e("./polynomial");function o(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}o.prototype.initialize=function(e){this.degree=e,this.genPoly=i.generateECPolynomial(this.degree)},o.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var t=new n(this.degree);t.fill(0);var r=n.concat([e,t],e.length+this.degree),o=i.mod(r,this.genPoly),s=this.degree-o.length;if(s>0){var a=new n(this.degree);return a.fill(0),o.copy(a,s),a}return o},t.exports=o},{"../utils/buffer":228,"./polynomial":217}],220:[function(e,t,r){var n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",i="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n=n.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";r.KANJI=new RegExp(n,"g"),r.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),r.BYTE=new RegExp(i,"g"),r.NUMERIC=new RegExp("[0-9]+","g"),r.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var o=new RegExp("^"+n+"$"),s=new RegExp("^[0-9]+$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");r.testKanji=function(e){return o.test(e)},r.testNumeric=function(e){return s.test(e)},r.testAlphanumeric=function(e){return a.test(e)}},{}],221:[function(e,t,r){var n=e("./mode"),i=e("./numeric-data"),o=e("./alphanumeric-data"),s=e("./byte-data"),a=e("./kanji-data"),u=e("./regex"),l=e("./utils"),c=e("dijkstrajs");function h(e){return unescape(encodeURIComponent(e)).length}function p(e,t,r){for(var n,i=[];null!==(n=e.exec(r));)i.push({data:n[0],index:n.index,mode:t,length:n[0].length});return i}function f(e){var t,r,i=p(u.NUMERIC,n.NUMERIC,e),o=p(u.ALPHANUMERIC,n.ALPHANUMERIC,e);return l.isKanjiModeEnabled()?(t=p(u.BYTE,n.BYTE,e),r=p(u.KANJI,n.KANJI,e)):(t=p(u.BYTE_KANJI,n.BYTE,e),r=[]),i.concat(o,t,r).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function d(e,t){switch(t){case n.NUMERIC:return i.getBitsLength(e);case n.ALPHANUMERIC:return o.getBitsLength(e);case n.KANJI:return a.getBitsLength(e);case n.BYTE:return s.getBitsLength(e)}}function m(e,t){var r,u=n.getBestModeForData(e);if((r=n.from(t,u))!==n.BYTE&&r.bit<u.bit)throw new Error('"'+e+'" cannot be encoded with mode '+n.toString(r)+".\n Suggested mode is: "+n.toString(u));switch(r!==n.KANJI||l.isKanjiModeEnabled()||(r=n.BYTE),r){case n.NUMERIC:return new i(e);case n.ALPHANUMERIC:return new o(e);case n.KANJI:return new a(e);case n.BYTE:return new s(e)}}r.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e},[])},r.fromString=function(e,t){for(var i=function(e,t){for(var r={},i={start:{}},o=["start"],s=0;s<e.length;s++){for(var a=e[s],u=[],l=0;l<a.length;l++){var c=a[l],h=""+s+l;u.push(h),r[h]={node:c,lastCount:0},i[h]={};for(var p=0;p<o.length;p++){var f=o[p];r[f]&&r[f].node.mode===c.mode?(i[f][h]=d(r[f].lastCount+c.length,c.mode)-d(r[f].lastCount,c.mode),r[f].lastCount+=c.length):(r[f]&&(r[f].lastCount=c.length),i[f][h]=d(c.length,c.mode)+4+n.getCharCountIndicator(c.mode,t))}}o=u}for(p=0;p<o.length;p++)i[o[p]].end=0;return{map:i,table:r}}(function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];switch(i.mode){case n.NUMERIC:t.push([i,{data:i.data,mode:n.ALPHANUMERIC,length:i.length},{data:i.data,mode:n.BYTE,length:i.length}]);break;case n.ALPHANUMERIC:t.push([i,{data:i.data,mode:n.BYTE,length:i.length}]);break;case n.KANJI:t.push([i,{data:i.data,mode:n.BYTE,length:h(i.data)}]);break;case n.BYTE:t.push([{data:i.data,mode:n.BYTE,length:h(i.data)}])}}return t}(f(e,l.isKanjiModeEnabled())),t),o=c.find_path(i.map,"start","end"),s=[],a=1;a<o.length-1;a++)s.push(i.table[o[a]].node);return r.fromArray(function(e){return e.reduce(function(e,t){var r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}(s))},r.rawSplit=function(e){return r.fromArray(f(e,l.isKanjiModeEnabled()))}},{"./alphanumeric-data":204,"./byte-data":207,"./kanji-data":213,"./mode":215,"./numeric-data":216,"./regex":220,"./utils":222,dijkstrajs:19}],222:[function(e,t,r){var n,i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];r.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},r.getSymbolTotalCodewords=function(e){return i[e]},r.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},r.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},r.isKanjiModeEnabled=function(){return void 0!==n},r.toSJIS=function(e){return n(e)}},{}],223:[function(e,t,r){r.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},{}],224:[function(e,t,r){var n=e("./utils"),i=e("./error-correction-code"),o=e("./error-correction-level"),s=e("./mode"),a=e("./version-check"),u=e("isarray"),l=n.getBCHDigit(7973);function c(e,t){return s.getCharCountIndicator(e,t)+4}function h(e,t){var r=0;return e.forEach(function(e){var n=c(e.mode,t);r+=n+e.getBitsLength()}),r}r.from=function(e,t){return a.isValid(e)?parseInt(e,10):t},r.getCapacity=function(e,t,r){if(!a.isValid(e))throw new Error("Invalid QR Code version");void 0===r&&(r=s.BYTE);var o=8*(n.getSymbolTotalCodewords(e)-i.getTotalCodewordsCount(e,t));if(r===s.MIXED)return o;var u=o-c(r,e);switch(r){case s.NUMERIC:return Math.floor(u/10*3);case s.ALPHANUMERIC:return Math.floor(u/11*2);case s.KANJI:return Math.floor(u/13);case s.BYTE:default:return Math.floor(u/8)}},r.getBestVersionForData=function(e,t){var n,i=o.from(t,o.M);if(u(e)){if(e.length>1)return function(e,t){for(var n=1;n<=40;n++)if(h(e,n)<=r.getCapacity(n,t,s.MIXED))return n}(e,i);if(0===e.length)return 1;n=e[0]}else n=e;return function(e,t,n){for(var i=1;i<=40;i++)if(t<=r.getCapacity(i,n,e))return i}(n.mode,n.getLength(),i)},r.getEncodedBits=function(e){if(!a.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var t=e<<12;n.getBCHDigit(t)-l>=0;)t^=7973<<n.getBCHDigit(t)-l;return e<<12|t}},{"./error-correction-code":208,"./error-correction-level":209,"./mode":215,"./utils":222,"./version-check":223,isarray:229}],225:[function(e,t,r){var n=e("./utils");r.render=function(e,t,r){var i=r,o=t;void 0!==i||t&&t.getContext||(i=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),i=n.getOptions(i);var s=n.getImageWidth(e.modules.size,i),a=o.getContext("2d"),u=a.createImageData(s,s);return n.qrToImageData(u.data,e,i),function(e,t,r){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=r,t.width=r,t.style.height=r+"px",t.style.width=r+"px"}(a,o,s),a.putImageData(u,0,0),o},r.renderToDataURL=function(e,t,n){var i=n;void 0!==i||t&&t.getContext||(i=t,t=void 0),i||(i={});var o=r.render(e,t,i),s=i.type||"image/png",a=i.rendererOpts||{};return o.toDataURL(s,a.quality)}},{"./utils":227}],226:[function(e,t,r){var n=e("./utils");function i(e,t){var r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function o(e,t,r){var n=e+t;return void 0!==r&&(n+=" "+r),n}r.render=function(e,t,r){var s=n.getOptions(t),a=e.modules.size,u=e.modules.data,l=a+2*s.margin,c=s.color.light.a?"<path "+i(s.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",h="<path "+i(s.color.dark,"stroke")+' d="'+function(e,t,r){for(var n="",i=0,s=!1,a=0,u=0;u<e.length;u++){var l=Math.floor(u%t),c=Math.floor(u/t);l||s||(s=!0),e[u]?(a++,u>0&&l>0&&e[u-1]||(n+=s?o("M",l+r,.5+c+r):o("m",i,0),i=0,s=!1),l+1<t&&e[u+1]||(n+=o("h",a),a=0)):i++}return n}(u,a,s.margin)+'"/>',p='viewBox="0 0 '+l+" "+l+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+p+' shape-rendering="crispEdges">'+c+h+"</svg>\n";return"function"==typeof r&&r(null,f),f}},{"./utils":227}],227:[function(e,t,r){function n(e){if("string"!=typeof e)throw new Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");var r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}r.getOptions=function(e){e||(e={}),e.color||(e.color={});var t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:r,scale:r?4:i,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},r.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},r.getImageWidth=function(e,t){var n=r.getScale(e,t);return Math.floor((e+2*t.margin)*n)},r.qrToImageData=function(e,t,n){for(var i=t.modules.size,o=t.modules.data,s=r.getScale(i,n),a=Math.floor((i+2*n.margin)*s),u=n.margin*s,l=[n.color.light,n.color.dark],c=0;c<a;c++)for(var h=0;h<a;h++){var p=4*(c*a+h),f=n.color.light;if(c>=u&&h>=u&&c<a-u&&h<a-u)f=l[o[Math.floor((c-u)/s)*i+Math.floor((h-u)/s)]?1:0];e[p++]=f.r,e[p++]=f.g,e[p++]=f.b,e[p]=f.a}}},{}],228:[function(e,t,r){"use strict";var n=e("isarray");o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}();var i=o.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function o(e,t,r){return o.TYPED_ARRAY_SUPPORT||this instanceof o?"number"==typeof e?u(this,e):function(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer)return function(e,t,r,n){if(r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var i;i=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);o.TYPED_ARRAY_SUPPORT?i.__proto__=o.prototype:i=l(e,i);return i}(e,t,r,n);if("string"==typeof t)return function(e,t){var r=0|h(t),n=a(e,r),i=n.write(t);i!==r&&(n=n.slice(0,i));return n}(e,t);return function(e,t){if(o.isBuffer(t)){var r=0|s(t.length),n=a(e,r);return 0===n.length?n:(t.copy(n,0,0,r),n)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?a(e,0):l(e,t);if("Buffer"===t.type&&Array.isArray(t.data))return l(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}(this,e,t,r):new o(e,t,r)}function s(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function a(e,t){var r;return o.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t)).__proto__=o.prototype:(null===(r=e)&&(r=new o(t)),r.length=t),r}function u(e,t){var r=a(e,t<0?0:0|s(t));if(!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)r[n]=0;return r}function l(e,t){for(var r=t.length<0?0:0|s(t.length),n=a(e,r),i=0;i<r;i+=1)n[i]=255&t[i];return n}function c(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function h(e){return o.isBuffer(e)?e.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)?e.byteLength:("string"!=typeof e&&(e=""+e),0===e.length?0:c(e).length)}o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),o.prototype.write=function(e,t,r){void 0===t?(r=this.length,t=0):void 0===r&&"string"==typeof t?(r=this.length,t=0):isFinite(t)&&(t|=0,isFinite(r)?r|=0:r=void 0);var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(e,t,r,n){return function(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}(c(t,e.length-r),e,r,n)}(this,e,t,r)},o.prototype.slice=function(e,t){var r,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),o.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+e]}return r},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,s=n-r;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},o.prototype.fill=function(e,t,r){if("string"==typeof e){if("string"==typeof t?(t=0,r=this.length):"string"==typeof r&&(r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=o.isBuffer(e)?e:new o(e),a=s.length;for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this},o.concat=function(e,t){if(!n(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a(null,0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=u(null,t),s=0;for(r=0;r<e.length;++r){var l=e[r];if(!o.isBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(i,s),s+=l.length}return i},o.byteLength=h,o.prototype._isBuffer=!0,o.isBuffer=function(e){return!(null==e||!e._isBuffer)},t.exports=o},{isarray:229}],229:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],230:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":231}],231:[function(e,t,r){"use strict";var n=e("process-nextick-args"),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=h;var o=e("core-util-is");o.inherits=e("inherits");var s=e("./_stream_readable"),a=e("./_stream_writable");o.inherits(h,s);for(var u=i(a.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(e){if(!(this instanceof h))return new h(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},{"./_stream_readable":233,"./_stream_writable":235,"core-util-is":14,inherits:157,"process-nextick-args":240}],232:[function(e,t,r){"use strict";t.exports=o;var n=e("./_stream_transform"),i=e("core-util-is");function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=e("inherits"),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":234,"core-util-is":14,inherits:157}],233:[function(e,t,r){(function(r,n){"use strict";var i=e("process-nextick-args");t.exports=b;var o,s=e("isarray");b.ReadableState=y;e("events").EventEmitter;var a=function(e,t){return e.listeners(t).length},u=e("./internal/streams/stream"),l=e("safe-buffer").Buffer,c=n.Uint8Array||function(){};var h=e("core-util-is");h.inherits=e("inherits");var p=e("util"),f=void 0;f=p&&p.debuglog?p.debuglog("stream"):function(){};var d,m=e("./internal/streams/BufferList"),g=e("./internal/streams/destroy");h.inherits(b,u);var v=["error","close","destroy","pause","resume"];function y(t,r){o=o||e("./_stream_duplex"),t=t||{};var n=r instanceof o;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=e("string_decoder/").StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function b(t){if(o=o||e("./_stream_duplex"),!(this instanceof b))return new b(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function x(e,t,r,n,i){var o,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,T(e)}(e,s)):(i||(o=function(e,t){var r;n=t,l.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):_(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?_(e,s,t,!1):S(e,s)):_(e,s,t,!1))):n||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function _(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&T(e)),S(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=l.from(e,t),t=""),r=!0),x(this,e,t,!1,r)},b.prototype.unshift=function(e){return x(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return d||(d=e("string_decoder/").StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var w=8388608;function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=w?e=w:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(E,e):E(e))}function E(e){f("emit readable"),e.emit("readable"),I(e)}function S(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(C,e,t))}function C(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function A(e){f("readable nexttick read 0"),e.read(0)}function B(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=l.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0===(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function R(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(M,t,e))}function M(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):T(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&R(this),null;var n,i=t.needReadable;return f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",i=!0),t.ended||t.reading?f("reading or ended",i=!1):i&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(r,t))),null===(n=e>0?P(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&R(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,t);var u=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:b;function l(t,r){f("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,f("cleanup"),e.removeListener("close",v),e.removeListener("finish",y),e.removeListener("drain",h),e.removeListener("error",g),e.removeListener("unpipe",l),n.removeListener("end",c),n.removeListener("end",b),n.removeListener("data",m),p=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function c(){f("onend"),e.end()}o.endEmitted?i.nextTick(u):n.once("end",u),e.on("unpipe",l);var h=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,I(e))}}(n);e.on("drain",h);var p=!1;var d=!1;function m(t){f("ondata"),d=!1,!1!==e.write(t)||d||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==F(o.pipes,e))&&!p&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function g(t){f("onerror",t),b(),e.removeListener("error",g),0===a(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",y),b()}function y(){f("onfinish"),e.removeListener("close",v),b()}function b(){f("unpipe"),n.unpipe(e)}return n.on("data",m),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",g),e.once("close",v),e.once("finish",y),e.emit("pipe",n),o.flowing||(f("pipe resume"),n.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=F(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},b.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&T(this):i.nextTick(A,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(B,e,t))}(this,e)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(f("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(f("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<v.length;o++)e.on(v[o],this.emit.bind(this,v[o]));return this._read=function(t){f("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=P}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":231,"./internal/streams/BufferList":236,"./internal/streams/destroy":237,"./internal/streams/stream":238,_process:200,"core-util-is":14,events:135,inherits:157,isarray:239,"process-nextick-args":240,"safe-buffer":246,"string_decoder/":241,util:4}],234:[function(e,t,r){"use strict";t.exports=o;var n=e("./_stream_duplex"),i=e("core-util-is");function o(e){if(!(this instanceof o))return new o(e);n.call(this,e),this._transformState={afterTransform:function(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){a(e,t,r)}):a(this,null,null)}function a(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=e("inherits"),i.inherits(o,n),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},{"./_stream_duplex":231,"core-util-is":14,inherits:157}],235:[function(e,t,r){(function(r,n,i){"use strict";var o=e("process-nextick-args");function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}t.exports=y;var a,u=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?i:o.nextTick;y.WritableState=v;var l=e("core-util-is");l.inherits=e("inherits");var c={deprecate:e("util-deprecate")},h=e("./internal/streams/stream"),p=e("safe-buffer").Buffer,f=n.Uint8Array||function(){};var d,m=e("./internal/streams/destroy");function g(){}function v(t,r){a=a||e("./_stream_duplex"),t=t||{};var n=r instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(o.nextTick(i,n),o.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),T(e,t))}(e,r,n,t,i);else{var s=w(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||_(e,r),n?u(x,e,r,s,i):x(e,r,s,i)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function y(t){if(a=a||e("./_stream_duplex"),!(d.call(y,this)||this instanceof a))return new y(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function b(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function x(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),T(e,t)}function _(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,b(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,h=r.callback;if(b(e,t,!1,t.objectMode?1:l.length,l,c,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),T(e,t)})}function T(e,t){var r=w(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}l.inherits(y,h),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===y&&(e&&e._writableState instanceof v)}})):d=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,r){var n,i=this._writableState,s=!1,a=!i.objectMode&&(n=e,p.isBuffer(n)||n instanceof f);return a&&!p.isBuffer(e)&&(e=function(e){return p.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=g),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),o.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var i=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),o.nextTick(n,s),i=!1),i}(this,i,e,r))&&(i.pendingcb++,s=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=p.from(t,r));return t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,a,n,i,o);return u}(this,i,a,e,t,r)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,T(e,t),r&&(t.finished?o.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{"./_stream_duplex":231,"./internal/streams/destroy":237,"./internal/streams/stream":238,_process:200,"core-util-is":14,inherits:157,"process-nextick-args":240,"safe-buffer":246,timers:254,"util-deprecate":259}],236:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=e("util");t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,o=n.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=o,i=a,t.copy(r,i),a+=s.data.length,s=s.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":246,util:4}],237:[function(e,t,r){"use strict";var n=e("process-nextick-args");function i(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":240}],238:[function(e,t,r){t.exports=e("events").EventEmitter},{events:135}],239:[function(e,t,r){arguments[4][229][0].apply(r,arguments)},{dup:229}],240:[function(e,t,r){(function(e){"use strict";!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,n)});case 4:return e.nextTick(function(){t.call(null,r,n,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(this,e("_process"))},{_process:200}],241:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=c,this.end=h,t=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function c(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}r.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":246}],242:[function(e,t,r){t.exports=e("./readable").PassThrough},{"./readable":243}],243:[function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":231,"./lib/_stream_passthrough.js":232,"./lib/_stream_readable.js":233,"./lib/_stream_transform.js":234,"./lib/_stream_writable.js":235}],244:[function(e,t,r){t.exports=e("./readable").Transform},{"./readable":243}],245:[function(e,t,r){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":235}],246:[function(e,t,r){var n=e("buffer"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,r),r.Buffer=s),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:134}],247:[function(e,t,r){arguments[4][154][0].apply(r,arguments)},{"./lib/decoder":248,"./lib/encoder":249,dup:154}],248:[function(e,t,r){(function(e){var r=function(){"use strict";var e=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),t=4017,r=799,n=3406,i=2276,o=1567,s=3784,a=5793,u=2896;function l(){}function c(e,t){for(var r,n,i=0,o=[],s=16;s>0&&!e[s-1];)s--;o.push({children:[],index:0});var a,u=o[0];for(r=0;r<s;r++){for(n=0;n<e[r];n++){for((u=o.pop()).children[u.index]=t[i];u.index>0;)u=o.pop();for(u.index++,o.push(u);o.length<=r;)o.push(a={children:[],index:0}),u.children[u.index]=a.children,u=a;i++}r+1<s&&(o.push(a={children:[],index:0}),u.children[u.index]=a.children,u=a)}return o[0].children}function h(t,r,n,i,o,s,a,u,l){n.precision,n.samplesPerLine,n.scanLines;var c=n.mcusPerLine,h=n.progressive,p=(n.maxH,n.maxV,r),f=0,d=0;function m(){if(d>0)return f>>--d&1;if(255==(f=t[r++])){var e=t[r++];if(e)throw"unexpected marker: "+(f<<8|e).toString(16)}return d=7,f>>>7}function g(e){for(var t,r=e;null!==(t=m());){if("number"==typeof(r=r[t]))return r;if("object"!=typeof r)throw"invalid huffman sequence"}return null}function v(e){for(var t=0;e>0;){var r=m();if(null===r)return;t=t<<1|r,e--}return t}function y(e){var t=v(e);return t>=1<<e-1?t:t+(-1<<e)+1}var b=0;var x,_=0;function w(e,t,r,n,i){var o=r%c,s=(r/c|0)*e.v+n,a=o*e.h+i;t(e,e.blocks[s][a])}function k(e,t,r){var n=r/e.blocksPerLine|0,i=r%e.blocksPerLine;t(e,e.blocks[n][i])}var T,E,S,C,A,B,I=i.length;B=h?0===s?0===u?function(e,t){var r=g(e.huffmanTableDC),n=0===r?0:y(r)<<l;t[0]=e.pred+=n}:function(e,t){t[0]|=m()<<l}:0===u?function(t,r){if(b>0)b--;else for(var n=s,i=a;n<=i;){var o=g(t.huffmanTableAC),u=15&o,c=o>>4;if(0!==u)r[e[n+=c]]=y(u)*(1<<l),n++;else{if(c<15){b=v(c)+(1<<c)-1;break}n+=16}}}:function(t,r){for(var n=s,i=a,o=0;n<=i;){var u=e[n];switch(_){case 0:var c=g(t.huffmanTableAC),h=15&c;if(o=c>>4,0===h)o<15?(b=v(o)+(1<<o),_=4):(o=16,_=1);else{if(1!==h)throw"invalid ACn encoding";x=y(h),_=o?2:3}continue;case 1:case 2:r[u]?r[u]+=m()<<l:0==--o&&(_=2==_?3:0);break;case 3:r[u]?r[u]+=m()<<l:(r[u]=x<<l,_=0);break;case 4:r[u]&&(r[u]+=m()<<l)}n++}4===_&&0==--b&&(_=0)}:function(t,r){var n=g(t.huffmanTableDC),i=0===n?0:y(n);r[0]=t.pred+=i;for(var o=1;o<64;){var s=g(t.huffmanTableAC),a=15&s,u=s>>4;if(0!==a)r[e[o+=u]]=y(a),o++;else{if(u<15)break;o+=16}}};var P,R,M,F,D=0;for(R=1==I?i[0].blocksPerLine*i[0].blocksPerColumn:c*n.mcusPerColumn,o||(o=R);D<R;){for(E=0;E<I;E++)i[E].pred=0;if(b=0,1==I)for(T=i[0],A=0;A<o;A++)k(T,B,D),D++;else for(A=0;A<o;A++){for(E=0;E<I;E++)for(M=(T=i[E]).h,F=T.v,S=0;S<F;S++)for(C=0;C<M;C++)w(T,B,D,S,C);if(++D===R)break}if(d=0,(P=t[r]<<8|t[r+1])<65280)throw"marker was not found";if(!(P>=65488&&P<=65495))break;r+=2}return r-p}function p(e,l){var c,h,p=[],f=l.blocksPerLine,d=l.blocksPerColumn,m=f<<3,g=new Int32Array(64),v=new Uint8Array(64);function y(e,c,h){var p,f,d,m,g,v,y,b,x,_,w=l.quantizationTable,k=h;for(_=0;_<64;_++)k[_]=e[_]*w[_];for(_=0;_<8;++_){var T=8*_;0!=k[1+T]||0!=k[2+T]||0!=k[3+T]||0!=k[4+T]||0!=k[5+T]||0!=k[6+T]||0!=k[7+T]?(p=a*k[0+T]+128>>8,f=a*k[4+T]+128>>8,d=k[2+T],m=k[6+T],g=u*(k[1+T]-k[7+T])+128>>8,b=u*(k[1+T]+k[7+T])+128>>8,v=k[3+T]<<4,y=k[5+T]<<4,x=p-f+1>>1,p=p+f+1>>1,f=x,x=d*s+m*o+128>>8,d=d*o-m*s+128>>8,m=x,x=g-y+1>>1,g=g+y+1>>1,y=x,x=b+v+1>>1,v=b-v+1>>1,b=x,x=p-m+1>>1,p=p+m+1>>1,m=x,x=f-d+1>>1,f=f+d+1>>1,d=x,x=g*i+b*n+2048>>12,g=g*n-b*i+2048>>12,b=x,x=v*r+y*t+2048>>12,v=v*t-y*r+2048>>12,y=x,k[0+T]=p+b,k[7+T]=p-b,k[1+T]=f+y,k[6+T]=f-y,k[2+T]=d+v,k[5+T]=d-v,k[3+T]=m+g,k[4+T]=m-g):(x=a*k[0+T]+512>>10,k[0+T]=x,k[1+T]=x,k[2+T]=x,k[3+T]=x,k[4+T]=x,k[5+T]=x,k[6+T]=x,k[7+T]=x)}for(_=0;_<8;++_){var E=_;0!=k[8+E]||0!=k[16+E]||0!=k[24+E]||0!=k[32+E]||0!=k[40+E]||0!=k[48+E]||0!=k[56+E]?(p=a*k[0+E]+2048>>12,f=a*k[32+E]+2048>>12,d=k[16+E],m=k[48+E],g=u*(k[8+E]-k[56+E])+2048>>12,b=u*(k[8+E]+k[56+E])+2048>>12,v=k[24+E],y=k[40+E],x=p-f+1>>1,p=p+f+1>>1,f=x,x=d*s+m*o+2048>>12,d=d*o-m*s+2048>>12,m=x,x=g-y+1>>1,g=g+y+1>>1,y=x,x=b+v+1>>1,v=b-v+1>>1,b=x,x=p-m+1>>1,p=p+m+1>>1,m=x,x=f-d+1>>1,f=f+d+1>>1,d=x,x=g*i+b*n+2048>>12,g=g*n-b*i+2048>>12,b=x,x=v*r+y*t+2048>>12,v=v*t-y*r+2048>>12,y=x,k[0+E]=p+b,k[56+E]=p-b,k[8+E]=f+y,k[48+E]=f-y,k[16+E]=d+v,k[40+E]=d-v,k[24+E]=m+g,k[32+E]=m-g):(x=a*h[_+0]+8192>>14,k[0+E]=x,k[8+E]=x,k[16+E]=x,k[24+E]=x,k[32+E]=x,k[40+E]=x,k[48+E]=x,k[56+E]=x)}for(_=0;_<64;++_){var S=128+(k[_]+8>>4);c[_]=S<0?0:S>255?255:S}}for(var b=0;b<d;b++){var x=b<<3;for(c=0;c<8;c++)p.push(new Uint8Array(m));for(var _=0;_<f;_++){y(l.blocks[b][_],v,g);var w=0,k=_<<3;for(h=0;h<8;h++){var T=p[x+h];for(c=0;c<8;c++)T[k+c]=v[w++]}}}return p}function f(e){return e<0?0:e>255?255:e}return l.prototype={load:function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){var e=new Uint8Array(t.response||t.mozResponseArrayBuffer);this.parse(e),this.onload&&this.onload()}.bind(this),t.send(null)},parse:function(t){var r=0;t.length;function n(){var e=t[r]<<8|t[r+1];return r+=2,e}function i(){var e=n(),i=t.subarray(r,r+e-2);return r+=i.length,i}function o(e){var t,r,n=0,i=0;for(r in e.components)e.components.hasOwnProperty(r)&&(n<(t=e.components[r]).h&&(n=t.h),i<t.v&&(i=t.v));var o=Math.ceil(e.samplesPerLine/8/n),s=Math.ceil(e.scanLines/8/i);for(r in e.components)if(e.components.hasOwnProperty(r)){t=e.components[r];for(var a=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/n),u=Math.ceil(Math.ceil(e.scanLines/8)*t.v/i),l=o*t.h,c=s*t.v,h=[],p=0;p<c;p++){for(var f=[],d=0;d<l;d++)f.push(new Int32Array(64));h.push(f)}t.blocksPerLine=a,t.blocksPerColumn=u,t.blocks=h}e.maxH=n,e.maxV=i,e.mcusPerLine=o,e.mcusPerColumn=s}var s,a,u=null,l=null,f=[],d=[],m=[],g=[],v=n();if(65496!=v)throw"SOI not found";for(v=n();65497!=v;){var y;switch(v){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var b=i();65504===v&&74===b[0]&&70===b[1]&&73===b[2]&&70===b[3]&&0===b[4]&&(u={version:{major:b[5],minor:b[6]},densityUnits:b[7],xDensity:b[8]<<8|b[9],yDensity:b[10]<<8|b[11],thumbWidth:b[12],thumbHeight:b[13],thumbData:b.subarray(14,14+3*b[12]*b[13])}),65518===v&&65===b[0]&&100===b[1]&&111===b[2]&&98===b[3]&&101===b[4]&&0===b[5]&&(l={version:b[6],flags0:b[7]<<8|b[8],flags1:b[9]<<8|b[10],transformCode:b[11]});break;case 65499:for(var x=n()+r-2;r<x;){var _=t[r++],w=new Int32Array(64);if(_>>4==0)for(y=0;y<64;y++){w[e[y]]=t[r++]}else{if(_>>4!=1)throw"DQT: invalid table spec";for(y=0;y<64;y++){w[e[y]]=n()}}f[15&_]=w}break;case 65472:case 65473:case 65474:n(),(s={}).extended=65473===v,s.progressive=65474===v,s.precision=t[r++],s.scanLines=n(),s.samplesPerLine=n(),s.components={},s.componentsOrder=[];var k,T=t[r++];for(U=0;U<T;U++){k=t[r];var E=t[r+1]>>4,S=15&t[r+1],C=t[r+2];s.componentsOrder.push(k),s.components[k]={h:E,v:S,quantizationTable:f[C]},r+=3}o(s),d.push(s);break;case 65476:var A=n();for(U=2;U<A;){var B=t[r++],I=new Uint8Array(16),P=0;for(y=0;y<16;y++,r++)P+=I[y]=t[r];var R=new Uint8Array(P);for(y=0;y<P;y++,r++)R[y]=t[r];U+=17+P,(B>>4==0?g:m)[15&B]=c(I,R)}break;case 65501:n(),a=n();break;case 65498:n();var M=t[r++],F=[];for(U=0;U<M;U++){z=s.components[t[r++]];var D=t[r++];z.huffmanTableDC=g[D>>4],z.huffmanTableAC=m[15&D],F.push(z)}var L=t[r++],O=t[r++],j=t[r++],N=h(t,r,s,F,a,L,O,j>>4,15&j);r+=N;break;default:if(255==t[r-3]&&t[r-2]>=192&&t[r-2]<=254){r-=3;break}throw"unknown JPEG marker "+v.toString(16)}v=n()}if(1!=d.length)throw"only single frame JPEGs supported";this.width=s.samplesPerLine,this.height=s.scanLines,this.jfif=u,this.adobe=l,this.components=[];for(var U=0;U<s.componentsOrder.length;U++){var z=s.components[s.componentsOrder[U]];this.components.push({lines:p(0,z),scaleX:z.h/s.maxH,scaleY:z.v/s.maxV})}},getData:function(e,t){var r,n,i,o,s,a,u,l,c,h,p,d,m,g,v,y,b,x,_,w,k,T=this.width/e,E=this.height/t,S=0,C=e*t*this.components.length,A=new Uint8Array(C);switch(this.components.length){case 1:for(r=this.components[0],h=0;h<t;h++)for(s=r.lines[0|h*r.scaleY*E],c=0;c<e;c++)p=s[0|c*r.scaleX*T],A[S++]=p;break;case 2:for(r=this.components[0],n=this.components[1],h=0;h<t;h++)for(s=r.lines[0|h*r.scaleY*E],a=n.lines[0|h*n.scaleY*E],c=0;c<e;c++)p=s[0|c*r.scaleX*T],A[S++]=p,p=a[0|c*n.scaleX*T],A[S++]=p;break;case 3:for(k=!0,this.adobe&&this.adobe.transformCode?k=!0:void 0!==this.colorTransform&&(k=!!this.colorTransform),r=this.components[0],n=this.components[1],i=this.components[2],h=0;h<t;h++)for(s=r.lines[0|h*r.scaleY*E],a=n.lines[0|h*n.scaleY*E],u=i.lines[0|h*i.scaleY*E],c=0;c<e;c++)k?(p=s[0|c*r.scaleX*T],d=a[0|c*n.scaleX*T],x=f(p+1.402*((m=u[0|c*i.scaleX*T])-128)),_=f(p-.3441363*(d-128)-.71413636*(m-128)),w=f(p+1.772*(d-128))):(x=s[0|c*r.scaleX*T],_=a[0|c*n.scaleX*T],w=u[0|c*i.scaleX*T]),A[S++]=x,A[S++]=_,A[S++]=w;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";for(k=!1,this.adobe&&this.adobe.transformCode?k=!0:void 0!==this.colorTransform&&(k=!!this.colorTransform),r=this.components[0],n=this.components[1],i=this.components[2],o=this.components[3],h=0;h<t;h++)for(s=r.lines[0|h*r.scaleY*E],a=n.lines[0|h*n.scaleY*E],u=i.lines[0|h*i.scaleY*E],l=o.lines[0|h*o.scaleY*E],c=0;c<e;c++)k?(p=s[0|c*r.scaleX*T],d=a[0|c*n.scaleX*T],m=u[0|c*i.scaleX*T],g=l[0|c*o.scaleX*T],v=255-f(p+1.402*(m-128)),y=255-f(p-.3441363*(d-128)-.71413636*(m-128)),b=255-f(p+1.772*(d-128))):(v=s[0|c*r.scaleX*T],y=a[0|c*n.scaleX*T],b=u[0|c*i.scaleX*T],g=l[0|c*o.scaleX*T]),A[S++]=v,A[S++]=y,A[S++]=b,A[S++]=g;break;default:throw"Unsupported color mode"}return A},copyToImageData:function(e){var t,r,n,i,o,s,a,u,l,c=e.width,h=e.height,p=e.data,d=this.getData(c,h),m=0,g=0;switch(this.components.length){case 1:for(r=0;r<h;r++)for(t=0;t<c;t++)n=d[m++],p[g++]=n,p[g++]=n,p[g++]=n,p[g++]=255;break;case 3:for(r=0;r<h;r++)for(t=0;t<c;t++)a=d[m++],u=d[m++],l=d[m++],p[g++]=a,p[g++]=u,p[g++]=l,p[g++]=255;break;case 4:for(r=0;r<h;r++)for(t=0;t<c;t++)o=d[m++],s=d[m++],n=d[m++],a=255-f(o*(1-(i=d[m++])/255)+i),u=255-f(s*(1-i/255)+i),l=255-f(n*(1-i/255)+i),p[g++]=a,p[g++]=u,p[g++]=l,p[g++]=255;break;default:throw"Unsupported color mode"}}},l}();t.exports=function(t){var n=new Uint8Array(t),i=new r;i.parse(n);for(var o=i.getData(i.width,i.height),s=new e(i.width*i.height*4),a=0,u=0;u<s.length;u++)s[u+(u/3|0)]=o[a++],u%4==3&&(s[u]=255);return{data:s,width:i.width,height:i.height}}}).call(this,e("buffer").Buffer)},{buffer:134}],249:[function(e,t,r){arguments[4][156][0].apply(r,arguments)},{buffer:134,dup:156}],250:[function(e,t,r){(function(r){"use strict";var n=e("contentstream"),i=e("gif-encoder"),o=e("jpeg-js"),s=e("pngjs-nozlib").PNG,a=e("ndarray"),u=e("ndarray-ops"),l=e("through");function c(e,t,r){if(4===e.shape.length)return c(e.pick(r),t,0);if(3===e.shape.length)if(3===e.shape[2])u.assign(a(t,[e.shape[0],e.shape[1],3],[4,4*e.shape[0],1]),e),u.assigns(a(t,[e.shape[0]*e.shape[1]],[4],3),255);else if(4===e.shape[2])u.assign(a(t,[e.shape[0],e.shape[1],4],[4,4*e.shape[0],1]),e);else{if(1!==e.shape[2])return new Error("Incompatible array shape");u.assign(a(t,[e.shape[0],e.shape[1],3],[4,4*e.shape[0],1]),a(e.data,[e.shape[0],e.shape[1],3],[e.stride[0],e.stride[1],0],e.offset)),u.assigns(a(t,[e.shape[0]*e.shape[1]],[4],3),255)}else{if(2!==e.shape.length)return new Error("Incompatible array shape");u.assign(a(t,[e.shape[0],e.shape[1],3],[4,4*e.shape[0],1]),a(e.data,[e.shape[0],e.shape[1],3],[e.stride[0],e.stride[1],0],e.offset)),u.assigns(a(t,[e.shape[0]*e.shape[1]],[4],3),255)}return t}function h(e){var t=l();return t.emit("error",e),t}t.exports=function(e,t,a){switch(a=a||{},t.toUpperCase()){case"JPG":case".JPG":case"JPEG":case".JPEG":case"JPE":case".JPE":var u=e.shape[0],l=e.shape[1],p={data:m=c(e,m=new r(u*l*4)),width:u,height:l},f=o.encode(p,a.quality);return new n(f.data);case"GIF":case".GIF":var d=4===e.shape.length?e.shape[0]:1,m=(u=4===e.shape.length?e.shape[1]:e.shape[0],l=4===e.shape.length?e.shape[2]:e.shape[1],new r(u*l*4)),g=new i(u,l);g.writeHeader();for(var v=0;v<d;v++)m=c(e,m,v),g.addFrame(m);return g.finish(),g;case"PNG":case".PNG":var y=new s({width:e.shape[0],height:e.shape[1]});return"Error"==typeof(m=c(e,y.data))?h(m):(y.data=m,y.pack());case"CANVAS":var b=document.createElement("canvas"),x=b.getContext("2d");b.width=e.shape[0],b.height=e.shape[1];var _=x.getImageData(0,0,b.width,b.height);return"Error"==typeof(m=c(e,m=_.data))?h(m):(x.putImageData(_,0,0),b);default:return h(new Error("Unsupported file type: "+t))}}}).call(this,e("buffer").Buffer)},{buffer:134,contentstream:7,"gif-encoder":30,"jpeg-js":247,ndarray:168,"ndarray-ops":165,"pngjs-nozlib":198,through:253}],251:[function(e,t,r){t.exports=i;var n=e("events").EventEmitter;function i(){n.call(this)}e("inherits")(i,n),i.Readable=e("readable-stream/readable.js"),i.Writable=e("readable-stream/writable.js"),i.Duplex=e("readable-stream/duplex.js"),i.Transform=e("readable-stream/transform.js"),i.PassThrough=e("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",a),r.on("close",u));var s=!1;function a(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===n.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",u),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",l),e.on("error",l),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e}},{events:135,inherits:157,"readable-stream/duplex.js":230,"readable-stream/passthrough.js":242,"readable-stream/readable.js":243,"readable-stream/transform.js":244,"readable-stream/writable.js":245}],252:[function(e,t,r){var n=e("buffer").Buffer,i=n.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var o=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!i(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=s)}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};function s(e){return e.toString(this.encoding)}function a(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function u(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var i;n=(t+=e.toString(this.encoding,0,n)).length-1;if((i=t.charCodeAt(n))>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,n)}return t},o.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},o.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},{buffer:134}],253:[function(e,t,r){(function(r){var n=e("stream");function i(e,t,i){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var o=!1,s=!1,a=[],u=!1,l=new n;function c(){for(;a.length&&!l.paused;){var e=a.shift();if(null===e)return l.emit("end");l.emit("data",e)}}return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(i&&!1===i.autoDestroy),l.write=function(t){return e.call(this,t),!l.paused},l.queue=l.push=function(e){return u?l:(null===e&&(u=!0),a.push(e),c(),l)},l.on("end",function(){l.readable=!1,!l.writable&&l.autoDestroy&&r.nextTick(function(){l.destroy()})}),l.end=function(e){if(!o)return o=!0,arguments.length&&l.write(e),l.writable=!1,t.call(l),!l.readable&&l.autoDestroy&&l.destroy(),l},l.destroy=function(){if(!s)return s=!0,o=!0,a.length=0,l.writable=l.readable=!1,l.emit("close"),l},l.pause=function(){if(!l.paused)return l.paused=!0,l},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),c(),l.paused||l.emit("drain"),l},l}t.exports=i,i.through=i}).call(this,e("_process"))},{_process:200,stream:251}],254:[function(e,t,r){(function(t,n){var i=e("process/browser.js").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,a={},u=0;function l(e,t){this._id=e,this._clearFn=t}r.setTimeout=function(){return new l(o.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new l(o.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},r.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},r._unrefActive=r.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r.setImmediate="function"==typeof t?t:function(e){var t=u++,n=!(arguments.length<2)&&s.call(arguments,1);return a[t]=!0,i(function(){a[t]&&(n?e.apply(null,n):e.call(null),r.clearImmediate(t))}),t},r.clearImmediate="function"==typeof n?n:function(e){delete a[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":200,timers:254}],255:[function(e,t,r){r.isatty=function(){return!1},r.ReadStream=function(){throw new Error("tty.ReadStream is not implemented")},r.WriteStream=function(){throw new Error("tty.WriteStream is not implemented")}},{}],256:[function(e,t,r){(function(){var e=this,n=e._,i={},o=Array.prototype,s=Object.prototype,a=Function.prototype,u=o.push,l=o.slice,c=o.concat,h=s.toString,p=s.hasOwnProperty,f=o.forEach,d=o.map,m=o.reduce,g=o.reduceRight,v=o.filter,y=o.every,b=o.some,x=o.indexOf,_=o.lastIndexOf,w=Array.isArray,k=Object.keys,T=a.bind,E=function(e){return e instanceof E?e:this instanceof E?void(this._wrapped=e):new E(e)};void 0!==r?(void 0!==t&&t.exports&&(r=t.exports=E),r._=E):e._=E,E.VERSION="1.4.4";var S=E.each=E.forEach=function(e,t,r){if(null!=e)if(f&&e.forEach===f)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,o=e.length;n<o;n++)if(t.call(r,e[n],n,e)===i)return}else for(var s in e)if(E.has(e,s)&&t.call(r,e[s],s,e)===i)return};E.map=E.collect=function(e,t,r){var n=[];return null==e?n:d&&e.map===d?e.map(t,r):(S(e,function(e,i,o){n[n.length]=t.call(r,e,i,o)}),n)};var C="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(e,t,r,n){var i=arguments.length>2;if(null==e&&(e=[]),m&&e.reduce===m)return n&&(t=E.bind(t,n)),i?e.reduce(t,r):e.reduce(t);if(S(e,function(e,o,s){i?r=t.call(n,r,e,o,s):(r=e,i=!0)}),!i)throw new TypeError(C);return r},E.reduceRight=E.foldr=function(e,t,r,n){var i=arguments.length>2;if(null==e&&(e=[]),g&&e.reduceRight===g)return n&&(t=E.bind(t,n)),i?e.reduceRight(t,r):e.reduceRight(t);var o=e.length;if(o!==+o){var s=E.keys(e);o=s.length}if(S(e,function(a,u,l){u=s?s[--o]:--o,i?r=t.call(n,r,e[u],u,l):(r=e[u],i=!0)}),!i)throw new TypeError(C);return r},E.find=E.detect=function(e,t,r){var n;return A(e,function(e,i,o){if(t.call(r,e,i,o))return n=e,!0}),n},E.filter=E.select=function(e,t,r){var n=[];return null==e?n:v&&e.filter===v?e.filter(t,r):(S(e,function(e,i,o){t.call(r,e,i,o)&&(n[n.length]=e)}),n)},E.reject=function(e,t,r){return E.filter(e,function(e,n,i){return!t.call(r,e,n,i)},r)},E.every=E.all=function(e,t,r){t||(t=E.identity);var n=!0;return null==e?n:y&&e.every===y?e.every(t,r):(S(e,function(e,o,s){if(!(n=n&&t.call(r,e,o,s)))return i}),!!n)};var A=E.some=E.any=function(e,t,r){t||(t=E.identity);var n=!1;return null==e?n:b&&e.some===b?e.some(t,r):(S(e,function(e,o,s){if(n||(n=t.call(r,e,o,s)))return i}),!!n)};E.contains=E.include=function(e,t){return null!=e&&(x&&e.indexOf===x?-1!=e.indexOf(t):A(e,function(e){return e===t}))},E.invoke=function(e,t){var r=l.call(arguments,2),n=E.isFunction(t);return E.map(e,function(e){return(n?t:e[t]).apply(e,r)})},E.pluck=function(e,t){return E.map(e,function(e){return e[t]})},E.where=function(e,t,r){return E.isEmpty(t)?r?null:[]:E[r?"find":"filter"](e,function(e){for(var r in t)if(t[r]!==e[r])return!1;return!0})},E.findWhere=function(e,t){return E.where(e,t,!0)},E.max=function(e,t,r){if(!t&&E.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&E.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return S(e,function(e,i,o){var s=t?t.call(r,e,i,o):e;s>=n.computed&&(n={value:e,computed:s})}),n.value},E.min=function(e,t,r){if(!t&&E.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&E.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return S(e,function(e,i,o){var s=t?t.call(r,e,i,o):e;s<n.computed&&(n={value:e,computed:s})}),n.value},E.shuffle=function(e){var t,r=0,n=[];return S(e,function(e){t=E.random(r++),n[r-1]=n[t],n[t]=e}),n};var B=function(e){return E.isFunction(e)?e:function(t){return t[e]}};E.sortBy=function(e,t,r){var n=B(t);return E.pluck(E.map(e,function(e,t,i){return{value:e,index:t,criteria:n.call(r,e,t,i)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index<t.index?-1:1}),"value")};var I=function(e,t,r,n){var i={},o=B(t||E.identity);return S(e,function(t,s){var a=o.call(r,t,s,e);n(i,a,t)}),i};E.groupBy=function(e,t,r){return I(e,t,r,function(e,t,r){(E.has(e,t)?e[t]:e[t]=[]).push(r)})},E.countBy=function(e,t,r){return I(e,t,r,function(e,t){E.has(e,t)||(e[t]=0),e[t]++})},E.sortedIndex=function(e,t,r,n){for(var i=(r=null==r?E.identity:B(r)).call(n,t),o=0,s=e.length;o<s;){var a=o+s>>>1;r.call(n,e[a])<i?o=a+1:s=a}return o},E.toArray=function(e){return e?E.isArray(e)?l.call(e):e.length===+e.length?E.map(e,E.identity):E.values(e):[]},E.size=function(e){return null==e?0:e.length===+e.length?e.length:E.keys(e).length},E.first=E.head=E.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:l.call(e,0,t)},E.initial=function(e,t,r){return l.call(e,0,e.length-(null==t||r?1:t))},E.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:l.call(e,Math.max(e.length-t,0))},E.rest=E.tail=E.drop=function(e,t,r){return l.call(e,null==t||r?1:t)},E.compact=function(e){return E.filter(e,E.identity)};var P=function(e,t,r){return S(e,function(e){E.isArray(e)?t?u.apply(r,e):P(e,t,r):r.push(e)}),r};E.flatten=function(e,t){return P(e,t,[])},E.without=function(e){return E.difference(e,l.call(arguments,1))},E.uniq=E.unique=function(e,t,r,n){E.isFunction(t)&&(n=r,r=t,t=!1);var i=r?E.map(e,r,n):e,o=[],s=[];return S(i,function(r,n){(t?n&&s[s.length-1]===r:E.contains(s,r))||(s.push(r),o.push(e[n]))}),o},E.union=function(){return E.uniq(c.apply(o,arguments))},E.intersection=function(e){var t=l.call(arguments,1);return E.filter(E.uniq(e),function(e){return E.every(t,function(t){return E.indexOf(t,e)>=0})})},E.difference=function(e){var t=c.apply(o,l.call(arguments,1));return E.filter(e,function(e){return!E.contains(t,e)})},E.zip=function(){for(var e=l.call(arguments),t=E.max(E.pluck(e,"length")),r=new Array(t),n=0;n<t;n++)r[n]=E.pluck(e,""+n);return r},E.object=function(e,t){if(null==e)return{};for(var r={},n=0,i=e.length;n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},E.indexOf=function(e,t,r){if(null==e)return-1;var n=0,i=e.length;if(r){if("number"!=typeof r)return e[n=E.sortedIndex(e,t)]===t?n:-1;n=r<0?Math.max(0,i+r):r}if(x&&e.indexOf===x)return e.indexOf(t,r);for(;n<i;n++)if(e[n]===t)return n;return-1},E.lastIndexOf=function(e,t,r){if(null==e)return-1;var n=null!=r;if(_&&e.lastIndexOf===_)return n?e.lastIndexOf(t,r):e.lastIndexOf(t);for(var i=n?r:e.length;i--;)if(e[i]===t)return i;return-1},E.range=function(e,t,r){arguments.length<=1&&(t=e||0,e=0),r=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=0,o=new Array(n);i<n;)o[i++]=e,e+=r;return o},E.bind=function(e,t){if(e.bind===T&&T)return T.apply(e,l.call(arguments,1));var r=l.call(arguments,2);return function(){return e.apply(t,r.concat(l.call(arguments)))}},E.partial=function(e){var t=l.call(arguments,1);return function(){return e.apply(this,t.concat(l.call(arguments)))}},E.bindAll=function(e){var t=l.call(arguments,1);return 0===t.length&&(t=E.functions(e)),S(t,function(t){e[t]=E.bind(e[t],e)}),e},E.memoize=function(e,t){var r={};return t||(t=E.identity),function(){var n=t.apply(this,arguments);return E.has(r,n)?r[n]:r[n]=e.apply(this,arguments)}},E.delay=function(e,t){var r=l.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},E.defer=function(e){return E.delay.apply(E,[e,1].concat(l.call(arguments,1)))},E.throttle=function(e,t){var r,n,i,o,s=0,a=function(){s=new Date,i=null,o=e.apply(r,n)};return function(){var u=new Date,l=t-(u-s);return r=this,n=arguments,l<=0?(clearTimeout(i),i=null,s=u,o=e.apply(r,n)):i||(i=setTimeout(a,l)),o}},E.debounce=function(e,t,r){var n,i;return function(){var o=this,s=arguments,a=r&&!n;return clearTimeout(n),n=setTimeout(function(){n=null,r||(i=e.apply(o,s))},t),a&&(i=e.apply(o,s)),i}},E.once=function(e){var t,r=!1;return function(){return r?t:(r=!0,t=e.apply(this,arguments),e=null,t)}},E.wrap=function(e,t){return function(){var r=[e];return u.apply(r,arguments),t.apply(this,r)}},E.compose=function(){var e=arguments;return function(){for(var t=arguments,r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},E.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},E.keys=k||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var r in e)E.has(e,r)&&(t[t.length]=r);return t},E.values=function(e){var t=[];for(var r in e)E.has(e,r)&&t.push(e[r]);return t},E.pairs=function(e){var t=[];for(var r in e)E.has(e,r)&&t.push([r,e[r]]);return t},E.invert=function(e){var t={};for(var r in e)E.has(e,r)&&(t[e[r]]=r);return t},E.functions=E.methods=function(e){var t=[];for(var r in e)E.isFunction(e[r])&&t.push(r);return t.sort()},E.extend=function(e){return S(l.call(arguments,1),function(t){if(t)for(var r in t)e[r]=t[r]}),e},E.pick=function(e){var t={},r=c.apply(o,l.call(arguments,1));return S(r,function(r){r in e&&(t[r]=e[r])}),t},E.omit=function(e){var t={},r=c.apply(o,l.call(arguments,1));for(var n in e)E.contains(r,n)||(t[n]=e[n]);return t},E.defaults=function(e){return S(l.call(arguments,1),function(t){if(t)for(var r in t)null==e[r]&&(e[r]=t[r])}),e},E.clone=function(e){return E.isObject(e)?E.isArray(e)?e.slice():E.extend({},e):e},E.tap=function(e,t){return t(e),e};var R=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof E&&(e=e._wrapped),t instanceof E&&(t=t._wrapped);var i=h.call(e);if(i!=h.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=r.length;o--;)if(r[o]==e)return n[o]==t;r.push(e),n.push(t);var s=0,a=!0;if("[object Array]"==i){if(a=(s=e.length)==t.length)for(;s--&&(a=R(e[s],t[s],r,n)););}else{var u=e.constructor,l=t.constructor;if(u!==l&&!(E.isFunction(u)&&u instanceof u&&E.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(E.has(e,c)&&(s++,!(a=E.has(t,c)&&R(e[c],t[c],r,n))))break;if(a){for(c in t)if(E.has(t,c)&&!s--)break;a=!s}}return r.pop(),n.pop(),a};E.isEqual=function(e,t){return R(e,t,[],[])},E.isEmpty=function(e){if(null==e)return!0;if(E.isArray(e)||E.isString(e))return 0===e.length;for(var t in e)if(E.has(e,t))return!1;return!0},E.isElement=function(e){return!(!e||1!==e.nodeType)},E.isArray=w||function(e){return"[object Array]"==h.call(e)},E.isObject=function(e){return e===Object(e)},S(["Arguments","Function","String","Number","Date","RegExp"],function(e){E["is"+e]=function(t){return h.call(t)=="[object "+e+"]"}}),E.isArguments(arguments)||(E.isArguments=function(e){return!(!e||!E.has(e,"callee"))}),"function"!=typeof/./&&(E.isFunction=function(e){return"function"==typeof e}),E.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},E.isNaN=function(e){return E.isNumber(e)&&e!=+e},E.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==h.call(e)},E.isNull=function(e){return null===e},E.isUndefined=function(e){return void 0===e},E.has=function(e,t){return p.call(e,t)},E.noConflict=function(){return e._=n,this},E.identity=function(e){return e},E.times=function(e,t,r){for(var n=Array(e),i=0;i<e;i++)n[i]=t.call(r,i);return n},E.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=E.invert(M.escape);var F={escape:new RegExp("["+E.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(M.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(e){E[e]=function(t){return null==t?"":(""+t).replace(F[e],function(t){return M[e][t]})}}),E.result=function(e,t){if(null==e)return null;var r=e[t];return E.isFunction(r)?r.call(e):r},E.mixin=function(e){S(E.functions(e),function(t){var r=E[t]=e[t];E.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),N.call(this,r.apply(E,e))}})};var D=0;E.uniqueId=function(e){var t=++D+"";return e?e+t:t},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(e,t,r){var n;r=E.defaults({},r,E.templateSettings);var i=new RegExp([(r.escape||L).source,(r.interpolate||L).source,(r.evaluate||L).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,function(t,r,n,i,a){return s+=e.slice(o,a).replace(j,function(e){return"\\"+O[e]}),r&&(s+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),o=a+t.length,t}),s+="';\n",r.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(r.variable||"obj","_",s)}catch(e){throw e.source=s,e}if(t)return n(t,E);var a=function(e){return n.call(this,e,E)};return a.source="function("+(r.variable||"obj")+"){\n"+s+"}",a},E.chain=function(e){return E(e).chain()};var N=function(e){return this._chain?E(e).chain():e};E.mixin(E),S(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];E.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=e&&"splice"!=e||0!==r.length||delete r[0],N.call(this,r)}}),S(["concat","join","slice"],function(e){var t=o[e];E.prototype[e]=function(){return N.call(this,t.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],257:[function(e,t,r){"use strict";t.exports=function(e,t,r){return 0===e.length?e:t?(r||e.sort(t),function(e,t){for(var r=1,n=e.length,i=e[0],o=e[0],s=1;s<n;++s)if(o=i,t(i=e[s],o)){if(s===r){r++;continue}e[r++]=i}return e.length=r,e}(e,t)):(r||e.sort(),function(e){for(var t=1,r=e.length,n=e[0],i=e[0],o=1;o<r;++o,i=n)if(i=n,(n=e[o])!==i){if(o===t){t++;continue}e[t++]=n}return e.length=t,e}(e))}},{}],258:[function(e,t,r){var n=e("mime"),i=e("fs");t.exports=function(e){return"data:"+n.lookup(e)+";base64,"+i.readFileSync(e,"base64")}},{fs:133,mime:163}],259:[function(e,t,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],260:[function(e,t,r){arguments[4][129][0].apply(r,arguments)},{dup:129}],261:[function(e,t,r){arguments[4][130][0].apply(r,arguments)},{"./support/isBuffer":260,_process:200,dup:130,inherits:157}],262:[function(e,t,r){t.exports=function(t,r,n){return e("./InsertStep")(t,-1,r,n)}},{"./InsertStep":266}],263:[function(e,t,r){var n=e("fs");t.exports=function(t="./output/",r,i,o){if(t="/"==t[t.length-1]?t:t+"/",r.options.inBrowser)return!1;if(n.access(t,function(e){e&&console.error(e)}),o&&i){var s=r.steps,a=s.slice(-1)[0].output.src,u=(s.slice(-1)[0].output.format,e("data-uri-to-buffer")(a));n.writeFile(t+o,u,function(){})}else l=t,c=function(o){var s=1;for(var a in o)if(null!=o[a].match(/^sequencer(.*)$/)){var u=parseInt(o[a].match(/^sequencer(.*)$/)[1]);s=u>=s?u+1:s}n.mkdir(t+"sequencer"+s,function(){var o=t+"sequencer"+s+"/",a=r.steps;if(i){var u=a.slice(-1)[0].output.src,l=a.slice(-1)[0].output.format,c=e("data-uri-to-buffer")(u);n.writeFile(o+"image_"+(a.length-1)+"."+l,c,function(){})}else for(var h in a){u=a[h].output.src,l=a[h].output.format,c=e("data-uri-to-buffer")(u);n.writeFile(o+"image_"+h+"."+l,c,function(){})}})},n.readdir(l,function(e,t){var r=[];if(void 0===t||0==t.length)return c(r),[];for(var i=0;i<t.length;++i){var o=t[i];if("."!==o[0]){var s=l+"/"+o;n.stat(s,function(e,n){if(n.isDirectory()&&r.push(this.file),t.length===this.index+1)return c(r)}.bind({index:i,file:o}))}}});var l,c}},{"data-uri-to-buffer":18,fs:133}],264:[function(e,t,r){function n(e){return Object.prototype.toString.call(e).split(" ")[1].slice(0,-1)}function i(e){if("Array"==n(e))return e.slice();if("Object"==n(e)){var t={};for(var r in e)t[r]=i(e[r]);return t}return e}t.exports=function(e,t,r){var o,s={},a=t;if("+"==t?t=["string_a","o_object"]:"-"==t?t=["number_a"]:"^"==t?t=["number","string","o_object"]:"r"==t?t=["o_number"]:"l"==t&&(t=["string","o_function"]),"o_object"==t[t.length-1]?"Object"!=n(e[e.length-1])&&e.push({}):"o_number"==t[t.length-1]?"number"!=typeof e[e.length-1]&&"Object"!=n(e[0])&&e.push(1):"o_function"==t[t.length-1]&&"Function"!=n(e[e.length-1])&&"Object"!=n(e[0])&&e.push(function(){}),e.length==t.length)for(var u in t)"_a"==t[u].substr(t[u].length-2,2)&&(e[u]="Array"==n(o=e[u])?o:[o]);if(1==e.length)"r"==a?s={0:i(e[0])}:"-"==a&&(s=[],s=i(e[0]));else if("r"==a)for(var l in e[0])s={0:e[0]};else if("l"==a)s={image:e[0],callback:e[1]};else{if(s=[],"+"==a)for(var c in e[0])s.push({name:e[0][c],o:e[1]});if("^"==a){var h=this.steps.length,p=e[0];(p=p==h?p:p%h)<0&&(p+=h+1),s.push({index:p,name:e[1],o:e[2]})}}return s}},{}],265:[function(e,t,r){if("undefined"!=typeof window)n=!0;else var n=!1;e("./util/getStep.js"),ImageSequencer=function(t){var r="ImageSequencer"==this.name?this:this.sequencer;function i(e){return Object.prototype.toString.call(e).split(" ")[1].slice(0,-1)}function s(e){if("Array"==i(e))return e.slice();if("Object"==i(e)){var t={};for(var r in e)t[r]=s(e[r]);return t}return e}(t=t||{}).inBrowser=void 0===t.inBrowser?n:t.inBrowser,t.sequencerCounter=0;var a=e("./Modules"),u=e("./SavedSequences.json"),l=e("./FormatInput"),c=[],h=e("./ui/UserInterface")(),p=e("fs");if(t.inBrowser){for(o in r)a[o]=r[o];(u=JSON.parse(window.localStorage.getItem("sequences")))||(u={},window.localStorage.setItem("sequences",JSON.stringify(u)))}function f(){var t,r="ImageSequencer"==this.name?this:this.sequencer,n=[];for(var i in arguments)n.push(s(arguments[i]));for(var o in t=l.call(r,n,"+"),c.push({method:"addSteps",json_q:s(t)}),t)e("./AddStep")(r,t[o].name,t[o].o);return this}function d(){var t=[],r=this.getSteps().slice(1).map(e=>e.options.name),n=this;for(var i in n.image=arguments[0],arguments)t.push(s(arguments[i]));var o=l.call(this,t,"l");0!=this.getSteps().length&&(this.options.sequencerCounter=0,c=[],this.steps=[]),c.push({method:"loadImages",json_q:s(o)});var a={name:"ImageSequencer Wrapper",sequencer:this,addSteps:this.addSteps,removeSteps:this.removeSteps,insertSteps:this.insertSteps,run:this.run,UI:this.UI,setUI:this.setUI};e("./ui/LoadImage")(n,"image",o.image,function(){var e;e=n,0!=r.length&&(e.addSteps(r),r=[]),o.callback.call(a)})}function m(e){var t={};if("load-image"==e)return{};if(0==arguments.length){for(var r in this.modules)t[r]=a[r][1];for(var n in this.sequences)t[n]={name:n,steps:this.sequences[n]}}else t=a[e]?a[e][1]:{inputs:u[e].options};return t}var g=e("./Strings.js")(this.steps,m,f,s);return{name:"ImageSequencer",options:t,inputlog:c,modules:a,sequences:u,events:h,steps:[],image:void 0,loadImages:d,loadImage:d,addSteps:f,removeSteps:function(){var e,t="ImageSequencer"==this.name?this:this.sequencer,r=[];for(var n in arguments)r.push(s(arguments[n]));var i,o,a=l.call(t,r,"-");for(var u in c.push({method:"removeSteps",json_q:s(a)}),e=a.sort(function(e,t){return t-e}))i=t,(o=e[u])>0&&(thisStep=i.steps[o],thisStep.UI.onRemove(thisStep.options.step),i.steps.splice(o,1));return this},insertSteps:function(){var t="ImageSequencer"==this.name?this:this.sequencer,r=[];for(var n in arguments)r.push(arguments[n]);var i=l.call(t,r,"^");c.push({method:"insertSteps",json_q:s(i)});var o=i;for(var a in o=o.sort(function(e,t){return t.index-e.index}))e("./InsertStep")(t,o[a].index,o[a].name,o[a].o);return this},replaceImage:function(t,r,n){return(n=n||{}).callback=n.callback||function(){},e("./ReplaceImage")(this,t,r,n)},run:function(t){var r,n=0;(t=t||{mode:"no-arg"}).index&&(n=t.index),"no-arg"!=t.mode&&"function"!=typeof t&&(t.progressObj&&(r=t.progressObj),delete arguments[0]);var o="ImageSequencer"==this.name?this:this.sequencer,a=[];for(var u in arguments)a.push(s(arguments[u]));var c=function(){};for(var u in a)"Function"==i(a[u])&&(c=a.splice(u,1)[0]);var h=l.call(o,a,"r");return e("./Run")(o,h,c,n,r),!0},setUI:function(t){this.events=e("./ui/UserInterface")(t)},exportBin:function(t,r,n){return e("./ExportBin")(t,this,r,n)},modulesInfo:m,toCliString:g.toCliString,detectStringSyntax:g.detectStringSyntax,parseStringSyntax:g.parseStringSyntax,stringToSteps:g.stringToSteps,toString:g.toString,stepToString:g.stepToString,toJSON:g.toJSON,stringToJSON:g.stringToJSON,stringToJSONstep:g.stringToJSONstep,importString:g.importString,importJSON:g.importJSON,loadNewModule:function(t,r){if(!r)return this;if(Array.isArray(r))this.modules[t]=r;else if(r.func&&r.info)this.modules[t]=[r.func,r.info];else if(r.path&&!this.inBrowser){const n=[e(`${r.path}/Module.js`),e(`${r.path}/info.json`)];this.modules[t]=n}return this},saveNewModule:function(e,r){if(!t.inBrowser){var n=p.readFileSync("./src/Modules.js").toString();n=n.substr(0,n.length-1)+"  '"+e+"': require('"+r+"'),\n}",p.writeFileSync("./src/Modules.js",n)}},createMetaModule:e("./util/createMetaModule"),saveSequence:function(r,n){const i=stringToJSON(n);var o;t.inBrowser?((o=JSON.parse(window.localStorage.getItem("sequences")))[r]=i,window.localStorage.setItem("sequences",JSON.stringify(o))):((o=e("./SavedSequences.json"))[r]=i,p.writeFileSync("./src/SavedSequences.json",JSON.stringify(o)))},loadModules:function(){this.modules=e("./Modules"),t.inBrowser?this.sequences=JSON.parse(window.localStorage.getItem("sequences")):this.sequences=e("./SavedSequences.json")},getSteps:function(){return this.steps},log:function(e,r){"none"!=t.ui&&(1==arguments.length?console.log(arguments[0]):2==arguments.length&&console.log(e,r))},objTypeOf:i,copy:s,setInputStep:e("./ui/SetInputStep")(r)}},t.exports=ImageSequencer},{"./AddStep":262,"./ExportBin":263,"./FormatInput":264,"./InsertStep":266,"./Modules":267,"./ReplaceImage":268,"./Run":269,"./SavedSequences.json":271,"./Strings.js":272,"./ui/LoadImage":420,"./ui/SetInputStep":421,"./ui/UserInterface":422,"./util/createMetaModule":424,"./util/getStep.js":426,fs:133}],266:[function(e,t,r){e("./util/getStep.js");t.exports=function(e,t,r,n){if(e.sequences[r])return e.importJSON(e.sequences[r]);if(e.detectStringSyntax(r))return e.stringToSteps(r);!function(t,r,n){if(e.modules[r])var i=e.modules[r][1];else console.log("Module "+r+" not found.");var o=e.copy(n);o.number=e.options.sequencerCounter++,o.name=n.name||r||i.name,o.description=n.description||i.description,o.moduleInfo=n.moduleInfo||i,o.selector=n.selector||"ismod-"+r,o.container=n.container||e.options.selector,o.inBrowser=e.options.inBrowser,-1==t&&(t=e.steps.length),o.step={name:o.name,description:o.description,moduleInfo:o.moduleInfo,ID:o.number,inBrowser:e.options.inBrowser,ui:e.options.ui,options:o};var s=e.events;e.modules[r].expandSteps=function(r){for(var n in r){let i=r[n];e.insertSteps(t+Number.parseInt(n),i.name,i.options)}},o=o||{},e.modules[r][1].length?e.modules[r][0](o,s):(s.onSetup(o.step,{index:t}),e.steps.splice(t,0,e.modules[r][0](o,s)))}(t,r,n),e.steps=e.steps}},{"./util/getStep.js":426}],267:[function(e,t,r){t.exports={"add-qr":e("./modules/AddQR"),average:e("./modules/Average"),blend:e("./modules/Blend"),blur:e("./modules/Blur"),brightness:e("./modules/Brightness"),"canvas-resize":e("./modules/CanvasResize"),channel:e("./modules/Channel"),colorbar:e("./modules/Colorbar"),"color-temperature":e("./modules/ColorTemperature"),colormap:e("./modules/Colormap"),contrast:e("./modules/Contrast"),convolution:e("./modules/Convolution"),crop:e("./modules/Crop"),"decode-qr":e("./modules/DecodeQr"),dither:e("./modules/Dither"),"draw-rectangle":e("./modules/DrawRectangle"),dynamic:e("./modules/Dynamic"),"edge-detect":e("./modules/EdgeDetect"),exposure:e("./modules/Exposure"),"flip-image":e("./modules/FlipImage"),"fisheye-gl":e("./modules/FisheyeGl"),histogram:e("./modules/Histogram"),"gamma-correction":e("./modules/GammaCorrection"),gradient:e("./modules/Gradient"),"grid-overlay":e("./modules/GridOverlay"),"import-image":e("./modules/ImportImage"),invert:e("image-sequencer-invert"),ndvi:e("./modules/Ndvi"),"ndvi-colormap":e("./modules/NdviColormap"),"noise-reduction":e("./modules/NoiseReduction"),micro:e("./modules/Micro"),overlay:e("./modules/Overlay"),"paint-bucket":e("./modules/PaintBucket"),"replace-color":e("./modules/ReplaceColor"),resize:e("./modules/Resize"),rotate:e("./modules/Rotate"),saturation:e("./modules/Saturation"),"text-overlay":e("./modules/TextOverlay"),threshold:e("./modules/Threshold"),tint:e("./modules/Tint"),"webgl-distort":e("./modules/WebglDistort"),"white-balance":e("./modules/WhiteBalance")}},{"./modules/AddQR":275,"./modules/Average":278,"./modules/Blend":281,"./modules/Blur":285,"./modules/Brightness":288,"./modules/CanvasResize":291,"./modules/Channel":294,"./modules/ColorTemperature":297,"./modules/Colorbar":300,"./modules/Colormap":304,"./modules/Contrast":308,"./modules/Convolution":312,"./modules/Crop":317,"./modules/DecodeQr":320,"./modules/Dither":324,"./modules/DrawRectangle":328,"./modules/Dynamic":331,"./modules/EdgeDetect":335,"./modules/Exposure":338,"./modules/FisheyeGl":341,"./modules/FlipImage":345,"./modules/GammaCorrection":348,"./modules/Gradient":351,"./modules/GridOverlay":355,"./modules/Histogram":358,"./modules/ImportImage":362,"./modules/Micro":366,"./modules/Ndvi":373,"./modules/NdviColormap":369,"./modules/NoiseReduction":377,"./modules/Overlay":380,"./modules/PaintBucket":384,"./modules/ReplaceColor":388,"./modules/Resize":391,"./modules/Rotate":394,"./modules/Saturation":397,"./modules/TextOverlay":401,"./modules/Threshold":405,"./modules/Tint":408,"./modules/WebglDistort":412,"./modules/WhiteBalance":415,"image-sequencer-invert":148}],268:[function(e,t,r){t.exports=function(e,t,r,n){if(!e.options.inBrowser)return!1;var i=ImageSequencer({ui:!1});if(window.hasOwnProperty("$"))var o=$(t);else o=document.querySelectorAll(t);for(var s=[],a=0;a<o.length;a++)o[a]instanceof HTMLImageElement&&s.push(o[a]);function u(t,r){var n=t.src,o=n.split("?")[0].split(".").pop(),s=new XMLHttpRequest;function a(n){i.loadImage(n,function(){var n=this.addSteps(r);e.detectStringSyntax(r)&&(n=this.stringToSteps(r)),n.run({stop:function(){}},function(e){t.src=e})})}s.open("GET",n,!0),s.responseType="arraybuffer",s.onload=function(e){var t,r,n,i=new Uint8Array(this.response),s="";for(t=0,r=i.length;t<r;t+=5e3)n=i.subarray(t,t+5e3),s+=String.fromCharCode.apply(null,n);var u=btoa(s);a("data:image/"+o+";base64,"+u)},"data:image/"!=n.substr(0,11).toLowerCase()?s.send():a(n)}for(a=0;a<s.length;a++)u(s[a],r),a==s.length-1&&n.callback()}},{}],269:[function(e,t,r){const n=e("./util/getStep.js");t.exports=function(t,r,i,o,s){return s||(s={stop:function(){}}),function(r){for(var a=[],u=t.steps.length,l=r[0],c=0;c<u-l;c++)a.push({i:l+c});!function r(o,a){if(a==o.length&&void 0!==o[a-1]&&"Function"==t.objTypeOf(i)&&t.steps.slice(-1)[0].output){var u=t.steps,l=u[u.length-1].output.src;return i(l),!0}if(void 0!==o[a]){var c=o[a].i,h=t.steps[c-1].output,p=t.steps[c];for(var f in p.getStep=function(e){return c+e>=t.steps.length?{options:{name:void 0}}:t.steps.slice(c+e)[0]},p.getIndex=function(){return c},n)n.hasOwnProperty(f)&&(p[f]=n[f]);p.UI.onDraw(p.options.step);var d=e("./RunToolkit")(t.copy(h));p.draw(d,function(){t.steps[c].options.step.output=t.steps[c].output.src,t.steps[c].UI.onComplete(t.steps[c].options.step),r(o,++a)},s)}}(a,o)}(r=function(e){0==e[0]&&1==t.steps.length?delete e[0]:0==e[0]&&e[0]++;for(var r=t.steps[e[0]-1];void 0===r||void 0===r.output;)r=t.steps[--e[0]-1];return e}(r))}},{"./RunToolkit":270,"./util/getStep.js":426}],270:[function(e,t,r){const n=e("get-pixels"),i=e("./modules/_nomodule/PixelManipulation"),o=e("lodash"),s=e("data-uri-to-buffer"),a=e("save-pixels");t.exports=function(e){return e.getPixels=n,e.pixelManipulation=i,e.lodash=o,e.dataUriToBuffer=s,e.savePixels=a,e}},{"./modules/_nomodule/PixelManipulation":417,"data-uri-to-buffer":18,"get-pixels":28,lodash:162,"save-pixels":250}],271:[function(e,t,r){t.exports={sample:[{name:"invert",options:{}},{name:"channel",options:{channel:"red"}},{name:"blur",options:{blur:"5"}}]}},{}],272:[function(e,t,r){t.exports=function(e,t,r,n){function i(e){return!(!e.includes(",")&&!e.includes("{"))}function o(e){return e.replace(/\s/g,"").split(",")}function s(e){var r=e.name?e.name:e.options.name;let n=t(r).inputs||{},i={};for(let t in n)e.options[t]&&e.options[t]!=n[t].default&&(i[t]=e.options[t],i[t]=encodeURIComponent(i[t]));return`${r}{${Object.keys(i).map(e=>e+":"+i[e]).join("|")}}`}function a(e){let t;return(t=i(e)?o(e):[e]).map(u)}function u(e){var t;if(t=e.includes("{")?e.includes("(")&&e.indexOf("(")<e.indexOf("{")?["(",")"]:["{","}"]:["(",")"],-1===e.indexOf(t[0])){var r=e.substr(0);stepSettings=""}else{r=e.substr(0,e.indexOf(t[0]));stepSettings=e.slice(e.indexOf(t[0])+1,-1)}return stepSettings=stepSettings.split("|").reduce(function(e,t,r){var n=t.substr(0,t.indexOf(":")),i=t.substr(t.indexOf(":")+1);return i=(i=i.replace(/^\(/,"")).replace(/^\{/,"").replace(/\}$/,""),t=[n,i=decodeURIComponent(i)],n&&(e[n]=i),e},{}),{name:r,options:stepSettings}}return{toCliString:function(){var e='"',r={};for(var n in this.steps){var i=void 0!==this.steps[n].options?this.steps[n].options.name:this.steps[n].name;for(var o in"load-image"!==i&&(e+=`${i} `),t(i).inputs)r[o]=this.steps[n].options[o]}return`sequencer -i [PATH] -s ${e=e.substr(0,e.length-1)+'"'} -d '${JSON.stringify(r)}'`},detectStringSyntax:i,parseStringSyntax:o,stringToSteps:function(e){let t=this,r=[];"ImageSequencer"!=this.name&&(t=this.sequencer),i(e)&&(r=a(e)),r.forEach(function(e){t.addSteps(e.name,e.options)})},toString:function(e){return e?s(e):n(this.steps.map(s).slice(1).join(","))},stepToString:s,toJSON:function(){return this.stringToJSON(this.toString())},stringToJSON:a,stringToJSONstep:u,importString:function(e){let t=this;"ImageSequencer"!=this.name&&(t=this.sequencer),a(e).forEach(function(e){t.addSteps(e.name,e.options)})},importJSON:function(e){let t=this;"ImageSequencer"!=this.name&&(t=this.sequencer),e.forEach(function(e){t.addSteps(e.name,e.options)})}}}},{}],273:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return t.size=t.size||n.size,t.qrCodeString=t.qrCodeString||"https://github.com/publiclab/image-sequencer",getPixels=e("get-pixels"),{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return getPixels(r.src,function(i,s){return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){return[e,t,r,n]},extraManipulation:function(r,n){i?console.log(i):e("./QR")(t,r,s,n)},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./QR":274,"./info.json":276,"get-pixels":28}],274:[function(e,t,r){t.exports=function(t,r,n,i){e("qrcode").toDataURL(t.qrCodeString,function(o,s){e("get-pixels")(s,function(o,s){o&&console.log("Bad image path",image);var a=new(e("imagejs").Bitmap)({width:s.shape[0],height:s.shape[1]});a._data.data=s.data;var u=a.resize({width:t.size,height:t.size,algorithm:"bicubicInterpolation"});s.data=u._data.data,s.shape=[t.size,t.size,4],s.stride[1]=4*t.size;for(var l=n.shape[0],c=n.shape[1],h=l-t.size,p=c-t.size,f=0;f<l;f++)for(var d=0;d<c;d++)f>=h&&d>=p?(r.set(f,d,0,s.get(f-h,d-p,0)),r.set(f,d,1,s.get(f-h,d-p,1)),r.set(f,d,2,s.get(f-h,d-p,2)),r.set(f,d,3,s.get(f-h,d-p,3))):(r.set(f,d,0,n.get(f,d,0)),r.set(f,d,1,n.get(f,d,1)),r.set(f,d,2,n.get(f,d,2)),r.set(f,d,3,n.get(f,d,3)));i()})})}},{"get-pixels":28,imagejs:149,qrcode:201}],275:[function(e,t,r){t.exports=[e("./Module"),e("./info.json")]},{"./Module":273,"./info.json":276}],276:[function(e,t,r){t.exports={name:"add-qr",description:"Adds QR corresponding to the given string",url:"https://github.com/publiclab/image-sequencer/tree/master/MODULES.md",inputs:{size:{type:"integer",desc:"size of QR code in pixels",default:200},qrCodeString:{type:"string",desc:"input string to generate QR code",default:"https://github.com/publiclab/image-sequencer"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#add-qr-module"}},{}],277:[function(e,t,r){t.exports=function(t,r){return t.step.metadata=t.step.metadata||{},{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(e){for(var r=0,n=[0,0,0,0];r<e.data.length;)n[0]+=e.data[r++],n[1]+=e.data[r++],n[2]+=e.data[r++],n[3]+=e.data[r++];let i=e.data.length/4;for(n[0]=Math.floor(n[0]/i),n[1]=Math.floor(n[1]/i),n[2]=Math.floor(n[2]/i),n[3]=Math.floor(n[3]/i),r=0;r<e.data.length;)e.data[r++]=n[0],e.data[r++]=n[1],e.data[r++]=n[2],e.data[r++]=n[3];return t.step.metadata.averages=n,t.step.inBrowser&&t.step.ui&&$(t.step.ui).find(".details").append("<p><b>Averages</b> (r, g, b, a): "+n.join(", ")+"</p>"),e},format:r.format,image:t.image,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417}],278:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":277,"./info.json":279,dup:275}],279:[function(e,t,r){t.exports={name:"average",description:"Average all pixel color",inputs:{},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#average-module"}},{}],280:[function(require,module,exports){module.exports=function Dynamic(options,UI,util){var defaults=require("./../../util/getDefaults.js")(require("./info.json")),output;function draw(input,callback,progressObj){progressObj.stop(!0),progressObj.overrideFlag=!0;var step=this;"string"==typeof options.func&&eval("options.func = "+options.func);var getPixels=require("get-pixels");"string"==typeof options.offset&&(options.offset=parseInt(options.offset));var priorStep=this.getStep(options.offset);void 0===priorStep.output&&(this.output=input,UI.notify("Offset Unavailable","offset-notification"),callback()),getPixels(priorStep.output.src,function(e,t){return options.firstImagePixels=t,require("../_nomodule/PixelManipulation.js")(input,{output:function(e,t,r){step.output={src:t,format:r}},ui:options.step.ui,changePixel:function(e,t,r,n,i,o){let s=options.firstImagePixels;return options.func(e,t,r,n,s.get(i,o,0),s.get(i,o,1),s.get(i,o,2),s.get(i,o,3))},format:input.format,image:options.image,inBrowser:options.inBrowser,callback:callback})})}return options.func=options.func||defaults.blend,options.offset=options.offset||defaults.offset,{options:options,draw:draw,output:output,UI:UI}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":282,"get-pixels":28}],281:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":280,"./info.json":282,dup:275}],282:[function(e,t,r){t.exports={name:"blend",description:"Blend two chosen image steps with the given function. Defaults to using the red channel from image 1 and the green and blue and alpha channels of image 2. Easier to use interfaces coming soon!",inputs:{offset:{type:"integer",desc:"Choose which image to blend the current image with. Two steps back is -2, three steps back is -3 etc.",default:-2},blend:{type:"string",desc:"Function to use to blend the two images.",default:"function(r1, g1, b1, a1, r2, g2, b2, a2) { return [ r1, g2, b2, a2 ] }"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#blend-module"}},{}],283:[function(e,t,r){t.exports=function(t,r){let n=function(e=1){let t=[],r=0;0==e&&(e+=.05);const n=2*Math.pow(e,2);for(let e=-2;e<=2;e++){t.push([]);for(let i=-2;i<=2;i++){let o=Math.sqrt(Math.pow(i,2)+Math.pow(e,2));t[e+2].push(Math.exp(-o/n)),r+=t[e+2][i+2]}}for(let e=0;e<5;e++)for(let n=0;n<5;n++)t[n][e]=t[n][e]/r;return t}(r),i={r:[],g:[],b:[]};for(let e=0;e<t.shape[1];e++){i.r.push([]),i.g.push([]),i.b.push([]);for(let r=0;r<t.shape[0];r++)i.r[e].push(t.get(r,e,0)),i.g[e].push(t.get(r,e,1)),i.b[e].push(t.get(r,e,2))}const o=(0,e("../_nomodule/gpuUtils").convolve)([i.r,i.g,i.b],n);for(let e=0;e<t.shape[1];e++)for(let r=0;r<t.shape[0];r++)t.set(r,e,0,Math.max(0,Math.min(o[0][e][r],255))),t.set(r,e,1,Math.max(0,Math.min(o[1][e][r],255))),t.set(r,e,2,Math.max(0,Math.min(o[2][e][r],255)));return t}},{"../_nomodule/gpuUtils":419}],284:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return t.blur=t.blur||n.blur,t.blur=parseFloat(t.blur),{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(r){return r=e("./Blur")(r,t.blur)},format:r.format,image:t.image,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./Blur":283,"./info.json":286}],285:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":284,"./info.json":286,dup:275}],286:[function(e,t,r){t.exports={name:"blur",description:"Applies a Gaussian blur given by the intensity value",inputs:{blur:{type:"float",desc:"Amount of gaussian blur(Less blur gives more detail, typically 0-5)",default:2,min:0,max:5,step:.05}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#blur-module"}},{}],287:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return{options:t,draw:function(r,i,o){t.brightness=t.brightness||n.brightness,o.stop(!0),o.overrideFlag=!0;var s=this,a=t.brightness/100;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){s.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){return[e=Math.min(a*e,255),t=Math.min(a*t,255),r=Math.min(a*r,255),n]},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:i})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":289}],288:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":287,"./info.json":289,dup:275}],289:[function(e,t,r){t.exports={name:"brightness",description:"Change the brightness of the image by given percent value",inputs:{brightness:{type:"integer",desc:"% brightness for the new image",default:"175",min:"0",max:"200"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#brightness-module"}},{}],290:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return{options:t,draw:function(r,i,o){t.width=parseInt(t.width||n.width),t.height=parseInt(t.height||n.height),t.x=parseInt(t.x||n.x),t.y=parseInt(t.y||n.y),o.stop(!0),o.overrideFlag=!0;var s=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){s.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(r){let n=e("ndarray")(new Uint8Array(4*t.width*t.height).fill(0),[t.width,t.height,4]),i=t.width-t.x,o=t.height-t.y;for(let e=0;e<i&&e<r.shape[0];e++)for(let i=0;i<o&&i<r.shape[1];i++){let o=e+t.x,s=i+t.y;n.set(o,s,0,r.get(e,i,0)),n.set(o,s,1,r.get(e,i,1)),n.set(o,s,2,r.get(e,i,2)),n.set(o,s,3,r.get(e,i,3))}return n},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:i})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":292,ndarray:168}],291:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":290,"./info.json":292,dup:275}],292:[function(e,t,r){t.exports={name:"canvas-resize",description:"This module resizes the canvas and overlays the ouput of the previous step at given location",inputs:{width:{type:"integer",desc:"Final width of the canvas",default:1e3},height:{type:"integer",desc:"Final height of the canvas",default:1e3},x:{type:"integer",desc:"X-cord of the top left corner of the image on the canvas",default:500},y:{type:"float",desc:"Y-cord of the top left corner of the image on the canvas",default:500}}}},{}],293:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return t.channel=t.channel||n.channel,{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,r,n,i){return"red"===t.channel?[e,0,0,i]:"green"===t.channel?[0,r,0,i]:"blue"===t.channel?[0,0,n,i]:void 0},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":295}],294:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":293,"./info.json":295,dup:275}],295:[function(e,t,r){t.exports={name:"channel",description:"Displays only one color channel of an image -- default is green",inputs:{channel:{type:"select",desc:"Color channel",default:"green",values:["red","green","blue"]}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#channel-module"}},{}],296:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){t.temperature=t.temperature>"40000"?"40000":t.temperature,i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(e){let r,n,i,o=parseInt(t.temperature);(o/=100)<=66?(r=255,n=Math.min(Math.max(99.4708025861*Math.log(o)-161.1195681661,0),255)):(r=Math.min(Math.max(329.698727446*Math.pow(o-60,-.1332047592),0),255),n=Math.min(Math.max(288.1221695283*Math.pow(o-60,-.0755148492),0),255)),o>=66?i=255:o<=19?i=0:(i=o-10,i=Math.min(Math.max(138.5177312231*Math.log(i)-305.0447927307,0),255));for(let t=0;t<e.shape[0];t++)for(let o=0;o<e.shape[1];o++)r_data=e.get(t,o,0),r_new_data=255/r*r_data,e.set(t,o,0,r_new_data),g_data=e.get(t,o,1),g_new_data=255/n*g_data,e.set(t,o,1,g_new_data),b_data=e.get(t,o,2),b_new_data=255/i*b_data,e.set(t,o,2,b_new_data);return e},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417}],297:[function(e,t,r){t.exports=[e("./Module"),e("./info.json")]},{"./Module":296,"./info.json":298}],298:[function(e,t,r){t.exports={name:"color-temperature",description:"Changes the color temperature of the image.",inputs:{temperature:{type:"integer",desc:"Temperature between 0 - 40,000 Kelvin",default:6e3}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#color-temperature"}},{}],299:[function(e,t,r){t.exports=e("../../util/createMetaModule.js")(function(e){return[{name:"gradient",options:{}},{name:"colormap",options:{colormap:e.colormap}},{name:"crop",options:{y:0,h:e.h}},{name:"overlay",options:{x:e.x,y:e.y,offset:-4}}]},{infoJson:e("./info.json")})[0]},{"../../util/createMetaModule.js":424,"./info.json":301}],300:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":299,"./info.json":301,dup:275}],301:[function(e,t,r){t.exports={name:"colorbar",description:"Generates a colorbar to lay over the image",inputs:{colormap:{type:"select",desc:"Name of the Colormap",default:"default",values:["default","greyscale","stretched","fastie"]},x:{type:"integer",desc:"X-position of the image on which the new image is overlayed",default:0},y:{type:"integer",desc:"Y-position of the image on which the new image is overlayed",default:0},h:{type:"integer",desc:"height of the colorbar",default:10}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#colorbar-module"}},{}],302:[function(e,t,r){function n(e){return function(t){var r,n,i,o,s,a,u,l,c,h,p,f,d,m;if(a=(p=[0,0])[0],u=p[1],o=(f=[e[0][0],1])[1],t<(i=f[0]))return a;for(r=l=0,h=e.length;l<h;r=++l){if(s=(d=e[r])[0],a=d[1],u=d[2],i=s,r===e.length-1){o=1;break}if(o=e[r+1][0],s<=t&&t<o)break}for(n=[],r=c=0,m=a.length;0<=m?c<m:c>m;r=0<=m?++c:--c)n[r]=(t-i)/(o-i)*(u[r]-a[r])+a[r];return n}}t.exports=function(e,t){return t.colormap=t.colormap||i.default,"object"==typeof t.colormap?colormapFunction=n(t.colormap):i.hasOwnProperty(t.colormap)?colormapFunction=i[t.colormap]:colormapFunction=i.default,colormapFunction(e/255)};var i={greyscale:n([[0,[0,0,0],[255,255,255]],[1,[255,255,255],[255,255,255]]]),bluwhtgrngis:n([[0,[6,23,86],[6,25,84]],[.0625,[6,25,84],[6,25,84]],[.125,[6,25,84],[6,25,84]],[.1875,[6,25,84],[6,25,84]],[.25,[6,25,84],[6,25,84]],[.3125,[6,25,84],[9,24,84]],[.3438,[9,24,84],[119,120,162]],[.375,[119,129,162],[249,250,251]],[.406,[249,250,251],[255,255,255]],[.4375,[255,255,255],[255,255,255]],[.5,[255,255,255],[214,205,191]],[.52,[214,205,191],[178,175,96]],[.5625,[178,175,96],[151,176,53]],[.593,[151,176,53],[146,188,12]],[.625,[146,188,12],[96,161,1]],[.6875,[96,161,1],[30,127,3]],[.75,[30,127,3],[0,99,1]],[.8125,[0,99,1],[0,74,1]],[.875,[0,74,1],[0,52,0]],[.9375,[0,52,0],[0,34,0]],[.968,[0,34,0],[68,70,67]]]),brntogrn:n([[0,[110,12,3],[118,6,1]],[.0625,[118,6,1],[141,19,6]],[.125,[141,19,6],[165,35,13]],[.1875,[165,35,13],[177,59,25]],[.2188,[177,59,25],[192,91,36]],[.25,[192,91,36],[214,145,76]],[.3125,[214,145,76],[230,183,134]],[.375,[230,183,134],[243,224,194]],[.4375,[243,224,194],[250,252,229]],[.5,[250,252,229],[217,235,185]],[.5625,[217,235,185],[184,218,143]],[.625,[184,218,143],[141,202,89]],[.6875,[141,202,89],[80,176,61]],[.75,[80,176,61],[0,147,32]],[.8125,[0,147,32],[1,122,22]],[.875,[1,122,22],[0,114,19]],[.9,[0,114,19],[0,105,18]],[.9375,[0,105,18],[7,70,14]]]),blutoredjet:n([[0,[0,0,140],[1,1,186]],[.0625,[1,1,186],[0,1,248]],[.125,[0,1,248],[0,70,254]],[.1875,[0,70,254],[0,130,255]],[.25,[0,130,255],[2,160,255]],[.2813,[2,160,255],[0,187,255]],[.3125,[0,187,255],[6,250,255]],[.375,[8,252,251],[27,254,228]],[.406,[27,254,228],[70,255,187]],[.4375,[70,255,187],[104,254,151]],[.47,[104,254,151],[132,255,19]],[.5,[132,255,19],[195,255,60]],[.5625,[195,255,60],[231,254,25]],[.5976,[231,254,25],[253,246,1]],[.625,[253,246,1],[252,210,1]],[.657,[252,210,1],[255,183,0]],[.6875,[255,183,0],[255,125,2]],[.75,[255,125,2],[255,65,1]],[.8125,[255,65,1],[247,1,1]],[.875,[247,1,1],[200,1,3]],[.9375,[200,1,3],[122,3,2]]]),colors16:n([[0,[0,0,0],[0,0,0]],[.0625,[3,1,172],[3,1,172]],[.125,[3,1,222],[3,1,222]],[.1875,[0,111,255],[0,111,255]],[.25,[3,172,255],[3,172,255]],[.3125,[1,226,255],[1,226,255]],[.375,[2,255,0],[2,255,0]],[.4375,[198,254,0],[190,254,0]],[.5,[252,255,0],[252,255,0]],[.5625,[255,223,3],[255,223,3]],[.625,[255,143,3],[255,143,3]],[.6875,[255,95,3],[255,95,3]],[.75,[242,0,1],[242,0,1]],[.8125,[245,0,170],[245,0,170]],[.875,[223,180,225],[223,180,225]],[.9375,[255,255,255],[255,255,255]]]),default:n([[0,[45,1,121],[25,1,137]],[.125,[25,1,137],[0,6,156]],[.1875,[0,6,156],[7,41,172]],[.25,[7,41,172],[22,84,187]],[.3125,[22,84,187],[25,125,194]],[.375,[25,125,194],[26,177,197]],[.4375,[26,177,197],[23,199,193]],[.47,[23,199,193],[25,200,170]],[.5,[25,200,170],[21,209,27]],[.5625,[21,209,27],[108,215,18]],[.625,[108,215,18],[166,218,19]],[.6875,[166,218,19],[206,221,20]],[.75,[206,221,20],[222,213,19]],[.7813,[222,213,19],[222,191,19]],[.8125,[222,191,19],[227,133,17]],[.875,[227,133,17],[231,83,16]],[.9375,[231,83,16],[220,61,48]]]),fastie:n([[0,[255,255,255],[0,0,0]],[.167,[0,0,0],[255,255,255]],[.33,[255,255,255],[0,0,0]],[.5,[0,0,0],[140,140,255]],[.55,[140,140,255],[0,255,0]],[.63,[0,255,0],[255,255,0]],[.75,[255,255,0],[255,0,0]],[.95,[255,0,0],[255,0,255]]]),stretched:n([[0,[0,0,255],[0,0,255]],[.1,[0,0,255],[38,195,195]],[.5,[0,150,0],[255,255,0]],[.7,[255,255,0],[255,50,50]],[.9,[255,50,50],[255,50,50]]])}},{}],303:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,changePixel:function(r,n,i,o){var s=(r+n+i)/3,a=e("./Colormap")(s,t);return[a[0],a[1],a[2],255]},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./Colormap":302}],304:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":303,"./info.json":305,dup:275}],305:[function(e,t,r){t.exports={name:"colormap",description:"Maps brightness values (average of red, green & blue) to a given color lookup table, made up of a set of one more color gradients.\n\nFor example, 'cooler' colors like blue could represent low values, while 'hot' colors like red could represent high values.",inputs:{colormap:{type:"select",desc:"Name of the Colormap",default:"default",values:["default","greyscale","bluwhtgrngis","stretched","fastie","brntogrn","blutoredjet","colors16"]}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#colormap-module"}},{}],306:[function(e,t,r){var n=e("lodash");t.exports=function(e,t){let r=n.cloneDeep(e);(t=Number(t))<-100&&(t=-100),t>100&&(t=100),t=(100+t)/100,t*=t;for(let n=0;n<e.shape[0];n++)for(let a=0;a<e.shape[1];a++){var i=r.get(n,a,0)/255;i-=.5,i*=t,i+=.5,(i*=255)<0&&(i=0),i>255&&(i=255);var o=r.get(n,a,1)/255;o-=.5,o*=t,o+=.5,(o*=255)<0&&(o=0),o>255&&(o=255);var s=r.get(n,a,2)/255;s-=.5,s*=t,s+=.5,(s*=255)<0&&(s=0),s>255&&(s=255),e.set(n,a,0,i),e.set(n,a,1,o),e.set(n,a,2,s)}return e}},{lodash:162}],307:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return t.contrast=t.contrast||n.contrast,{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(r){return r=e("./Contrast")(r,t.contrast)},format:r.format,image:t.image,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./Contrast":306,"./info.json":309}],308:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":307,"./info.json":309,dup:275}],309:[function(e,t,r){t.exports={name:"contrast",description:"Change the contrast of the image by given value",inputs:{contrast:{type:"integer",desc:"contrast for the new image, typically -100 to 100",default:70,min:-100,max:100}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#contrast-module"}},{}],310:[function(e,t,r){e("lodash");t.exports=function(t,r,n,o){let s=function(e,t){for(t=t.split(" "),i=0;i<9;i++)t[i]=Number(t[i])*e;let r=0,n=[];for(y=0;y<3;y++)for(n.push([]),x=0;x<3;x++)n[y].push(t[r]),r+=1;return n}(r,n),a={r:[],g:[],b:[]};for(let e=0;e<t.shape[1];e++){a.r.push([]),a.g.push([]),a.b.push([]);for(let r=0;r<t.shape[0];r++)a.r[e].push(t.get(r,e,0)),a.g[e].push(t.get(r,e,1)),a.b[e].push(t.get(r,e,2))}const u=(0,e("../_nomodule/gpuUtils").convolve)([a.r,a.g,a.b],s,t.shape[0]*t.shape[1]<4e5);for(let e=0;e<t.shape[1];e++)for(let r=0;r<t.shape[0];r++)t.set(r,e,0,Math.max(0,Math.min(u[0][e][r],255))),t.set(r,e,1,Math.max(0,Math.min(u[1][e][r],255))),t.set(r,e,2,Math.max(0,Math.min(u[2][e][r],255)));return t}},{"../_nomodule/gpuUtils":419,lodash:162}],311:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return t.kernelValues=t.kernelValues||n.kernelValues,t.constantFactor=t.constantFactor||n.constantFactor,t.texMode=t.texMode||n.texMode,{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(r){return r=e("./Convolution")(r,t.constantFactor,t.kernelValues,t.texMode)},format:r.format,image:t.image,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./Convolution":310,"./info.json":313}],312:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":311,"./info.json":313,dup:275}],313:[function(e,t,r){t.exports={name:"convolution",description:"Image Convolution using a given 3x3 kernel matrix <a href='https://en.wikipedia.org/wiki/Kernel_(image_processing)'>Read more</a>",inputs:{constantFactor:{type:"float",desc:"a constant factor, multiplies all the kernel values by that factor",default:.111,min:.001,max:2,step:.001},kernelValues:{type:"string",desc:"nine space separated numbers representing the kernel values in left to right and top to bottom format.",default:"1 1 1 1 1 1 1 1 1",placeholder:"1 1 1 1 1 1 1 1 1"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#convolution-module"}},{}],314:[function(e,t,r){(function(r){t.exports=function(t,n,i){var o=e("./../../util/getDefaults.js")(e("./info.json")),s=e("get-pixels"),a=e("save-pixels");n.x=parseInt(n.x)||o.x,n.y=parseInt(n.y)||o.y,s(t.src,function(e,s){n.w=parseInt(n.w)||Math.floor(s.shape[0]),n.h=parseInt(n.h)||Math.floor(s.shape[1]),n.backgroundColor=n.backgroundColor||o.backgroundColor;var u=n.x,l=n.y,c=n.w,h=n.h,p=s.shape[0],f=s.shape[1],d=[];backgroundColor=n.backgroundColor.substring(n.backgroundColor.indexOf("(")+1,n.backgroundColor.length-1),backgroundColor=backgroundColor.split(",");for(var m=0;m<c;m++)d=d.concat([backgroundColor[0],backgroundColor[1],backgroundColor[2],backgroundColor[3]]);for(var g=[],v=l;v<l+h;v++){if(v<f){var y=4*v*p+4*u,b=4*v*p+4*u+4*c,x=Array.from(s.data.slice(y,b));g.push.apply(g,x)}else g.push.apply(g,d)}var _=Uint8Array.from(g);s.data=_,s.shape=[c,h,4],s.stride[1]=4*c,n.format=t.format;var w=[],k=0,T=a(s,n.format);T.on("data",function(e){k+=e.length,w.push(e)}),T.on("end",function(){var e=r.concat(w,k).toString("base64"),t="data:image/"+n.format+";base64,"+e;i(t,n.format)})})}}).call(this,e("buffer").Buffer)},{"./../../util/getDefaults.js":425,"./info.json":318,buffer:134,"get-pixels":28,"save-pixels":250}],315:[function(e,t,r){t.exports=function(t,r){if(t.step.inBrowser&&!t.noUI)var n=e("./Ui.js")(t.step,r);var i=!1;return{options:t,draw:function(o,s){var a=this;t.step.input=o.src,e("../../util/ParseInputCoordinates")(t,{src:o.src,x:{valInp:t.x,type:"horizontal"},y:{valInp:t.y,type:"vertical"},w:{valInp:t.w,type:"horizontal"},h:{valInp:t.h,type:"vertical"}},function(e,t){e.x=parseInt(t.x.valInp),e.y=parseInt(t.y.valInp),e.w=t.w.valInp,e.h=t.h.valInp}),e("./Crop")(o,t,function(e,o){a.output={src:e,format:o},t.step.output=e,r.onComplete(t.step),n&&n.hide&&n.hide(),!1===i&&t.step.inBrowser&&!t.noUI&&(i=!0,n.setup()),s()})},output:void 0,UI:r}}},{"../../util/ParseInputCoordinates":423,"./Crop":314,"./Ui.js":316}],316:[function(e,t,r){t.exports=function(e,t){let r=0,n=0;function i(){return e.imgElement}function o(e,t,r,n){let o=$($(i()).parents()[3]).find("input");o[0].value=e,o[1].value=t,o[2].value=r,o[3].value=n}return{setup:function(){e.imgElement.src=e.input,r=Math.floor(i().naturalWidth),n=Math.floor(i().naturalHeight),o(0,0,r,n),$(i()).imgAreaSelect({handles:!0,x1:0,y1:0,x2:0+r/2,y2:0+n/2,onSelectEnd:function(e,t){let s=function(e,t,o,s){let a=$(i()).width(),u=$(i()).height();return[Math.floor(e/a*r),Math.floor(t/u*n),Math.floor(o/a*r),Math.floor(s/u*n)]}(t.x1,t.y1,t.width,t.height);o(s[0],s[1],s[2],s[3]),$($(i()).parents()[3]).find("input").trigger("change")}})},remove:function(){$(i()).imgAreaSelect({remove:!0})},hide:function(){$(i()).imgAreaSelect({hide:!0})}}}},{}],317:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":315,"./info.json":318,dup:275}],318:[function(e,t,r){t.exports={name:"crop",description:"Crop image to given x, y, w, h in pixels or % , measured from top left",url:"https://github.com/publiclab/image-sequencer/tree/master/MODULES.md",inputs:{x:{type:"string",desc:"X-position (measured from left) from where cropping starts",default:0},y:{type:"string",desc:"Y-position (measured from top) from where cropping starts",default:0},w:{type:"string",desc:"Width of crop",default:"(50%)"},h:{type:"string",desc:"Height of crop",default:"(50%)"},backgroundColor:{type:"text",desc:"Background Color",default:"rgba(255,255,255,255)",id:"color-picker"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#crop-module"}},{}],319:[function(e,t,r){t.exports=function(t,r){var n=e("jsqr"),i=e("get-pixels");return{options:t,draw:function(r,o,s){s.stop(!0),s.overrideFlag=!0;var a=this;return i(r.src,function(e,r){if(e)throw e;var i=r.shape[0],o=r.shape[1],s=n(r.data,i,o);t.step.qrval=s?s.data:"undefined"}),e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){a.output={src:t,format:r}},ui:t.step.ui,format:r.format,image:t.image,callback:o})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"get-pixels":28,jsqr:161}],320:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":319,"./info.json":321,dup:275}],321:[function(e,t,r){t.exports={name:"decode-qr",description:"Search for and decode a QR code in the image",inputs:{},outputs:{qrval:{type:"string"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#decodeqr-module"}},{}],322:[function(e,t,r){t.exports=function(e,t){t=t;let r=[[15,135,45,165],[195,75,225,105],[60,180,30,150],[240,120,210,90]],n=[],i=[],o=[];for(let e=0;e<256;e++)n[e]=.299*e,i[e]=.587*e,o[e]=.114*e;let s=e.data.length;for(let t=0;t<=s;t++)e.data[t]=Math.floor(n[e.data[t++]]+i[e.data[t++]]+o[e.data[t++]]);let a,u,l=e.shape[0];for(let n=0;n<=s;n+=4){if("none"===t)e.data[n]=e.data[n]<129?0:255;else if("bayer"===t){let t=n/4%l,i=Math.floor(n/4/l),o=Math.floor((e.data[n]+r[t%4][i%4])/2);e.data[n]=o<129?0:255}else"floydsteinberg"===t?(a=e.data[n]<129?0:255,u=Math.floor((e.data[n]-a)/16),e.data[n]=a,e.data[n+4]+=7*u,e.data[n+4*l-4]+=3*u,e.data[n+4*l]+=5*u,e.data[n+4*l+4]+=1*u):(a=e.data[n]<129?0:255,u=Math.floor((e.data[n]-a)/8),e.data[n]=a,e.data[n+4]+=u,e.data[n+8]+=u,e.data[n+4*l-4]+=u,e.data[n+4*l]+=u,e.data[n+4*l+4]+=u,e.data[n+8*l]+=u);e.data[n+1]=e.data[n+2]=e.data[n]}return e}},{}],323:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return{options:t,draw:function(r,i,o){o.stop(!0),o.overrideFlag=!0;var s=this;return t.dither=t.dither||n.dither,e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){s.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(r){return r=e("./Dither")(r,t.dither)},format:r.format,image:t.image,callback:i})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./Dither":322,"./info.json":325}],324:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":323,"./info.json":325,dup:275}],325:[function(e,t,r){t.exports={name:"dither",description:"Approximates a color from a mixture of other colors when the required color is not available, creating illusions of the color that is not present actually.<a href='https://en.wikipedia.org/wiki/Dither'>Read more</a>",inputs:{dither:{type:"select",desc:"Name of the Dithering Algorithm",default:"none",values:["none","floydsteinberg","bayer","Atkinson"]}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#dither-module"}},{}],326:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));r.startingX=r.startingX||n.startingX,r.startingY=r.startingY||n.startingY;var i=Number(r.startingX),o=Number(r.startingY),s=t.shape[0],a=t.shape[1],u=Number(r.thickness)||n.thickness,l=r.endX=Number(r.endX)-u||s-1,c=r.endY=Number(r.endY)-u||a-1,h=r.color||n.color;h=(h=h.substring(h.indexOf("(")+1,h.length-1)).split(",");var p=function(e,r,n,i){for(var o=e;o<=n+u;o++)for(var s=r;s<=i+u;s++)t.set(o,s,0,h[0]),t.set(o,s,1,h[1]),t.set(o,s,2,h[2])};return p(i,o,i,c),p(l,o,l,c),p(i,o,l,o),p(i,c,l,c),t}},{"./../../util/getDefaults.js":425,"./info.json":329}],327:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){return[e,t,r,n]},extraManipulation:function(r){return r=e("./DrawRectangle")(r,t)},format:r.format,image:t.image,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./DrawRectangle":326}],328:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":327,"./info.json":329,dup:275}],329:[function(e,t,r){t.exports={name:"draw-rectangle",description:"It draws a rectangle on the image",inputs:{startingX:{type:"integer",desc:"starting x position of the rectangle",default:0},startingY:{type:"integer",desc:"starting y position of the rectangle",default:0},endX:{type:"integer",desc:"last x position of the rectangle",default:"width"},endY:{type:"integer",desc:"last y position of the rectangle",default:"height"},thickness:{type:"integer",desc:"thickness of border",default:1},color:{type:"text",desc:"Select color",default:"rgba(20,20,20,1)",id:"color-picker"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#draw-rectangle-module"}},{}],330:[function(require,module,exports){module.exports=function Dynamic(options,UI){var output;function draw(input,callback,progressObj){progressObj.stop(!0),progressObj.overrideFlag=!0;var step=this;function generator(expression){var func="f = function (r, g, b, a) { var R = r, G = g, B = b, A = a;",f;return func+="return ",func=func+expression+"}",eval(func),f}options.monochrome=options.monochrome||"(R+G+B)/3";var channels=["red","green","blue","alpha"];function changePixel(e,t,r,n){return[options.red_function(e,t,r,n),options.green_function(e,t,r,n),options.blue_function(e,t,r,n),options.alpha_function(e,t,r,n)]}function getNeighbourPixel(e,t,r,n,i){return[e.get(t+n,r+i,0),e.get(t+n,r+i,1),e.get(t+n,r+i,2),e.get(t+n,r+i,3)]}function map(e,t,r,n,i,o){var s=(e-t)/(r-t)*(i-n)+n;if(!o)return s;function a(e,t,r){return Math.max(Math.min(e,r),t)}return n<i?a(s,n,i):a(s,i,n)}function output(e,t,r){step.output={src:t,format:r}}return channels.forEach(function(e){options.hasOwnProperty(e)?options[e+"_function"]=generator(options[e]):"alpha"===e?options.alpha_function=function(){return 255}:options[e+"_function"]=generator(options.monochrome)}),require("../_nomodule/PixelManipulation.js")(input,{output:output,ui:options.step.ui,changePixel:changePixel,getNeighbourPixel:getNeighbourPixel,getNeighborPixel:getNeighbourPixel,format:input.format,image:options.image,inBrowser:options.inBrowser,callback:callback})}return{options:options,draw:draw,output:output,UI:UI}}},{"../_nomodule/PixelManipulation.js":417}],331:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":330,"./info.json":332,dup:275}],332:[function(e,t,r){t.exports={name:"dynamic",description:"A module which accepts JavaScript math expressions to produce each color channel based on the original image's color. See <a href='https://publiclab.org/wiki/infragram-sandbox'>Infragrammar</a>.",inputs:{red:{type:"string",desc:"Expression to return for red channel with R, G, B, and A inputs",default:"r"},green:{type:"string",desc:"Expression to return for green channel with R, G, B, and A inputs",default:"g"},blue:{type:"string",desc:"Expression to return for blue channel with R, G, B, and A inputs",default:"b"},"monochrome (fallback)":{type:"string",desc:"Expression to return with R, G, B, and A inputs; fallback for other channels if none provided",default:"r + g + b"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#dynamic-module"}},{}],333:[function(e,t,r){const n=[[-1,0,1],[-2,0,2],[-1,0,1]],i=[[-1,-2,-1],[0,0,0],[1,2,1]];let o=[];function s(e,t){e.set(t[0],t[1],0,0),e.set(t[0],t[1],1,0),e.set(t[0],t[1],2,0),e.set(t[0],t[1],3,255)}function a(e,t,r){let o=e.get(t,r,0),s=0,a=0;for(let o=0;o<3;o++)for(let u=0;u<3;u++){let c=t+o-1,h=r+u-1;l(e,c,h)?(s+=e.get(c+1,h+1,0)*n[o][u],a+=e.get(c+1,h+1,0)*i[o][u]):(s+=e.get(c,h,0)*n[o][u],a+=e.get(c,h,0)*i[o][u])}return{pixel:[o,o,o,Math.sqrt(Math.pow(s,2)+Math.pow(a,2))],angle:Math.atan2(a,s)}}function u(e){return e>=-22.5&&e<=22.5||e<-157.5&&e>=-180?1:e>=22.5&&e<=67.5||e<-112.5&&e>=-157.5?2:e>=67.5&&e<=112.5||e<-67.5&&e>=-112.5?3:e>=112.5&&e<=157.5||e<-22.5&&e>=-67.5?4:void 0}function l(e,t,r){return t<0||r<0||t>=e.shape[0]||r>=e.shape[1]}t.exports=function(e,t,r,n){let i=[],f=[],d=[],m=[];for(var g=0;g<e.shape[0];g++){f.push([]),i.push([]);for(var v=0;v<e.shape[1];v++){var y=a(e,g,v);let t=y.pixel;f.slice(-1)[0].push(t[3]),i.slice(-1)[0].push(y.angle)}}return function(e,t,r){r=r.map(e=>e.map(h));for(let n=0;n<e.shape[0];n++)for(let i=0;i<e.shape[1];i++){let s=u(r[n][i]);if(!l(e,n-1,i-1)&&!l(e,n+1,i+1))switch(s){case 1:t[n][i]>=t[n][i+1]&&t[n][i]>=t[n][i-1]||o.push([n,i]);break;case 2:t[n][i]>=t[n+1][i+1]&&t[n][i]>=t[n-1][i-1]||o.push([n,i]);break;case 3:t[n][i]>=t[n+1][i]&&t[n][i]>=t[n-1][i]||o.push([n,i]);break;case 4:t[n][i]>=t[n+1][i-1]&&t[n][i]>=t[n-1][i+1]||o.push([n,i])}}}(e,f,i),function(e,t,r,n,i,s){const a=p(n)*t,u=a*r;for(let t=0;t<e.shape[0];t++)for(let r=0;r<e.shape[1];r++){let e=[t,r];n[t][r]>u?n[t][r]>a?i.push(e):s.push(e):o.push(e)}}(e,t,r,f,d,m),"true"==n.toLowerCase()&&function(e,t){e.forEach(e=>{let r=e[0],n=e[1];t.includes([r+1,n])?c(t,[r+1,n]):t.includes([r-1,n])?c(t,[r-1,n]):t.includes([r,n+1])?c(t,[r,n+1]):t.includes([r,n-1])&&c(t,[r,n-1])})}(d,m),d.forEach(t=>(function(e,t){e.set(t[0],t[1],0,255),e.set(t[0],t[1],1,255),e.set(t[0],t[1],2,255),e.set(t[0],t[1],3,255)})(e,t)),m.forEach(t=>s(e,t)),o.forEach(t=>s(e,t)),e};const c=(e=[],t)=>e.filter(e=>e!==t);var h=e=>180*e/Math.PI,p=e=>Math.max(...e.map(e=>e.map(e=>e||0)).map(e=>Math.max(...e)))},{}],334:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return t.blur=t.blur||n.blur,t.highThresholdRatio=t.highThresholdRatio||n.highThresholdRatio,t.lowThresholdRatio=t.lowThresholdRatio||n.lowThresholdRatio,t.hysteresis=t.hysteresis||n.hysteresis,{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;const s=ImageSequencer({inBrowser:!1,ui:!1});return s.loadImage(r.src,function(){return s.importJSON([{name:"blur",options:{blur:t.blur}}]),s.run(function(i){e("get-pixels")(i,function(i,s){if(!i)return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){return[(e+t+r)/3,(e+t+r)/3,(e+t+r)/3,n]},extraManipulation:function(){return e("./EdgeUtils")(s,t.highThresholdRatio,t.lowThresholdRatio,t.hysteresis)},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})})})})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./EdgeUtils":333,"./info.json":336,"get-pixels":28}],335:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":334,"./info.json":336,dup:275}],336:[function(e,t,r){t.exports={name:"edge-detect",description:"This module detects edges using the Canny method, which first Gaussian blurs the image to reduce noise (amount of blur configurable in settings as `options.blur`), then applies a number of steps to highlight edges, resulting in a greyscale image where the brighter the pixel, the stronger the detected edge.<a href='https://en.wikipedia.org/wiki/Canny_edge_detector'> Read more. </a>",inputs:{blur:{type:"float",desc:"Amount of gaussian blur(Less blur gives more detail, typically 0-5)",default:2,min:.05,max:5,step:.05},highThresholdRatio:{type:"float",desc:"The high threshold ratio for the image",default:.2,min:0,max:1,step:.01},lowThresholdRatio:{type:"float",desc:"The low threshold value for the image",default:.15,min:0,max:1,step:.01},hysteresis:{type:"select",desc:"Toggle Hysteresis",values:["false","true"],default:"false"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#edge-detect-module"}},{}],337:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return{options:t,draw:function(r,i,o){t.exposure=t.exposure||n.exposure;var s=Math.pow(2,t.exposure);o.stop(!0),o.overrideFlag=!0;var a=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){a.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){return[e=Math.min(255,e*s),t=Math.min(255,t*s),r=Math.min(255,r*s),n]},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:i})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":339}],338:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":337,"./info.json":339,dup:275}],339:[function(e,t,r){t.exports={name:"exposure",description:"Change the exposure of the image by given exposure value",inputs:{exposure:{type:"float",desc:"exposure value for the new image",default:1,min:-3,max:4,step:.05}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md"}},{}],340:[function(e,t,r){t.exports=function(t,r){e("fisheyegl");return{options:t,draw:function(r,n){var i=this;if(t.inBrowser){if(document.querySelector("#image-sequencer-canvas"))var o=document.querySelector("#image-sequencer-canvas");else(o=document.createElement("canvas")).style.display="none",o.setAttribute("id","image-sequencer-canvas"),document.body.append(o);distorter=FisheyeGl({selector:"#image-sequencer-canvas"}),t.a=parseFloat(t.a)||distorter.lens.a,t.b=parseFloat(t.b)||distorter.lens.b,t.Fx=parseFloat(t.Fx)||distorter.lens.Fx,t.Fy=parseFloat(t.Fy)||distorter.lens.Fy,t.scale=parseFloat(t.scale)||distorter.lens.scale,t.x=parseFloat(t.x)||distorter.fov.x,t.y=parseFloat(t.y)||distorter.fov.y,distorter.lens.a=t.a,distorter.lens.b=t.b,distorter.lens.Fx=t.Fx,distorter.lens.Fy=t.Fy,distorter.lens.scale=t.scale,distorter.fov.x=t.x,distorter.fov.y=t.y,distorter.setImage(r.src,function(){i.output={src:o.toDataURL(),format:r.format},n()})}else e("../_nomodule/gl-context")(r,n,i,t)},output:void 0,UI:r}}},{"../_nomodule/gl-context":418,fisheyegl:20}],341:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":340,"./info.json":342,dup:275}],342:[function(e,t,r){t.exports={name:"fisheye-gl",description:"Correct fisheye, or barrel distortion, in images (with WebGL -- adapted from fisheye-correction-webgl by @bluemir).",requires:["webgl"],inputs:{a:{type:"float",desc:"a parameter",default:1,min:1,max:4},b:{type:"float",desc:"b parameter",default:1,min:1,max:4},Fx:{type:"float",desc:"Fx parameter",default:0,min:0,max:4},Fy:{type:"float",desc:"Fy parameter",default:0,min:0,max:4},scale:{type:"float",desc:"Image Scaling",default:1.5,min:0,max:20},x:{type:"float",desc:"FOV x parameter",default:1.5,min:0,max:20},y:{type:"float",desc:"FOV y parameter",default:1.5,min:0,max:20},fragmentSrc:{type:"PATH",desc:"Path to a WebGL fragment shader file",default:"(inbuilt)"},vertexSrc:{type:"PATH",desc:"Path to a WebGL vertex shader file",default:"(inbuilt)"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#fisheyegl-module"}},{}],343:[function(e,t,r){t.exports=function(t,r){t.Axis=t.Axis||e("./info.json").inputs.Axis.default;var n=e("get-pixels");return{options:t,draw:function(r,i,o){o.stop(!0),o.overrideFlag=!0;var s=this;return n(r.src,function(n,o){return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){s.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){return[e,t,r,n]},extraManipulation:function(r){if(!n)return e("./flipImage")(o,r,t.Axis);console.log(n)},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:i})})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./flipImage":344,"./info.json":346,"get-pixels":28}],344:[function(e,t,r){t.exports=function(e,t,r){var n=e.shape[0],i=e.shape[1];function o(r,n,i,o){t.set(r,n,0,e.get(i,o,0)),t.set(r,n,1,e.get(i,o,1)),t.set(r,n,2,e.get(i,o,2)),t.set(r,n,3,e.get(i,o,3))}return function(){if("vertical"==r.toLowerCase())for(var e=0;e<n;e++)for(var t=0;t<i;t++)o(e,t,e,i-t-1);else for(e=0;e<n;e++)for(t=0;t<i;t++)o(e,t,n-e-1,t)}(),t}},{}],345:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":343,"./info.json":346,dup:275}],346:[function(e,t,r){t.exports={name:"flip-image",description:"Flip The Image On The Specified Axis.",inputs:{Axis:{type:"select",desc:"Axis",default:"Vertical",values:["Horizontal","Vertical"]}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#flipimage-module"}},{}],347:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this,s=e("./../../util/getDefaults.js")(e("./info.json")),a=(t.adjustment||s.adjustment)/s.adjustment;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){return[e=255*Math.pow(e/255,a),t=255*Math.pow(t/255,a),r=255*Math.pow(r/255,a),n]},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":349}],348:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":347,"./info.json":349,dup:275}],349:[function(e,t,r){t.exports={name:"gamma-correction",description:"Apply gamma correction on the image <a href='https://en.wikipedia.org/wiki/Gamma_correction'>Read more</a>",inputs:{adjustment:{type:"float",desc:"gamma correction (inverse of actual gamma factor) for the new image",default:.2,min:2,max:1}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#gamma-correction-module"}},{}],350:[function(e,t,r){(function(r){t.exports=function(t,n){return{options:t,draw:function(t,n,i){var o=e("get-pixels"),s=e("save-pixels"),a=this;o(t.src,function(e,i){if(e)console.log("Bad Image path");else{for(var o=i.shape[0],u=0;u<i.shape[0];u++)for(var l=0;l<i.shape[1];l++){let e=u/o*255;i.set(u,l,0,e),i.set(u,l,1,e),i.set(u,l,2,e),i.set(u,l,3,255)}var c=[],h=0,p=s(i,t.format,{quality:100});p.on("data",function(e){h+=e.length,c.push(e)}),p.on("end",function(){var e=r.concat(c,h).toString("base64"),i="data:image/"+t.format+";base64,"+e;!function(e,t,r){a.output={src:t,format:r}}(t.image,i,t.format),n()})}})},output:void 0,UI:n}}}).call(this,e("buffer").Buffer)},{buffer:134,"get-pixels":28,"save-pixels":250}],351:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":350,"./info.json":352,dup:275}],352:[function(e,t,r){t.exports={name:"gradient",description:"Gives a gradient of the image",inputs:{},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#gradient-module"}},{}],353:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));r.x=Number(r.x)||n.x,r.y=Number(r.y)||n.y,color=r.color||n.color,color=color.substring(color.indexOf("(")+1,color.length-1),color=color.split(",");for(var i=0;i<t.shape[0];i+=r.x)for(var o=0;o<t.shape[1];o++)t.set(i,o,0,color[0]),t.set(i,o,1,color[1]),t.set(i,o,2,color[2]);for(o=0;o<t.shape[1];o+=r.y)for(i=0;i<t.shape[0];i++)t.set(i,o,0,color[0]),t.set(i,o,1,color[1]),t.set(i,o,2,color[2]);return t}},{"./../../util/getDefaults.js":425,"./info.json":356}],354:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(r){return r=e("./GridOverlay")(r,t)},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./GridOverlay":353}],355:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":354,"./info.json":356,dup:275}],356:[function(e,t,r){t.exports={name:"grid-overlay",description:"Overlays a grid over an Image",inputs:{x:{type:"integer",desc:"X-position (measured from left) from where grid starts",default:100},y:{type:"integer",desc:"Y-position (measured from top) from where grid starts",default:100},color:{type:"string",desc:"Pick color",default:"rgba(0,0,0,1)",id:"color-picker"}},only:"browser"}},{}],357:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){var o=e("./../../util/getDefaults.js")(e("./info.json"));t.gradient=t.gradient||o.gradient,t.gradient=JSON.parse(t.gradient),i.stop(!0),i.overrideFlag=!0;var s=this,a=new Array(256).fill(0);return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){s.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){let i=Math.round((e+t+r)/3);return a[i]++,[e,t,r,n]},extraManipulation:function(e){var r=new Uint8Array(262144);e.data=r,e.shape=[256,256,4],e.stride[1]=1024;for(let t=0;t<256;t++)for(let r=0;r<256;r++)e.set(t,r,0,255),e.set(t,r,1,255),e.set(t,r,2,255),e.set(t,r,3,255);let n=t.gradient?10:0;if(t.gradient)for(let t=0;t<256;t++)for(let r=0;r<10;r++)e.set(t,255-r,0,t),e.set(t,255-r,1,t),e.set(t,255-r,2,t);let i=(256-n)/Math.max(...a);for(let t=0;t<256;t++){let r=Math.round(i*a[t]);for(let i=n;i<r;i++)e.set(t,255-i,0,204),e.set(t,255-i,1,255),e.set(t,255-i,2,153)}return e},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":359}],358:[function(e,t,r){t.exports=[e("./Module.js"),e("./info.json")]},{"./Module.js":357,"./info.json":359}],359:[function(e,t,r){t.exports={name:"histogram",description:"Calculates the histogram for the image",inputs:{gradient:{type:"select",desc:"Toggle the gradient along x-axis",default:"true",values:["true","false"]}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#histogram-module"}},{}],360:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));(t.imageUrl=t.inBrowser?t.url||n.url:t.url||"./examples/images/monarch.png",t.step.inBrowser)&&e("./Ui.js")(t.step,r).setup();return{options:t,draw:function(e,r){var n=this;n.metadata=n.metadata||{},n.metadata.input=e;var i=ImageSequencer({inBrowser:t.inBrowser,ui:!1});i.loadImages(t.imageUrl,()=>{n.output=i.steps[0].output,r()})},output:void 0,UI:r}}},{"./../../util/getDefaults.js":425,"./Ui.js":361,"./info.json":363}],361:[function(e,t,r){t.exports=function(e,t){return{setup:function(t,r){var n="dropzone-import-image-"+e.ID,i='    <div class="dropzone" style="padding: 30px;margin: 10px 20% 30px;border: 4px dashed #ccc;border-radius: 8px;text-align: center;color: #444;" id="'+n+'">          <p>        <i>Select or drag in an image to overlay.</i>      </p>      <center>        <input type="file" class="file-input" value="">      </center>    </div>';$(e.ui).find(".details").prepend(i),sequencer.setInputStep({dropZoneSelector:"#"+n,fileInputSelector:"#"+n+" .file-input",onLoad:function(t){var r=t.target;e.options.imageUrl=r.result,e.options.url=r.result,sequencer.run(),setUrlHashParameter("steps",sequencer.toString())}}),$(e.ui).find(".btn-save").on("click",function(){var t=$(e.ui).find(".det input").val();e.options.imageUrl=t,sequencer.run()})}}}},{}],362:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":360,"./info.json":363,dup:275}],363:[function(e,t,r){t.exports={name:"import-image",description:"Import a new image and replace the original with it. Future versions may enable a blend mode. Specify an image by URL or by file selector.",url:"https://github.com/publiclab/image-sequencer/tree/master/MODULES.md",inputs:{url:{type:"string",desc:"URL of image to import",default:"./images/monarch.png"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#import-image-module"}},{}],364:[function(e,t,r){t.exports=function(t,r){var n=e("../../util/getDefaults.js")(e("./info.json"));r.x=Number(r.x)||n.x,r.y=Number(r.y)||n.y,color=r.color||n.color,color=color.substring(color.indexOf("(")+1,color.length-1),color=color.split(",");for(var i=0;i<t.shape[0];i+=r.x)for(var o=0;o<t.shape[1];o++)t.set(i,o,0,color[0]),t.set(i,o,1,color[1]),t.set(i,o,2,color[2]);for(o=0;o<t.shape[1];o+=r.y)for(i=0;i<t.shape[0];i++)t.set(i,o,0,color[0]),t.set(i,o,1,color[1]),t.set(i,o,2,color[2]);return t}},{"../../util/getDefaults.js":425,"./info.json":367}],365:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(r){return r=e("./Micro")(r,t)},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./Micro":364}],366:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":365,"./info.json":367,dup:275}],367:[function(e,t,r){t.exports={name:"micro",description:"Overlays a 5,10  or 50 calibration micron grid over Public Lab Intro Kit Microscope Image",inputs:{x:{type:"select",desc:"select 11, 22, 121 for 5, 10, 50 micron vertical grid spacing",default:22,values:[11,22,121]},y:{type:"select",desc:"select 11, 22, 121 for 5, 10, 50 micron horizontal grid spacing",default:22,values:[11,22,121]},color:{type:"string",desc:"Pick color",default:"rgba(0,0,0,1)",id:"color-picker"}},only:"browser"}},{}],368:[function(e,t,r){t.exports=e("../../util/createMetaModule.js")(function(e){return[{name:"ndvi",options:{}},{name:"colormap",options:{colormap:e.colormap}}]},{infoJson:e("./info.json")})[0]},{"../../util/createMetaModule.js":424,"./info.json":370}],369:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":368,"./info.json":370,dup:275}],370:[function(e,t,r){t.exports={name:"ndvi-colormap",description:"Sequentially Applies NDVI and Colormap steps",inputs:{},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#ndvi-colormap-module"}},{}],371:[function(e,t,r){t.exports=function(t,r){if(t.step.inBrowser)var n=e("./Ui.js")(t.step,r);var i=e("./../../util/getDefaults.js")(e("./info.json"));return t.filter=t.filter||i.filter,{options:t,draw:function(r,i,o){o.stop(!0),o.overrideFlag=!0;var s=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){s.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,r,n,i){if("red"==t.filter)var o=(n-e)/(1*n+e);"blue"==t.filter&&(o=(e-n)/(1*n+e));var s=255*(o+1)/2;return[s,s,s,i]},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:function(){t.step.inBrowser&&n.setup(),i()}})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./Ui.js":372,"./info.json":374}],372:[function(e,t,r){t.exports=function(e,t){return{setup:function(){var t=$(e.imgElement);t.mousemove(function(e){var r=document.createElement("canvas");r.width=t.width(),r.height=t.height(),r.getContext("2d").drawImage(this,0,0);var n=$(this).offset(),i=e.pageX-n.left,o=e.pageY-n.top,s=r.getContext("2d").getImageData(i,o,1,1).data[0];s=(s=s/127.5-1).toFixed(2),t[0].title="NDVI: "+s})}}}},{}],373:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":371,"./info.json":374,dup:275}],374:[function(e,t,r){t.exports={name:"ndvi",description:"Normalized Difference Vegetation Index, or NDVI, is an image analysis technique used with aerial photography. It's a way to visualize the amounts of infrared and other wavelengths of light reflected from vegetation by comparing ratios of blue and red light absorbed versus green and IR light reflected. NDVI is used to evaluate the health of vegetation in satellite imagery, where it correlates with how much photosynthesis is happening. This is helpful in assessing vegetative health or stress. <a href='https://publiclab.org/ndvi'>Read more</a>.<br /><br/>This is designed for use with red-filtered single camera <a href='http://publiclab.org/infragram'>DIY Infragram cameras</a>; change to 'blue' for blue filters",inputs:{filter:{type:"select",desc:"Filter color",default:"red",values:["red","blue"]}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#ndvi-module"}},{}],375:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return{options:t,draw:function(r,i,o){o.stop(!0),o.overrideFlag=!0;var s=this;return t.method=t.method||n.method,e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){s.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(r){return r=e("./NoiseReduction.js")(r,t.method)},format:r.format,image:t.image,callback:i})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./NoiseReduction.js":376,"./info.json":378}],376:[function(e,t,r){t.exports=function(e,t){let r=[-1,-1,-1,0,0,0,1,1,1],n=[-1,0,1,-1,0,1,-1,0,1];if("Median Filtering"==t)for(let t=0;t<e.shape[1];t++)for(let i=0;i<e.shape[0];i++){let o=0,s=0,a=[],u=[],l=[];for(;s<=8;){let c=i+r[s],h=t+n[s];c>=0&&c<e.shape[0]&&h>=0&&h<e.shape[1]&&(a[o]=e.get(c,h,0),u[o]=e.get(c,h,1),l[o]=e.get(c,h,2),o++),s++}if(a.sort(),u.sort(),l.sort(),o%2==0){let r=a[o/2]+a[o/2-1];e.set(i,t,0,r),r=u[o/2]+u[o/2-1],e.set(i,t,1,r),r=l[o/2]+l[o/2-1],e.set(i,t,2,r)}else e.set(i,t,0,a[Math.floor(o/2)]),e.set(i,t,1,u[Math.floor(o/2)]),e.set(i,t,2,l[Math.floor(o/2)])}else if("Mean Filtering"==t)for(let t=0;t<e.shape[1];t++)for(let i=0;i<e.shape[0];i++){let o=0,s=0,a=0,u=0,l=0;for(;s<=8;){let c=i+r[s],h=t+n[s];c>=0&&c<e.shape[0]&&h>=0&&h<e.shape[1]&&(a+=e.get(c,h,0),u+=e.get(c,h,1),l+=e.get(c,h,2),o++),s++}e.set(i,t,0,a/o),e.set(i,t,1,u/o),e.set(i,t,2,l/o)}return e}},{}],377:[function(e,t,r){t.exports=[e("./Module"),e("./info.json")]},{"./Module":375,"./info.json":378}],378:[function(e,t,r){t.exports={name:"Noise Reduction",description:"Reduces noise from Image",inputs:{method:{type:"select",desc:"Select the noise filtering method",default:"Median Filtering",values:["Mean Filtering","Median Filtering"]}},"docs-link":""}},{}],379:[function(e,t,r){t.exports=function(t,r,n){var i=e("./../../util/getDefaults.js")(e("./info.json"));return t.x=t.x||i.x,t.y=t.y||i.y,{options:t,draw:function(r,n,i){t.offset=parseInt(t.offset)||-2,i.stop(!0),i.overrideFlag=!0;var o=this;e("../../util/ParseInputCoordinates")(t,{src:r.src,x:{valInp:t.x,type:"horizontal"},y:{valInp:t.y,type:"vertical"}},function(e,t){e.x=parseInt(t.x.valInp),e.y=parseInt(t.y.valInp)});var s=this.getStep(t.offset).image,a=this.getOutput(t.offset);e("get-pixels")(r.src,function(r,i){return t.secondImagePixels=i,e("../_nomodule/PixelManipulation.js")(a,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,r,n,i,o,s){var a=t.secondImagePixels;return o>=t.x&&o-t.x<a.shape[0]&&s>=t.y&&s-t.y<a.shape[1]?[a.get(o-t.x,s-t.y,0),a.get(o-t.x,s-t.y,1),a.get(o-t.x,s-t.y,2),a.get(o-t.x,s-t.y,3)]:[e,r,n,i]},format:a.format,image:s,inBrowser:t.inBrowser,callback:n})})},output:void 0,UI:r}}},{"../../util/ParseInputCoordinates":423,"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":381,"get-pixels":28}],380:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":379,"./info.json":381,dup:275}],381:[function(e,t,r){t.exports={name:"overlay",description:"Overlays an Image over another at a given position(x,y) in pixels or in %",inputs:{x:{type:"integer",desc:"X-position of the image on which the new image is overlayed",default:0},y:{type:"integer",desc:"Y-position of the image on which the new image is overlayed",default:0},offset:{type:"integer",desc:"offset to the output of the step on which the output of the last step is overlayed",default:-2}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#overlay-module"}},{}],382:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(r){return r=e("./PaintBucket")(r,t)},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./PaintBucket":383}],383:[function(e,t,r){t.exports=function(t,r){let n,i,o,s,a,u=e("./../../util/getDefaults.js")(e("./info.json")),l=r.fillColor||u.fillColor,c=parseInt(r.startingX)||u.startingX,h=parseInt(r.startingY)||u.startingY,p=t.shape[1],f=(t.shape[0],t.get(c,h,0)),d=t.get(c,h,1),m=t.get(c,h,2),g=t.get(c,h,3),v=[c],y=[h],b=r.tolerance||u.tolerance,x=1+b/100,_=1-b/100;function w(e,r){return t.get(e,r,0)>=f*_&&t.get(e,r,0)<=f*x&&t.get(e,r,1)>=d*_&&t.get(e,r,1)<=d*x&&t.get(e,r,2)>=m*_&&t.get(e,r,2)<=m*x&&t.get(e,r,3)>=g*_&&t.get(e,r,3)<=g*x}for(l=(l=l.substring(l.indexOf("(")+1,l.length-1)).split(",");y.length;)if(w(i=v.pop(),n=y.pop())){o=s=n;do{o-=1}while(w(i,o)&&o>=0);do{s+=1}while(w(i,s)&&s<p);for(a=o+1;a<s;a+=1)t.set(i,a,0,l[0]),t.set(i,a,1,l[1]),t.set(i,a,2,l[2]),t.set(i,a,3,l[3]),w(i-1,a)&&(v.push(i-1),y.push(a)),w(i+1,a)&&(v.push(i+1),y.push(a))}return t}},{"./../../util/getDefaults.js":425,"./info.json":385}],384:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":382,"./info.json":385,dup:275}],385:[function(e,t,r){t.exports={name:"paint-bucket",description:"Fill color in pixels",inputs:{startingX:{type:"integer",desc:"value of the starting x-coordinate",default:"10"},startingY:{type:"integer",desc:"value of the starting y-coordinate",default:"10"},fillColor:{type:"String",desc:"Pick color to fill",default:"rgba(100,100,100,1)",id:"color-picker"},tolerance:{type:"range",desc:"% tolerance",default:"10",min:"0",max:"100",step:"1"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#paint-bucket-module"}},{}],386:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){return[e,t,r,n]},extraManipulation:function(r){return r=e("./ReplaceColor")(r,t)},format:r.format,image:t.image,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./ReplaceColor":387}],387:[function(e,t,r){t.exports=function(e,t){var r=t.color||"rgb(228,86,81)";r=r.substring(r.indexOf("(")+1,r.length-1);var n=t.replaceColor||"rgb(0,0,255)";n=n.substring(n.indexOf("(")+1,n.length-1);var i=t.replaceMethod||"greyscale";r=r.split(","),n=n.split(",");var o=r[0],s=r[1],a=r[2],u=t.tolerance||50,l=1+u/100,c=1-u/100;function h(e,t,r){return e>=o*c&&e<=o*l&&t>=s*c&&t<=s*l&&r>=a*c&&r<=a*l}for(var p=0;p<e.shape[0];p++)for(var f=0;f<e.shape[1];f++){var d=e.get(p,f,0),m=e.get(p,f,1),g=e.get(p,f,2);if(h(d,m,g))if("greyscale"==i){var v=(d+m+g)/3;e.set(p,f,0,v),e.set(p,f,1,v),e.set(p,f,2,v)}else e.set(p,f,0,n[0]),e.set(p,f,1,n[1]),e.set(p,f,2,n[2])}return e}},{}],388:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":386,"./info.json":389,dup:275}],389:[function(e,t,r){t.exports={name:"replace-color",description:"Replace color with grey or your desired color",inputs:{replaceMethod:{type:"select",desc:"Replace Method",default:"greyscale",values:["greyscale","replaceByColor"]},replaceColor:{type:"String",desc:"Pick color to be filled",default:"rgb(0,0,255)",id:"color-picker"},color:{type:"String",desc:"Pick color to be replaced",default:"rgb(228,86,81)",id:"color-picker"},tolerance:{type:"range",desc:"% tolerance",default:"50",min:"0",max:"100",step:"1"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#replacecolor-module"}},{}],390:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){var o=e("./../../util/getDefaults.js")(e("./info.json"));t.resize=t.resize||o.resize,i.stop(!0),i.overrideFlag=!0;var s=this,a=e("imagejs");return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){s.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){return[e,t,r,n]},extraManipulation:function(e){var r,n,i=parseInt(t.resize.slice(0,-1));r=Math.round(e.shape[0]*(i/100)),n=Math.round(e.shape[1]*(i/100));var o=new a.Bitmap({width:e.shape[0],height:e.shape[1]});o._data.data=e.data;var s=o.resize({width:r,height:n,algorithm:"bicubicInterpolation"});return e.data=s._data.data,e.shape=[r,n,4],e.stride[1]=4*r,e},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":392,imagejs:149}],391:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":390,"./info.json":392,dup:275}],392:[function(e,t,r){t.exports={name:"resize",description:"Resize image by given percentage value",inputs:{resize:{type:"string",desc:"Percentage value of the resize",default:"125%"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#resize-module"}},{}],393:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){var o=e("./../../util/getDefaults.js")(e("./info.json"));t.rotate=t.rotate||o.rotate,i.stop(!0),i.overrideFlag=!0;var s=this,a=e("imagejs");return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){s.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){return[e,t,r,n]},extraManipulation:function(e){var r=t.rotate%360;if(r%360==0)return e;var n=new a.Bitmap({width:e.shape[0],height:e.shape[1]});n._data.data=e.data;var i=n.rotate({degrees:r});return e.data=i._data.data,e},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":395,imagejs:149}],394:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":393,"./info.json":395,dup:275}],395:[function(e,t,r){t.exports={name:"rotate",description:"Rotates image by specified degrees",inputs:{rotate:{type:"integer",desc:"Angular value for rotation in degrees",default:"90",min:"0",max:"360",step:"1"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#rotate-modul"}},{}],396:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return{options:t,draw:function(r,i,o){t.saturation=t.saturation||n.saturation,o.stop(!0),o.overrideFlag=!0;var s=this,a=.299,u=.587,l=.114;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){s.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,r,n,i){var o=Math.sqrt(a*(e*e)+u*(r*r)+l*(r*r));return e=o+(e-o)*t.saturation,r=o+(r-o)*t.saturation,n=o+(n-o)*t.saturation,[Math.round(e),Math.round(r),Math.round(n),i]},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:i})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":398}],397:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":396,"./info.json":398,dup:275}],398:[function(e,t,r){t.exports={name:"saturation",description:"Change the saturation of the image by given value, from 0-1, with 1 being 100% saturated.",inputs:{saturation:{type:"float",desc:"saturation for the new image between 0 and 2, 0 being black and white and 2 being highly saturated",default:.5,min:0,max:2,step:.1}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#saturation-module"}},{}],399:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;if(t.step.inBrowser){var s=this.getStep(-1);return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(r){return r=e("./TextOverlay")(r,t,s)},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})}this.output=r,n()},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./TextOverlay":400}],400:[function(e,t,r){t.exports=function(t,r,n){var i=e("./../../util/getDefaults.js")(e("./info.json"));r.text=r.text||i.text,r.x=r.x||i.x,r.y=r.y||i.y,r.font=r.font||i.font,r.color=r.color||i.color,r.size=r.size||i.size;var o=$(n.imgElement);0===Object.keys(o).length&&(o=$(n.options.step.imgElement));var s=document.createElement("canvas");s.width=t.shape[0],s.height=t.shape[1];var a=s.getContext("2d");a.drawImage(o[0],0,0),a.fillStyle=r.color,a.font=r.size+"px "+r.font,a.fillText(r.text,r.x,r.y);var u=a.getImageData(0,0,s.width,s.height);return t.data=u.data,t}},{"./../../util/getDefaults.js":425,"./info.json":402}],401:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":399,"./info.json":402,dup:275}],402:[function(e,t,r){t.exports={name:"text-overlay",description:"Overlay text on image.",inputs:{text:{type:"string",desc:"Enter the text to overlay.",default:"Lorem ipsum"},x:{type:"integer",desc:"Starting text horizontal position.",default:"20"},y:{type:"integer",desc:"Starting text vertical position.",default:"20"},font:{type:"select",desc:"Select the font style.",default:"serif",values:["serif","arial","times","courier","Montserrat"]},color:{type:"text",desc:"Select the text color.",default:"rgba(20,120,90,1)",id:"color-picker"},size:{type:"integer",desc:"Enter the font size in pixels.",default:"12"}},only:"browser"}},{}],403:[function(e,t,r){t.exports=function(t,r){return{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this,s=new Array(256).fill(0);return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){let i=Math.round((e+t+r)/3);return s[i]++,[e,t,r,n]},extraManipulation:function(r){return r=e("./Threshold")(r,t,s)},format:r.format,image:t.image,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./Threshold":404}],404:[function(e,t,r){t.exports=function(t,r,n){var i=e("./../../util/getDefaults.js")(e("./info.json"));type=r.threshold,threshold=parseInt(r.input)||i.input;for(var o=[],s=[],a=[],u=0;u<256;u++)o[u]=.299*u,s[u]=.587*u,a[u]=.114*u;var l=t.data.length;for(u=0;u<=l;u++)t.data[u]=Math.floor(o[t.data[u++]]+s[t.data[u++]]+a[t.data[u++]]);"Automatic Thresholding"===type&&(threshold=function(e){let t=0;for(let r=0;r<256;r++)t+=e[r];let r=0;for(let t=0;t<256;t++)r+=t*e[t];let n=0,i=0,o=0,s=0,a=0;for(let u=0;u<256;u++){if(0==(i+=e[u]))continue;if(0==(o=t-i))break;let l=(n+=u*e[u])/i,c=(r-n)/o,h=i*o*(l-c)*(l-c);h>s&&(s=h,a=u)}return a}(n));for(var c=0;c<=l;c+=4)t.data[c]=t.data[c]<threshold?0:255,t.data[c+1]=t.data[c+2]=t.data[c];return t}},{"./../../util/getDefaults.js":425,"./info.json":406}],405:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":403,"./info.json":406,dup:275}],406:[function(e,t,r){t.exports={name:"threshold",description:"Thresholding is used to create binary images",inputs:{threshold:{type:"select",desc:"Type of Thresholding",default:"Manual Thresholding",values:["Manual Thresholding","Automatic Thresholding"]},input:{type:"range",desc:"Threshold Value",default:"120",min:"0",max:"255",step:"1"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#threshold"}},{}],407:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return{options:t,draw:function(r,i,o){var s=t.color||n.color;s=(s=s.substring(s.indexOf("(")+1,s.length-1)).split(",");var a=t.factor||n.factor;o.stop(!0),o.overrideFlag=!0;var u=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){u.output={src:t,format:r}},ui:t.step.ui,changePixel:function(e,t,r,n){return[e-=(e-s[0])*a,t-=(t-s[1])*a,r-=(r-s[2])*a,n]},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:i})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":409}],408:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":407,"./info.json":409,dup:275}],409:[function(e,t,r){t.exports={name:"tint",description:"Add color tint to an image",inputs:{color:{type:"text",desc:"Select color",default:"rgb(0,0,255)",id:"color-picker"},factor:{type:"range",desc:"Amount of tint",default:"0.5",min:"0",max:"1",step:"0.01"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#tint"}},{}],410:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json")),i=e("./glfx"),o=function(e){var t=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var r=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return new Blob([n],{type:r})}(e.toDataURL("image/png"));return window.URL.createObjectURL(t)},s=function(e,t,r,n){try{var s=i.canvas(1500,1500)}catch(e){return void alert(e)}var a=document.getElementById(e),u=new Image;u.onload=function(){var e=s.texture(u),i=[],l=[];for(let e=0;e<t.length;e+=2)i.push(t[e]);for(let e=1;e<t.length;e+=2)l.push(t[e]);var c=Math.min.apply(null,l);matrix1southmost=Math.max.apply(null,l),matrix1westmost=Math.min.apply(null,i),matrix1eastmost=Math.max.apply(null,i);var h=[],p=[];for(let e=0;e<r.length;e+=2)h.push(r[e]);for(let e=1;e<r.length;e+=2)p.push(r[e]);var f=Math.min.apply(null,p);matrix2southmost=Math.max.apply(null,p),matrix2westmost=Math.min.apply(null,h),matrix2eastmost=Math.max.apply(null,h);var d=matrix2westmost-matrix1westmost,m=f-c;s.draw(e,u.width,u.height);for(var g=(matrix2southmost-f)/(matrix1southmost-c),v=(matrix2eastmost-matrix2westmost)/(matrix1eastmost-matrix1westmost),y=Math.max(v,g),b=0;b<r.length;b+=2)r[b]-=d,r[b]/=y;for(let e=1;e<r.length;e+=2)r[e]-=m,r[e]/=y;s.perspective(t,r).update();var x=o(s);n?window.open(x):a.src=x},u.src=a.src};return{options:t,draw:function(r,i){var o=this;t.nw=t.nw||n.nw,t.ne=t.ne||n.ne,t.se=t.se||n.se,t.sw=t.sw||n.sw;var a=e("../../util/parseDistortCoordinates.js")(t);if(t.inBrowser){var u=document.createElement("img");u.onload=(()=>{s("img",[0,0,u.naturalWidth,0,u.naturalWidth,u.naturalHeight,0,u.naturalHeight],a),u.onload=(()=>{var e=document.createElement("canvas");e.width=u.naturalWidth,e.height=u.naturalHeight,e.getContext("2d").drawImage(u,0,0),o.output={src:e.toDataURL("image/png"),format:"png"},u.remove(),i()})}),u.src=r.src,u.id="img",document.body.appendChild(u)}else e("../_nomodule/gl-context")(r,i,o,t)},output:void 0,UI:r}}},{"../../util/parseDistortCoordinates.js":427,"../_nomodule/gl-context":418,"./../../util/getDefaults.js":425,"./glfx":411,"./info.json":413}],411:[function(e,t,r){t.exports=function(){function e(e,t,r){return Math.max(e,Math.min(t,r))}function t(e){return{_:e,loadContentsOf:function(e){j=this._.gl,this._.loadContentsOf(e)},destroy:function(){j=this._.gl,this._.destroy()}}}function r(e){return t(z.fromElement(e))}function n(e,t){var r=j.UNSIGNED_BYTE;if(j.getExtension("OES_texture_float")&&j.getExtension("OES_texture_float_linear")){var n=new z(100,100,j.RGBA,j.FLOAT);try{n.drawTo(function(){r=j.FLOAT})}catch(e){}n.destroy()}this._.texture&&this._.texture.destroy(),this._.spareTexture&&this._.spareTexture.destroy(),this.width=e,this.height=t,this._.texture=new z(e,t,j.RGBA,r),this._.spareTexture=new z(e,t,j.RGBA,r),this._.extraTexture=this._.extraTexture||new z(0,0,j.RGBA,r),this._.flippedShader=this._.flippedShader||new U(null,"uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,vec2(texCoord.x,1.0-texCoord.y));}"),this._.isInitialized=!0}function i(e,t,r){return this._.isInitialized&&e._.width==this.width&&e._.height==this.height||n.call(this,t||e._.width,r||e._.height),e._.use(),this._.texture.drawTo(function(){U.getDefaultShader().drawRect()}),this}function o(){return this._.texture.use(),this._.flippedShader.drawRect(),this}function s(e,t,r,n){(r||this._.texture).use(),this._.spareTexture.drawTo(function(){e.uniforms(t).drawRect()}),this._.spareTexture.swapWith(n||this._.texture)}function a(e){return e.parentNode.insertBefore(this,e),e.parentNode.removeChild(e),this}function u(){var e=new z(this._.texture.width,this._.texture.height,j.RGBA,j.UNSIGNED_BYTE);return this._.texture.use(),e.drawTo(function(){U.getDefaultShader().drawRect()}),t(e)}function l(){var e=this._.texture.width,t=this._.texture.height,r=new Uint8Array(4*e*t);return this._.texture.drawTo(function(){j.readPixels(0,0,e,t,j.RGBA,j.UNSIGNED_BYTE,r)}),r}function c(e){return function(){return j=this._.gl,e.apply(this,arguments)}}function h(e,t,r,n,i,o,s,a){var u,l,c=n-o,h=a-o,p=(l=r-i)*h-(u=s-i)*c;return[r-e+(u=((i=e-r+i-s)*h-u*(o=t-n+o-a))/p)*r,n-t+u*n,u,s-e+(l=(l*o-i*c)/p)*s,a-t+l*a,l,e,t,1]}function p(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],s=e[5],a=e[6],u=e[7],l=t*o*(e=e[8])-t*s*u-r*i*e+r*s*a+n*i*u-n*o*a;return[(o*e-s*u)/l,(n*u-r*e)/l,(r*s-n*o)/l,(s*a-i*e)/l,(t*e-n*a)/l,(n*i-t*s)/l,(i*u-o*a)/l,(r*a-t*u)/l,(t*o-r*i)/l]}function f(e){var t=e.length;this.xa=[],this.ya=[],this.u=[],this.y2=[],e.sort(function(e,t){return e[0]-t[0]});for(var r=0;r<t;r++)this.xa.push(e[r][0]),this.ya.push(e[r][1]);for(this.u[0]=0,this.y2[0]=0,r=1;r<t-1;++r){e=this.xa[r+1]-this.xa[r-1];var n=(this.xa[r]-this.xa[r-1])/e,i=n*this.y2[r-1]+2;this.y2[r]=(n-1)/i,this.u[r]=(6*((this.ya[r+1]-this.ya[r])/(this.xa[r+1]-this.xa[r])-(this.ya[r]-this.ya[r-1])/(this.xa[r]-this.xa[r-1]))/e-n*this.u[r-1])/i}for(this.y2[t-1]=0,r=t-2;0<=r;--r)this.y2[r]=this.y2[r]*this.y2[r+1]+this.u[r]}function d(e,t){return new U(null,e+"uniform sampler2D texture;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 coord=texCoord*texSize;"+t+"gl_FragColor=texture2D(texture,coord/texSize);vec2 clampedCoord=clamp(coord,vec2(0.0),texSize);if(coord!=clampedCoord){gl_FragColor.a*=max(0.0,1.0-length(coord-clampedCoord));}}")}function m(t,r){return j.brightnessContrast=j.brightnessContrast||new U(null,"uniform sampler2D texture;uniform float brightness;uniform float contrast;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.rgb+=brightness;if(contrast>0.0){color.rgb=(color.rgb-0.5)/(1.0-contrast)+0.5;}else{color.rgb=(color.rgb-0.5)*(1.0+contrast)+0.5;}gl_FragColor=color;}"),s.call(this,j.brightnessContrast,{brightness:e(-1,t,1),contrast:e(-1,r,1)}),this}function g(t){t=new f(t);for(var r=[],n=0;256>n;n++)r.push(e(0,Math.floor(256*t.interpolate(n/255)),255));return r}function v(e,t,r){e=g(e),1==arguments.length?t=r=e:(t=g(t),r=g(r));for(var n=[],i=0;256>i;i++)n.splice(n.length,0,e[i],t[i],r[i],255);return this._.extraTexture.initFromBytes(256,1,n),this._.extraTexture.use(1),j.curves=j.curves||new U(null,"uniform sampler2D texture;uniform sampler2D map;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.r=texture2D(map,vec2(color.r)).r;color.g=texture2D(map,vec2(color.g)).g;color.b=texture2D(map,vec2(color.b)).b;gl_FragColor=color;}"),j.curves.textures({map:1}),s.call(this,j.curves,{}),this}function y(e){j.denoise=j.denoise||new U(null,"uniform sampler2D texture;uniform float exponent;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec4 center=texture2D(texture,texCoord);vec4 color=vec4(0.0);float total=0.0;for(float x=-4.0;x<=4.0;x+=1.0){for(float y=-4.0;y<=4.0;y+=1.0){vec4 sample=texture2D(texture,texCoord+vec2(x,y)/texSize);float weight=1.0-abs(dot(sample.rgb-center.rgb,vec3(0.25)));weight=pow(weight,exponent);color+=sample*weight;total+=weight;}}gl_FragColor=color/total;}");for(var t=0;2>t;t++)s.call(this,j.denoise,{exponent:Math.max(0,e),texSize:[this.width,this.height]});return this}function b(t,r){return j.hueSaturation=j.hueSaturation||new U(null,"uniform sampler2D texture;uniform float hue;uniform float saturation;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float angle=hue*3.14159265;float s=sin(angle),c=cos(angle);vec3 weights=(vec3(2.0*c,-sqrt(3.0)*s-c,sqrt(3.0)*s-c)+1.0)/3.0;float len=length(color.rgb);color.rgb=vec3(dot(color.rgb,weights.xyz),dot(color.rgb,weights.zxy),dot(color.rgb,weights.yzx));float average=(color.r+color.g+color.b)/3.0;if(saturation>0.0){color.rgb+=(average-color.rgb)*(1.0-1.0/(1.001-saturation));}else{color.rgb+=(average-color.rgb)*(-saturation);}gl_FragColor=color;}"),s.call(this,j.hueSaturation,{hue:e(-1,t,1),saturation:e(-1,r,1)}),this}function x(t){return j.noise=j.noise||new U(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec4 color=texture2D(texture,texCoord);float diff=(rand(texCoord)-0.5)*amount;color.r+=diff;color.g+=diff;color.b+=diff;gl_FragColor=color;}"),s.call(this,j.noise,{amount:e(0,t,1)}),this}function _(t){return j.sepia=j.sepia||new U(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float r=color.r;float g=color.g;float b=color.b;color.r=min(1.0,(r*(1.0-(0.607*amount)))+(g*(0.769*amount))+(b*(0.189*amount)));color.g=min(1.0,(r*0.349*amount)+(g*(1.0-(0.314*amount)))+(b*0.168*amount));color.b=min(1.0,(r*0.272*amount)+(g*0.534*amount)+(b*(1.0-(0.869*amount))));gl_FragColor=color;}"),s.call(this,j.sepia,{amount:e(0,t,1)}),this}function w(e,t){return j.unsharpMask=j.unsharpMask||new U(null,"uniform sampler2D blurredTexture;uniform sampler2D originalTexture;uniform float strength;uniform float threshold;varying vec2 texCoord;void main(){vec4 blurred=texture2D(blurredTexture,texCoord);vec4 original=texture2D(originalTexture,texCoord);gl_FragColor=mix(blurred,original,1.0+strength);}"),this._.extraTexture.ensureFormat(this._.texture),this._.texture.use(),this._.extraTexture.drawTo(function(){U.getDefaultShader().drawRect()}),this._.extraTexture.use(1),this.triangleBlur(e),j.unsharpMask.textures({originalTexture:1}),s.call(this,j.unsharpMask,{strength:t}),this._.extraTexture.unuse(1),this}function k(t){return j.vibrance=j.vibrance||new U(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;float mx=max(color.r,max(color.g,color.b));float amt=(mx-average)*(-amount*3.0);color.rgb=mix(color.rgb,vec3(mx),amt);gl_FragColor=color;}"),s.call(this,j.vibrance,{amount:e(-1,t,1)}),this}function T(t,r){return j.vignette=j.vignette||new U(null,"uniform sampler2D texture;uniform float size;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float dist=distance(texCoord,vec2(0.5,0.5));color.rgb*=smoothstep(0.8,size*0.799,dist*(amount+size));gl_FragColor=color;}"),s.call(this,j.vignette,{size:e(0,t,1),amount:e(0,r,1)}),this}function E(t,r,n){j.lensBlurPrePass=j.lensBlurPrePass||new U(null,"uniform sampler2D texture;uniform float power;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color=pow(color,vec4(power));gl_FragColor=vec4(color);}");var i="uniform sampler2D texture0;uniform sampler2D texture1;uniform vec2 delta0;uniform vec2 delta1;uniform float power;varying vec2 texCoord;"+$+"vec4 sample(vec2 delta){float offset=random(vec3(delta,151.7182),0.0);vec4 color=vec4(0.0);float total=0.0;for(float t=0.0;t<=30.0;t++){float percent=(t+offset)/30.0;color+=texture2D(texture0,texCoord+delta*percent);total+=1.0;}return color/total;}";j.lensBlur0=j.lensBlur0||new U(null,i+"void main(){gl_FragColor=sample(delta0);}"),j.lensBlur1=j.lensBlur1||new U(null,i+"void main(){gl_FragColor=(sample(delta0)+sample(delta1))*0.5;}"),j.lensBlur2=j.lensBlur2||new U(null,i+"void main(){vec4 color=(sample(delta0)+2.0*texture2D(texture1,texCoord))/3.0;gl_FragColor=pow(color,vec4(power));}").textures({texture1:1});i=[];for(var o=0;3>o;o++){var a=n+2*o*Math.PI/3;i.push([t*Math.sin(a)/this.width,t*Math.cos(a)/this.height])}return t=Math.pow(10,e(-1,r,1)),s.call(this,j.lensBlurPrePass,{power:t}),this._.extraTexture.ensureFormat(this._.texture),s.call(this,j.lensBlur0,{delta0:i[0]},this._.texture,this._.extraTexture),s.call(this,j.lensBlur1,{delta0:i[1],delta1:i[2]},this._.extraTexture,this._.extraTexture),s.call(this,j.lensBlur0,{delta0:i[1]}),this._.extraTexture.use(1),s.call(this,j.lensBlur2,{power:1/t,delta0:i[2]}),this}function S(e,t,r,n,i,o){j.tiltShift=j.tiltShift||new U(null,"uniform sampler2D texture;uniform float blurRadius;uniform float gradientRadius;uniform vec2 start;uniform vec2 end;uniform vec2 delta;uniform vec2 texSize;varying vec2 texCoord;"+$+"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);vec2 normal=normalize(vec2(start.y-end.y,end.x-start.x));float radius=smoothstep(0.0,1.0,abs(dot(texCoord*texSize-start,normal))/gradientRadius)*blurRadius;for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta/texSize*percent*radius);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}");var a=r-e,u=n-t,l=Math.sqrt(a*a+u*u);return s.call(this,j.tiltShift,{blurRadius:i,gradientRadius:o,start:[e,t],end:[r,n],delta:[a/l,u/l],texSize:[this.width,this.height]}),s.call(this,j.tiltShift,{blurRadius:i,gradientRadius:o,start:[e,t],end:[r,n],delta:[-u/l,a/l],texSize:[this.width,this.height]}),this}function C(e){return j.triangleBlur=j.triangleBlur||new U(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+$+"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta*percent);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}"),s.call(this,j.triangleBlur,{delta:[e/this.width,0]}),s.call(this,j.triangleBlur,{delta:[0,e/this.height]}),this}function A(e,t,r){return j.zoomBlur=j.zoomBlur||new U(null,"uniform sampler2D texture;uniform vec2 center;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;"+$+"void main(){vec4 color=vec4(0.0);float total=0.0;vec2 toCenter=center-texCoord*texSize;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=0.0;t<=40.0;t++){float percent=(t+offset)/40.0;float weight=4.0*(percent-percent*percent);vec4 sample=texture2D(texture,texCoord+toCenter*percent*strength/texSize);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}"),s.call(this,j.zoomBlur,{center:[e,t],strength:r,texSize:[this.width,this.height]}),this}function B(e,t,r,n){return j.colorHalftone=j.colorHalftone||new U(null,"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(float angle){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);vec3 cmy=1.0-color.rgb;float k=min(cmy.x,min(cmy.y,cmy.z));cmy=(cmy-k)/(1.0-k);cmy=clamp(cmy*10.0-3.0+vec3(pattern(angle+0.26179),pattern(angle+1.30899),pattern(angle)),0.0,1.0);k=clamp(k*10.0-5.0+pattern(angle+0.78539),0.0,1.0);gl_FragColor=vec4(1.0-cmy-k,color.a);}"),s.call(this,j.colorHalftone,{center:[e,t],angle:r,scale:Math.PI/n,texSize:[this.width,this.height]}),this}function I(e,t,r,n){return j.dotScreen=j.dotScreen||new U(null,"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;gl_FragColor=vec4(vec3(average*10.0-5.0+pattern()),color.a);}"),s.call(this,j.dotScreen,{center:[e,t],angle:r,scale:Math.PI/n,texSize:[this.width,this.height]}),this}function P(e){return j.edgeWork1=j.edgeWork1||new U(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+$+"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec3 sample=texture2D(texture,texCoord+delta*percent).rgb;float average=(sample.r+sample.g+sample.b)/3.0;color.x+=average*weight;total.x+=weight;if(abs(t)<15.0){weight=weight*2.0-1.0;color.y+=average*weight;total.y+=weight;}}gl_FragColor=vec4(color/total,0.0,1.0);}"),j.edgeWork2=j.edgeWork2||new U(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+$+"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec2 sample=texture2D(texture,texCoord+delta*percent).xy;color.x+=sample.x*weight;total.x+=weight;if(abs(t)<15.0){weight=weight*2.0-1.0;color.y+=sample.y*weight;total.y+=weight;}}float c=clamp(10000.0*(color.y/total.y-color.x/total.x)+0.5,0.0,1.0);gl_FragColor=vec4(c,c,c,1.0);}"),s.call(this,j.edgeWork1,{delta:[e/this.width,0]}),s.call(this,j.edgeWork2,{delta:[0,e/this.height]}),this}function R(e,t,r){return j.hexagonalPixelate=j.hexagonalPixelate||new U(null,"uniform sampler2D texture;uniform vec2 center;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 tex=(texCoord*texSize-center)/scale;tex.y/=0.866025404;tex.x-=tex.y*0.5;vec2 a;if(tex.x+tex.y-floor(tex.x)-floor(tex.y)<1.0)a=vec2(floor(tex.x),floor(tex.y));else a=vec2(ceil(tex.x),ceil(tex.y));vec2 b=vec2(ceil(tex.x),floor(tex.y));vec2 c=vec2(floor(tex.x),ceil(tex.y));vec3 TEX=vec3(tex.x,tex.y,1.0-tex.x-tex.y);vec3 A=vec3(a.x,a.y,1.0-a.x-a.y);vec3 B=vec3(b.x,b.y,1.0-b.x-b.y);vec3 C=vec3(c.x,c.y,1.0-c.x-c.y);float alen=length(TEX-A);float blen=length(TEX-B);float clen=length(TEX-C);vec2 choice;if(alen<blen){if(alen<clen)choice=a;else choice=c;}else{if(blen<clen)choice=b;else choice=c;}choice.x+=choice.y*0.5;choice.y*=0.866025404;choice*=scale/texSize;gl_FragColor=texture2D(texture,choice+center/texSize);}"),s.call(this,j.hexagonalPixelate,{center:[e,t],scale:r,texSize:[this.width,this.height]}),this}function M(e){return j.ink=j.ink||new U(null,"uniform sampler2D texture;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 dx=vec2(1.0/texSize.x,0.0);vec2 dy=vec2(0.0,1.0/texSize.y);vec4 color=texture2D(texture,texCoord);float bigTotal=0.0;float smallTotal=0.0;vec3 bigAverage=vec3(0.0);vec3 smallAverage=vec3(0.0);for(float x=-2.0;x<=2.0;x+=1.0){for(float y=-2.0;y<=2.0;y+=1.0){vec3 sample=texture2D(texture,texCoord+dx*x+dy*y).rgb;bigAverage+=sample;bigTotal+=1.0;if(abs(x)+abs(y)<2.0){smallAverage+=sample;smallTotal+=1.0;}}}vec3 edge=max(vec3(0.0),bigAverage/bigTotal-smallAverage/smallTotal);gl_FragColor=vec4(color.rgb-dot(edge,edge)*strength*100000.0,color.a);}"),s.call(this,j.ink,{strength:e*e*e*e*e,texSize:[this.width,this.height]}),this}function F(t,r,n,i){return j.bulgePinch=j.bulgePinch||d("uniform float radius;uniform float strength;uniform vec2 center;","coord-=center;float distance=length(coord);if(distance<radius){float percent=distance/radius;if(strength>0.0){coord*=mix(1.0,smoothstep(0.0,radius/distance,percent),strength*0.75);}else{coord*=mix(1.0,pow(percent,1.0+strength*0.75)*radius/distance,1.0-percent);}}coord+=center;"),s.call(this,j.bulgePinch,{radius:n,strength:e(-1,i,1),center:[t,r],texSize:[this.width,this.height]}),this}function D(e,t,r){if(j.matrixWarp=j.matrixWarp||d("uniform mat3 matrix;uniform bool useTextureSpace;","if(useTextureSpace)coord=coord/texSize*2.0-1.0;vec3 warp=matrix*vec3(coord,1.0);coord=warp.xy/warp.z;if(useTextureSpace)coord=(coord*0.5+0.5)*texSize;"),4==(e=Array.prototype.concat.apply([],e)).length)e=[e[0],e[1],0,e[2],e[3],0,0,0,1];else if(9!=e.length)throw"can only warp with 2x2 or 3x3 matrix";return s.call(this,j.matrixWarp,{matrix:t?p(e):e,texSize:[this.width,this.height],useTextureSpace:0|r}),this}function L(e,t){var r=h.apply(null,t),n=h.apply(null,e);r=p(r);return this.matrixWarp([r[0]*n[0]+r[1]*n[3]+r[2]*n[6],r[0]*n[1]+r[1]*n[4]+r[2]*n[7],r[0]*n[2]+r[1]*n[5]+r[2]*n[8],r[3]*n[0]+r[4]*n[3]+r[5]*n[6],r[3]*n[1]+r[4]*n[4]+r[5]*n[7],r[3]*n[2]+r[4]*n[5]+r[5]*n[8],r[6]*n[0]+r[7]*n[3]+r[8]*n[6],r[6]*n[1]+r[7]*n[4]+r[8]*n[7],r[6]*n[2]+r[7]*n[5]+r[8]*n[8]])}function O(e,t,r,n){return j.swirl=j.swirl||d("uniform float radius;uniform float angle;uniform vec2 center;","coord-=center;float distance=length(coord);if(distance<radius){float percent=(radius-distance)/radius;float theta=percent*percent*angle;float s=sin(theta);float c=cos(theta);coord=vec2(coord.x*c-coord.y*s,coord.x*s+coord.y*c);}coord+=center;"),s.call(this,j.swirl,{radius:r,center:[e,t],angle:n,texSize:[this.width,this.height]}),this}var j,N={};!function(){try{var e=document.createElement("canvas").getContext("experimental-webgl")}catch(e){}if(e&&-1===e.getSupportedExtensions().indexOf("OES_texture_float_linear")&&function(e){if(!e.getExtension("OES_texture_float"))return!1;var t=e.createFramebuffer(),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),t=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.FLOAT,new Float32Array([2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),r=e.createProgram();var n=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(n,"attribute vec2 vertex;void main(){gl_Position=vec4(vertex,0.0,1.0);}"),e.shaderSource(i,"uniform sampler2D texture;void main(){gl_FragColor=texture2D(texture,vec2(0.5));}"),e.compileShader(n),e.compileShader(i),e.attachShader(r,n),e.attachShader(r,i),e.linkProgram(r),n=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0]),e.STREAM_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),n=new Uint8Array(4),e.useProgram(r),e.viewport(0,0,1,1),e.bindTexture(e.TEXTURE_2D,t),e.drawArrays(e.POINTS,0,1),e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,n),127===n[0]||128===n[0]}(e)){var t=WebGLRenderingContext.prototype.getExtension,r=WebGLRenderingContext.prototype.getSupportedExtensions;WebGLRenderingContext.prototype.getExtension=function(e){return"OES_texture_float_linear"===e?(void 0===this.$OES_texture_float_linear$&&Object.defineProperty(this,"$OES_texture_float_linear$",{enumerable:!1,configurable:!1,writable:!1,value:new function(){}}),e=this.$OES_texture_float_linear$):e=t.call(this,e),e},WebGLRenderingContext.prototype.getSupportedExtensions=function(){var e=r.call(this);return-1===e.indexOf("OES_texture_float_linear")&&e.push("OES_texture_float_linear"),e}}}(),N.canvas=function(){var e=document.createElement("canvas");try{j=e.getContext("experimental-webgl",{premultipliedAlpha:!1})}catch(e){j=null}if(!j)throw"This browser does not support WebGL";return e._={gl:j,isInitialized:!1,texture:null,spareTexture:null,flippedShader:null},e.texture=c(r),e.draw=c(i),e.update=c(o),e.replace=c(a),e.contents=c(u),e.getPixelArray=c(l),e.brightnessContrast=c(m),e.hexagonalPixelate=c(R),e.hueSaturation=c(b),e.colorHalftone=c(B),e.triangleBlur=c(C),e.unsharpMask=c(w),e.perspective=c(L),e.matrixWarp=c(D),e.bulgePinch=c(F),e.tiltShift=c(S),e.dotScreen=c(I),e.edgeWork=c(P),e.lensBlur=c(E),e.zoomBlur=c(A),e.noise=c(x),e.denoise=c(y),e.curves=c(v),e.swirl=c(O),e.ink=c(M),e.vignette=c(T),e.vibrance=c(k),e.sepia=c(_),e},N.splineInterpolate=g;var U=function(){function e(e,t){var r=j.createShader(e);if(j.shaderSource(r,t),j.compileShader(r),!j.getShaderParameter(r,j.COMPILE_STATUS))throw"compile error: "+j.getShaderInfoLog(r);return r}function t(t,i){if(this.texCoordAttribute=this.vertexAttribute=null,this.program=j.createProgram(),t=t||r,i="precision highp float;"+(i=i||n),j.attachShader(this.program,e(j.VERTEX_SHADER,t)),j.attachShader(this.program,e(j.FRAGMENT_SHADER,i)),j.linkProgram(this.program),!j.getProgramParameter(this.program,j.LINK_STATUS))throw"link error: "+j.getProgramInfoLog(this.program)}var r="attribute vec2 vertex;attribute vec2 _texCoord;varying vec2 texCoord;void main(){texCoord=_texCoord;gl_Position=vec4(vertex*2.0-1.0,0.0,1.0);}",n="uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,texCoord);}";return t.prototype.destroy=function(){j.deleteProgram(this.program),this.program=null},t.prototype.uniforms=function(e){for(var t in j.useProgram(this.program),e)if(e.hasOwnProperty(t)){var r=j.getUniformLocation(this.program,t);if(null!==r){var n=e[t];if("[object Array]"==Object.prototype.toString.call(n))switch(n.length){case 1:j.uniform1fv(r,new Float32Array(n));break;case 2:j.uniform2fv(r,new Float32Array(n));break;case 3:j.uniform3fv(r,new Float32Array(n));break;case 4:j.uniform4fv(r,new Float32Array(n));break;case 9:j.uniformMatrix3fv(r,!1,new Float32Array(n));break;case 16:j.uniformMatrix4fv(r,!1,new Float32Array(n));break;default:throw"dont't know how to load uniform \""+t+'" of length '+n.length}else{if("[object Number]"!=Object.prototype.toString.call(n))throw'attempted to set uniform "'+t+'" to invalid value '+(n||"undefined").toString();j.uniform1f(r,n)}}}return this},t.prototype.textures=function(e){for(var t in j.useProgram(this.program),e)e.hasOwnProperty(t)&&j.uniform1i(j.getUniformLocation(this.program,t),e[t]);return this},t.prototype.drawRect=function(e,t,r,n){var i=j.getParameter(j.VIEWPORT);t=void 0!==t?(t-i[1])/i[3]:0,e=void 0!==e?(e-i[0])/i[2]:0,r=void 0!==r?(r-i[0])/i[2]:1,n=void 0!==n?(n-i[1])/i[3]:1,null==j.vertexBuffer&&(j.vertexBuffer=j.createBuffer()),j.bindBuffer(j.ARRAY_BUFFER,j.vertexBuffer),j.bufferData(j.ARRAY_BUFFER,new Float32Array([e,t,e,n,r,t,r,n]),j.STATIC_DRAW),null==j.texCoordBuffer&&(j.texCoordBuffer=j.createBuffer(),j.bindBuffer(j.ARRAY_BUFFER,j.texCoordBuffer),j.bufferData(j.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),j.STATIC_DRAW)),null==this.vertexAttribute&&(this.vertexAttribute=j.getAttribLocation(this.program,"vertex"),j.enableVertexAttribArray(this.vertexAttribute)),null==this.texCoordAttribute&&(this.texCoordAttribute=j.getAttribLocation(this.program,"_texCoord"),j.enableVertexAttribArray(this.texCoordAttribute)),j.useProgram(this.program),j.bindBuffer(j.ARRAY_BUFFER,j.vertexBuffer),j.vertexAttribPointer(this.vertexAttribute,2,j.FLOAT,!1,0,0),j.bindBuffer(j.ARRAY_BUFFER,j.texCoordBuffer),j.vertexAttribPointer(this.texCoordAttribute,2,j.FLOAT,!1,0,0),j.drawArrays(j.TRIANGLE_STRIP,0,4)},t.getDefaultShader=function(){return j.defaultShader=j.defaultShader||new t,j.defaultShader},t}();f.prototype.interpolate=function(e){for(var t=0,r=this.ya.length-1;1<r-t;){var n=r+t>>1;this.xa[n]>e?r=n:t=n}n=this.xa[r]-this.xa[t];var i=(this.xa[r]-e)/n;return e=(e-this.xa[t])/n,i*this.ya[t]+e*this.ya[r]+((i*i*i-i)*this.y2[t]+(e*e*e-e)*this.y2[r])*n*n/6};var z=function(){function e(e,t,r,n){this.gl=j,this.id=j.createTexture(),this.width=e,this.height=t,this.format=r,this.type=n,j.bindTexture(j.TEXTURE_2D,this.id),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,j.LINEAR),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.LINEAR),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),e&&t&&j.texImage2D(j.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null)}function t(e){return null==r&&(r=document.createElement("canvas")),r.width=e.width,r.height=e.height,(e=r.getContext("2d")).clearRect(0,0,r.width,r.height),e}e.fromElement=function(t){var r=new e(0,0,j.RGBA,j.UNSIGNED_BYTE);return r.loadContentsOf(t),r},e.prototype.loadContentsOf=function(e){this.width=e.width||e.videoWidth,this.height=e.height||e.videoHeight,j.bindTexture(j.TEXTURE_2D,this.id),j.texImage2D(j.TEXTURE_2D,0,this.format,this.format,this.type,e)},e.prototype.initFromBytes=function(e,t,r){this.width=e,this.height=t,this.format=j.RGBA,this.type=j.UNSIGNED_BYTE,j.bindTexture(j.TEXTURE_2D,this.id),j.texImage2D(j.TEXTURE_2D,0,j.RGBA,e,t,0,j.RGBA,this.type,new Uint8Array(r))},e.prototype.destroy=function(){j.deleteTexture(this.id),this.id=null},e.prototype.use=function(e){j.activeTexture(j.TEXTURE0+(e||0)),j.bindTexture(j.TEXTURE_2D,this.id)},e.prototype.unuse=function(e){j.activeTexture(j.TEXTURE0+(e||0)),j.bindTexture(j.TEXTURE_2D,null)},e.prototype.ensureFormat=function(e,t,r,n){if(1==arguments.length){var i=arguments[0];e=i.width,t=i.height,r=i.format,n=i.type}e==this.width&&t==this.height&&r==this.format&&n==this.type||(this.width=e,this.height=t,this.format=r,this.type=n,j.bindTexture(j.TEXTURE_2D,this.id),j.texImage2D(j.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null))},e.prototype.drawTo=function(e){if(j.framebuffer=j.framebuffer||j.createFramebuffer(),j.bindFramebuffer(j.FRAMEBUFFER,j.framebuffer),j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,this.id,0),j.checkFramebufferStatus(j.FRAMEBUFFER)!==j.FRAMEBUFFER_COMPLETE)throw Error("incomplete framebuffer");j.viewport(0,0,this.width,this.height),e(),j.bindFramebuffer(j.FRAMEBUFFER,null)};var r=null;return e.prototype.fillUsingCanvas=function(e){return e(t(this)),this.format=j.RGBA,this.type=j.UNSIGNED_BYTE,j.bindTexture(j.TEXTURE_2D,this.id),j.texImage2D(j.TEXTURE_2D,0,j.RGBA,j.RGBA,j.UNSIGNED_BYTE,r),this},e.prototype.toImage=function(e){this.use(),U.getDefaultShader().drawRect();var n=4*this.width*this.height,i=new Uint8Array(n),o=t(this),s=o.createImageData(this.width,this.height);j.readPixels(0,0,this.width,this.height,j.RGBA,j.UNSIGNED_BYTE,i);for(var a=0;a<n;a++)s.data[a]=i[a];o.putImageData(s,0,0),e.src=r.toDataURL()},e.prototype.swapWith=function(e){var t;t=e.id,e.id=this.id,this.id=t,t=e.width,e.width=this.width,this.width=t,t=e.height,e.height=this.height,this.height=t,t=e.format,e.format=this.format,this.format=t},e}(),$="float random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}";return N}()},{}],412:[function(e,t,r){arguments[4][275][0].apply(r,arguments)},{"./Module":410,"./info.json":413,dup:275}],413:[function(e,t,r){t.exports={name:"webgl-distort",requires:["webgl"],description:"Transform perspective of an image based on corner coordinates",inputs:{nw:{type:"String",desc:"Comma separated X and Y coordinates of top-left corner",default:"0,100"},ne:{type:"String",desc:"Comma separated X and Y coordinates of top-right corner",default:"1023,-50"},se:{type:"String",desc:"Comma separated X and Y coordinates of bottom-right corner",default:"1223,867"},sw:{type:"String",desc:"Comma separated X and Y coordinates of bottom-left corner",default:"100,767"}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#webgl-distort"}},{}],414:[function(e,t,r){t.exports=function(t,r){var n=e("./../../util/getDefaults.js")(e("./info.json"));return t.red=t.red||n.red,t.green=t.green||n.green,t.blue=t.blue||n.blue,{options:t,draw:function(r,n,i){i.stop(!0),i.overrideFlag=!0;var o=this;return e("../_nomodule/PixelManipulation.js")(r,{output:function(e,t,r){o.output={src:t,format:r}},ui:t.step.ui,extraManipulation:function(e){for(var r=0,n=255/t.red,i=255/t.green,o=255/t.blue;r<e.data.length;)e.data[r]=Math.min(255,e.data[r]*n),e.data[r+1]=Math.min(255,e.data[r+1]*i),e.data[r+2]=Math.min(255,e.data[r+2]*o),r+=4;return e},format:r.format,image:t.image,inBrowser:t.inBrowser,callback:n})},output:void 0,UI:r}}},{"../_nomodule/PixelManipulation.js":417,"./../../util/getDefaults.js":425,"./info.json":416}],415:[function(e,t,r){arguments[4][297][0].apply(r,arguments)},{"./Module":414,"./info.json":416,dup:297}],416:[function(e,t,r){t.exports={name:"white-balance",description:"Render neutral colours correctly based on the whitest pixel in the image.",inputs:{red:{type:"integer",desc:"Red component of the whitest pixel ",default:255},green:{type:"integer",desc:"Green component of the whitest pixel ",default:255},blue:{type:"integer",desc:"Blue component of the whitest pixel ",default:255}},"docs-link":"https://github.com/publiclab/image-sequencer/blob/main/docs/MODULES.md#white-balance"}},{}],417:[function(e,t,r){(function(r,n){t.exports=function(t,i){arguments.length<=1&&(i=t,t=this),i=i||{};const o=e("get-pixels"),s=e("save-pixels");o(t.src,function(o,a){if(o)console.log("Bad image path",t);else{if(i.getNeighbourPixel&&(i.getNeighbourPixel.fun=function(e,t){return i.getNeighbourPixel(a,l,c,e,t)}),!i.inBrowser&&!r.env.TEST&&i.ui)try{var u=e("pace")(a.shape[0]*a.shape[1])}catch(e){i.inBrowser=!0}if(i.preProcess&&(a=i.preProcess(a)),i.changePixel)for(var l=0;l<a.shape[0];l++)for(var c=0;c<a.shape[1];c++){let e=i.changePixel(a.get(l,c,0),a.get(l,c,1),a.get(l,c,2),a.get(l,c,3),l,c);a.set(l,c,0,e[0]),a.set(l,c,1,e[1]),a.set(l,c,2,e[2]),a.set(l,c,3,e[3]),i.inBrowser||r.env.TEST||!i.ui||u.op()}var h;i.extraManipulation&&(h=i.extraManipulation(a,p)),h?(a=h,p()):i.extraManipulation||p()}function p(){var e=[],t=0,r=s(a,i.format,{quality:100});r.on("data",function(r){t+=r.length,e.push(r)}),r.on("end",function(){var r=n.concat(e,t).toString("base64"),o="data:image/"+i.format+";base64,"+r;i.output&&i.output(i.image,o,i.format),i.callback&&i.callback()})}})}}).call(this,e("_process"),e("buffer").Buffer)},{_process:200,buffer:134,"get-pixels":28,pace:177,"save-pixels":250}],418:[function(require,module,exports){(function(__dirname){module.exports=function runInBrowserContext(input,callback,step,options){const puppeteer=eval("require")("puppeteer");var minOptions=require("lodash").cloneDeep(options);minOptions.step=options.step.name;var obj={input:input,modOptions:minOptions};puppeteer.launch({headless:!0,args:["--no-sandbox","--disable-setuid-sandbox"]}).then(function(e){e.newPage().then(t=>{t.goto("https://google.com").then(()=>{t.addScriptTag({path:require("path").join(__dirname,"../../../dist/image-sequencer.js")}).then(()=>{t.evaluate(e=>new Promise((t,r)=>{var n=ImageSequencer();n.loadImage(e.input.src),n.addSteps(e.modOptions.step,e.modOptions),n.run(function(e){t(n.steps[1].output.src)})}),obj).then(t=>{e.close().then(()=>{step.output={src:t,format:input.format},callback()})})})})})})}}).call(this,"/src/modules/_nomodule")},{lodash:162,path:178}],419:[function(e,t,r){const n=e("gpu.js").GPU;t.exports={convolve:(e,t,r={})=>{const i=r.pipeMode||!1,o=r.mode||"gpu",s=new n("gpu"!=o?{mode:o}:{}),a=e[0][0].length,u=e[0].length,l=t[0].length,c=t.length,h=Math.floor(l/2),p=Math.floor(c/2),f=`function (array, kernel) {\n    let sum = 0;\n    for (let i = 0; i < ${l}; i++){\n      for (let j = 0; j < ${c}; j++){\n        sum += kernel[j][i] * array[this.thread.y + j][this.thread.x + i];\n      }\n    }\n    return sum;\n  }`,d=e=>{let t=[];for(var r=0;r<e.length+2*p;r++){t.push([]);for(var n=0;n<e[0].length+2*h;n++){const i=Math.min(Math.max(n-h,0),e[0].length-1),o=Math.min(Math.max(r-p,0),e.length-1);t[r].push(e[o][i])}}return t},m=s.createKernel(f,{output:[a,u],pipeline:i});let g=[];for(var v=0;v<e.length;v++){const r=m(d(e[v]),t);i?g.push(r.toArray()):g.push(r)}return g},compute:(e,t,r,n)=>{t=t.toString();const i=gpu.createKernel(t,{output:e,constants:r,pipeline:n});return i.build(),n?i().toArray():i()}}},{"gpu.js":121}],420:[function(e,t,r){t.exports=function(t,r,n,i){return function(r,n){!function(r,n,i){var o;if(r.match(/^data:/i))i(o=r,n);else if(!t.options.inBrowser&&r.match(/^https?:\/\//i))e(r.match(/^(https?):\/\//i)[1]).get(r,function(e){var t="",r=e.headers["content-type"];e.setEncoding("base64"),e.on("data",function(e){t+=e}),e.on("end",function(){i("data:"+r+";base64,"+t,n)})});else if(t.options.inBrowser){var s=r.split(".").pop(),a=document.createElement("img"),u=document.createElement("canvas"),l=u.getContext("2d");a.onload=function(){u.width=a.naturalWidth,u.height=a.naturalHeight,l.drawImage(a,0,0),o=u.toDataURL(s),i(o,n)},a.src=r}else o=e("urify")(r),i(o,n)}(n,{name:"load-image",description:"This initial step loads and displays the original image without any modifications.",ID:t.options.sequencerCounter++,inBrowser:t.options.inBrowser,ui:t.options.ui,UI:t.events,output:""},function(e,r){var n=function(e){return{src:e,format:e.split(":")[1].split(";")[0].split("/")[1]}}(e);return t.steps.push(r),t.steps[0].output=n,t.steps[0].UI.onSetup(t.steps[0]),t.steps[0].UI.onDraw(t.steps[0]),t.steps[0].UI.onComplete(t.steps[0]),i(),!0})}(0,n)}},{urify:258}],421:[function(e,t,r){t.exports=function(){return function(e){var t=$(e.dropZoneSelector),r=$(e.fileInputSelector),n=$(e.takePhotoSelector),i=e.onLoad;function o(e){if(e.preventDefault(),e.stopPropagation(),e.target&&e.target.files)var t=e.target.files[0];else t=e.dataTransfer.files[0];if(t){var r=new FileReader;r.onload=i,r.readAsDataURL(t)}}e.onTakePhoto,new FileReader,r.on("change",o),n.on("click",function(){document.getElementById("video").style.display="inline",document.getElementById("capture").style.display="inline",document.getElementById("close").style.display="inline";var t=document.getElementById("video");canvas=document.getElementById("canvas"),context=canvas.getContext("2d"),vendorUrl=window.URL||window.webkitURL,navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(e){window.stream=e,t.srcObject=e,t.onloadedmetadata=function(e){t.play()},document.getElementById("close").addEventListener("click",function(){!function(e){e.getVideoTracks().forEach(function(e){e.stop()}),document.getElementById("video").style.display="none",document.getElementById("capture").style.display="none",document.getElementById("close").style.display="none"}(e)})}).catch(function(e){console.log("navigator.getUserMedia error: ",e)}),document.getElementById("capture").addEventListener("click",function(r){context.drawImage(t,0,0,400,300),e.onTakePhoto(canvas.toDataURL())})}),t[0].addEventListener("drop",o,!1),t.on("dragover",function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},!1),t.on("dragenter",function(e){t.addClass("hover")}),t.on("dragleave",function(e){t.removeClass("hover")})}}},{}],422:[function(e,t,r){t.exports=function(e={}){return e.onSetup=e.onSetup||function(e){0==e.ui||(e.inBrowser?console.log('Added Step "'+e.name+'"'):console.log("[36m%s[0m",'Added Step "'+e.name+'"'))},e.onDraw=e.onDraw||function(e){0==e.ui||(e.inBrowser?console.log('Drawing Step "'+e.name+'"'):console.log("[33m%s[0m",'Drawing Step "'+e.name+'"'))},e.onComplete=e.onComplete||function(e){0==e.ui||(e.inBrowser?console.log('Drawn Step "'+e.name+'"'):console.log("[32m%s[0m",'Drawn Step "'+e.name+'"'))},e.onRemove=e.onRemove||function(e){0==e.ui||(e.inBrowser?console.log('Removing Step "'+e.name+'"'):console.log("[31m%s[0m",'Removing Step "'+e.name+'"'))},e.notify=e.notify||function(e){console.log(e)},e}},{}],423:[function(e,t,r){t.exports=function(t,r,n){e("get-pixels")(r.src,function(e,i){var o=i.shape[0],s=i.shape[1];if(r.x.valInp){Object.keys(r).forEach(function(e){var t=r[e];t.valInp&&"%"===t.valInp.slice(-1)&&(t.valInp=parseInt(t.valInp,10),"horizontal"===t.type?t.valInp=t.valInp*o/100:t.valInp=t.valInp*s/100)});n(t,r)}})}},{"get-pixels":28}],424:[function(e,t,r){t.exports=function(t,r){return(r=r||{}).infoJson=r.infoJson||{},[function(n,i){var o=e("./getDefaults.js")(r.infoJson);for(key in r.infoJson.inputs)r.infoJson.inputs.hasOwnProperty(key)&&(n[key]=n[key]||o[key]);var s=t(n),a=ImageSequencer({inBrowser:!1,ui:!1});return{options:n,draw:function(e,t){var r=this;a.loadImage(e.src,function(){a.importJSON(s),a.run(function(n){r.output={src:n,format:e.format},t()})})},output:void 0,UI:i}},r.infoJson]}},{"./getDefaults.js":425}],425:[function(e,t,r){t.exports=function(e){var t={};for(var r in e.inputs)e.inputs.hasOwnProperty(r)&&(t[r]=e.inputs[r].default);return t}},{}],426:[function(e,t,r){t.exports={getPreviousStep:function(){return this.getStep(-1)},getNextStep:function(){return this.getStep(1)},getInput:function(e){return e+this.getIndex()===0&&e++,this.getStep(e-1).output},getOutput:function(e){return this.getStep(e).output},getOptions:function(){return this.getStep(0).options},setOptions:function(e){let t=this.getStep(0).options;for(let r in e)t[r]&&(t[r]=e[r])},getFormat:function(){return this.getStep(-1).output.format},getHeight:function(e){let t=new Image;t.onload=function(){e(t.height)},t.src=this.getInput(0).src},getWidth:function(e){let t=new Image;t.onload=function(){e(t.width)},t.src=this.getInput(0).src}}},{}],427:[function(e,t,r){t.exports=function(e){let t=[];return t.push(e.nw.split(",")),t.push(e.ne.split(",")),t.push(e.se.split(",")),t.push(e.sw.split(",")),t.reduce((e,t)=>(e.push(parseInt(t[0])),e.push(parseInt(t[1])),e),[])}},{}]},{},[265]);